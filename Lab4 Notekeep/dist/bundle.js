/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var e={backgroungColor:"blue",class:"pinned"},n={backgroungColor:"yellow",class:"unpinned"},s=function(){function t(){}return t.prototype.returnInput=function(){var t=this,e=document.createElement("div"),n=document.createElement("h1"),s=document.createElement("input"),i=document.createElement("input"),r=document.createElement("input"),o=document.createElement("button"),a=document.createElement("button");return e.className="input",o.addEventListener("click",(function(e){t.toggleInput(e.target)})),a.textContent="Add!",n.textContent="Create A Note",o.textContent="<",a.id="addNote",s.placeholder="TITLE OF A NOTE",i.placeholder="Content OF A NOTE",r.setAttribute("type","color"),r.value="#00FF00",e.appendChild(o),e.appendChild(n),e.appendChild(s),e.appendChild(i),e.appendChild(r),e.appendChild(a),e},t.prototype.toggleInput=function(t){"<"===t.textContent?(t.parentElement.style.right="0",t.textContent=">"):(t.parentElement.style.right="-300px",t.textContent="<")},t}(),i=function(){function t(t){this.pinned=document.createElement("div"),this.unPinned=document.createElement("div"),this.input=new s,this.loc=document.getElementById(t),this.loc.style.position="relative",this.createSections(),this.loc.appendChild(this.input.returnInput())}return t.prototype.createSections=function(){this.pinned.style.backgroundColor=e.backgroungColor,this.pinned.id=e.class,this.unPinned.style.backgroundColor=n.backgroungColor,this.unPinned.id=n.class,this.loc.appendChild(this.pinned),this.loc.appendChild(this.unPinned)},t.prototype.renderNotes=function(t){var e=this;document.getElementById("pinned").innerHTML="",document.getElementById("unpinned").innerHTML="",t.notes.forEach((function(t){t.isPinned?e.pinned.appendChild(t.returnNoteDiv()):e.unPinned.appendChild(t.returnNoteDiv())}))},t.prototype.changeNote=function(t){console.log(t);var e=document.getElementById(t);if("unpin"==e.className){var n=document.getElementById("pinned");e.className="pin",n.insertBefore(e,null)}else{var s=document.getElementById("unpinned");e.className="unpin",s.insertBefore(e,null)}console.log(e,moveTo)},t.prototype.removeNote=function(t){document.getElementById(t).remove()},t}(),r=function(){function t(){this.notes=[]}return t.prototype.addNote=function(t){this.notes.push(t)},t.prototype.removeNote=function(t){this.notes.filter((function(e){return e.id!=t}))},t}(),o=function(){function t(t){var e=t.title,n=t.content,s=t.color,i=t.isPinned,r=(t.dateCreation,t.id);this.title=e,this.content=n,this.color=s,this.isPinned=i,this.dateCreation=new Date,this.id=r}return t.prototype.returnNoteDiv=function(){var t=document.createElement("div"),e=document.createElement("h1"),n=document.createElement("p"),s=document.createElement("input");s.setAttribute("type","checkbox"),s.className="repin";var i=document.createElement("button");return t.id=this.id.toString(),t.style.backgroundColor=this.color,t.className="note",e.textContent=this.title,n.textContent=this.content,s.checked=this.isPinned,i.textContent="remove",i.className="remove",t.appendChild(e),t.appendChild(n),t.appendChild(s),t.appendChild(i),t},t}(),a=function(){function t(){this.notes=new r}return t.prototype.saveNote=function(t){window.localStorage.setItem("Note"+t.id,JSON.stringify(t))},t.prototype.readNotes=function(){var t=this;return Object.keys(localStorage).filter((function(t){return t.startsWith("Note")})).map((function(t){return JSON.parse(localStorage[t])})).forEach((function(e){var n=new o({title:e.title,content:e.content,color:e.color,isPinned:e.isPinned,dateCreation:e.dateCreation,id:e.id});t.notes.addNote(n)})),this.notes.notes},t.prototype.changeNote=function(t,e){var n=this.notes.notes.find((function(e){return e.id===+t}));n.isPinned=!n.isPinned,window.localStorage.setItem("Note"+n.id,JSON.stringify(n))},t.prototype.removeNote=function(t){localStorage.removeItem("Note"+t)},t}();class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class u extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l.prototype.create)}}class l{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,i=this.errors[t],r=i?function(t,e){return t.replace(d,((t,n)=>{const s=e[n];return null!=s?String(s):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${r} (${s}).`;return new u(s,o,n)}}const d=/\{\$([^}]+)}/g;function f(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const n=t[i],r=e[i];if(p(n)&&p(r)){if(!f(n,r))return!1}else if(n!==r)return!1}for(const t of s)if(!n.includes(t))return!1;return!0}function p(t){return null!==t&&"object"==typeof t}function g(t){return t&&t._delegate?t._delegate:t}class m{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const y="[DEFAULT]";class v{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new c;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),s=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(s)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:y})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(s);return s}onInit(t,e){var n;const s=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===y?void 0:s),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var s;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:y:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class w{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new v(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const E=[];var T,b;(b=T||(T={}))[b.DEBUG=0]="DEBUG",b[b.VERBOSE=1]="VERBOSE",b[b.INFO=2]="INFO",b[b.WARN=3]="WARN",b[b.ERROR=4]="ERROR",b[b.SILENT=5]="SILENT";const I={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},S=T.INFO,C={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},A=(t,e,...n)=>{if(e<t.logLevel)return;const s=(new Date).toISOString(),i=C[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${s}]  ${t.name}:`,...n)};class N{constructor(t){this.name=t,this._logLevel=S,this._logHandler=A,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in T))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?I[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...t),this._logHandler(this,T.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...t),this._logHandler(this,T.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,T.INFO,...t),this._logHandler(this,T.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,T.WARN,...t),this._logHandler(this,T.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...t),this._logHandler(this,T.ERROR,...t)}}class k{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const D="@firebase/app",_="0.7.14",R=new N("@firebase/app"),L={[D]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},O=new Map,x=new Map;function P(t,e){try{t.container.addComponent(e)}catch(n){R.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function M(t){const e=t.name;if(x.has(e))return R.debug(`There were multiple attempts to register component ${e}.`),!1;x.set(e,t);for(const e of O.values())P(e,t);return!0}const F=new l("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class V{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new m("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw F.create("app-deleted",{appName:this._name})}}function U(t,e,n){var s;let i=null!==(s=L[t])&&void 0!==s?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const t=[`Unable to register library "${i}" with version "${e}":`];return r&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void R.warn(t.join(" "))}M(new m(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}M(new m("platform-logger",(t=>new k(t)),"PRIVATE")),U(D,_,""),U(D,_,"esm2017"),U("fire-js","");var q,B="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{},j={},$=$||{},H=B||self;function K(){}function G(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function z(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var W="closure_uid_"+(1e9*Math.random()>>>0),Q=0;function X(t,e,n){return t.call.apply(t.bind,arguments)}function Y(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function J(t,e,n){return(J=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?X:Y).apply(null,arguments)}function Z(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function tt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,s){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return e.prototype[n].apply(t,i)}}function et(){this.s=this.s,this.o=this.o}var nt={};et.prototype.s=!1,et.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,W)&&t[W]||(t[W]=++Q)}(this);delete nt[t]}},et.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const st=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},it=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const s=t.length,i="string"==typeof t?t.split(""):t;for(let r=0;r<s;r++)r in i&&e.call(n,i[r],r,t)};function rt(t){return Array.prototype.concat.apply([],arguments)}function ot(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function at(t){return/^[\s\xa0]*$/.test(t)}var ct,ht=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ut(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var dt=H.navigator;if(dt){var ft=dt.userAgent;if(ft){ct=ft;break t}}ct=""}function pt(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function gt(t){const e={};for(const n in t)e[n]=t[n];return e}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){let n,s;for(let e=1;e<arguments.length;e++){for(n in s=arguments[e],s)t[n]=s[n];for(let e=0;e<mt.length;e++)n=mt[e],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function vt(t){return vt[" "](t),t}vt[" "]=K;var wt,Et,Tt=ut(ct,"Opera"),bt=ut(ct,"Trident")||ut(ct,"MSIE"),It=ut(ct,"Edge"),St=It||bt,Ct=ut(ct,"Gecko")&&!(ut(ct.toLowerCase(),"webkit")&&!ut(ct,"Edge"))&&!(ut(ct,"Trident")||ut(ct,"MSIE"))&&!ut(ct,"Edge"),At=ut(ct.toLowerCase(),"webkit")&&!ut(ct,"Edge");function Nt(){var t=H.document;return t?t.documentMode:void 0}t:{var kt="",Dt=(Et=ct,Ct?/rv:([^\);]+)(\)|;)/.exec(Et):It?/Edge\/([\d\.]+)/.exec(Et):bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Et):At?/WebKit\/(\S+)/.exec(Et):Tt?/(?:Version)[ \/]?(\S+)/.exec(Et):void 0);if(Dt&&(kt=Dt?Dt[1]:""),bt){var _t=Nt();if(null!=_t&&_t>parseFloat(kt)){wt=String(_t);break t}}wt=kt}var Rt,Lt={};function Ot(){return t=Lt,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=ht(String(wt)).split("."),n=ht("9").split("."),s=Math.max(e.length,n.length);for(let o=0;0==t&&o<s;o++){var i=e[o]||"",r=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==i[0].length&&0==r[0].length)break;t=lt(0==i[1].length?0:parseInt(i[1],10),0==r[1].length?0:parseInt(r[1],10))||lt(0==i[2].length,0==r[2].length)||lt(i[2],r[2]),i=i[3],r=r[3]}while(0==t)}return 0<=t}();var t}H.document&&bt?Rt=Nt()||parseInt(wt,10)||void 0:Rt=void 0;var xt=Rt,Pt=function(){if(!H.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{H.addEventListener("test",K,e),H.removeEventListener("test",K,e)}catch(t){}return t}();function Mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ft(t,e){if(Mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ct){t:{try{vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Vt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ft.Z.h.call(this)}}Mt.prototype.h=function(){this.defaultPrevented=!0},tt(Ft,Mt);var Vt={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),qt=0;function Bt(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ia=i,this.key=++qt,this.ca=this.fa=!1}function jt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function $t(t){this.src=t,this.g={},this.h=0}function Ht(t,e){var n=e.type;if(n in t.g){var s,i=t.g[n],r=st(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(jt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Kt(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.ca&&r.listener==e&&r.capture==!!n&&r.ia==s)return i}return-1}$t.prototype.add=function(t,e,n,s,i){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=Kt(t,e,s,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Bt(e,this.src,r,!!s,i)).fa=n,t.push(e)),e};var Gt="closure_lm_"+(1e6*Math.random()|0),zt={};function Wt(t,e,n,s,i){if(s&&s.once)return Xt(t,e,n,s,i);if(Array.isArray(e)){for(var r=0;r<e.length;r++)Wt(t,e[r],n,s,i);return null}return n=se(n),t&&t[Ut]?t.N(e,n,z(s)?!!s.capture:!!s,i):Qt(t,e,n,!1,s,i)}function Qt(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var o=z(i)?!!i.capture:!!i,a=ee(t);if(a||(t[Gt]=a=new $t(t)),(n=a.add(e,n,s,o,r)).proxy)return n;if(s=function(){var t=te;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)Pt||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent(Zt(e.toString()),s);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(s)}return n}function Xt(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)Xt(t,e[r],n,s,i);return null}return n=se(n),t&&t[Ut]?t.O(e,n,z(s)?!!s.capture:!!s,i):Qt(t,e,n,!0,s,i)}function Yt(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)Yt(t,e[r],n,s,i);else s=z(s)?!!s.capture:!!s,n=se(n),t&&t[Ut]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Kt(r=t.g[e],n,s,i))&&(jt(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--))):t&&(t=ee(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Kt(e,n,s,i)),(n=-1<t?e[t]:null)&&Jt(n))}function Jt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Ut])Ht(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Zt(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=ee(e))?(Ht(n,t),0==n.h&&(n.src=null,e[Gt]=null)):jt(t)}}}function Zt(t){return t in zt?zt[t]:zt[t]="on"+t}function te(t,e){if(t.ca)t=!0;else{e=new Ft(e,this);var n=t.listener,s=t.ia||t.src;t.fa&&Jt(t),t=n.call(s,e)}return t}function ee(t){return(t=t[Gt])instanceof $t?t:null}var ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function se(t){return"function"==typeof t?t:(t[ne]||(t[ne]=function(e){return t.handleEvent(e)}),t[ne])}function ie(){et.call(this),this.i=new $t(this),this.P=this,this.I=null}function re(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,"string"==typeof e)e=new Mt(e,t);else if(e instanceof Mt)e.target=e.target||t;else{var i=e;yt(e=new Mt(s,t),i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=oe(o,s,!0,e)&&i}if(i=oe(o=e.g=t,s,!0,e)&&i,i=oe(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)i=oe(o=e.g=n[r],s,!1,e)&&i}function oe(t,e,n,s){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&Ht(t.i,o),i=!1!==a.call(c,s)&&i}}return i&&!s.defaultPrevented}tt(ie,et),ie.prototype[Ut]=!0,ie.prototype.removeEventListener=function(t,e,n,s){Yt(this,t,e,n,s)},ie.prototype.M=function(){if(ie.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)jt(n[s]);delete e.g[t],e.h--}}this.I=null},ie.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)},ie.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};var ae=H.JSON.stringify;function ce(){var t=ge;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var he,ue=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new le),(t=>t.reset()));class le{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function de(t){H.setTimeout((()=>{throw t}),0)}function fe(t,e){he||function(){var t=H.Promise.resolve(void 0);he=function(){t.then(me)}}(),pe||(he(),pe=!0),ge.add(t,e)}var pe=!1,ge=new class{constructor(){this.h=this.g=null}add(t,e){const n=ue.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function me(){for(var t;t=ce();){try{t.h.call(t.g)}catch(t){de(t)}var e=ue;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}pe=!1}function ye(t,e){ie.call(this),this.h=t||1,this.g=e||H,this.j=J(this.kb,this),this.l=Date.now()}function ve(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function we(t,e,n){if("function"==typeof t)n&&(t=J(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=J(t.handleEvent,t)}return 2147483647<Number(e)?-1:H.setTimeout(t,e||0)}function Ee(t){t.g=we((()=>{t.g=null,t.i&&(t.i=!1,Ee(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}tt(ye,ie),(q=ye.prototype).da=!1,q.S=null,q.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),re(this,"tick"),this.da&&(ve(this),this.start()))}},q.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},q.M=function(){ye.Z.M.call(this),ve(this),delete this.g};class Te extends et{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ee(this)}M(){super.M(),this.g&&(H.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(t){et.call(this),this.h=t,this.g={}}tt(be,et);var Ie=[];function Se(t,e,n,s){Array.isArray(n)||(n&&(Ie[0]=n.toString()),n=Ie);for(var i=0;i<n.length;i++){var r=Wt(e,n[i],s||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function Ce(t){pt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Jt(t)}),t),t.g={}}function Ae(){this.g=!0}function Ne(t,e,n,s){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return ae(n)}catch(t){return e}}(t,n)+(s?" "+s:"")}))}be.prototype.M=function(){be.Z.M.call(this),Ce(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ae.prototype.Aa=function(){this.g=!1},Ae.prototype.info=function(){};var ke={},De=null;function _e(){return De=De||new ie}function Re(t){Mt.call(this,ke.Ma,t)}function Le(t){const e=_e();re(e,new Re(e,t))}function Oe(t,e){Mt.call(this,ke.STAT_EVENT,t),this.stat=e}function xe(t){const e=_e();re(e,new Oe(e,t))}function Pe(t,e){Mt.call(this,ke.Na,t),this.size=e}function Me(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return H.setTimeout((function(){t()}),e)}ke.Ma="serverreachability",tt(Re,Mt),ke.STAT_EVENT="statevent",tt(Oe,Mt),ke.Na="timingevent",tt(Pe,Mt);var Fe={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ve={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ue(){}function qe(t){return t.h||(t.h=t.i())}function Be(){}Ue.prototype.h=null;var je,$e={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function He(){Mt.call(this,"d")}function Ke(){Mt.call(this,"c")}function Ge(){}function ze(t,e,n,s){this.l=t,this.j=e,this.m=n,this.X=s||1,this.V=new be(this),this.P=Qe,t=St?125:void 0,this.W=new ye(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}tt(He,Mt),tt(Ke,Mt),tt(Ge,Ue),Ge.prototype.g=function(){return new XMLHttpRequest},Ge.prototype.i=function(){return{}},je=new Ge;var Qe=45e3,Xe={},Ye={};function Je(t,e,n){t.K=1,t.v=bn(mn(e)),t.s=n,t.U=!0,Ze(t,null)}function Ze(t,e){t.F=Date.now(),sn(t),t.A=mn(t.v);var n=t.A,s=t.X;Array.isArray(s)||(s=[String(s)]),Pn(n.h,"t",s),t.C=0,n=t.l.H,t.h=new We,t.g=Ps(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Te(J(t.Ia,t,t.g),t.O)),Se(t.V,t.g,"readystatechange",t.gb),e=t.H?gt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Le(1),function(t,e,n,s,i,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var h=a[c].split("=");if(1<h.length){var u=h[0];h=h[1];var l=u.split("_");o=2<=l.length&&"type"==l[1]?o+(u+"=")+h+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function tn(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function en(t,e,n){let s,i=!0;for(;!t.I&&t.C<n.length;){if(s=nn(t,n),s==Ye){4==e&&(t.o=4,xe(14),i=!1),Ne(t.j,t.m,null,"[Incomplete Response]");break}if(s==Xe){t.o=4,xe(15),Ne(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Ne(t.j,t.m,s,null),hn(t,s)}tn(t)&&s!=Ye&&s!=Xe&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,xe(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ns(e),e.L=!0,xe(11))):(Ne(t.j,t.m,n,"[Invalid Chunked Response]"),cn(t),an(t))}function nn(t,e){var n=t.C,s=e.indexOf("\n",n);return-1==s?Ye:(n=Number(e.substring(n,s)),isNaN(n)?Xe:(s+=1)+n>e.length?Ye:(e=e.substr(s,n),t.C=s+n,e))}function sn(t){t.Y=Date.now()+t.P,rn(t,t.P)}function rn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Me(J(t.eb,t),e)}function on(t){t.B&&(H.clearTimeout(t.B),t.B=null)}function an(t){0==t.l.G||t.I||_s(t.l,t)}function cn(t){on(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ve(t.W),Ce(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function hn(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Bn(n.i,t)))if(n.I=t.N,!t.J&&Bn(n.i,t)&&3==n.G){try{var s=n.Ca.g.parse(e)}catch(t){s=null}if(Array.isArray(s)&&3==s.length){var i=s;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Ds(n),vs(n)}As(n),xe(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Me(J(n.ab,n),6e3));if(1>=qn(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Ls(n,11)}else if((t.J||n.g==t)&&Ds(n),!at(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let h=i[e];if(n.U=h[0],h=h[1],2==n.G)if("c"==h[0]){n.J=h[1],n.la=h[2];const e=h[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=h[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const u=h[5];null!=u&&"number"==typeof u&&0<u&&(s=1.5*u,n.K=s,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const l=t.g;if(l){const t=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=s.i;!r.g&&(ut(t,"spdy")||ut(t,"quic")||ut(t,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(jn(r,r.h),r.h=null))}if(s.D){const t=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(s.sa=t,Tn(s.F,s.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((s=n).oa=xs(s,s.H?s.la:null,s.W),o.J){$n(s.i,o);var a=o,c=s.K;c&&a.setTimeout(c),a.B&&(on(a),sn(a)),s.g=o}else Cs(s);0<n.l.length&&Ts(n)}else"stop"!=h[0]&&"close"!=h[0]||Ls(n,7);else 3==n.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?Ls(n,7):ys(n):"noop"!=h[0]&&n.j&&n.j.wa(h),n.A=0)}Le(4)}catch(t){}}function un(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(G(t)||"string"==typeof t)it(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(G(t)||"string"==typeof t){n=[];for(var s=t.length,i=0;i<s;i++)n.push(i)}else for(i in n=[],s=0,t)n[s++]=i;i=(s=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(G(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}for(s in e=[],n=0,t)e[n++]=t[s];return e}(t)).length;for(var r=0;r<i;r++)e.call(void 0,s[r],n&&n[r],t)}}function ln(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(t)if(t instanceof ln)for(n=t.T(),s=0;s<n.length;s++)this.set(n[s],t.get(n[s]));else for(s in t)this.set(s,t[s])}function dn(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var s=t.g[e];fn(t.h,s)&&(t.g[n++]=s),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)fn(i,s=t.g[e])||(t.g[n++]=s,i[s]=1),e++;t.g.length=n}}function fn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(q=ze.prototype).setTimeout=function(t){this.P=t},q.gb=function(t){t=t.target;const e=this.L;e&&3==ds(t)?e.l():this.Ia(t)},q.Ia=function(t){try{if(t==this.g)t:{const u=ds(this.g);var e=this.g.Da();const l=this.g.ba();if(!(3>u)&&(3!=u||St||this.g&&(this.h.h||this.g.ga()||fs(this.g)))){this.I||4!=u||7==e||Le(8==e||0>=l?3:2),on(this);var n=this.g.ba();this.N=n;e:if(tn(this)){var s=fs(this.g);t="";var i=s.length,r=4==ds(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cn(this),an(this);var o="";break e}this.h.i=new H.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:r&&e==i-1});s.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,s,i,r,o){t.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!at(a)){var h=a;break e}}h=null}if(!(n=h)){this.i=!1,this.o=3,xe(12),cn(this),an(this);break t}Ne(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hn(this,n)}this.U?(en(this,u,o),St&&this.i&&3==u&&(Se(this.V,this.W,"tick",this.fb),this.W.start())):(Ne(this.j,this.m,o,null),hn(this,o)),4==u&&cn(this),this.i&&!this.I&&(4==u?_s(this.l,this):(this.i=!1,sn(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,xe(12)):(this.o=0,xe(13)),cn(this),an(this)}}}catch(t){}},q.fb=function(){if(this.g){var t=ds(this.g),e=this.g.ga();this.C<e.length&&(on(this),en(this,t,e),this.i&&4!=t&&sn(this))}},q.cancel=function(){this.I=!0,cn(this)},q.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Le(3),xe(17)),cn(this),this.o=2,an(this)):rn(this,this.Y-t)},(q=ln.prototype).R=function(){dn(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},q.T=function(){return dn(this),this.g.concat()},q.get=function(t,e){return fn(this.h,t)?this.h[t]:e},q.set=function(t,e){fn(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},q.forEach=function(t,e){for(var n=this.T(),s=0;s<n.length;s++){var i=n[s],r=this.get(i);t.call(e,r,i,this)}};var pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof gn){this.g=void 0!==e?e:t.g,yn(this,t.j),this.s=t.s,vn(this,t.i),wn(this,t.m),this.l=t.l,e=t.h;var n=new Rn;n.i=e.i,e.g&&(n.g=new ln(e.g),n.h=e.h),En(this,n),this.o=t.o}else t&&(n=String(t).match(pn))?(this.g=!!e,yn(this,n[1]||"",!0),this.s=In(n[2]||""),vn(this,n[3]||"",!0),wn(this,n[4]),this.l=In(n[5]||"",!0),En(this,n[6]||"",!0),this.o=In(n[7]||"")):(this.g=!!e,this.h=new Rn(null,this.g))}function mn(t){return new gn(t)}function yn(t,e,n){t.j=n?In(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vn(t,e,n){t.i=n?In(e,!0):e}function wn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function En(t,e,n){e instanceof Rn?(t.h=e,function(t,e){e&&!t.j&&(Ln(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(On(this,e),Pn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Sn(e,Dn)),t.h=new Rn(e,t.g))}function Tn(t,e,n){t.h.set(e,n)}function bn(t){return Tn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function In(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Cn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Cn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}gn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Sn(e,An,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Sn(e,An,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Sn(n,"/"==n.charAt(0)?kn:Nn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Sn(n,_n)),t.join("")};var An=/[#\/\?@]/g,Nn=/[#\?:]/g,kn=/[#\?]/g,Dn=/[#\?@]/g,_n=/#/g;function Rn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ln(t){t.g||(t.g=new ln,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function On(t,e){Ln(t),e=Mn(t,e),fn(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,fn((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&dn(t)))}function xn(t,e){return Ln(t),e=Mn(t,e),fn(t.g.h,e)}function Pn(t,e,n){On(t,e),0<n.length&&(t.i=null,t.g.set(Mn(t,e),ot(n)),t.h+=n.length)}function Mn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Fn(t){this.l=t||Vn,t=H.PerformanceNavigationTiming?0<(t=H.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(H.g&&H.g.Ea&&H.g.Ea()&&H.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(q=Rn.prototype).add=function(t,e){Ln(this),this.i=null,t=Mn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},q.forEach=function(t,e){Ln(this),this.g.forEach((function(n,s){it(n,(function(n){t.call(e,n,s,this)}),this)}),this)},q.T=function(){Ln(this);for(var t=this.g.R(),e=this.g.T(),n=[],s=0;s<e.length;s++)for(var i=t[s],r=0;r<i.length;r++)n.push(e[s]);return n},q.R=function(t){Ln(this);var e=[];if("string"==typeof t)xn(this,t)&&(e=rt(e,this.g.get(Mn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=rt(e,t[n])}return e},q.set=function(t,e){return Ln(this),this.i=null,xn(this,t=Mn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},q.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},q.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var s=e[n],i=encodeURIComponent(String(s));s=this.R(s);for(var r=0;r<s.length;r++){var o=i;""!==s[r]&&(o+="="+encodeURIComponent(String(s[r]))),t.push(o)}}return this.i=t.join("&")};var Vn=10;function Un(t){return!!t.h||!!t.g&&t.g.size>=t.j}function qn(t){return t.h?1:t.g?t.g.size:0}function Bn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function jn(t,e){t.g?t.g.add(e):t.h=e}function $n(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Hn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return ot(t.i)}function Kn(){}function Gn(){this.g=new Kn}function zn(t,e,n){const s=n||"";try{un(t,(function(t,n){let i=t;z(t)&&(i=ae(t)),e.push(s+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}function Wn(t,e,n,s,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(s)}catch(t){}}function Qn(t){this.l=t.$b||null,this.j=t.ib||!1}function Xn(t,e){ie.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Yn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fn.prototype.cancel=function(){if(this.i=Hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Kn.prototype.stringify=function(t){return H.JSON.stringify(t,void 0)},Kn.prototype.parse=function(t){return H.JSON.parse(t,void 0)},tt(Qn,Ue),Qn.prototype.g=function(){return new Xn(this.l,this.j)},Qn.prototype.i=function(t){return function(){return t}}({}),tt(Xn,ie);var Yn=0;function Jn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Zn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ts(t)}function ts(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(q=Xn.prototype).open=function(t,e){if(this.readyState!=Yn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ts(this)},q.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||H).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zn(this)),this.readyState=Yn},q.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==H.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},q.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Zn(this):ts(this),3==this.readyState&&Jn(this)}},q.Ua=function(t){this.g&&(this.response=this.responseText=t,Zn(this))},q.Ta=function(t){this.g&&(this.response=t,Zn(this))},q.ha=function(){this.g&&Zn(this)},q.setRequestHeader=function(t,e){this.v.append(t,e)},q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Xn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var es=H.JSON.parse;function ns(t){ie.call(this),this.headers=new ln,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ss,this.K=this.L=!1}tt(ns,ie);var ss="",is=/^https?$/i,rs=["POST","PUT"];function os(t){return"content-type"==t.toLowerCase()}function as(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,cs(t),us(t)}function cs(t){t.D||(t.D=!0,re(t,"complete"),re(t,"error"))}function hs(t){if(t.h&&void 0!==$&&(!t.C[1]||4!=ds(t)||2!=t.ba()))if(t.v&&4==ds(t))we(t.Fa,0,t);else if(re(t,"readystatechange"),4==ds(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===a){var i=String(t.H).match(pn)[1]||null;if(!i&&H.self&&H.self.location){var r=H.self.location.protocol;i=r.substr(0,r.length-1)}s=!is.test(i?i.toLowerCase():"")}n=s}if(n)re(t,"complete"),re(t,"success");else{t.m=6;try{var o=2<ds(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",cs(t)}}finally{us(t)}}}function us(t,e){if(t.g){ls(t);const n=t.g,s=t.C[0]?K:null;t.g=null,t.C=null,e||re(t,"ready");try{n.onreadystatechange=s}catch(t){}}}function ls(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(H.clearTimeout(t.A),t.A=null)}function ds(t){return t.g?t.g.readyState:0}function fs(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ss:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ps(t,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=function(t){let e="";return pt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Tn(t,e,n))}function gs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ms(t){this.za=0,this.l=[],this.h=new Ae,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gs("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gs("baseRetryDelayMs",5e3,t),this.$a=gs("retryDelaySeedMs",1e4,t),this.Ya=gs("forwardChannelMaxRetries",2,t),this.ra=gs("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Fn(t&&t.concurrentRequestLimit),this.Ca=new Gn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ys(t){if(ws(t),3==t.G){var e=t.V++,n=mn(t.F);Tn(n,"SID",t.J),Tn(n,"RID",e),Tn(n,"TYPE","terminate"),Is(t,n),(e=new ze(t,t.h,e,void 0)).K=2,e.v=bn(mn(n)),n=!1,H.navigator&&H.navigator.sendBeacon&&(n=H.navigator.sendBeacon(e.v.toString(),"")),!n&&H.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ps(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sn(e)}Os(t)}function vs(t){t.g&&(Ns(t),t.g.cancel(),t.g=null)}function ws(t){vs(t),t.u&&(H.clearTimeout(t.u),t.u=null),Ds(t),t.i.cancel(),t.m&&("number"==typeof t.m&&H.clearTimeout(t.m),t.m=null)}function Es(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&Ts(t)}function Ts(t){Un(t.i)||t.m||(t.m=!0,fe(t.Ha,t),t.C=0)}function bs(t,e){var n;n=e?e.m:t.V++;const s=mn(t.F);Tn(s,"SID",t.J),Tn(s,"RID",n),Tn(s,"AID",t.U),Is(t,s),t.o&&t.s&&ps(s,t.o,t.s),n=new ze(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ss(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),jn(t.i,n),Je(n,s,e)}function Is(t,e){t.j&&un({},(function(t,n){Tn(e,n,t)}))}function Ss(t,e,n){n=Math.min(t.l.length,n);var s=t.j?J(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let r=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),r=!1;else try{zn(a,t,"req"+n+"_")}catch(t){s&&s(a)}}if(r){s=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,s}function Cs(t){t.g||t.u||(t.Y=1,fe(t.Ga,t),t.A=0)}function As(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Me(J(t.Ga,t),Rs(t,t.A)),t.A++,0))}function Ns(t){null!=t.B&&(H.clearTimeout(t.B),t.B=null)}function ks(t){t.g=new ze(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=mn(t.oa);Tn(e,"RID","rpc"),Tn(e,"SID",t.J),Tn(e,"CI",t.N?"0":"1"),Tn(e,"AID",t.U),Is(t,e),Tn(e,"TYPE","xmlhttp"),t.o&&t.s&&ps(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=bn(mn(e)),n.s=null,n.U=!0,Ze(n,t)}function Ds(t){null!=t.v&&(H.clearTimeout(t.v),t.v=null)}function _s(t,e){var n=null;if(t.g==e){Ds(t),Ns(t),t.g=null;var s=2}else{if(!Bn(t.i,e))return;n=e.D,$n(t.i,e),s=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;re(s=_e(),new Pe(s,n,e,i)),Ts(t)}else Cs(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==s&&function(t,e){return!(qn(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Me(J(t.Ha,t,e),Rs(t,t.C)),t.C++,0)))}(t,e)||2==s&&As(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ls(t,5);break;case 4:Ls(t,10);break;case 3:Ls(t,6);break;default:Ls(t,2)}}function Rs(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ls(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var s=J(t.jb,t);n||(n=new gn("//www.google.com/images/cleardot.gif"),H.location&&"http"==H.location.protocol||yn(n,"https"),bn(n)),function(t,e){const n=new Ae;if(H.Image){const s=new Image;s.onload=Z(Wn,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Z(Wn,n,s,"TestLoadImage: error",!1,e),s.onabort=Z(Wn,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Z(Wn,n,s,"TestLoadImage: timeout",!1,e),H.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=t}else e(!1)}(n.toString(),s)}else xe(2);t.G=0,t.j&&t.j.va(e),Os(t),ws(t)}function Os(t){t.G=0,t.I=-1,t.j&&(0==Hn(t.i).length&&0==t.l.length||(t.i.i.length=0,ot(t.l),t.l.length=0),t.j.ua())}function xs(t,e,n){let s=function(t){return t instanceof gn?mn(t):new gn(t,void 0)}(n);if(""!=s.i)e&&vn(s,e+"."+s.i),wn(s,s.m);else{const t=H.location;s=function(t,e,n,s){var i=new gn(null,void 0);return t&&yn(i,t),e&&vn(i,e),n&&wn(i,n),s&&(i.l=s),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&pt(t.aa,(function(t,e){Tn(s,e,t)})),e=t.D,n=t.sa,e&&n&&Tn(s,e,n),Tn(s,"VER",t.ma),Is(t,s),s}function Ps(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new ns(new Qn({ib:!0})):new ns(t.qa)).L=t.H,e}function Ms(){}function Fs(){if(bt&&!(10<=Number(xt)))throw Error("Environmental error: no available transport.")}function Vs(t,e){ie.call(this),this.g=new ms(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!at(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!at(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Bs(this)}function Us(t){He.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function qs(){Ke.call(this),this.status=1}function Bs(t){this.g=t}(q=ns.prototype).ea=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():je.g(),this.C=this.u?qe(this.u):qe(je),this.g.onreadystatechange=J(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void as(this,t)}t=n||"";const i=new ln(this.headers);s&&un(s,(function(t,e){i.set(e,t)})),s=function(t){t:{var e=os;const n=t.length,s="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in s&&e.call(void 0,s[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=H.FormData&&t instanceof H.FormData,!(0<=st(rs,e))||s||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ls(this),0<this.B&&((this.K=function(t){return bt&&Ot()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=J(this.pa,this)):this.A=we(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){as(this,t)}},q.pa=function(){void 0!==$&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,re(this,"timeout"),this.abort(8))},q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,re(this,"complete"),re(this,"abort"),us(this))},q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),us(this,!0)),ns.Z.M.call(this)},q.Fa=function(){this.s||(this.F||this.v||this.l?hs(this):this.cb())},q.cb=function(){hs(this)},q.ba=function(){try{return 2<ds(this)?this.g.status:-1}catch(t){return-1}},q.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},q.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),es(e)}},q.Da=function(){return this.m},q.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(q=ms.prototype).ma=8,q.G=1,q.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},q.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new ze(this,this.h,t,void 0);let r=this.s;if(this.P&&(r?(r=gt(r),yt(r,this.P)):r=this.P),null===this.o&&(i.H=r),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var s=this.l[n];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ss(this,i,e),Tn(n=mn(this.F),"RID",t),Tn(n,"CVER",22),this.D&&Tn(n,"X-HTTP-Session-Id",this.D),Is(this,n),this.o&&r&&ps(n,this.o,r),jn(this.i,i),this.Ra&&Tn(n,"TYPE","init"),this.ja?(Tn(n,"$req",e),Tn(n,"SID","null"),i.$=!0,Je(i,n,null)):Je(i,n,e),this.G=2}}else 3==this.G&&(t?bs(this,t):0==this.l.length||Un(this.i)||bs(this))},q.Ga=function(){if(this.u=null,ks(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Me(J(this.bb,this),t)}},q.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xe(10),vs(this),ks(this))},q.ab=function(){null!=this.v&&(this.v=null,vs(this),As(this),xe(19))},q.jb=function(t){t?(this.h.info("Successfully pinged google.com"),xe(2)):(this.h.info("Failed to ping google.com"),xe(1))},(q=Ms.prototype).xa=function(){},q.wa=function(){},q.va=function(){},q.ua=function(){},q.Oa=function(){},Fs.prototype.g=function(t,e){return new Vs(t,e)},tt(Vs,ie),Vs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),fe(J(t.hb,t,e))),xe(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=xs(t,null,t.W),Ts(t)},Vs.prototype.close=function(){ys(this.g)},Vs.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Es(this.g,e)}else this.v?((e={}).__data__=ae(t),Es(this.g,e)):Es(this.g,t)},Vs.prototype.M=function(){this.g.j=null,delete this.j,ys(this.g),delete this.g,Vs.Z.M.call(this)},tt(Us,He),tt(qs,Ke),tt(Bs,Ms),Bs.prototype.xa=function(){re(this.g,"a")},Bs.prototype.wa=function(t){re(this.g,new Us(t))},Bs.prototype.va=function(t){re(this.g,new qs(t))},Bs.prototype.ua=function(){re(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,Vs.prototype.send=Vs.prototype.u,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,Ve.COMPLETE="complete",Be.EventType=$e,$e.OPEN="a",$e.CLOSE="b",$e.ERROR="c",$e.MESSAGE="d",ie.prototype.listen=ie.prototype.N,ns.prototype.listenOnce=ns.prototype.O,ns.prototype.getLastError=ns.prototype.La,ns.prototype.getLastErrorCode=ns.prototype.Da,ns.prototype.getStatus=ns.prototype.ba,ns.prototype.getResponseJson=ns.prototype.Qa,ns.prototype.getResponseText=ns.prototype.ga,ns.prototype.send=ns.prototype.ea;var js=j.createWebChannelTransport=function(){return new Fs},$s=j.getStatEventTarget=function(){return _e()},Hs=j.ErrorCode=Fe,Ks=j.EventType=Ve,Gs=j.Event=ke,zs=j.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ws=j.FetchXmlHttpFactory=Qn,Qs=j.WebChannel=Be,Xs=j.XhrIo=ns;const Ys="@firebase/firestore";class Js{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Js.UNAUTHENTICATED=new Js(null),Js.GOOGLE_CREDENTIALS=new Js("google-credentials-uid"),Js.FIRST_PARTY=new Js("first-party-uid"),Js.MOCK_USER=new Js("mock-user");let Zs="9.6.3";const ti=new N("@firebase/firestore");function ei(){return ti.logLevel}function ni(t,...e){if(ti.logLevel<=T.DEBUG){const n=e.map(ri);ti.debug(`Firestore (${Zs}): ${t}`,...n)}}function si(t,...e){if(ti.logLevel<=T.ERROR){const n=e.map(ri);ti.error(`Firestore (${Zs}): ${t}`,...n)}}function ii(t,...e){if(ti.logLevel<=T.WARN){const n=e.map(ri);ti.warn(`Firestore (${Zs}): ${t}`,...n)}}function ri(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function oi(t="Unexpected state"){const e=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: `+t;throw si(e),new Error(e)}function ai(t,e){t||oi()}function ci(t,e){return t}const hi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ui extends u{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class li{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class di{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Js.UNAUTHENTICATED)))}shutdown(){}}class pi{constructor(t){this.t=t,this.currentUser=Js.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const s=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new li;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new li,t.enqueueRetryable((()=>s(this.currentUser)))};const r=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await s(this.currentUser)}))},o=t=>{ni("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(ni("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new li)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ni("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ai("string"==typeof e.accessToken),new di(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ai(null===t||"string"==typeof t),new Js(t)}}class gi{constructor(t,e,n){this.type="FirstParty",this.user=Js.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const s=t.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class mi{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new gi(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(Js.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vi{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,e){this.o=n=>{t.enqueueRetryable((()=>(t=>(null!=t.error&&ni("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`),e(t.token)))(n)))};const n=t=>{ni("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>n(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?n(t):ni("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(ai("string"==typeof t.token),new yi(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class wi{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.p(t),this.T=t=>e.writeSequenceNumber(t))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function Ei(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}wi.I=-1;class Ti{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const s=Ei(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<e&&(n+=t.charAt(s[i]%t.length))}return n}}function bi(t,e){return t<e?-1:t>e?1:0}function Ii(t,e,n){return t.length===e.length&&t.every(((t,s)=>n(t,e[s])))}class Si{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ui(hi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ui(hi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ui(hi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ui(hi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Si.fromMillis(Date.now())}static fromDate(t){return Si.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Si(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?bi(this.nanoseconds,t.nanoseconds):bi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ci{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ci(t)}static min(){return new Ci(new Si(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ai(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ni(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ki(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Di{constructor(t,e,n){void 0===e?e=0:e>t.length&&oi(),void 0===n?n=t.length-e:n>t.length-e&&oi(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Di.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Di?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const n=t.get(s),i=e.get(s);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class _i extends Di{construct(t,e,n){return new _i(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ui(hi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new _i(e)}static emptyPath(){return new _i([])}}const Ri=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends Di{construct(t,e,n){return new Li(t,e,n)}static isValidIdentifier(t){return Ri.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Li(["__name__"])}static fromServerFormat(t){const e=[];let n="",s=0;const i=()=>{if(0===n.length)throw new ui(hi.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;s<t.length;){const e=t[s];if("\\"===e){if(s+1===t.length)throw new ui(hi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[s+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ui(hi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,s+=2}else"`"===e?(r=!r,s++):"."!==e||r?(n+=e,s++):(i(),s++)}if(i(),r)throw new ui(hi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Li(e)}static emptyPath(){return new Li([])}}class Oi{constructor(t){this.fields=t,t.sort(Li.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ii(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class xi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new xi(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new xi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xi.EMPTY_BYTE_STRING=new xi("");const Pi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(t){if(ai(!!t),"string"==typeof t){let e=0;const n=Pi.exec(t);if(ai(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Fi(t.seconds),nanos:Fi(t.nanos)}}function Fi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vi(t){return"string"==typeof t?xi.fromBase64String(t):xi.fromUint8Array(t)}function Ui(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qi(t){const e=t.mapValue.fields.__previous_value__;return Ui(e)?qi(e):e}function Bi(t){const e=Mi(t.mapValue.fields.__local_write_time__.timestampValue);return new Si(e.seconds,e.nanos)}function ji(t){return null==t}function $i(t){return 0===t&&1/t==-1/0}class Hi{constructor(t){this.path=t}static fromPath(t){return new Hi(_i.fromString(t))}static fromName(t){return new Hi(_i.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===_i.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return _i.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Hi(new _i(t.slice()))}}function Ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ui(t)?4:10:oi()}function Gi(t,e){if(t===e)return!0;const n=Ki(t);if(n!==Ki(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bi(t).isEqual(Bi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Mi(t.timestampValue),s=Mi(e.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vi(t.bytesValue).isEqual(Vi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Fi(t.geoPointValue.latitude)===Fi(e.geoPointValue.latitude)&&Fi(t.geoPointValue.longitude)===Fi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Fi(t.integerValue)===Fi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Fi(t.doubleValue),s=Fi(e.doubleValue);return n===s?$i(n)===$i(s):isNaN(n)&&isNaN(s)}return!1}(t,e);case 9:return Ii(t.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:return function(t,e){const n=t.mapValue.fields||{},s=e.mapValue.fields||{};if(Ai(n)!==Ai(s))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===s[t]||!Gi(n[t],s[t])))return!1;return!0}(t,e);default:return oi()}}function zi(t,e){return void 0!==(t.values||[]).find((t=>Gi(t,e)))}function Wi(t,e){if(t===e)return 0;const n=Ki(t),s=Ki(e);if(n!==s)return bi(n,s);switch(n){case 0:return 0;case 1:return bi(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Fi(t.integerValue||t.doubleValue),s=Fi(e.integerValue||e.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(t,e);case 3:return Qi(t.timestampValue,e.timestampValue);case 4:return Qi(Bi(t),Bi(e));case 5:return bi(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Vi(t),s=Vi(e);return n.compareTo(s)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),s=e.split("/");for(let t=0;t<n.length&&t<s.length;t++){const e=bi(n[t],s[t]);if(0!==e)return e}return bi(n.length,s.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=bi(Fi(t.latitude),Fi(e.latitude));return 0!==n?n:bi(Fi(t.longitude),Fi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],s=e.values||[];for(let t=0;t<n.length&&t<s.length;++t){const e=Wi(n[t],s[t]);if(e)return e}return bi(n.length,s.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},s=Object.keys(n),i=e.fields||{},r=Object.keys(i);s.sort(),r.sort();for(let t=0;t<s.length&&t<r.length;++t){const e=bi(s[t],r[t]);if(0!==e)return e;const o=Wi(n[s[t]],i[r[t]]);if(0!==o)return o}return bi(s.length,r.length)}(t.mapValue,e.mapValue);default:throw oi()}}function Qi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return bi(t,e);const n=Mi(t),s=Mi(e),i=bi(n.seconds,s.seconds);return 0!==i?i:bi(n.nanos,s.nanos)}function Xi(t){return Yi(t)}function Yi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Mi(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Hi.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const s of t.values||[])n?n=!1:e+=",",e+=Yi(s);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",s=!0;for(const i of e)s?s=!1:n+=",",n+=`${i}:${Yi(t.fields[i])}`;return n+"}"}(t.mapValue):oi();var e,n}function Ji(t){return!!t&&"integerValue"in t}function Zi(t){return!!t&&"arrayValue"in t}function tr(t){return!!t&&"nullValue"in t}function er(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nr(t){return!!t&&"mapValue"in t}function sr(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ni(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=sr(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sr(t.arrayValue.values[n]);return e}return Object.assign({},t)}class ir{constructor(t){this.value=t}static empty(){return new ir({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!nr(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=sr(e)}setAll(t){let e=Li.emptyPath(),n={},s=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,s),n={},s=[],e=i.popLast()}t?n[i.lastSegment()]=sr(t):s.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,s)}delete(t){const e=this.field(t.popLast());nr(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Gi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];nr(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){Ni(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new ir(sr(this.value))}}function rr(t){const e=[];return Ni(t.fields,((t,n)=>{const s=new Li([t]);if(nr(n)){const t=rr(n.mapValue).fields;if(0===t.length)e.push(s);else for(const n of t)e.push(s.child(n))}else e.push(s)})),new Oi(e)}class or{constructor(t,e,n,s,i){this.key=t,this.documentType=e,this.version=n,this.data=s,this.documentState=i}static newInvalidDocument(t){return new or(t,0,Ci.min(),ir.empty(),0)}static newFoundDocument(t,e,n){return new or(t,1,e,n,0)}static newNoDocument(t,e){return new or(t,2,e,ir.empty(),0)}static newUnknownDocument(t,e){return new or(t,3,e,ir.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof or&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ar{constructor(t,e=null,n=[],s=[],i=null,r=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=r,this.endAt=o,this.R=null}}function cr(t,e=null,n=[],s=[],i=null,r=null,o=null){return new ar(t,e,n,s,i,r,o)}function hr(t){const e=ci(t);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+Xi(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),ji(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=br(e.startAt)),e.endAt&&(t+="|ub:",t+=br(e.endAt)),e.R=t}return e.R}function ur(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Sr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],s=e.filters[i],n.op!==s.op||!n.field.isEqual(s.field)||!Gi(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ar(t.startAt,e.startAt)&&Ar(t.endAt,e.endAt)}function lr(t){return Hi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class dr extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,n):new fr(t,e,n):"array-contains"===e?new yr(t,n):"in"===e?new vr(t,n):"not-in"===e?new wr(t,n):"array-contains-any"===e?new Er(t,n):new dr(t,e,n)}static P(t,e,n){return"in"===e?new pr(t,n):new gr(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Wi(e,this.value)):null!==e&&Ki(this.value)===Ki(e)&&this.v(Wi(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return oi()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fr extends dr{constructor(t,e,n){super(t,e,n),this.key=Hi.fromName(n.referenceValue)}matches(t){const e=Hi.comparator(t.key,this.key);return this.v(e)}}class pr extends dr{constructor(t,e){super(t,"in",e),this.keys=mr(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class gr extends dr{constructor(t,e){super(t,"not-in",e),this.keys=mr(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function mr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Hi.fromName(t.referenceValue)))}class yr extends dr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Zi(e)&&zi(e.arrayValue,this.value)}}class vr extends dr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&zi(this.value.arrayValue,e)}}class wr extends dr{constructor(t,e){super(t,"not-in",e)}matches(t){if(zi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!zi(this.value.arrayValue,e)}}class Er extends dr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Zi(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>zi(this.value.arrayValue,t)))}}class Tr{constructor(t,e){this.position=t,this.before=e}}function br(t){return`${t.before?"b":"a"}:${t.position.map((t=>Xi(t))).join(",")}`}class Ir{constructor(t,e="asc"){this.field=t,this.dir=e}}function Sr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Cr(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(s=r.field.isKeyField()?Hi.comparator(Hi.fromName(o.referenceValue),n.key):Wi(o,n.data.field(r.field)),"desc"===r.dir&&(s*=-1),0!==s)break}return t.before?s<=0:s<0}function Ar(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gi(t.position[n],e.position[n]))return!1;return!0}class Nr{constructor(t,e=null,n=[],s=[],i=null,r="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=r,this.startAt=o,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function kr(t){return new Nr(t)}function Dr(t){return!ji(t.limit)&&"F"===t.limitType}function _r(t){return!ji(t.limit)&&"L"===t.limitType}function Rr(t){const e=ci(t);if(null===e.S){e.S=[];const t=function(t){for(const e of t.filters)if(e.V())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.S.push(new Ir(t)),e.S.push(new Ir(Li.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.S.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Ir(Li.keyField(),t))}}}return e.S}function Lr(t){const e=ci(t);if(!e.D)if("F"===e.limitType)e.D=cr(e.path,e.collectionGroup,Rr(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Rr(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Ir(n.field,e))}const n=e.endAt?new Tr(e.endAt.position,!e.endAt.before):null,s=e.startAt?new Tr(e.startAt.position,!e.startAt.before):null;e.D=cr(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}return e.D}function Or(t,e){return ur(Lr(t),Lr(e))&&t.limitType===e.limitType}function xr(t){return`${hr(Lr(t))}|lt:${t.limitType}`}function Pr(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${Xi(e.value)}`;var e})).join(", ")}]`),ji(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+br(t.startAt)),t.endAt&&(e+=", endAt: "+br(t.endAt)),`Target(${e})`}(Lr(t))}; limitType=${t.limitType})`}function Mr(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Hi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Cr(t.startAt,Rr(t),e)||t.endAt&&Cr(t.endAt,Rr(t),e))}(t,e)}function Fr(t){return(e,n)=>{let s=!1;for(const i of Rr(t)){const t=Vr(i,e,n);if(0!==t)return t;s=s||i.field.isKeyField()}return 0}}function Vr(t,e,n){const s=t.field.isKeyField()?Hi.comparator(e.key,n.key):function(t,e,n){const s=e.data.field(t),i=n.data.field(t);return null!==s&&null!==i?Wi(s,i):oi()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return oi()}}function Ur(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$i(e)?"-0":e}}function qr(t){return{integerValue:""+t}}function Br(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!$i(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?qr(e):Ur(t,e)}class jr{constructor(){this._=void 0}}function $r(t,e,n){return t instanceof Gr?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof zr?Wr(t,e):t instanceof Qr?Xr(t,e):function(t,e){const n=Kr(t,e),s=Jr(n)+Jr(t.N);return Ji(n)&&Ji(t.N)?qr(s):Ur(t.k,s)}(t,e)}function Hr(t,e,n){return t instanceof zr?Wr(t,e):t instanceof Qr?Xr(t,e):n}function Kr(t,e){return t instanceof Yr?Ji(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Gr extends jr{}class zr extends jr{constructor(t){super(),this.elements=t}}function Wr(t,e){const n=Zr(e);for(const e of t.elements)n.some((t=>Gi(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Qr extends jr{constructor(t){super(),this.elements=t}}function Xr(t,e){let n=Zr(e);for(const e of t.elements)n=n.filter((t=>!Gi(t,e)));return{arrayValue:{values:n}}}class Yr extends jr{constructor(t,e){super(),this.k=t,this.N=e}}function Jr(t){return Fi(t.integerValue||t.doubleValue)}function Zr(t){return Zi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class to{constructor(t,e){this.version=t,this.transformResults=e}}class eo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new eo}static exists(t){return new eo(void 0,t)}static updateTime(t){return new eo(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function no(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class so{}function io(t,e,n){t instanceof ho?function(t,e,n){const s=t.value.clone(),i=fo(t.fieldTransforms,e,n.transformResults);s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):t instanceof uo?function(t,e,n){if(!no(t.precondition,e))return void e.convertToUnknownDocument(n.version);const s=fo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(lo(t)),i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ro(t,e,n){t instanceof ho?function(t,e,n){if(!no(t.precondition,e))return;const s=t.value.clone(),i=po(t.fieldTransforms,n,e);s.setAll(i),e.convertToFoundDocument(co(e),s).setHasLocalMutations()}(t,e,n):t instanceof uo?function(t,e,n){if(!no(t.precondition,e))return;const s=po(t.fieldTransforms,n,e),i=e.data;i.setAll(lo(t)),i.setAll(s),e.convertToFoundDocument(co(e),i).setHasLocalMutations()}(t,e,n):function(t,e){no(t.precondition,e)&&e.convertToNoDocument(Ci.min())}(t,e)}function oo(t,e){let n=null;for(const s of t.fieldTransforms){const t=e.data.field(s.field),i=Kr(s.transform,t||null);null!=i&&(null==n&&(n=ir.empty()),n.set(s.field,i))}return n||null}function ao(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ii(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof zr&&e instanceof zr||t instanceof Qr&&e instanceof Qr?Ii(t.elements,e.elements,Gi):t instanceof Yr&&e instanceof Yr?Gi(t.N,e.N):t instanceof Gr&&e instanceof Gr}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function co(t){return t.isFoundDocument()?t.version:Ci.min()}class ho extends so{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}}class uo extends so{constructor(t,e,n,s,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}}function lo(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function fo(t,e,n){const s=new Map;ai(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,Hr(o,a,n[i]))}return s}function po(t,e,n){const s=new Map;for(const i of t){const t=i.transform,r=n.data.field(i.field);s.set(i.field,$r(t,r,e))}return s}class go extends so{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class mo extends so{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class yo{constructor(t){this.count=t}}var vo,wo;function Eo(t){if(void 0===t)return si("GRPC error has no .code"),hi.UNKNOWN;switch(t){case vo.OK:return hi.OK;case vo.CANCELLED:return hi.CANCELLED;case vo.UNKNOWN:return hi.UNKNOWN;case vo.DEADLINE_EXCEEDED:return hi.DEADLINE_EXCEEDED;case vo.RESOURCE_EXHAUSTED:return hi.RESOURCE_EXHAUSTED;case vo.INTERNAL:return hi.INTERNAL;case vo.UNAVAILABLE:return hi.UNAVAILABLE;case vo.UNAUTHENTICATED:return hi.UNAUTHENTICATED;case vo.INVALID_ARGUMENT:return hi.INVALID_ARGUMENT;case vo.NOT_FOUND:return hi.NOT_FOUND;case vo.ALREADY_EXISTS:return hi.ALREADY_EXISTS;case vo.PERMISSION_DENIED:return hi.PERMISSION_DENIED;case vo.FAILED_PRECONDITION:return hi.FAILED_PRECONDITION;case vo.ABORTED:return hi.ABORTED;case vo.OUT_OF_RANGE:return hi.OUT_OF_RANGE;case vo.UNIMPLEMENTED:return hi.UNIMPLEMENTED;case vo.DATA_LOSS:return hi.DATA_LOSS;default:return oi()}}(wo=vo||(vo={}))[wo.OK=0]="OK",wo[wo.CANCELLED=1]="CANCELLED",wo[wo.UNKNOWN=2]="UNKNOWN",wo[wo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wo[wo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wo[wo.NOT_FOUND=5]="NOT_FOUND",wo[wo.ALREADY_EXISTS=6]="ALREADY_EXISTS",wo[wo.PERMISSION_DENIED=7]="PERMISSION_DENIED",wo[wo.UNAUTHENTICATED=16]="UNAUTHENTICATED",wo[wo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wo[wo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wo[wo.ABORTED=10]="ABORTED",wo[wo.OUT_OF_RANGE=11]="OUT_OF_RANGE",wo[wo.UNIMPLEMENTED=12]="UNIMPLEMENTED",wo[wo.INTERNAL=13]="INTERNAL",wo[wo.UNAVAILABLE=14]="UNAVAILABLE",wo[wo.DATA_LOSS=15]="DATA_LOSS";class To{constructor(t,e){this.comparator=t,this.root=e||Io.EMPTY}insert(t,e){return new To(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Io.BLACK,null,null))}remove(t){return new To(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Io.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(0===s)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bo(this.root,t,this.comparator,!1)}getReverseIterator(){return new bo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bo(this.root,t,this.comparator,!0)}}class bo{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Io{constructor(t,e,n,s,i){this.key=t,this.value=e,this.color=null!=n?n:Io.RED,this.left=null!=s?s:Io.EMPTY,this.right=null!=i?i:Io.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,i){return new Io(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const i=n(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,e,n),null):0===i?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Io.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===e(t,s.key)){if(s.right.isEmpty())return Io.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Io.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Io.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oi();if(this.right.isRed())throw oi();const t=this.left.check();if(t!==this.right.check())throw oi();return t+(this.isRed()?0:1)}}Io.EMPTY=null,Io.RED=!0,Io.BLACK=!1,Io.EMPTY=new class{constructor(){this.size=0}get key(){throw oi()}get value(){throw oi()}get color(){throw oi()}get left(){throw oi()}get right(){throw oi()}copy(t,e,n,s,i){return this}insert(t,e,n){return new Io(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class So{constructor(t){this.comparator=t,this.data=new To(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Co(this.data.getIterator())}getIteratorFrom(t){return new Co(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof So))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(0!==this.comparator(t,s))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new So(this.comparator);return e.data=t,e}}class Co{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Ao=new To(Hi.comparator);function No(){return Ao}const ko=new To(Hi.comparator);function Do(){return ko}const _o=new To(Hi.comparator);const Ro=new So(Hi.comparator);function Lo(...t){let e=Ro;for(const n of t)e=e.add(n);return e}const Oo=new So(bi);function xo(){return Oo}class Po{constructor(t,e,n,s,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,Mo.createSynthesizedTargetChangeForCurrentChange(t,e)),new Po(Ci.min(),n,xo(),No(),Lo())}}class Mo{constructor(t,e,n,s,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Mo(xi.EMPTY_BYTE_STRING,e,Lo(),Lo(),Lo())}}class Fo{constructor(t,e,n,s){this.$=t,this.removedTargetIds=e,this.key=n,this.O=s}}class Vo{constructor(t,e){this.targetId=t,this.M=e}}class Uo{constructor(t,e,n=xi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class qo{constructor(){this.F=0,this.L=$o(),this.B=xi.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=Lo(),e=Lo(),n=Lo();return this.L.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:oi()}})),new Mo(this.B,this.U,t,e,n)}H(){this.q=!1,this.L=$o()}J(t,e){this.q=!0,this.L=this.L.insert(t,e)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class Bo{constructor(t){this.et=t,this.nt=new Map,this.st=No(),this.it=jo(),this.rt=new So(bi)}ot(t){for(const e of t.$)t.O&&t.O.isFoundDocument()?this.ct(e,t.O):this.at(e,t.key,t.O);for(const e of t.removedTargetIds)this.at(e,t.key,t.O)}ut(t){this.forEachTarget(t,(e=>{const n=this.ht(e);switch(t.state){case 0:this.lt(e)&&n.W(t.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(t.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(e);break;case 3:this.lt(e)&&(n.tt(),n.W(t.resumeToken));break;case 4:this.lt(e)&&(this.ft(e),n.W(t.resumeToken));break;default:oi()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach(((t,n)=>{this.lt(n)&&e(n)}))}dt(t){const e=t.targetId,n=t.M.count,s=this.wt(e);if(s){const t=s.target;if(lr(t))if(0===n){const n=new Hi(t.path);this.at(e,n,or.newNoDocument(n,Ci.min()))}else ai(1===n);else this._t(e)!==n&&(this.ft(e),this.rt=this.rt.add(e))}}gt(t){const e=new Map;this.nt.forEach(((n,s)=>{const i=this.wt(s);if(i){if(n.current&&lr(i.target)){const e=new Hi(i.target.path);null!==this.st.get(e)||this.yt(s,e)||this.at(s,e,or.newNoDocument(e,t))}n.j&&(e.set(s,n.G()),n.H())}}));let n=Lo();this.it.forEach(((t,e)=>{let s=!0;e.forEachWhile((t=>{const e=this.wt(t);return!e||2===e.purpose||(s=!1,!1)})),s&&(n=n.add(t))}));const s=new Po(t,e,this.rt,this.st,n);return this.st=No(),this.it=jo(),this.rt=new So(bi),s}ct(t,e){if(!this.lt(t))return;const n=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,n),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}at(t,e,n){if(!this.lt(t))return;const s=this.ht(t);this.yt(t,e)?s.J(e,1):s.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),n&&(this.st=this.st.insert(e,n))}removeTarget(t){this.nt.delete(t)}_t(t){const e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let e=this.nt.get(t);return e||(e=new qo,this.nt.set(t,e)),e}Tt(t){let e=this.it.get(t);return e||(e=new So(bi),this.it=this.it.insert(t,e)),e}lt(t){const e=null!==this.wt(t);return e||ni("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new qo),this.et.getRemoteKeysForTarget(t).forEach((e=>{this.at(t,e,null)}))}yt(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}function jo(){return new To(Hi.comparator)}function $o(){return new To(Hi.comparator)}const Ho={asc:"ASCENDING",desc:"DESCENDING"},Ko={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Go{constructor(t,e){this.databaseId=t,this.C=e}}function zo(t,e){return t.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wo(t,e){return t.C?e.toBase64():e.toUint8Array()}function Qo(t,e){return zo(t,e.toTimestamp())}function Xo(t){return ai(!!t),Ci.fromTimestamp(function(t){const e=Mi(t);return new Si(e.seconds,e.nanos)}(t))}function Yo(t,e){return function(t){return new _i(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Jo(t){const e=_i.fromString(t);return ai(va(e)),e}function Zo(t,e){return Yo(t.databaseId,e.path)}function ta(t,e){const n=Jo(e);if(n.get(1)!==t.databaseId.projectId)throw new ui(hi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ui(hi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Hi(sa(n))}function ea(t,e){return Yo(t.databaseId,e)}function na(t){return new _i(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sa(t){return ai(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ia(t,e,n){return{name:Zo(t,e),fields:n.value.mapValue.fields}}function ra(t,e){return{documents:[ea(t,e.path)]}}function oa(t,e){const n={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(n.parent=ea(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ea(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(er(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NAN"}};if(tr(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(er(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NAN"}};if(tr(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(t.field),op:da(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const r=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:fa(t.field),direction:la(t.dir)}}(t)))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(t,e){return t.C||ji(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=ha(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ha(e.endAt)),n}function aa(t){let e=function(t){const e=Jo(t);return 4===e.length?_i.emptyPath():sa(e)}(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){ai(1===s);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=ca(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Ir(pa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,ji(e)?null:e}(n.limit));let c=null;n.startAt&&(c=ua(n.startAt));let h=null;return n.endAt&&(h=ua(n.endAt)),function(t,e,n,s,i,r,o,a){return new Nr(t,e,n,s,i,r,o,a)}(e,i,o,r,a,"F",c,h)}function ca(t){return t?void 0!==t.unaryFilter?[ma(t)]:void 0!==t.fieldFilter?[ga(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>ca(t))).reduce(((t,e)=>t.concat(e))):oi():[]}function ha(t){return{before:t.before,values:t.position}}function ua(t){const e=!!t.before,n=t.values||[];return new Tr(n,e)}function la(t){return Ho[t]}function da(t){return Ko[t]}function fa(t){return{fieldPath:t.canonicalString()}}function pa(t){return Li.fromServerFormat(t.fieldPath)}function ga(t){return dr.create(pa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oi()}}(t.fieldFilter.op),t.fieldFilter.value)}function ma(t){switch(t.unaryFilter.op){case"IS_NAN":const e=pa(t.unaryFilter.field);return dr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=pa(t.unaryFilter.field);return dr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=pa(t.unaryFilter.field);return dr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=pa(t.unaryFilter.field);return dr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return oi()}}function ya(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function va(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function wa(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ta(e)),e=Ea(t.get(n),e);return Ta(e)}function Ea(t,e){let n=e;const s=t.length;for(let e=0;e<s;e++){const s=t.charAt(e);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Ta(t){return t+""}class ba{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}ba.store="owner",ba.key="owner";class Ia{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}Ia.store="mutationQueues",Ia.keyPath="userId";class Sa{constructor(t,e,n,s,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=s,this.mutations=i}}Sa.store="mutations",Sa.keyPath="batchId",Sa.userMutationsIndex="userMutationsIndex",Sa.userMutationsKeyPath=["userId","batchId"];class Ca{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,wa(e)]}static key(t,e,n){return[t,wa(e),n]}}Ca.store="documentMutations",Ca.PLACEHOLDER=new Ca;class Aa{constructor(t,e,n,s,i,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=s,this.readTime=i,this.parentPath=r}}Aa.store="remoteDocuments",Aa.readTimeIndex="readTimeIndex",Aa.readTimeIndexPath="readTime",Aa.collectionReadTimeIndex="collectionReadTimeIndex",Aa.collectionReadTimeIndexPath=["parentPath","readTime"];class Na{constructor(t){this.byteSize=t}}Na.store="remoteDocumentGlobal",Na.key="remoteDocumentGlobalKey";class ka{constructor(t,e,n,s,i,r,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=s,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=r,this.query=o}}ka.store="targets",ka.keyPath="targetId",ka.queryTargetsIndexName="queryTargetsIndex",ka.queryTargetsKeyPath=["canonicalId","targetId"];class Da{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Da.store="targetDocuments",Da.keyPath=["targetId","path"],Da.documentTargetsIndex="documentTargetsIndex",Da.documentTargetsKeyPath=["path","targetId"];class _a{constructor(t,e,n,s){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=s}}_a.key="targetGlobalKey",_a.store="targetGlobal";class Ra{constructor(t,e){this.collectionId=t,this.parent=e}}Ra.store="collectionParents",Ra.keyPath=["collectionId","parent"];class La{constructor(t,e,n,s){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=s}}La.store="clientMetadata",La.keyPath="clientId";class Oa{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}Oa.store="bundles",Oa.keyPath="bundleId";class xa{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}xa.store="namedQueries",xa.keyPath="name",Ia.store,Sa.store,Ca.store,Aa.store,ka.store,ba.store,_a.store,Da.store,La.store,Na.store,Ra.store,Oa.store,xa.store;class Pa{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&oi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Pa(((n,s)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,s)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Pa?e:Pa.resolve(e)}catch(t){return Pa.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Pa.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Pa.reject(e)}static resolve(t){return new Pa(((e,n)=>{e(t)}))}static reject(t){return new Pa(((e,n)=>{n(t)}))}static waitFor(t){return new Pa(((e,n)=>{let s=0,i=0,r=!1;t.forEach((t=>{++s,t.next((()=>{++i,r&&i===s&&e()}),(t=>n(t)))})),r=!0,i===s&&e()}))}static or(t){let e=Pa.resolve(!1);for(const n of t)e=e.next((t=>t?Pa.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,s)=>{n.push(e.call(this,t,s))})),this.waitFor(n)}}function Ma(t){return"IndexedDbTransactionError"===t.name}class Fa{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const s=this.mutations[e];s.key.isEqual(t.key)&&io(s,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&ro(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&ro(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),s=n;this.applyToLocalView(s),n.isValidDocument()||s.convertToNoDocument(Ci.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Lo())}isEqual(t){return this.batchId===t.batchId&&Ii(this.mutations,t.mutations,((t,e)=>ao(t,e)))&&Ii(this.baseMutations,t.baseMutations,((t,e)=>ao(t,e)))}}class Va{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){ai(t.mutations.length===n.length);let s=_o;const i=t.mutations;for(let t=0;t<i.length;t++)s=s.insert(i[t].key,n[t].version);return new Va(t,e,n,s)}}class Ua{constructor(t,e,n,s,i=Ci.min(),r=Ci.min(),o=xi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(t){return new Ua(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class qa{constructor(t){this.Gt=t}}function Ba(t){const e=aa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new Nr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class ja{constructor(){this.zt=new $a}addToCollectionParentIndex(t,e){return this.zt.add(e),Pa.resolve()}getCollectionParents(t,e){return Pa.resolve(this.zt.getEntries(e))}}class $a{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new So(_i.comparator),i=!s.has(n);return this.index[e]=s.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new So(_i.comparator)).toArray()}}class Ha{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Ha(t,Ha.DEFAULT_COLLECTION_PERCENTILE,Ha.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Ha.DEFAULT_COLLECTION_PERCENTILE=10,Ha.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ha.DEFAULT=new Ha(41943040,Ha.DEFAULT_COLLECTION_PERCENTILE,Ha.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ha.DISABLED=new Ha(-1,0,0);class Ka{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new Ka(0)}static re(){return new Ka(-1)}}async function Ga(t){if(t.code!==hi.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;ni("LocalStore","Unexpectedly lost primary lease")}class za{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,s]of n)if(this.equalsFn(e,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(void 0!==s){for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],t))return void(s[n]=[t,e]);s.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return 1===n.length?delete this.inner[e]:n.splice(s,1),!0;return!1}forEach(t){Ni(this.inner,((e,n)=>{for(const[e,s]of n)t(e,s)}))}isEmpty(){return ki(this.inner)}}class Wa{constructor(t,e,n){this.Je=t,this.An=e,this.Jt=n}Rn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.bn(t,e,n)))}bn(t,e,n){return this.Je.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}Pn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}vn(t,e){return this.Je.getEntries(t,e).next((e=>this.Vn(t,e).next((()=>e))))}Vn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.Pn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Hi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Sn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Dn(t,e,n):this.Cn(t,e,n)}Sn(t,e){return this.Rn(t,new Hi(e)).next((t=>{let e=Do();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Dn(t,e,n){const s=e.collectionGroup;let i=Do();return this.Jt.getCollectionParents(t,s).next((r=>Pa.forEach(r,(r=>{const o=function(t,e){return new Nr(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,r.child(s));return this.Cn(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}Cn(t,e,n){let s,i;return this.Je.getDocumentsMatchingQuery(t,e,n).next((n=>(s=n,this.An.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(i=e,this.Nn(t,i,s).next((t=>{s=t;for(const t of i)for(const e of t.mutations){const n=e.key;let i=s.get(n);null==i&&(i=or.newInvalidDocument(n),s=s.insert(n,i)),ro(e,i,t.localWriteTime),i.isFoundDocument()||(s=s.remove(n))}}))))).next((()=>(s.forEach(((t,n)=>{Mr(e,n)||(s=s.remove(t))})),s)))}Nn(t,e,n){let s=Lo();for(const t of e)for(const e of t.mutations)e instanceof uo&&null===n.get(e.key)&&(s=s.add(e.key));let i=n;return this.Je.getEntries(t,s).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))})),i)))}}class Qa{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.kn=n,this.xn=s}static $n(t,e){let n=Lo(),s=Lo();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:s=s.add(t.doc.key)}return new Qa(t,e.fromCache,n,s)}}class Xa{On(t){this.Mn=t}getDocumentsMatchingQuery(t,e,n,s){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ci.min())?this.Fn(t,e):this.Mn.vn(t,s).next((i=>{const r=this.Ln(e,i);return(Dr(e)||_r(e))&&this.Bn(e.limitType,r,s,n)?this.Fn(t,e):(ei()<=T.DEBUG&&ni("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Pr(e)),this.Mn.getDocumentsMatchingQuery(t,e,n).next((t=>(r.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Ln(t,e){let n=new So(Fr(t));return e.forEach(((e,s)=>{Mr(t,s)&&(n=n.add(s))})),n}Bn(t,e,n,s){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Fn(t,e){return ei()<=T.DEBUG&&ni("QueryEngine","Using full collection scan to execute query:",Pr(e)),this.Mn.getDocumentsMatchingQuery(t,e,Ci.min())}}class Ya{constructor(t,e,n,s){this.persistence=t,this.Un=e,this.k=s,this.qn=new To(bi),this.Kn=new za((t=>hr(t)),ur),this.jn=Ci.min(),this.An=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Wa(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.qn)))}}async function Ja(t,e){const n=ci(t);let s=n.An,i=n.Wn;const r=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.An.getAllMutationBatches(t).next((o=>(r=o,s=n.persistence.getMutationQueue(e),i=new Wa(n.Qn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(t)))).next((e=>{const n=[],s=[];let o=Lo();for(const t of r){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.vn(t,o).next((t=>({Gn:t,removedBatchIds:n,addedBatchIds:s})))}))}));return n.An=s,n.Wn=i,n.Un.On(n.Wn),r}function Za(t){const e=ci(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.He.getLastRemoteSnapshotVersion(t)))}function tc(t,e){const n=ci(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.An.getNextMutationBatchAfterBatchId(t,e))))}async function ec(t,e,n){const s=ci(t),i=s.qn.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(t=>s.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!Ma(t))throw t;ni("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}s.qn=s.qn.remove(e),s.Kn.delete(i.target)}function nc(t,e,n){const s=ci(t);let i=Ci.min(),r=Lo();return s.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const s=ci(t),i=s.Kn.get(n);return void 0!==i?Pa.resolve(s.qn.get(i)):s.He.getTargetData(e,n)}(s,t,Lr(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>s.Un.getDocumentsMatchingQuery(t,e,n?i:Ci.min(),n?r:Lo()))).next((t=>({documents:t,zn:r})))))}class sc{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,e){return Pa.resolve(this.Xn.get(e))}saveBundleMetadata(t,e){var n;return this.Xn.set(e.id,{id:(n=e).id,version:n.version,createTime:Xo(n.createTime)}),Pa.resolve()}getNamedQuery(t,e){return Pa.resolve(this.Zn.get(e))}saveNamedQuery(t,e){return this.Zn.set(e.name,function(t){return{name:t.name,query:Ba(t.bundledQuery),readTime:Xo(t.readTime)}}(e)),Pa.resolve()}}class ic{constructor(){this.ts=new So(rc.es),this.ns=new So(rc.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,e){const n=new rc(t,e);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.os(new rc(t,e))}cs(t,e){t.forEach((t=>this.removeReference(t,e)))}us(t){const e=new Hi(new _i([])),n=new rc(e,t),s=new rc(e,t+1),i=[];return this.ns.forEachInRange([n,s],(t=>{this.os(t),i.push(t.key)})),i}hs(){this.ts.forEach((t=>this.os(t)))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const e=new Hi(new _i([])),n=new rc(e,t),s=new rc(e,t+1);let i=Lo();return this.ns.forEachInRange([n,s],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new rc(t,0),n=this.ts.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class rc{constructor(t,e){this.key=t,this.fs=e}static es(t,e){return Hi.comparator(t.key,e.key)||bi(t.fs,e.fs)}static ss(t,e){return bi(t.fs,e.fs)||Hi.comparator(t.key,e.key)}}class oc{constructor(t,e){this.Jt=t,this.referenceDelegate=e,this.An=[],this.ds=1,this.ws=new So(rc.es)}checkEmpty(t){return Pa.resolve(0===this.An.length)}addMutationBatch(t,e,n,s){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const r=new Fa(i,e,n,s);this.An.push(r);for(const e of s)this.ws=this.ws.add(new rc(e.key,i)),this.Jt.addToCollectionParentIndex(t,e.key.path.popLast());return Pa.resolve(r)}lookupMutationBatch(t,e){return Pa.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.gs(n),i=s<0?0:s;return Pa.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return Pa.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(t){return Pa.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new rc(e,0),s=new rc(e,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,s],(t=>{const e=this._s(t.fs);i.push(e)})),Pa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new So(bi);return e.forEach((t=>{const e=new rc(t,0),s=new rc(t,Number.POSITIVE_INFINITY);this.ws.forEachInRange([e,s],(t=>{n=n.add(t.fs)}))})),Pa.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let i=n;Hi.isDocumentKey(i)||(i=i.child(""));const r=new rc(new Hi(i),0);let o=new So(bi);return this.ws.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===s&&(o=o.add(t.fs)),!0)}),r),Pa.resolve(this.ys(o))}ys(t){const e=[];return t.forEach((t=>{const n=this._s(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){ai(0===this.ps(e.batchId,"removed")),this.An.shift();let n=this.ws;return Pa.forEach(e.mutations,(s=>{const i=new rc(s.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.ws=n}))}ee(t){}containsKey(t,e){const n=new rc(e,0),s=this.ws.firstAfterOrEqual(n);return Pa.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.An.length,Pa.resolve()}ps(t,e){return this.gs(t)}gs(t){return 0===this.An.length?0:t-this.An[0].batchId}_s(t){const e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}class ac{constructor(t,e){this.Jt=t,this.Ts=e,this.docs=new To(Hi.comparator),this.size=0}addEntry(t,e,n){const s=e.key,i=this.docs.get(s),r=i?i.size:0,o=this.Ts(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:o,readTime:n}),this.size+=o-r,this.Jt.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Pa.resolve(n?n.document.mutableCopy():or.newInvalidDocument(e))}getEntries(t,e){let n=No();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():or.newInvalidDocument(t))})),Pa.resolve(n)}getDocumentsMatchingQuery(t,e,n){let s=No();const i=new Hi(e.path.child("")),r=this.docs.getIteratorFrom(i);for(;r.hasNext();){const{key:t,value:{document:i,readTime:o}}=r.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||Mr(e,i)&&(s=s.insert(i.key,i.mutableCopy()))}return Pa.resolve(s)}Es(t,e){return Pa.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new cc(this)}getSize(t){return Pa.resolve(this.size)}}class cc extends class{constructor(){this.changes=new za((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Ci.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:or.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Pa.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}{constructor(t){super(),this.De=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.document.isValidDocument()?e.push(this.De.addEntry(t,s.document,this.getReadTime(n))):this.De.removeEntry(n)})),Pa.waitFor(e)}getFromCache(t,e){return this.De.getEntry(t,e)}getAllFromCache(t,e){return this.De.getEntries(t,e)}}class hc{constructor(t){this.persistence=t,this.Is=new za((t=>hr(t)),ur),this.lastRemoteSnapshotVersion=Ci.min(),this.highestTargetId=0,this.As=0,this.Rs=new ic,this.targetCount=0,this.bs=Ka.ie()}forEachTarget(t,e){return this.Is.forEach(((t,n)=>e(n))),Pa.resolve()}getLastRemoteSnapshotVersion(t){return Pa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Pa.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.bs.next(),Pa.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.As&&(this.As=e),Pa.resolve()}ae(t){this.Is.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.bs=new Ka(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,e){return this.ae(e),this.targetCount+=1,Pa.resolve()}updateTargetData(t,e){return this.ae(e),Pa.resolve()}removeTargetData(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,Pa.resolve()}removeTargets(t,e,n){let s=0;const i=[];return this.Is.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Is.delete(r),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)})),Pa.waitFor(i).next((()=>s))}getTargetCount(t){return Pa.resolve(this.targetCount)}getTargetData(t,e){const n=this.Is.get(e)||null;return Pa.resolve(n)}addMatchingKeys(t,e,n){return this.Rs.rs(e,n),Pa.resolve()}removeMatchingKeys(t,e,n){this.Rs.cs(e,n);const s=this.persistence.referenceDelegate,i=[];return s&&e.forEach((e=>{i.push(s.markPotentiallyOrphaned(t,e))})),Pa.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Rs.us(e),Pa.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Rs.ls(e);return Pa.resolve(n)}containsKey(t,e){return Pa.resolve(this.Rs.containsKey(e))}}class uc{constructor(t,e){this.Ps={},this.Be=new wi(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new hc(this),this.Jt=new ja,this.Je=function(t,e){return new ac(t,e)}(this.Jt,(t=>this.referenceDelegate.vs(t))),this.k=new qa(e),this.Ye=new sc(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let e=this.Ps[t.toKey()];return e||(e=new oc(this.Jt,this.referenceDelegate),this.Ps[t.toKey()]=e),e}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,e,n){ni("MemoryPersistence","Starting transaction:",t);const s=new lc(this.Be.next());return this.referenceDelegate.Vs(),n(s).next((t=>this.referenceDelegate.Ss(s).next((()=>t)))).toPromise().then((t=>(s.raiseOnCommittedEvent(),t)))}Ds(t,e){return Pa.or(Object.values(this.Ps).map((n=>()=>n.containsKey(t,e))))}}class lc extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}{constructor(t){super(),this.currentSequenceNumber=t}}class dc{constructor(t){this.persistence=t,this.Cs=new ic,this.Ns=null}static ks(t){return new dc(t)}get xs(){if(this.Ns)return this.Ns;throw oi()}addReference(t,e,n){return this.Cs.addReference(n,e),this.xs.delete(n.toString()),Pa.resolve()}removeReference(t,e,n){return this.Cs.removeReference(n,e),this.xs.add(n.toString()),Pa.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Pa.resolve()}removeTarget(t,e){this.Cs.us(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Vs(){this.Ns=new Set}Ss(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pa.forEach(this.xs,(n=>{const s=Hi.fromPath(n);return this.$s(t,s).next((t=>{t||e.removeEntry(s)}))})).next((()=>(this.Ns=null,e.apply(t))))}updateLimboDocument(t,e){return this.$s(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}vs(t){return 0}$s(t,e){return Pa.or([()=>Pa.resolve(this.Cs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ds(t,e)])}}class fc{constructor(){this.activeTargetIds=xo()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ms(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pc{constructor(){this.pi=new fc,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.pi.Fs(t),this.Ti[t]||"not-current"}updateQueryState(t,e,n){this.Ti[t]=e}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new fc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class gc{Ei(t){}shutdown(){}}class mc{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(t){this.Pi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){ni("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Pi)t(0)}bi(){ni("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Pi)t(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class vc{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Oi(t){this.ki(t)}Mi(t){this.xi(t)}}class wc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Fi=e+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,e,n,s,i){const r=this.Ui(t,e);ni("RestConnection","Sending: ",r,n);const o={};return this.qi(o,s,i),this.Ki(t,r,o,n).then((t=>(ni("RestConnection","Received: ",t),t)),(e=>{throw ii("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}ji(t,e,n,s,i){return this.Bi(t,e,n,s,i)}qi(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Zs,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Ui(t,e){const n=yc[t];return`${this.Fi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,e,n,s){return new Promise(((i,r)=>{const o=new Xs;o.listenOnce(Ks.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Hs.NO_ERROR:const e=o.getResponseJson();ni("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Hs.TIMEOUT:ni("Connection",'RPC "'+t+'" timed out'),r(new ui(hi.DEADLINE_EXCEEDED,"Request time out"));break;case Hs.HTTP_ERROR:const n=o.getStatus();if(ni("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(hi).indexOf(e)>=0?e:hi.UNKNOWN}(t.status);r(new ui(e,t.message))}else r(new ui(hi.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new ui(hi.UNAVAILABLE,"Connection failed."));break;default:oi()}}finally{ni("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(s);o.send(e,"POST",a,n,15)}))}Qi(t,e,n){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=js(),r=$s(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ws({})),this.qi(o.initMessageHeaders,e,n),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())||"object"==typeof navigator&&"ReactNative"===navigator.product||h().indexOf("Electron/")>=0||function(){const t=h();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||h().indexOf("MSAppHost/")>=0||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=s.join("");ni("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,l=!1;const d=new vc({Vi:t=>{l?ni("Connection","Not sending because WebChannel is closed:",t):(u||(ni("Connection","Opening WebChannel transport."),c.open(),u=!0),ni("Connection","WebChannel sending:",t),c.send(t))},Si:()=>c.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(c,Qs.EventType.OPEN,(()=>{l||ni("Connection","WebChannel transport opened.")})),f(c,Qs.EventType.CLOSE,(()=>{l||(l=!0,ni("Connection","WebChannel transport closed"),d.Oi())})),f(c,Qs.EventType.ERROR,(t=>{l||(l=!0,ii("Connection","WebChannel transport errored:",t),d.Oi(new ui(hi.UNAVAILABLE,"The operation could not be completed")))})),f(c,Qs.EventType.MESSAGE,(t=>{var e;if(!l){const n=t.data[0];ai(!!n);const s=n,i=s.error||(null===(e=s[0])||void 0===e?void 0:e.error);if(i){ni("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=vo[t];if(void 0!==e)return Eo(e)}(t),n=i.message;void 0===e&&(e=hi.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,d.Oi(new ui(e,n)),c.close()}else ni("Connection","WebChannel received:",n),d.Mi(n)}})),f(r,Gs.STAT_EVENT,(t=>{t.stat===zs.PROXY?ni("Connection","Detected buffering proxy"):t.stat===zs.NOPROXY&&ni("Connection","Detected no buffering proxy")})),setTimeout((()=>{d.$i()}),0),d}}function Ec(){return"undefined"!=typeof document?document:null}function Tc(t){return new Go(t,!0)}class bc{constructor(t,e,n=1e3,s=1.5,i=6e4){this.Me=t,this.timerId=e,this.Wi=n,this.Gi=s,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const e=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),s=Math.max(0,e-n);s>0&&ni("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Hi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,s,(()=>(this.Yi=Date.now(),t()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Ic{constructor(t,e,n,s,i,r,o,a){this.Me=t,this.nr=n,this.sr=s,this.ir=i,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new bc(t,e)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,(()=>this.mr())))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}async close(t,e){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():e&&e.code===hi.RESOURCE_EXHAUSTED?(si(e.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):e&&e.code===hi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(e)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),e=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.rr===e&&this.Ir(t,n)}),(e=>{t((()=>{const t=new ui(hi.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ar(t)}))}))}Ir(t,e){const n=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di((()=>{n((()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,(()=>(this.lr()&&(this.state=3),Promise.resolve()))),this.listener.Di())))})),this.stream.Ni((t=>{n((()=>this.Ar(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}dr(){this.state=5,this.ur.Zi((async()=>{this.state=0,this.start()}))}Ar(t){return ni("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return e=>{this.Me.enqueueAndForget((()=>this.rr===t?e():(ni("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sc extends Ic{constructor(t,e,n,s,i,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,r),this.k=i}Rr(t,e){return this.ir.Qi("Listen",t,e)}onMessage(t){this.ur.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:oi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(t,e){return t.C?(ai(void 0===e||"string"==typeof e),xi.fromBase64String(e||"")):(ai(void 0===e||e instanceof Uint8Array),xi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?hi.UNKNOWN:Eo(t.code);return new ui(e,t.message||"")}(o);n=new Uo(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=ta(t,s.document.name),r=Xo(s.document.updateTime),o=new ir({mapValue:{fields:s.document.fields}}),a=or.newFoundDocument(i,r,o),c=s.targetIds||[],h=s.removedTargetIds||[];n=new Fo(c,h,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=ta(t,s.document),r=s.readTime?Xo(s.readTime):Ci.min(),o=or.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Fo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=ta(t,s.document),r=s.removedTargetIds||[];n=new Fo([],r,i,null)}else{if(!("filter"in e))return oi();{e.filter;const t=e.filter;t.targetId;const s=t.count||0,i=new yo(s),r=t.targetId;n=new Vo(r,i)}}return n}(this.k,t),n=function(t){if(!("targetChange"in t))return Ci.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Ci.min():e.readTime?Xo(e.readTime):Ci.min()}(t);return this.listener.br(e,n)}Pr(t){const e={};e.database=na(this.k),e.addTarget=function(t,e){let n;const s=e.target;return n=lr(s)?{documents:ra(t,s)}:{query:oa(t,s)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Wo(t,e.resumeToken):e.snapshotVersion.compareTo(Ci.min())>0&&(n.readTime=zo(t,e.snapshotVersion.toTimestamp())),n}(this.k,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return oi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,t);n&&(e.labels=n),this.gr(e)}vr(t){const e={};e.database=na(this.k),e.removeTarget=t,this.gr(e)}}class Cc extends Ic{constructor(t,e,n,s,i,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,r),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,e){return this.ir.Qi("Write",t,e)}onMessage(t){if(ai(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const e=function(t,e){return t&&t.length>0?(ai(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Xo(t.updateTime):Xo(e);return n.isEqual(Ci.min())&&(n=Xo(e)),new to(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Xo(t.commitTime);return this.listener.Cr(n,e)}return ai(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=na(this.k),this.gr(t)}Dr(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof ho)n={update:ia(t,e.key,e.value)};else if(e instanceof go)n={delete:Zo(t,e.key)};else if(e instanceof uo)n={update:ia(t,e.key,e.data),updateMask:ya(e.fieldMask)};else{if(!(e instanceof mo))return oi();n={verify:Zo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Gr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qr)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yr)return{fieldPath:e.field.canonicalString(),increment:n.N};throw oi()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Qo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:oi()}(t,e.precondition)),n}(this.k,t)))};this.gr(e)}}class Ac extends class{}{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.ir=n,this.k=s,this.$r=!1}Or(){if(this.$r)throw new ui(hi.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,e,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.Bi(t,e,n,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===hi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ui(hi.UNKNOWN,t.toString())}))}ji(t,e,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.ji(t,e,n,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===hi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ui(hi.UNKNOWN,t.toString())}))}terminate(){this.$r=!0}}class Nc{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve()))))}Kr(t){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Mr=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(si(e),this.Lr=!1):ni("OnlineStateTracker",e)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class kc{constructor(t,e,n,s,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei((t=>{n.enqueueAndForget((async()=>{Fc(this)&&(ni("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=ci(t);e.Gr.add(4),await _c(e),e.Jr.set("Unknown"),e.Gr.delete(4),await Dc(e)}(this))}))})),this.Jr=new Nc(n,s)}}async function Dc(t){if(Fc(t))for(const e of t.zr)await e(!0)}async function _c(t){for(const e of t.zr)await e(!1)}function Rc(t,e){const n=ci(t);n.Wr.has(e.targetId)||(n.Wr.set(e.targetId,e),Mc(n)?Pc(n):Zc(n).lr()&&Oc(n,e))}function Lc(t,e){const n=ci(t),s=Zc(n);n.Wr.delete(e),s.lr()&&xc(n,e),0===n.Wr.size&&(s.lr()?s._r():Fc(n)&&n.Jr.set("Unknown"))}function Oc(t,e){t.Yr.X(e.targetId),Zc(t).Pr(e)}function xc(t,e){t.Yr.X(e),Zc(t).vr(e)}function Pc(t){t.Yr=new Bo({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Wr.get(e)||null}),Zc(t).start(),t.Jr.Br()}function Mc(t){return Fc(t)&&!Zc(t).hr()&&t.Wr.size>0}function Fc(t){return 0===ci(t).Gr.size}function Vc(t){t.Yr=void 0}async function Uc(t){t.Wr.forEach(((e,n)=>{Oc(t,e)}))}async function qc(t,e){Vc(t),Mc(t)?(t.Jr.Kr(e),Pc(t)):t.Jr.set("Unknown")}async function Bc(t,e,n){if(t.Jr.set("Online"),e instanceof Uo&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const s of e.targetIds)t.Wr.has(s)&&(await t.remoteSyncer.rejectListen(s,n),t.Wr.delete(s),t.Yr.removeTarget(s))}(t,e)}catch(n){ni("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await jc(t,n)}else if(e instanceof Fo?t.Yr.ot(e):e instanceof Vo?t.Yr.dt(e):t.Yr.ut(e),!n.isEqual(Ci.min()))try{const e=await Za(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Yr.gt(e);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Wr.get(s);i&&t.Wr.set(s,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.Wr.get(e);if(!n)return;t.Wr.set(e,n.withResumeToken(xi.EMPTY_BYTE_STRING,n.snapshotVersion)),xc(t,e);const s=new Ua(n.target,e,1,n.sequenceNumber);Oc(t,s)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){ni("RemoteStore","Failed to raise snapshot:",e),await jc(t,e)}}async function jc(t,e,n){if(!Ma(e))throw e;t.Gr.add(1),await _c(t),t.Jr.set("Offline"),n||(n=()=>Za(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ni("RemoteStore","Retrying IndexedDB access"),await n(),t.Gr.delete(1),await Dc(t)}))}function $c(t,e){return e().catch((n=>jc(t,n,e)))}async function Hc(t){const e=ci(t),n=th(e);let s=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;Kc(e);)try{const t=await tc(e.localStore,s);if(null===t){0===e.Qr.length&&n._r();break}s=t.batchId,Gc(e,t)}catch(t){await jc(e,t)}zc(e)&&Wc(e)}function Kc(t){return Fc(t)&&t.Qr.length<10}function Gc(t,e){t.Qr.push(e);const n=th(t);n.lr()&&n.Sr&&n.Dr(e.mutations)}function zc(t){return Fc(t)&&!th(t).hr()&&t.Qr.length>0}function Wc(t){th(t).start()}async function Qc(t){th(t).kr()}async function Xc(t){const e=th(t);for(const n of t.Qr)e.Dr(n.mutations)}async function Yc(t,e,n){const s=t.Qr.shift(),i=Va.from(s,e,n);await $c(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Hc(t)}async function Jc(t,e){e&&th(t).Sr&&await async function(t,e){if(function(t){switch(t){default:return oi();case hi.CANCELLED:case hi.UNKNOWN:case hi.DEADLINE_EXCEEDED:case hi.RESOURCE_EXHAUSTED:case hi.INTERNAL:case hi.UNAVAILABLE:case hi.UNAUTHENTICATED:return!1;case hi.INVALID_ARGUMENT:case hi.NOT_FOUND:case hi.ALREADY_EXISTS:case hi.PERMISSION_DENIED:case hi.FAILED_PRECONDITION:case hi.ABORTED:case hi.OUT_OF_RANGE:case hi.UNIMPLEMENTED:case hi.DATA_LOSS:return!0}}(n=e.code)&&n!==hi.ABORTED){const n=t.Qr.shift();th(t).wr(),await $c(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Hc(t)}var n}(t,e),zc(t)&&Wc(t)}function Zc(t){return t.Xr||(t.Xr=function(t,e,n){const s=ci(t);return s.Or(),new Sc(e,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(t.datastore,t.asyncQueue,{Di:Uc.bind(null,t),Ni:qc.bind(null,t),br:Bc.bind(null,t)}),t.zr.push((async e=>{e?(t.Xr.wr(),Mc(t)?Pc(t):t.Jr.set("Unknown")):(await t.Xr.stop(),Vc(t))}))),t.Xr}function th(t){return t.Zr||(t.Zr=function(t,e,n){const s=ci(t);return s.Or(),new Cc(e,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(t.datastore,t.asyncQueue,{Di:Qc.bind(null,t),Ni:Jc.bind(null,t),Nr:Xc.bind(null,t),Cr:Yc.bind(null,t)}),t.zr.push((async e=>{e?(t.Zr.wr(),await Hc(t)):(await t.Zr.stop(),t.Qr.length>0&&(ni("RemoteStore",`Stopping write stream with ${t.Qr.length} pending writes`),t.Qr=[]))}))),t.Zr}class eh{constructor(t,e,n,s,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,s,i){const r=Date.now()+n,o=new eh(t,e,r,s,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ui(hi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nh(t,e){if(si("AsyncQueue",`${e}: ${t}`),Ma(t))return new ui(hi.UNAVAILABLE,`${e}: ${t}`);throw t}class sh{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Hi.comparator(e.key,n.key):(t,e)=>Hi.comparator(t.key,e.key),this.keyedMap=Do(),this.sortedSet=new To(this.comparator)}static emptySet(t){return new sh(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof sh))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(!t.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new sh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class ih{constructor(){this.eo=new To(Hi.comparator)}track(t){const e=t.doc.key,n=this.eo.get(e);n?0!==t.type&&3===n.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==n.type?this.eo=this.eo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.eo=this.eo.remove(e):1===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):oi():this.eo=this.eo.insert(e,t)}no(){const t=[];return this.eo.inorderTraversal(((e,n)=>{t.push(n)})),t}}class rh{constructor(t,e,n,s,i,r,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,s){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new rh(t,e,sh.emptySet(e),i,n,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Or(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class oh{constructor(){this.so=void 0,this.listeners=[]}}class ah{constructor(){this.queries=new za((t=>xr(t)),Or),this.onlineState="Unknown",this.io=new Set}}function ch(t,e){const n=ci(t);let s=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.oo(t)&&(s=!0);i.so=t}}s&&uh(n)}function hh(t,e,n){const s=ci(t),i=s.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);s.queries.delete(e)}function uh(t){t.io.forEach((t=>{t.next()}))}class lh{constructor(t,e,n){this.query=t,this.co=e,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new rh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.ao?this.ho(t)&&(this.co.next(t),e=!0):this.lo(t,this.onlineState)&&(this.fo(t),e=!0),this.uo=t,e}onError(t){this.co.error(t)}ro(t){this.onlineState=t;let e=!1;return this.uo&&!this.ao&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}lo(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.wo&&n||t.docs.isEmpty()&&"Offline"!==e)}ho(t){if(t.docChanges.length>0)return!0;const e=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}fo(t){t=rh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.ao=!0,this.co.next(t)}}class dh{constructor(t){this.key=t}}class fh{constructor(t){this.key=t}}class ph{constructor(t,e){this.query=t,this.To=e,this.Eo=null,this.current=!1,this.Io=Lo(),this.mutatedKeys=Lo(),this.Ao=Fr(t),this.Ro=new sh(this.Ao)}get bo(){return this.To}Po(t,e){const n=e?e.vo:new ih,s=e?e.Ro:this.Ro;let i=e?e.mutatedKeys:this.mutatedKeys,r=s,o=!1;const a=Dr(this.query)&&s.size===this.query.limit?s.last():null,c=_r(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((t,e)=>{const h=s.get(t),u=Mr(this.query,e)?e:null,l=!!h&&this.mutatedKeys.has(h.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;h&&u?h.data.isEqual(u.data)?l!==d&&(n.track({type:3,doc:u}),f=!0):this.Vo(h,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ao(u,a)>0||c&&this.Ao(u,c)<0)&&(o=!0)):!h&&u?(n.track({type:0,doc:u}),f=!0):h&&!u&&(n.track({type:1,doc:h}),f=!0,(a||c)&&(o=!0)),f&&(u?(r=r.add(u),i=d?i.add(t):i.delete(t)):(r=r.delete(t),i=i.delete(t)))})),Dr(this.query)||_r(this.query))for(;r.size>this.query.limit;){const t=Dr(this.query)?r.last():r.first();r=r.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ro:r,vo:n,Bn:o,mutatedKeys:i}}Vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const s=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const i=t.vo.no();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oi()}};return n(t)-n(e)}(t.type,e.type)||this.Ao(t.doc,e.doc))),this.So(n);const r=e?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new rh(this.query,t.Ro,s,i,t.mutatedKeys,0===o,a,!1),Co:r}:{Co:r}}ro(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new ih,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach((t=>this.To=this.To.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.To=this.To.delete(t))),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=Lo(),this.Ro.forEach((t=>{this.No(t.key)&&(this.Io=this.Io.add(t.key))}));const e=[];return t.forEach((t=>{this.Io.has(t)||e.push(new fh(t))})),this.Io.forEach((n=>{t.has(n)||e.push(new dh(n))})),e}ko(t){this.To=t.zn,this.Io=Lo();const e=this.Po(t.documents);return this.applyChanges(e,!0)}xo(){return rh.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class gh{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class mh{constructor(t){this.key=t,this.$o=!1}}class yh{constructor(t,e,n,s,i,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=r,this.Oo={},this.Mo=new za((t=>xr(t)),Or),this.Fo=new Map,this.Lo=new Set,this.Bo=new To(Hi.comparator),this.Uo=new Map,this.qo=new ic,this.Ko={},this.jo=new Map,this.Qo=Ka.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function vh(t,e){const n=function(t){const e=ci(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Eh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bh.bind(null,e),e.Oo.br=ch.bind(null,e.eventManager),e.Oo.zo=hh.bind(null,e.eventManager),e}(t);let s,i;const r=n.Mo.get(e);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.xo();else{const t=await function(t,e){const n=ci(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let s;return n.He.getTargetData(t,e).next((i=>i?(s=i,Pa.resolve(s)):n.He.allocateTargetId(t).next((i=>(s=new Ua(e,i,0,t.currentSequenceNumber),n.He.addTargetData(t,s).next((()=>s)))))))})).then((t=>{const s=n.qn.get(t.targetId);return(null===s||t.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qn=n.qn.insert(t.targetId,t),n.Kn.set(e,t.targetId)),t}))}(n.localStore,Lr(e)),r=n.sharedClientState.addLocalQueryTarget(t.targetId);s=t.targetId,i=await async function(t,e,n,s){t.Go=(e,n,s)=>async function(t,e,n,s){let i=e.view.Po(n);i.Bn&&(i=await nc(t.localStore,e.query,!1).then((({documents:t})=>e.view.Po(t,i))));const r=s&&s.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,r);return Dh(t,e.targetId,o.Co),o.snapshot}(t,e,n,s);const i=await nc(t.localStore,e,!0),r=new ph(e,i.zn),o=r.Po(i.documents),a=Mo.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==t.onlineState),c=r.applyChanges(o,t.isPrimaryClient,a);Dh(t,n,c.Co);const h=new gh(e,n,r);return t.Mo.set(e,h),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),c.snapshot}(n,e,s,"current"===r),n.isPrimaryClient&&Rc(n.remoteStore,t)}return i}async function wh(t,e){const n=ci(t),s=n.Mo.get(e),i=n.Fo.get(s.targetId);if(i.length>1)return n.Fo.set(s.targetId,i.filter((t=>!Or(t,e)))),void n.Mo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await ec(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),Lc(n.remoteStore,s.targetId),Nh(n,s.targetId)})).catch(Ga)):(Nh(n,s.targetId),await ec(n.localStore,s.targetId,!0))}async function Eh(t,e){const n=ci(t);try{const t=await function(t,e){const n=ci(t),s=e.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];e.targetChanges.forEach(((r,a)=>{const c=i.get(a);if(!c)return;o.push(n.He.removeMatchingKeys(t,r.removedDocuments,a).next((()=>n.He.addMatchingKeys(t,r.addedDocuments,a))));let h=c.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?h=h.withResumeToken(xi.EMPTY_BYTE_STRING,Ci.min()).withLastLimboFreeSnapshotVersion(Ci.min()):r.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(r.resumeToken,s)),i=i.insert(a,h),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,h,r)&&o.push(n.He.updateTargetData(t,h))}));let a=No();if(e.documentUpdates.forEach(((s,i)=>{e.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,s))})),o.push(function(t,e,n,s,i){let r=Lo();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=No();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==i?void 0:i.get(n))||s;o.isNoDocument()&&o.version.isEqual(Ci.min())?(e.removeEntry(n,c),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),r=r.insert(n,o)):ni("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),r}))}(t,r,e.documentUpdates,s,void 0).next((t=>{a=t}))),!s.isEqual(Ci.min())){const e=n.He.getLastRemoteSnapshotVersion(t).next((e=>n.He.setTargetsMetadata(t,t.currentSequenceNumber,s)));o.push(e)}return Pa.waitFor(o).next((()=>r.apply(t))).next((()=>n.Wn.Vn(t,a))).next((()=>a))})).then((t=>(n.qn=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const s=n.Uo.get(e);s&&(ai(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?s.$o=!0:t.modifiedDocuments.size>0?ai(s.$o):t.removedDocuments.size>0&&(ai(s.$o),s.$o=!1))})),await Lh(n,t,e)}catch(t){await Ga(t)}}function Th(t,e,n){const s=ci(t);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const t=[];s.Mo.forEach(((n,s)=>{const i=s.view.ro(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=ci(t);n.onlineState=e;let s=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.ro(e)&&(s=!0)})),s&&uh(n)}(s.eventManager,e),t.length&&s.Oo.br(t),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function bh(t,e,n){const s=ci(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Uo.get(e),r=i&&i.key;if(r){let t=new To(Hi.comparator);t=t.insert(r,or.newNoDocument(r,Ci.min()));const n=Lo().add(r),i=new Po(Ci.min(),new Map,new So(bi),t,n);await Eh(s,i),s.Bo=s.Bo.remove(r),s.Uo.delete(e),Rh(s)}else await ec(s.localStore,e,!1).then((()=>Nh(s,e,n))).catch(Ga)}async function Ih(t,e){const n=ci(t),s=e.batch.batchId;try{const t=await function(t,e){const n=ci(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const s=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,s){const i=n.batch,r=i.keys();let o=Pa.resolve();return r.forEach((t=>{o=o.next((()=>s.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);ai(null!==r),e.version.compareTo(r)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&s.addEntry(e,n.commitVersion))}))})),o.next((()=>t.An.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.An.performConsistencyCheck(t))).next((()=>n.Wn.vn(t,s)))}))}(n.localStore,e);Ah(n,s,null),Ch(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Lh(n,t)}catch(t){await Ga(t)}}async function Sh(t,e,n){const s=ci(t);try{const t=await function(t,e){const n=ci(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let s;return n.An.lookupMutationBatch(t,e).next((e=>(ai(null!==e),s=e.keys(),n.An.removeMutationBatch(t,e)))).next((()=>n.An.performConsistencyCheck(t))).next((()=>n.Wn.vn(t,s)))}))}(s.localStore,e);Ah(s,e,n),Ch(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Lh(s,t)}catch(n){await Ga(n)}}function Ch(t,e){(t.jo.get(e)||[]).forEach((t=>{t.resolve()})),t.jo.delete(e)}function Ah(t,e,n){const s=ci(t);let i=s.Ko[s.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),s.Ko[s.currentUser.toKey()]=i}}function Nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Fo.get(e))t.Mo.delete(s),n&&t.Oo.zo(s,n);t.Fo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach((e=>{t.qo.containsKey(e)||kh(t,e)}))}function kh(t,e){t.Lo.delete(e.path.canonicalString());const n=t.Bo.get(e);null!==n&&(Lc(t.remoteStore,n),t.Bo=t.Bo.remove(e),t.Uo.delete(n),Rh(t))}function Dh(t,e,n){for(const s of n)s instanceof dh?(t.qo.addReference(s.key,e),_h(t,s)):s instanceof fh?(ni("SyncEngine","Document no longer in limbo: "+s.key),t.qo.removeReference(s.key,e),t.qo.containsKey(s.key)||kh(t,s.key)):oi()}function _h(t,e){const n=e.key,s=n.path.canonicalString();t.Bo.get(n)||t.Lo.has(s)||(ni("SyncEngine","New document in limbo: "+n),t.Lo.add(s),Rh(t))}function Rh(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){const e=t.Lo.values().next().value;t.Lo.delete(e);const n=new Hi(_i.fromString(e)),s=t.Qo.next();t.Uo.set(s,new mh(n)),t.Bo=t.Bo.insert(n,s),Rc(t.remoteStore,new Ua(Lr(kr(n.path)),s,2,wi.I))}}async function Lh(t,e,n){const s=ci(t),i=[],r=[],o=[];s.Mo.isEmpty()||(s.Mo.forEach(((t,a)=>{o.push(s.Go(a,e,n).then((t=>{if(t){s.isPrimaryClient&&s.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=Qa.$n(a.targetId,t);r.push(e)}})))})),await Promise.all(o),s.Oo.br(i),await async function(t,e){const n=ci(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Pa.forEach(e,(e=>Pa.forEach(e.kn,(s=>n.persistence.referenceDelegate.addReference(t,e.targetId,s))).next((()=>Pa.forEach(e.xn,(s=>n.persistence.referenceDelegate.removeReference(t,e.targetId,s)))))))))}catch(t){if(!Ma(t))throw t;ni("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.qn.get(e),s=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(s);n.qn=n.qn.insert(e,i)}}}(s.localStore,r))}async function Oh(t,e){const n=ci(t);if(!n.currentUser.isEqual(e)){ni("SyncEngine","User change. New user:",e.toKey());const t=await Ja(n.localStore,e);n.currentUser=e,function(t,e){t.jo.forEach((t=>{t.forEach((t=>{t.reject(new ui(hi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.jo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Lh(n,t.Gn)}}function xh(t,e){const n=ci(t),s=n.Uo.get(e);if(s&&s.$o)return Lo().add(s.key);{let t=Lo();const s=n.Fo.get(e);if(!s)return t;for(const e of s){const s=n.Mo.get(e);t=t.unionWith(s.view.bo)}return t}}function Ph(t){const e=ci(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ih.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sh.bind(null,e),e}class Mh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=Tc(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return function(t,e,n,s){return new Ya(t,e,n,s)}(this.persistence,new Xa,t.initialUser,this.k)}Yo(t){return new uc(dc.ks,this.k)}Jo(t){return new pc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Th(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oh.bind(null,this.syncEngine),await async function(t,e){const n=ci(t);e?(n.Gr.delete(2),await Dc(n)):e||(n.Gr.add(2),await _c(n),n.Jr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new ah}createDatastore(t){const e=Tc(t.databaseInfo.databaseId),n=(s=t.databaseInfo,new wc(s));var s;return function(t,e,n,s){return new Ac(t,e,n,s)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,s=t.asyncQueue,i=t=>Th(this.syncEngine,t,0),r=mc.Pt()?new mc:new gc,new kc(e,n,s,i,r);var e,n,s,i,r}createSyncEngine(t,e){return function(t,e,n,s,i,r,o){const a=new yh(t,e,n,s,i,r);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=ci(t);ni("RemoteStore","RemoteStore shutting down."),e.Gr.add(5),await _c(e),e.Hr.shutdown(),e.Jr.set("Unknown")}(this.remoteStore)}}class Vh{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ec(this.observer.next,t)}error(t){this.observer.error?this.ec(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}nc(){this.muted=!0}ec(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Uh{constructor(t,e,n,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=Js.UNAUTHENTICATED,this.clientId=Ti.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{ni("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(()=>Promise.resolve()))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ui(hi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=nh(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function qh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(ni("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),ni("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async t=>{s.isEqual(t)||(await Ja(e.localStore,t),s=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new Mh)),t.offlineComponents}(t);ni("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener((t=>async function(t,e){const n=ci(t);n.asyncQueue.verifyOperationInProgress(),ni("RemoteStore","RemoteStore received new credentials");const s=Fc(n);n.Gr.add(3),await _c(n),s&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Gr.delete(3),await Dc(n)}(e.remoteStore,t))),t.onlineComponents=e}async function Bh(t){return t.onlineComponents||(ni("FirestoreClient","Using default OnlineComponentProvider"),await qh(t,new Fh)),t.onlineComponents}async function jh(t){const e=await Bh(t),n=e.eventManager;return n.onListen=vh.bind(null,e.syncEngine),n.onUnlisten=wh.bind(null,e.syncEngine),n}function $h(t,e,n={}){const s=new li;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,i){const r=new Vh({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=ci(t),s=e.query;let i=!1;const r=n.queries.get(s);if(r){const t=r.listeners.indexOf(e);t>=0&&(r.listeners.splice(t,1),i=0===r.listeners.length)}if(i)return n.queries.delete(s),n.onUnlisten(s)}(t,o))),n.fromCache&&"server"===s.source?i.reject(new ui(hi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new lh(n,r,{includeMetadataChanges:!0,wo:!0});return async function(t,e){const n=ci(t),s=e.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new oh),i)try{r.so=await n.onListen(s)}catch(t){const n=nh(t,`Initialization of query '${Pr(e.query)}' failed`);return void e.onError(n)}n.queries.set(s,r),r.listeners.push(e),e.ro(n.onlineState),r.so&&e.oo(r.so)&&uh(n)}(t,o)}(await jh(t),t.asyncQueue,e,n,s))),s.promise}class Hh{constructor(t,e,n,s,i,r,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Kh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Kh&&t.projectId===this.projectId&&t.database===this.database}}const Gh=new Map;function zh(t,e,n){if(!n)throw new ui(hi.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Wh(t){if(!Hi.isDocumentKey(t))throw new ui(hi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qh(t){if(Hi.isDocumentKey(t))throw new ui(hi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":oi()}function Yh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ui(hi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(t);throw new ui(hi.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Jh{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ui(hi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ui(hi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,s){if(!0===e&&!0===s)throw new ui(hi.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Zh{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jh({}),this._settingsFrozen=!1,t instanceof Kh?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ui(hi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kh(t.options.projectId)}(t))}get app(){if(!this._app)throw new ui(hi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ui(hi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jh(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new fi;switch(t.type){case"gapi":const e=t.client;return ai(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new mi(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ui(hi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Gh.get(t);e&&(ni("ComponentProvider","Removing Datastore"),Gh.delete(t),e.terminate())}(this),Promise.resolve()}}class tu{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new tu(this.firestore,t,this._key)}}class eu{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new eu(this.firestore,t,this._query)}}class nu extends eu{constructor(t,e,n){super(t,e,kr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new tu(this.firestore,null,new Hi(t))}withConverter(t){return new nu(this.firestore,t,this._path)}}function su(t,e,...n){if(t=g(t),zh("collection","path",e),t instanceof Zh){const s=_i.fromString(e,...n);return Qh(s),new nu(t,null,s)}{if(!(t instanceof tu||t instanceof nu))throw new ui(hi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(_i.fromString(e,...n));return Qh(s),new nu(t.firestore,null,s)}}function iu(t,e,...n){if(t=g(t),1===arguments.length&&(e=Ti.A()),zh("doc","path",e),t instanceof Zh){const s=_i.fromString(e,...n);return Wh(s),new tu(t,null,new Hi(s))}{if(!(t instanceof tu||t instanceof nu))throw new ui(hi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(_i.fromString(e,...n));return Wh(s),new tu(t.firestore,t instanceof nu?t.converter:null,new Hi(s))}}class ru{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new bc(this,"async_queue_retry"),this.bc=()=>{const t=Ec();t&&ni("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const t=Ec();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pc(),this.vc(t)}enterRestrictedMode(t){if(!this.yc){this.yc=!0,this.Ac=t||!1;const e=Ec();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.bc)}}enqueue(t){if(this.Pc(),this.yc)return new Promise((()=>{}));const e=new li;return this.vc((()=>this.yc&&this.Ac?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.gc.push(t),this.Vc())))}async Vc(){if(0!==this.gc.length){try{await this.gc[0](),this.gc.shift(),this.ur.reset()}catch(t){if(!Ma(t))throw t;ni("AsyncQueue","Operation failed with retryable error: "+t)}this.gc.length>0&&this.ur.Zi((()=>this.Vc()))}}vc(t){const e=this.mc.then((()=>(this.Ic=!0,t().catch((t=>{throw this.Ec=t,this.Ic=!1,si("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.Ic=!1,t))))));return this.mc=e,e}enqueueAfterDelay(t,e,n){this.Pc(),this.Rc.indexOf(t)>-1&&(e=0);const s=eh.createAndSchedule(this,t,e,n,(t=>this.Sc(t)));return this.Tc.push(s),s}Pc(){this.Ec&&oi()}verifyOperationInProgress(){}async Dc(){let t;do{t=this.mc,await t}while(t!==this.mc)}Cc(t){for(const e of this.Tc)if(e.timerId===t)return!0;return!1}Nc(t){return this.Dc().then((()=>{this.Tc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Tc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Dc()}))}kc(t){this.Rc.push(t)}Sc(t){const e=this.Tc.indexOf(t);this.Tc.splice(e,1)}}class ou extends Zh{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new ru,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cu(this),this._firestoreClient.terminate()}}function au(t){return t._firestoreClient||cu(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cu(t){var e;const n=t._freezeSettings(),s=function(t,e,n,s){return new Hh(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Uh(t._authCredentials,t._appCheckCredentials,t._queue,s)}class hu{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ui(hi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class uu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new uu(xi.fromBase64String(t))}catch(t){throw new ui(hi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new uu(xi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class lu{constructor(t){this._methodName=t}}class du{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ui(hi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ui(hi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return bi(this._lat,t._lat)||bi(this._long,t._long)}}const fu=/^__.*__$/;class pu{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new uo(t,this.data,this.fieldMask,e,this.fieldTransforms):new ho(t,this.data,e,this.fieldTransforms)}}class gu{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new uo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function mu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oi()}}class yu{constructor(t,e,n,s,i,r){this.settings=t,this.databaseId=e,this.k=n,this.ignoreUndefinedProperties=s,void 0===i&&this.xc(),this.fieldTransforms=i||[],this.fieldMask=r||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(t){return new yu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.Oc({path:n,Fc:!1});return s.Lc(t),s}Bc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.Oc({path:n,Fc:!1});return s.xc(),s}Uc(t){return this.Oc({path:void 0,Fc:!0})}qc(t){return Du(t,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lc(this.path.get(t))}Lc(t){if(0===t.length)throw this.qc("Document fields must not be empty");if(mu(this.$c)&&fu.test(t))throw this.qc('Document fields cannot begin and end with "__"')}}class vu{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.k=n||Tc(t)}Qc(t,e,n,s=!1){return new yu({$c:t,methodName:e,jc:n,path:Li.emptyPath(),Fc:!1,Kc:s},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function wu(t){const e=t._freezeSettings(),n=Tc(t._databaseId);return new vu(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Eu(t,e,n,s,i,r={}){const o=t.Qc(r.merge||r.mergeFields?2:0,e,n,i);Cu("Data must be an object, but it was:",o,s);const a=Iu(s,o);let c,h;if(r.merge)c=new Oi(o.fieldMask),h=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const s of r.mergeFields){const i=Au(e,s,n);if(!o.contains(i))throw new ui(hi.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);_u(t,i)||t.push(i)}c=new Oi(t),h=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,h=o.fieldTransforms;return new pu(new ir(a),c,h)}class Tu extends lu{_toFieldTransform(t){if(2!==t.$c)throw 1===t.$c?t.qc(`${this._methodName}() can only appear at the top level of your update data`):t.qc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Tu}}function bu(t,e){if(Su(t=g(t)))return Cu("Unsupported field value:",e,t),Iu(t,e);if(t instanceof lu)return function(t,e){if(!mu(e.$c))throw e.qc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.qc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,e){const n=[];let s=0;for(const i of t){let t=bu(i,e.Uc(s));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),s++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=g(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Br(e.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Si.fromDate(t);return{timestampValue:zo(e.k,n)}}if(t instanceof Si){const n=new Si(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zo(e.k,n)}}if(t instanceof du)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uu)return{bytesValue:Wo(e.k,t._byteString)};if(t instanceof tu){const n=e.databaseId,s=t.firestore._databaseId;if(!s.isEqual(n))throw e.qc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Yo(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.qc(`Unsupported field value: ${Xh(t)}`)}(t,e)}function Iu(t,e){const n={};return ki(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(t,((t,s)=>{const i=bu(s,e.Mc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Su(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Si||t instanceof du||t instanceof uu||t instanceof tu||t instanceof lu)}function Cu(t,e,n){if(!Su(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const s=Xh(n);throw"an object"===s?e.qc(t+" a custom object"):e.qc(t+" "+s)}}function Au(t,e,n){if((e=g(e))instanceof hu)return e._internalPath;if("string"==typeof e)return ku(t,e);throw Du("Field path arguments must be of type string or ",t,!1,void 0,n)}const Nu=new RegExp("[~\\*/\\[\\]]");function ku(t,e,n){if(e.search(Nu)>=0)throw Du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hu(...e.split("."))._internalPath}catch(s){throw Du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Du(t,e,n,s,i){const r=s&&!s.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new ui(hi.INVALID_ARGUMENT,a+t+c)}function _u(t,e){return t.some((t=>t.isEqual(e)))}class Ru{constructor(t,e,n,s,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Lu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ou("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Lu extends Ru{data(){return super.data()}}function Ou(t,e){return"string"==typeof e?ku(t,e):e instanceof hu?e._internalPath:e._delegate._internalPath}class xu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Pu extends Ru{constructor(t,e,n,s,i,r){super(t,e,n,s,r),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Ou("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Mu extends Pu{data(t={}){return super.data(t)}}class Fu{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new xu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Mu(this._firestore,this._userDataWriter,n.key,n,new xu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ui(hi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new Mu(t._firestore,t._userDataWriter,n.doc.key,n.doc,new xu(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const s=new Mu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,r=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:Vu(e.type),doc:s,oldIndex:i,newIndex:r}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Vu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oi()}}class Uu extends class{convertValue(t,e="none"){switch(Ki(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw oi()}}convertObject(t,e){const n={};return Ni(t.fields,((t,s)=>{n[t]=this.convertValue(s,e)})),n}convertGeoPoint(t){return new du(Fi(t.latitude),Fi(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=qi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Bi(t));default:return null}}convertTimestamp(t){const e=Mi(t);return new Si(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=_i.fromString(t);ai(va(n));const s=new Kh(n.get(1),n.get(3)),i=new Hi(n.popFirst(5));return s.isEqual(e)||si(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new uu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new tu(this.firestore,null,e)}}function qu(t){t=Yh(t,eu);const e=Yh(t.firestore,ou),n=au(e),s=new Uu(e);return function(t){if(_r(t)&&0===t.explicitOrderBy.length)throw new ui(hi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),$h(n,t._query).then((n=>new Fu(e,s,t,n)))}function Bu(t,e,n,...s){t=Yh(t,tu);const i=Yh(t.firestore,ou),r=wu(i);let o;return o="string"==typeof(e=g(e))||e instanceof hu?function(t,e,n,s,i,r){const o=t.Qc(1,e,n),a=[Au(e,s,n)],c=[i];if(r.length%2!=0)throw new ui(hi.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<r.length;t+=2)a.push(Au(e,r[t])),c.push(r[t+1]);const h=[],u=ir.empty();for(let t=a.length-1;t>=0;--t)if(!_u(h,a[t])){const e=a[t];let n=c[t];n=g(n);const s=o.Bc(e);if(n instanceof Tu)h.push(e);else{const t=bu(n,s);null!=t&&(h.push(e),u.set(e,t))}}const l=new Oi(h);return new gu(u,l,o.fieldTransforms)}(r,"updateDoc",t._key,e,n,s):function(t,e,n,s){const i=t.Qc(1,e,n);Cu("Data must be an object, but it was:",i,s);const r=[],o=ir.empty();Ni(s,((t,s)=>{const a=ku(e,t,n);s=g(s);const c=i.Bc(a);if(s instanceof Tu)r.push(a);else{const t=bu(s,c);null!=t&&(r.push(a),o.set(a,t))}}));const a=new Oi(r);return new gu(o,a,i.fieldTransforms)}(r,"updateDoc",t._key,e),Hu(i,[o.toMutation(t._key,eo.exists(!0))])}function ju(t){return Hu(Yh(t.firestore,ou),[new go(t._key,eo.none())])}function $u(t,e){const n=Yh(t.firestore,ou),s=iu(t),i=function(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}(t.converter,e);return Hu(n,[Eu(wu(t.firestore),"addDoc",s._key,i,null!==t.converter,{}).toMutation(s._key,eo.exists(!1))]).then((()=>s))}function Hu(t,e){return function(t,e){const n=new li;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const s=Ph(t);try{const t=await function(t,e){const n=ci(t),s=Si.now(),i=e.reduce(((t,e)=>t.add(e.key)),Lo());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Wn.vn(t,i).next((i=>{r=i;const o=[];for(const t of e){const e=oo(t,r.get(t.key));null!=e&&o.push(new uo(t.key,e,rr(e.value.mapValue),eo.exists(!0)))}return n.An.addMutationBatch(t,s,o,e)})))).then((t=>(t.applyToLocalDocumentSet(r),{batchId:t.batchId,changes:r})))}(s.localStore,e);s.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let s=t.Ko[t.currentUser.toKey()];s||(s=new To(bi)),s=s.insert(e,n),t.Ko[t.currentUser.toKey()]=s}(s,t.batchId,n),await Lh(s,t.changes),await Hc(s.remoteStore)}catch(t){const e=nh(t,"Failed to persist write");n.reject(e)}}(await function(t){return Bh(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(au(t),e)}!function(t,e=!0){Zs="9.6.4",M(new m("firestore",((t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=new ou(s,new pi(t.getProvider("auth-internal")),new vi(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i}),"PUBLIC")),U(Ys,"3.4.3",t),U(Ys,"3.4.3","esm2017")}();var Ku=function(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{c(s.next(t))}catch(t){r(t)}}function a(t){try{c(s.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((s=s.apply(t,e||[])).next())}))},Gu=function(t,e){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(i=2&r[0]?s.return:r[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,r[1])).done)return i;switch(s=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],s=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},zu=function(){function t(){this.firebaseConfig={apiKey:"AIzaSyD5H8K7yJw94Ugs120HhmBc2ojNoMMHeMY",authDomain:"webowe-73486.firebaseapp.com",projectId:"webowe-73486",storageBucket:"webowe-73486.appspot.com",messagingSenderId:"1000055678603",appId:"1:1000055678603:web:e600865d5d8f5830bf968e",measurementId:"G-19ERDYHMP7"},this.notes=new r,this.app=function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw F.create("bad-app-name",{appName:String(s)});const i=O.get(s);if(i){if(f(t,i.options)&&f(n,i.config))return i;throw F.create("duplicate-app",{appName:s})}const r=new w(s);for(const t of x.values())r.addComponent(t);const o=new V(t,n,r);return O.set(s,o),o}(this.firebaseConfig),this.db=function(t=function(t="[DEFAULT]"){const e=O.get(t);if(!e)throw F.create("no-app",{appName:t});return e}()){return(e=t,n="firestore",e.container.getProvider(n)).getImmediate();var e,n}(),this.key="collection"}return t.prototype.saveNote=function(t){return Ku(this,void 0,void 0,(function(){var e,n;return Gu(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,$u(su(this.db,this.key),{id:t.id,title:t.title,content:t.content,color:t.color,isPinned:t.isPinned,date:t.dateCreation})];case 1:return e=s.sent(),console.log("Document written with ID: ",e.id),[3,3];case 2:return n=s.sent(),console.error(n),[3,3];case 3:return[2]}}))}))},t.prototype.readNotes=function(){return Ku(this,void 0,void 0,(function(){var t=this;return Gu(this,(function(e){switch(e.label){case 0:return[4,qu(su(this.db,this.key)).then((function(e){e.forEach((function(e){var n=new o({title:e.data().title,content:e.data().content,color:e.data().color,isPinned:e.data().isPinned,dateCreation:e.data().dateCreation,id:e.id});t.notes.notes.push(n)}))}))];case 1:return e.sent(),[2,new Promise((function(e,n){e(t.notes)}))]}}))}))},t.prototype.changeNote=function(t,e){return Ku(this,void 0,void 0,(function(){var n;return Gu(this,(function(s){switch(s.label){case 0:return n=iu(this.db,this.key,t),console.log(e),[4,Bu(n,{id:t,title:e.title,content:e.content,color:e.color,isPinned:!e.isPinned,dateCreation:e.dateCreation}).then((function(t){return console.log(t)}))];case 1:return s.sent(),[2]}}))}))},t.prototype.removeNote=function(t){return Ku(this,void 0,void 0,(function(){return Gu(this,(function(e){switch(e.label){case 0:return console.log(t),[4,ju(iu(this.db,this.key,t)).then((function(t){console.log(t)}))];case 1:return e.sent(),[2]}}))}))},t}();new(function(){function t(){var t=this;console.log("starting app"),this.storage=new zu,this.display=new i("display"),this.notes=new r,this.storage=new a,this.notes.notes=this.storage.readNotes(),this.display.renderNotes(this.notes),document.getElementById("addNote").addEventListener("click",(function(){t.addNote()})),this.changeNote(),this.removeNote()}return t.prototype.changeNote=function(){var t=this;document.querySelectorAll(".repin").forEach((function(e){e.addEventListener("click",(function(){var n=t.notes.notes.find((function(t){return t.id==e.parentElement.id}));t.display.changeNote(e.parentElement.id),t.storage.changeNote(e.parentElement.id,n)}))}))},t.prototype.addNote=function(){var t=document.querySelectorAll(".input>input"),e=new o({title:t[0].value,content:t[1].value,color:t[2].value,isPinned:!0,dateCreation:new Date,id:this.notes.notes.length+1});this.notes.addNote(e),console.log(e),this.display.renderNotes(this.notes),this.storage.saveNote(e)},t.prototype.removeNote=function(){var t=this;document.querySelectorAll(".remove").forEach((function(e){e.addEventListener("click",(function(){t.display.removeNote(e.parentElement.id),t.storage.removeNote(e.parentElement.id),console.log()}))}))},t}())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sYWIzLXdlYm93ZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9sYWIzLXdlYm93ZS93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2xhYjMtd2Vib3dlLy4vc3JjL2RlZmF1bHRzLnRzIiwid2VicGFjazovL2xhYjMtd2Vib3dlLy4vc3JjL2lucHV0LnRzIiwid2VicGFjazovL2xhYjMtd2Vib3dlLy4vc3JjL2Rpc3BsYXkudHMiLCJ3ZWJwYWNrOi8vbGFiMy13ZWJvd2UvLi9zcmMvY2xhc3Nlcy9ub3Rlcy50cyIsIndlYnBhY2s6Ly9sYWIzLXdlYm93ZS8uL3NyYy9jbGFzc2VzL25vdGUudHMiLCJ3ZWJwYWNrOi8vbGFiMy13ZWJvd2UvLi9zcmMvY2xhc3Nlcy9hcHBzdG9yYWdlLnRzIiwid2VicGFjazovL2xhYjMtd2Vib3dlLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9sYWIzLXdlYm93ZS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vbGFiMy13ZWJvd2UvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2xhYjMtd2Vib3dlLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9sYWIzLXdlYm93ZS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9sYWIzLXdlYm93ZS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9sYWIzLXdlYm93ZS8uL3NyYy9jbGFzc2VzL0FwcEZpcmVzdG9yZVN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vbGFiMy13ZWJvd2UvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsIkRFRkFVTFRTIiwiYmFja2dyb3VuZ0NvbG9yIiwiY2xhc3MiLCJyZXR1cm5JbnB1dCIsImlucHV0RGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZGl2VGl0bGUiLCJpbnB1dFRpdGxlIiwiaW5wdXRDb250ZW50IiwiaW5wdXRDb2xvciIsInRvZ2dsZSIsImFjY2VwdCIsImNsYXNzTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsInRvZ2dsZUlucHV0IiwidGFyZ2V0IiwidGV4dENvbnRlbnQiLCJpZCIsInBsYWNlaG9sZGVyIiwic2V0QXR0cmlidXRlIiwidmFsdWUiLCJhcHBlbmRDaGlsZCIsImJ1dHRvbiIsInBhcmVudEVsZW1lbnQiLCJzdHlsZSIsInJpZ2h0IiwibG9jIiwicGlubmVkIiwidW5QaW5uZWQiLCJpbnB1dCIsIklucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3NpdGlvbiIsImNyZWF0ZVNlY3Rpb25zIiwiYmFja2dyb3VuZENvbG9yIiwicmVuZGVyTm90ZXMiLCJub3RlcyIsImlubmVySFRNTCIsImZvckVhY2giLCJpc1Bpbm5lZCIsInJldHVybk5vdGVEaXYiLCJjaGFuZ2VOb3RlIiwiZWxlbWVudCIsImNvbnNvbGUiLCJsb2ciLCJtb3ZlIiwiaW5zZXJ0QmVmb3JlIiwibW92ZVRvIiwicmVtb3ZlTm90ZSIsInJlbW92ZSIsImFkZE5vdGUiLCJub3RlIiwicHVzaCIsImZpbHRlciIsInRpdGxlIiwiY29udGVudCIsImNvbG9yIiwiZGF0ZUNyZWF0aW9uIiwiRGF0ZSIsInBpbiIsInRvU3RyaW5nIiwiY2hlY2tlZCIsIk5vdGVzIiwic2F2ZU5vdGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlYWROb3RlcyIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJzdGFydHNXaXRoIiwibWFwIiwicGFyc2UiLCJOb3RlIiwicmVzIiwiZmluZCIsInJlbW92ZUl0ZW0iLCJEZWZlcnJlZCIsInJlamVjdCIsInJlc29sdmUiLCJwcm9taXNlIiwiUHJvbWlzZSIsImNhbGxiYWNrIiwiZXJyb3IiLCJjYXRjaCIsImxlbmd0aCIsIm5hdmlnYXRvciIsIkZpcmViYXNlRXJyb3IiLCJFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY3VzdG9tRGF0YSIsInN1cGVyIiwibmFtZSIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJkYXRhIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsInJlcGxhY2UiLCJQQVRURVJOIiwiXyIsIlN0cmluZyIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiYSIsImIiLCJhS2V5cyIsImJLZXlzIiwiayIsImluY2x1ZGVzIiwiYVByb3AiLCJiUHJvcCIsImlzT2JqZWN0IiwidGhpbmciLCJfZGVsZWdhdGUiLCJDb21wb25lbnQiLCJpbnN0YW5jZUZhY3RvcnkiLCJ0eXBlIiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwibW9kZSIsInByb3BzIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJoYXMiLCJkZWZlcnJlZCIsInNldCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldCIsIm9wdGlvbnMiLCJfYSIsIm9wdGlvbmFsIiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJlbnRyaWVzIiwiZGVsZXRlIiwic2VydmljZXMiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJhbGwiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJvcHRzIiwiaXNDb21wb25lbnRTZXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImFkZCIsImV4aXN0aW5nSW5zdGFuY2UiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwic2V0Q29tcG9uZW50IiwiYWRkQ29tcG9uZW50IiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQcm92aWRlcnMiLCJnZXRDb21wb25lbnQiLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJnZXRJbW1lZGlhdGUiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsImpvaW4iLCJuYW1lJG8iLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhcHAiLCJkZWJ1ZyIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiYXNzaWduIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnlNaXNtYXRjaCIsIm1hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIndhcm4iLCJjb21tb25qc0dsb2JhbCIsInNlbGYiLCJlc20iLCJnb29nIiwibCIsImFhIiwiYmEiLCJpc0FycmF5IiwicCIsImVhIiwiTWF0aCIsInJhbmRvbSIsImZhIiwiaGEiLCJjIiwiY2FsbCIsImFwcGx5IiwiYmluZCIsImFyZ3VtZW50cyIsImlhIiwiZCIsInNsaWNlIiwidW5zaGlmdCIsInEiLCJpbmRleE9mIiwiamEiLCJ0IiwiWiIsImNvbnN0cnVjdG9yIiwiVmIiLCJmIiwiaCIsIm4iLCJ2IiwicyIsIm8iLCJsYSIsIm5hIiwiTSIsImhhc093blByb3BlcnR5IiwiZGEiLCJzaGlmdCIsIm1hIiwic3BsaXQiLCJxYSIsImNvbmNhdCIsInJhIiwic2EiLCJ0ZXN0IiwieCIsInRhIiwidHJpbSIsImV4ZWMiLCJ3IiwidWEiLCJ2YSIsIndhIiwidXNlckFnZW50IiwieGEiLCJ5YSIsInphIiwiQWEiLCJDYSIsIk5hIiwiSGEiLCJ5IiwiSWEiLCJKYSIsIkthIiwidG9Mb3dlckNhc2UiLCJMYSIsIk1hIiwiZG9jdW1lbnRNb2RlIiwiT2EiLCJQYSIsIlFhIiwicGFyc2VGbG9hdCIsIlNhIiwiR2EiLCJSYSIsIm1heCIsInBhcnNlSW50IiwiVWEiLCJWYSIsImRlZmluZVByb3BlcnR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInoiLCJkZWZhdWx0UHJldmVudGVkIiwiQSIsInJlbGF0ZWRUYXJnZXQiLCJzY3JlZW5ZIiwic2NyZWVuWCIsImNsaWVudFkiLCJjbGllbnRYIiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsInN0YXRlIiwicG9pbnRlcklkIiwicG9pbnRlclR5cGUiLCJpIiwiY2hhbmdlZFRvdWNoZXMiLCJzcmNFbGVtZW50Iiwibm9kZU5hbWUiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsInBhZ2VYIiwicGFnZVkiLCJXYSIsIjIiLCIzIiwiNCIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJCIiwiWGEiLCJZYSIsImxpc3RlbmVyIiwicHJveHkiLCJzcmMiLCJjYXB0dXJlIiwiY2EiLCJaYSIsIiRhIiwiYmIiLCJzcGxpY2UiLCJhYiIsImNiIiwiZGIiLCJmYiIsIm9uY2UiLCJnYiIsImhiIiwiTiIsImliIiwiamIiLCJtYiIsImtiIiwiYXR0YWNoRXZlbnQiLCJsYiIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJPIiwibmIiLCJvYiIsImRldGFjaEV2ZW50IiwicGIiLCJoYW5kbGVFdmVudCIsIkMiLCJQIiwiSSIsIkQiLCJxYiIsInUiLCJyYiIsInNiIiwidGIiLCJuZXh0IiwiQWIiLCJ2YiIsImoiLCJ3YiIsInJlc2V0IiwieWIiLCJzZXRUaW1lb3V0IiwiemIiLCJ0aGVuIiwiRGIiLCJCYiIsIkNiIiwiRWIiLCJGYiIsIlMiLCJjbGVhclRpbWVvdXQiLCJHYiIsIk51bWJlciIsIkhiIiwibSIsInN0YXJ0IiwiSWIiLCJFIiwiSmIiLCJLYiIsIkxiIiwiTWIiLCJGIiwiaW5mbyIsIlBiIiwiSCIsIlJiIiwiU2IiLCJUYiIsIlViIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJKIiwic2l6ZSIsIksiLCJXYiIsIk5PX0VSUk9SIiwieGIiLCJUSU1FT1VUIiwiWGIiLCJZYiIsIlpiIiwiJGIiLCJjYyIsIkwiLCJPUEVOIiwiYWMiLCJiYyIsImRjIiwiWCIsIlYiLCJlYyIsIlciLCJZIiwiJCIsIlUiLCJmYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZ2MiLCJoYyIsImljIiwiamMiLCJrYyIsImxjIiwibWMiLCJuYyIsInIiLCJHIiwiTmIiLCJxYyIsIkJhIiwidGMiLCJ2YyIsInNjIiwid2MiLCJyYyIsInN1YnN0cmluZyIsImlzTmFOIiwic3Vic3RyIiwieGMiLCJlYiIsInBjIiwidWMiLCJhYm9ydCIsInljIiwiemMiLCJBYyIsIkJjIiwiQ2MiLCJrYSIsIlEiLCJEYSIsIkVhIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJEYyIsIlIiLCJvYSIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiSWMiLCJLYyIsIlQiLCJKYyIsIkxjIiwiZ2EiLCJvYyIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwic3RyZWFtIiwiT2IiLCJjYW5jZWwiLCJRYiIsIk1jIiwiT2MiLCJQYyIsIlFjIiwiUmMiLCJTYyIsIlRjIiwiZGQiLCJaYyIsIlVjIiwiJGMiLCJmbG9vciIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsImNkIiwiY2hhckNvZGVBdCIsIlZjIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY2hhckF0IiwiV2MiLCJYYyIsIlljIiwiTmMiLCJlZCIsImdkIiwiaGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJqZCIsImtkIiwibGQiLCJtZCIsIm9kIiwib25sb2FkIiwib25lcnJvciIsIm9uYWJvcnQiLCJvbnRpbWVvdXQiLCJwZCIsInFkIiwicmVhZHlTdGF0ZSIsInJkIiwic3RhdHVzIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiSGVhZGVycyIsImNsZWFyIiwidWQiLCJyZWFkIiwidGQiLCJzZCIsIm9wZW4iLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJib2R5IiwiZmV0Y2giLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJUYSIsIlJlYWRhYmxlU3RyZWFtIiwiZ2V0UmVhZGVyIiwidGV4dCIsIlVpbnQ4QXJyYXkiLCJkb25lIiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInZkIiwid2QiLCJ4ZCIsInlkIiwicGEiLCJ6ZCIsIkNkIiwiRGQiLCJFZCIsIkZhIiwibG9jYXRpb24iLCJwcm90b2NvbCIsIkFkIiwibW96UmVzcG9uc2VBcnJheUJ1ZmZlciIsIkdkIiwiRmQiLCJIZCIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsIklkIiwieG1sSHR0cEZhY3RvcnkiLCJzdXBwb3J0c0Nyb3NzRG9tYWluWGhyIiwiY29uY3VycmVudFJlcXVlc3RMaW1pdCIsImZhc3RIYW5kc2hha2UiLCJmb3JjZUxvbmdQb2xsaW5nIiwiZGV0ZWN0QnVmZmVyaW5nUHJveHkiLCJKZCIsIktkIiwic2VuZEJlYWNvbiIsIkltYWdlIiwiTGQiLCJNZCIsIlFkIiwiUGQiLCJyb3VuZCIsIm1pbiIsIk9kIiwiUmQiLCJOZCIsIm5kIiwiYWQiLCJiZCIsImhvc3RuYW1lIiwicG9ydCIsIlNkIiwiVGQiLCJtZXNzYWdlVXJsUGFyYW1zIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwiaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSIsInNlbmRSYXdKc29uIiwiaHR0cFNlc3Npb25JZFBhcmFtIiwiVWQiLCJfX3NtX18iLCJWZCIsInRvVXBwZXJDYXNlIiwiRm9ybURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ0aW1lb3V0IiwiQmQiLCJfX2RhdGFfXyIsImNsb3NlIiwiY3JlYXRlV2ViQ2hhbm5lbCIsIkhUVFBfRVJST1IiLCJDT01QTEVURSIsIkV2ZW50VHlwZSIsIkNMT1NFIiwiTUVTU0FHRSIsImxpc3RlbiIsImxpc3Rlbk9uY2UiLCJnZXRMYXN0RXJyb3IiLCJnZXRMYXN0RXJyb3JDb2RlIiwiZ2V0U3RhdHVzIiwiZ2V0UmVzcG9uc2VKc29uIiwiZ2V0UmVzcG9uc2VUZXh0IiwiY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCIsImdldFN0YXRFdmVudFRhcmdldCIsIkVycm9yQ29kZSIsIkV2ZW50IiwiU3RhdCIsInViIiwiUFJPWFkiLCJOT1BST1hZIiwiRmV0Y2hYbWxIdHRwRmFjdG9yeSIsIldlYkNoYW5uZWwiLCJYaHJJbyIsInVpZCIsImlzQXV0aGVudGljYXRlZCIsIlVOQVVUSEVOVElDQVRFRCIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiTU9DS19VU0VSIiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwidXNlciIsImVucXVldWVSZXRyeWFibGUiLCJjdXJyZW50VXNlciIsImZvcmNlUmVmcmVzaCIsImF1dGgiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsIm9uSW5pdCIsImdldFRva2VuIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImdldFVpZCIsImdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkiLCJ0dCIsImFwcENoZWNrIiwidG9rZW4iLCJhZGRUb2tlbkxpc3RlbmVyIiwicmVtb3ZlVG9rZW5MaXN0ZW5lciIsIm50IiwicHJldmlvdXNWYWx1ZSIsInNlcXVlbmNlTnVtYmVySGFuZGxlciIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJzdCIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiaXQiLCJydCIsIm90IiwiZXZlcnkiLCJhdCIsInNlY29uZHMiLCJuYW5vc2Vjb25kcyIsImZyb21NaWxsaXMiLCJnZXRUaW1lIiwidG9NaWxsaXMiLCJwYWRTdGFydCIsInV0IiwidGltZXN0YW1wIiwiX2NvbXBhcmVUbyIsImlzRXF1YWwiLCJodCIsImx0IiwiZnQiLCJkdCIsInNlZ21lbnRzIiwib2Zmc2V0IiwibGVuIiwiY29tcGFyYXRvciIsImxpbWl0IiwiY29uc3RydWN0Iiwid3QiLCJ0b0FycmF5IiwiY2Fub25pY2FsU3RyaW5nIiwiX3QiLCJtdCIsImlzVmFsaWRJZGVudGlmaWVyIiwiZ3QiLCJmaWVsZHMiLCJzb3J0IiwiaXNQcmVmaXhPZiIsInB0IiwiYmluYXJ5U3RyaW5nIiwiYXRvYiIsImZyb21DaGFyQ29kZSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiYnRvYSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiVHQiLCJSZWdFeHAiLCJFdCIsIm5hbm9zIiwiSXQiLCJBdCIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlJ0IiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwiYnQiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJQdCIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJ2dCIsIlZ0IiwiRHQiLCJwYXRoIiwiZnJvbVN0cmluZyIsInBvcEZpcnN0IiwiQ3QiLCJOdCIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsImt0IiwieHQiLCIkdCIsImNvbXBhcmVUbyIsIk90IiwiTXQiLCJ0b0Jhc2U2NCIsImZyb21OYW1lIiwiTHQiLCJCdCIsIlV0IiwicXQiLCJLdCIsImp0IiwiUXQiLCJpc0VtcHR5IiwibGFzdFNlZ21lbnQiLCJnZXRGaWVsZHNNYXAiLCJwb3BMYXN0IiwiZW1wdHlQYXRoIiwiaXNJbW1lZGlhdGVQYXJlbnRPZiIsImFwcGx5Q2hhbmdlcyIsImZpZWxkIiwiV3QiLCJjaGlsZCIsIkd0IiwiZG9jdW1lbnRUeXBlIiwiZG9jdW1lbnRTdGF0ZSIsImVtcHR5IiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJjbG9uZSIsInp0IiwiY29sbGVjdGlvbkdyb3VwIiwib3JkZXJCeSIsImZpbHRlcnMiLCJzdGFydEF0IiwiZW5kQXQiLCJIdCIsIkp0Iiwib3AiLCJlZSIsImRpciIsImxlIiwiWHQiLCJkZSIsIl9lIiwiWnQiLCJpc0RvY3VtZW50S2V5IiwidGUiLCJpc0tleUZpZWxkIiwibmUiLCJvZSIsImNlIiwiYWUiLCJ1ZSIsInNlIiwiaWUiLCJyZSIsInNvbWUiLCJudWxsVmFsdWUiLCJoZSIsImJlZm9yZSIsImZlIiwid2UiLCJtZSIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsInllIiwicGUiLCJUZSIsIlJlIiwiSWUiLCJFZSIsImtleUZpZWxkIiwiYmUiLCJ2ZSIsIlZlIiwiU2UiLCJZdCIsIkRlIiwiaXNGb3VuZERvY3VtZW50IiwiaGFzQ29sbGVjdGlvbklkIiwibWF0Y2hlcyIsIkNlIiwiTmUiLCJrZSIsInhlIiwiJGUiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIlN0IiwiT2UiLCJNZSIsIkJlIiwiVWUiLCJxZSIsIktlIiwiamUiLCJMZSIsIldlIiwiRmUiLCJRZSIsImVsZW1lbnRzIiwiR2UiLCJKZSIsInRyYW5zZm9ybVJlc3VsdHMiLCJZZSIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJYZSIsIlplIiwidG4iLCJvbiIsInVuIiwiZmllbGRUcmFuc2Zvcm1zIiwic2V0QWxsIiwiY29udmVydFRvRm91bmREb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsImNuIiwicHJlY29uZGl0aW9uIiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50IiwiYW4iLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwiZW4iLCJobiIsInJuIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJubiIsInRyYW5zZm9ybSIsInNuIiwiSGUiLCJmaWVsZE1hc2siLCJsbiIsImZuIiwiZG4iLCJjb3VudCIsInduIiwiX24iLCJnbiIsInluIiwicm9vdCIsIlRuIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJsZWZ0IiwibWluS2V5IiwibWF4S2V5IiwiaW5vcmRlclRyYXZlcnNhbCIsInJldmVyc2VUcmF2ZXJzYWwiLCJwbiIsImlzUmV2ZXJzZSIsIm5vZGVTdGFjayIsInBvcCIsIlJFRCIsImZpeFVwIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJlbW92ZU1pbiIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrIiwicG93IiwiRW4iLCJnZXRJdGVyYXRvckZyb20iLCJoYXNOZXh0IiwiZ2V0TmV4dCIsImdldEl0ZXJhdG9yIiwiSW4iLCJpdGVyIiwiQW4iLCJSbiIsImJuIiwiUG4iLCJ2biIsIlNuIiwiRG4iLCJDbiIsIk5uIiwia24iLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJ4biIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiJG4iLCJyZW1vdmVkVGFyZ2V0SWRzIiwiT24iLCJ0YXJnZXRJZCIsIk1uIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJGbiIsIlVuIiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkxuIiwiZXQiLCJCbiIsImN0IiwiZm9yRWFjaFRhcmdldCIsInJlbW92ZVRhcmdldCIsIm5ld05vRG9jdW1lbnQiLCJ5dCIsImZvckVhY2hXaGlsZSIsInB1cnBvc2UiLCJnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0IiwicW4iLCJhc2MiLCJkZXNjIiwiS24iLCJpbiIsImpuIiwiZGF0YWJhc2VJZCIsIlFuIiwiV24iLCJ0b1VpbnQ4QXJyYXkiLCJHbiIsInRvVGltZXN0YW1wIiwiem4iLCJmcm9tVGltZXN0YW1wIiwiSG4iLCJwcm9qZWN0SWQiLCJkYXRhYmFzZSIsIkpuIiwiUnMiLCJZbiIsIlhuIiwibnMiLCJabiIsImVzIiwic3MiLCJocyIsImRvY3VtZW50cyIsImxzIiwic3RydWN0dXJlZFF1ZXJ5IiwicGFyZW50IiwiY29sbGVjdGlvbklkIiwiYWxsRGVzY2VuZGFudHMiLCJ1bmFyeUZpbHRlciIsInBzIiwiZmllbGRGaWx0ZXIiLCJ5cyIsImNvbXBvc2l0ZUZpbHRlciIsIndoZXJlIiwiZGlyZWN0aW9uIiwiZ3MiLCJfcyIsImZzIiwidHMiLCJ3cyIsIlRzIiwibXMiLCJnZSIsIklzIiwiRXMiLCJyZWR1Y2UiLCJmaWVsZFBhdGgiLCJmcm9tU2VydmVyRm9ybWF0IiwiTmFOIiwiQXMiLCJmaWVsZFBhdGhzIiwiYnMiLCJ2cyIsIlBzIiwiRHMiLCJvd25lcklkIiwiYWxsb3dUYWJTeW5jaHJvbml6YXRpb24iLCJsZWFzZVRpbWVzdGFtcE1zIiwic3RvcmUiLCJDcyIsInVzZXJJZCIsImxhc3RBY2tub3dsZWRnZWRCYXRjaElkIiwibGFzdFN0cmVhbVRva2VuIiwia2V5UGF0aCIsIk5zIiwiYmF0Y2hJZCIsImxvY2FsV3JpdGVUaW1lTXMiLCJiYXNlTXV0YXRpb25zIiwibXV0YXRpb25zIiwidXNlck11dGF0aW9uc0luZGV4IiwidXNlck11dGF0aW9uc0tleVBhdGgiLCJrcyIsIlBMQUNFSE9MREVSIiwiT3MiLCJ1bmtub3duRG9jdW1lbnQiLCJub0RvY3VtZW50IiwicmVhZFRpbWUiLCJwYXJlbnRQYXRoIiwicmVhZFRpbWVJbmRleCIsInJlYWRUaW1lSW5kZXhQYXRoIiwiY29sbGVjdGlvblJlYWRUaW1lSW5kZXgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGgiLCJNcyIsImJ5dGVTaXplIiwiRnMiLCJjYW5vbmljYWxJZCIsImxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciIsImxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJxdWVyeSIsInF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCJMcyIsInNlcXVlbmNlTnVtYmVyIiwiZG9jdW1lbnRUYXJnZXRzSW5kZXgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiQnMiLCJoaWdoZXN0VGFyZ2V0SWQiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q291bnQiLCJVcyIsInFzIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsIktzIiwiYnVuZGxlSWQiLCJjcmVhdGVUaW1lIiwianMiLCJidW5kbGVkUXVlcnkiLCJ6cyIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJyZXN1bHQiLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiWnMiLCJvaSIsImxvY2FsV3JpdGVUaW1lIiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImlzVmFsaWREb2N1bWVudCIsImNpIiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJhaSIsInVpIiwicGkiLCJQZSIsIkFpIiwiUmkiLCJnZXRFbnRyaWVzIiwiaW5kZXgiLCJWaSIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiT2kiLCJhc3luYyIsIlVpIiwiemkiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJ1ciIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5IiwiZ2V0RW50cnkiLCJWbiIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsIkFlIiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkiLCJuZXdJbnZhbGlkRG9jdW1lbnQiLCJociIsImZyb21DYWNoZSIsImRvY0NoYW5nZXMiLCJkb2MiLCJsciIsImxhc3QiLCJmaXJzdCIsImhhc1BlbmRpbmdXcml0ZXMiLCJmciIsInBlcnNpc3RlbmNlIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFJlbW90ZURvY3VtZW50Q2FjaGUiLCJnZXRUYXJnZXRDYWNoZSIsImdldEluZGV4TWFuYWdlciIsImdldEJ1bmRsZUNhY2hlIiwicnVuVHJhbnNhY3Rpb24iLCJjb2xsZWN0Iiwid3IiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJyZW1vdmVkQmF0Y2hJZHMiLCJhZGRlZEJhdGNoSWRzIiwibXIiLCJnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwicHIiLCJnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCIsIkVyIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJJciIsImdldFRhcmdldERhdGEiLCJnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIlZyIiwiU3IiLCJEciIsImFkZFJlZmVyZW5jZSIsIm9zIiwicmVtb3ZlUmVmZXJlbmNlIiwiZm9yRWFjaEluUmFuZ2UiLCJmaXJzdEFmdGVyT3JFcXVhbCIsIkNyIiwiZHMiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsIlBPU0lUSVZFX0lORklOSVRZIiwibWFya1BvdGVudGlhbGx5T3JwaGFuZWQiLCJOciIsImRvY3MiLCJtdXRhYmxlQ29weSIsImtyIiwiY2hhbmdlcyIsImNoYW5nZXNBcHBsaWVkIiwiYXNzZXJ0Tm90QXBwbGllZCIsImdldEZyb21DYWNoZSIsImdldEFsbEZyb21DYWNoZSIsImFkZEVudHJ5IiwiZ2V0UmVhZFRpbWUiLCJyZW1vdmVFbnRyeSIsInhyIiwidXMiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsInJzIiwiY3MiLCJjb250YWluc0tleSIsIiRyIiwidG9LZXkiLCJPciIsIlZzIiwiU3MiLCJ0b1Byb21pc2UiLCJyYWlzZU9uQ29tbWl0dGVkRXZlbnQiLCJvciIsIm9uQ29tbWl0dGVkTGlzdGVuZXJzIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwiTXIiLCJ4cyIsInJlbW92ZVRhcmdldERhdGEiLCJuZXdDaGFuZ2VCdWZmZXIiLCJmcm9tUGF0aCIsIiRzIiwiUXIiLCJhY3RpdmVUYXJnZXRJZHMiLCJHciIsIlRpIiwib25saW5lU3RhdGVIYW5kbGVyIiwienIiLCJIciIsIklpIiwiYmkiLCJQaSIsInZpIiwiSnIiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiWXIiLCJTaSIsIkNpIiwia2kiLCJ4aSIsIlhyIiwiZGF0YWJhc2VJbmZvIiwic3NsIiwiRmkiLCJob3N0IiwiTGkiLCJxaSIsIktpIiwiQmkiLCJhcHBJZCIsImF1dG9EZXRlY3RMb25nUG9sbGluZyIsInVzZUZldGNoU3RyZWFtcyIsImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNcyIsImlzSUUiLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImlzQnJvd3NlckV4dGVuc2lvbiIsIk1pIiwiJGkiLCJ0byIsImVvIiwibm8iLCJ0aW1lcklkIiwiV2kiLCJHaSIsIkhpIiwiSmkiLCJZaSIsInRyIiwiZW5xdWV1ZUFmdGVyRGVsYXkiLCJza2lwRGVsYXkiLCJzbyIsIm5yIiwic3IiLCJpciIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwicnIiLCJjciIsImFyIiwiZHIiLCJ5ciIsIlhpIiwiaW52YWxpZGF0ZVRva2VuIiwiVHIiLCJOaSIsIkFyIiwiUnIiLCJEaSIsIm9uTWVzc2FnZSIsIlppIiwiZW5xdWV1ZUFuZEZvcmdldCIsImlvIiwiUWkiLCJ0YXJnZXRDaGFuZ2UiLCJ0YXJnZXRDaGFuZ2VUeXBlIiwiZG9jdW1lbnRDaGFuZ2UiLCJuZXdGb3VuZERvY3VtZW50IiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsImJyIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwiZ3IiLCJybyIsInN0cmVhbVRva2VuIiwid3JpdGVSZXN1bHRzIiwiY29tbWl0VGltZSIsIndyaXRlcyIsInVwZGF0ZSIsInVwZGF0ZU1hc2siLCJ2ZXJpZnkiLCJ1cGRhdGVUcmFuc2Zvcm1zIiwic2V0VG9TZXJ2ZXJWYWx1ZSIsImFwcGVuZE1pc3NpbmdFbGVtZW50cyIsInJlbW92ZUFsbEZyb21BcnJheSIsImluY3JlbWVudCIsImlzTm9uZSIsImN1cnJlbnREb2N1bWVudCIsIm9vIiwiYXV0aENyZWRlbnRpYWxzIiwiYXBwQ2hlY2tDcmVkZW50aWFscyIsImppIiwiY28iLCJhc3luY1F1ZXVlIiwiRnIiLCJMciIsIlVyIiwicXIiLCJqciIsImFvIiwibG9jYWxTdG9yZSIsImRhdGFzdG9yZSIsInJlbW90ZVN5bmNlciIsIldyIiwiRWkiLCJ5byIsImhvIiwidW8iLCJsbyIsImdvIiwibW8iLCIkbyIsIndvIiwiZm8iLCJfbyIsIl9yIiwiUHIiLCJ2ciIsIkJyIiwicG8iLCJUbyIsIkVvIiwiS3IiLCJJbyIsInJlamVjdExpc3RlbiIsIkFvIiwid2l0aFJlc3VtZVRva2VuIiwiYXBwbHlSZW1vdGVFdmVudCIsIlJvIiwiYm8iLCJPbyIsIlBvIiwidm8iLCJWbyIsIlNvIiwiRG8iLCJDbyIsIk5vIiwiYXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJrbyIsIm1uIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJzdG9wIiwiWnIiLCJNbyIsInRhcmdldFRpbWVNcyIsInJlbW92YWxDYWxsYmFjayIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwiRm8iLCJMbyIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiQm8iLCJVbyIsIm9sZERvY3MiLCJtdXRhdGVkS2V5cyIsInN5bmNTdGF0ZUNoYW5nZWQiLCJleGNsdWRlc01ldGFkYXRhQ2hhbmdlcyIsImVtcHR5U2V0IiwicW8iLCJsaXN0ZW5lcnMiLCJLbyIsInF1ZXJpZXMiLCJvbmxpbmVTdGF0ZSIsIldvIiwiem8iLCJHbyIsIm9uRXJyb3IiLCJIbyIsImluY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsInRyYWNrIiwic25hcHNob3QiLCJ2aWV3IiwicmVtb3RlU3RvcmUiLCJldmVudE1hbmFnZXIiLCJzaGFyZWRDbGllbnRTdGF0ZSIsIm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zIiwiam8iLCJRbyIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ4byIsImFsbG9jYXRlVGFyZ2V0SWQiLCJhZGRUYXJnZXREYXRhIiwiaXNQcmltYXJ5Q2xpZW50IiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJjbGVhclF1ZXJ5U3RhdGUiLCJ0cmFja1JlbW92YWxzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzIiwiYWRkTWF0Y2hpbmdLZXlzIiwid2l0aFNlcXVlbmNlTnVtYmVyIiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJ0b01pY3Jvc2Vjb25kcyIsInVwZGF0ZVRhcmdldERhdGEiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwiaXNOb0RvY3VtZW50Iiwic2V0VGFyZ2V0c01ldGFkYXRhIiwic2V0T25saW5lU3RhdGUiLCJ1cGRhdGVRdWVyeVN0YXRlIiwiYXBwbHlUb1JlbW90ZURvY3VtZW50IiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJoYW5kbGVVc2VyQ2hhbmdlIiwidW5pb25XaXRoIiwic3luY2hyb25pemVUYWJzIiwiSm8iLCJZbyIsImdjU2NoZWR1bGVyIiwiWG8iLCJabyIsImluaXRpYWxVc2VyIiwic2h1dGRvd24iLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIm9ic2VydmVyIiwibXV0ZWQiLCJhdXRoQ3JlZGVudGlhbExpc3RlbmVyIiwiaXNTaHV0dGluZ0Rvd24iLCJlbnRlclJlc3RyaWN0ZWRNb2RlIiwiZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQiLCJvbmxpbmVDb21wb25lbnRzIiwidGVybWluYXRlIiwib2ZmbGluZUNvbXBvbmVudHMiLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiZ2V0Q29uZmlndXJhdGlvbiIsImluaXRpYWxpemUiLCJzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIiLCJzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciIsIm9uTGlzdGVuIiwib25Vbmxpc3RlbiIsInNvdXJjZSIsInBlcnNpc3RlbmNlS2V5IiwiaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyIsImNhY2hlU2l6ZUJ5dGVzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsIl9hdXRoQ3JlZGVudGlhbHMiLCJfYXBwQ2hlY2tDcmVkZW50aWFscyIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl90ZXJtaW5hdGVUYXNrIiwiY2xpZW50Iiwic2Vzc2lvbkluZGV4IiwiaWFtVG9rZW4iLCJfdGVybWluYXRlIiwic2V0dGluZ3MiLCJjb252ZXJ0ZXIiLCJfa2V5IiwiZmlyZXN0b3JlIiwiX3F1ZXJ5IiwiX3BhdGgiLCJ2aXNpYmlsaXR5U3RhdGUiLCJlciIsImVucXVldWUiLCJzdGFjayIsImNyZWF0ZUFuZFNjaGVkdWxlIiwiX3F1ZXVlIiwiX2ZpcmVzdG9yZUNsaWVudCIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJfZnJlZXplU2V0dGluZ3MiLCJ0dSIsIl9pbnRlcm5hbFBhdGgiLCJudSIsIl9ieXRlU3RyaW5nIiwic3UiLCJfbWV0aG9kTmFtZSIsIml1IiwiaXNGaW5pdGUiLCJfbGF0IiwiX2xvbmciLCJydSIsIm91IiwiY3UiLCJhdSIsInV1IiwiU3UiLCJtZXRob2ROYW1lIiwiaHUiLCJsdSIsImZ1IiwibWVyZ2UiLCJtZXJnZUZpZWxkcyIsImJ1IiwiQXUiLCJQdSIsImNvbnRhaW5zIiwiRHUiLCJjb3ZlcnMiLCJkdSIsIkl1IiwiUnUiLCJfdG9GaWVsZFRyYW5zZm9ybSIsImZyb21EYXRlIiwiZ2V0UHJvdG90eXBlT2YiLCJWdSIsInZ1Iiwic2VhcmNoIiwiQ3UiLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsIk51IiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsImt1IiwieHUiLCIkdSIsIl9maXJlc3RvcmVJbXBsIiwibWV0YWRhdGEiLCJPdSIsInNlcnZlclRpbWVzdGFtcHMiLCJNdSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsIkZ1IiwiZmgiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydERvY3VtZW50S2V5IiwiX2giLCJCdSIsInBoIiwiVHUiLCJwdSIsIlJoIiwidG9NdXRhdGlvbiIsIlRoIiwibm9uZSIsIkVoIiwidG9GaXJlc3RvcmUiLCJjaCIsImFkZE11dGF0aW9uQmF0Y2giLCJhcHBseVRvTG9jYWxEb2N1bWVudFNldCIsImFkZFBlbmRpbmdNdXRhdGlvbiIsIlNES19WRVJTSU9OIiwiX3NldFNldHRpbmdzIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwibWVhc3VyZW1lbnRJZCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwiaW5pdGlhbGl6ZUFwcCIsImdldEFwcCIsImRhdGUiLCJkb2NSZWYiLCJ3YXNoaW5ndG9uUmVmIiwic3RvcmFnZSIsIkFwcEZpcmVTdG9yYWdlIiwiZGlzcGxheSIsIkRpc3BsYXkiLCJBcHBTdG9yYWdlIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0cyJdLCJtYXBwaW5ncyI6IjttQkFDQSxJQUFJQSxFQUFzQixHQ0QxQkEsRUFBb0JDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsR0FDZCxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxRQUxqQixHQ0NqQixJQUFNQyxFQUVHLENBQ0pDLGdCQUFpQixPQUNqQkMsTUFBTyxVQUpORixFQU1LLENBQ05DLGdCQUFpQixTQUNqQkMsTUFBTyxZQ1BuQixhQXFCSSxjQTRD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YUFrQ2IsT0EvQkksWUFBQVAsV0FBQSxzQkFDSXRDLFNBQVMwbkQsaUJBQWlCLFVBQVV2bEQsU0FBUSxTQUFDSSxHQUN6Q0EsRUFBUTlCLGlCQUFpQixTQUFTLFdBRTlCLElBQUlnRSxFQUFNLEVBQUt4QyxNQUFNQSxNQUFNeUMsTUFBSyxTQUFDaEUsR0FBYSxPQUFBQSxFQUFHSSxJQUFNeUIsRUFBUW5CLGNBQWNOLE1BRTdFLEVBQUt5bUQsUUFBUWpsRCxXQUFXQyxFQUFRbkIsY0FBY04sSUFDOUMsRUFBS3VtRCxRQUFRL2tELFdBQVdDLEVBQVFuQixjQUFjTixHQUFJMkQsVUFLOUQsWUFBQTFCLFFBQUEsV0FDSSxJQUFJNGtELEVBQVMzbkQsU0FBUzBuRCxpQkFBaUIsZ0JBRWpDMWtELEVBQU8sSUFBSXdCLEVBQUssQ0FBRXJCLE1BQU93a0QsRUFBTyxHQUFHMW1ELE1BQU9tQyxRQUFTdWtELEVBQU8sR0FBRzFtRCxNQUFPb0MsTUFBT3NrRCxFQUFPLEdBQUcxbUQsTUFBT21CLFVBQVUsRUFBTWtCLGFBQWMsSUFBSUMsS0FBUXpDLEdBQUl2QixLQUFLMEMsTUFBTUEsTUFBTW1ELE9BQVMsSUFDMUs3RixLQUFLMEMsTUFBTWMsUUFBUUMsR0FDbkJSLFFBQVFDLElBQUlPLEdBQ1p6RCxLQUFLZ29ELFFBQVF2bEQsWUFBWXpDLEtBQUswQyxPQUM5QjFDLEtBQUs4bkQsUUFBUXpqRCxTQUFTWixJQUcxQixZQUFBSCxXQUFBLHNCQUNJN0MsU0FBUzBuRCxpQkFBaUIsV0FBV3ZsRCxTQUFRLFNBQUNJLEdBQzFDQSxFQUFROUIsaUJBQWlCLFNBQVMsV0FDOUIsRUFBSzhtRCxRQUFRMWtELFdBQVdOLEVBQVFuQixjQUFjTixJQUM5QyxFQUFLdW1ELFFBQVF4a0QsV0FBV04sRUFBUW5CLGNBQWNOLElBQzlDMEIsUUFBUUMsYUFJeEIsRUF2RUEsSyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRTID0ge1xyXG4gICAgZGlzcGxheToge1xyXG4gICAgICAgIHBpbm5lZDoge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5nQ29sb3I6IFwiYmx1ZVwiLFxyXG4gICAgICAgICAgICBjbGFzczogXCJwaW5uZWRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdW5QaW5uZWQ6IHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZ0NvbG9yOiBcInllbGxvd1wiLFxyXG4gICAgICAgICAgICBjbGFzczogXCJ1bnBpbm5lZFwiXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG59IiwiaW1wb3J0IHsgYXBpQ2FsbCB9IGZyb20gJy4vYXBpQ2FsbHMnO1xyXG5pbXBvcnQgeyBEaXNwbGF5IH0gZnJvbSAnLi9kaXNwbGF5JztcclxuZXhwb3J0IGNsYXNzIElucHV0IHtcclxuICAgIC8vIHByaXZhdGUgd2hlcmU6IHN0cmluZztcclxuICAgIC8vIHByaXZhdGUgZGlzOiBEaXNwbGF5O1xyXG4gICAgLy8gY29uc3RydWN0b3Iod2hlcmU6IHN0cmluZykge1xyXG4gICAgLy8gICAgIHRoaXMud2hlcmUgPSB3aGVyZTtcclxuICAgIC8vICAgICB0aGlzLmRpcyA9IG5ldyBEaXNwbGF5KFwiZGlzcGxheVwiKTtcclxuXHJcbiAgICAvLyB9XHJcblxyXG5cclxuICAgIC8vIHB1YmxpYyByZW5kZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAvLyAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgLy8gICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZTogYW55KSA9PiB7XHJcblxyXG4gICAgLy8gICAgICAgICBhcGlDYWxsKGUudGFyZ2V0LnZhbHVlKVxyXG5cclxuXHJcbiAgICAvLyAgICAgfSlcclxuICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLndoZXJlKS5hcHBlbmRDaGlsZChlbGVtKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICB9XHJcbiAgICByZXR1cm5JbnB1dCgpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGlucHV0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBsZXQgZGl2VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XHJcbiAgICAgICAgbGV0IGlucHV0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgbGV0IGlucHV0Q29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBsZXQgaW5wdXRDb2xvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxyXG4gICAgICAgIGxldCB0b2dnbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXHJcbiAgICAgICAgbGV0IGFjY2VwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcclxuICAgICAgICBpbnB1dERpdi5jbGFzc05hbWUgPSBcImlucHV0XCJcclxuICAgICAgICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlbDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUlucHV0KGVsLnRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudClcclxuICAgICAgICB9KVxyXG4gICAgICAgIGFjY2VwdC50ZXh0Q29udGVudCA9IFwiQWRkIVwiXHJcbiAgICAgICAgZGl2VGl0bGUudGV4dENvbnRlbnQgPSBcIkNyZWF0ZSBBIE5vdGVcIlxyXG4gICAgICAgIHRvZ2dsZS50ZXh0Q29udGVudCA9IFwiPFwiXHJcbiAgICAgICAgYWNjZXB0LmlkID0gXCJhZGROb3RlXCJcclxuICAgICAgICBpbnB1dFRpdGxlLnBsYWNlaG9sZGVyID0gXCJUSVRMRSBPRiBBIE5PVEVcIlxyXG4gICAgICAgIGlucHV0Q29udGVudC5wbGFjZWhvbGRlciA9IFwiQ29udGVudCBPRiBBIE5PVEVcIlxyXG4gICAgICAgIGlucHV0Q29sb3Iuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNvbG9yXCIpXHJcbiAgICAgICAgaW5wdXRDb2xvci52YWx1ZSA9IFwiIzAwRkYwMFwiXHJcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQodG9nZ2xlKVxyXG4gICAgICAgIGlucHV0RGl2LmFwcGVuZENoaWxkKGRpdlRpdGxlKVxyXG4gICAgICAgIGlucHV0RGl2LmFwcGVuZENoaWxkKGlucHV0VGl0bGUpXHJcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQoaW5wdXRDb250ZW50KVxyXG4gICAgICAgIGlucHV0RGl2LmFwcGVuZENoaWxkKGlucHV0Q29sb3IpXHJcbiAgICAgICAgXHJcbiAgICAgXHJcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQoYWNjZXB0KVxyXG4gICAgICAgIHJldHVybiBpbnB1dERpdlxyXG4gICAgfVxyXG4gICAgdG9nZ2xlSW5wdXQoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChidXR0b24udGV4dENvbnRlbnQgPT09IFwiPFwiKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5wYXJlbnRFbGVtZW50LnN0eWxlLnJpZ2h0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiPlwiXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYnV0dG9uLnBhcmVudEVsZW1lbnQuc3R5bGUucmlnaHQgPSBcIi0zMDBweFwiO1xyXG4gICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIjxcIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuIFxyXG5cclxufSIsImltcG9ydCB7IE5vRW1pdE9uRXJyb3JzUGx1Z2luIH0gZnJvbSAnd2VicGFjayc7XHJcbmltcG9ydCB7IE5vdGUgfSBmcm9tICcuL2NsYXNzZXMvbm90ZSc7XHJcbmltcG9ydCB7IE5vdGVzIH0gZnJvbSAnLi9jbGFzc2VzL25vdGVzJztcclxuaW1wb3J0IHsgREVGQVVMVFMgfSBmcm9tICcuL2RlZmF1bHRzJztcclxuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICcuL2lucHV0JztcclxuaW1wb3J0IFV0aWwgZnJvbSAnLi91dGlscyc7XHJcbi8vICEgcmVtb3ZpbmcgaW1wbGVtZW50cyBJUmVuZGVyXHJcbmV4cG9ydCBjbGFzcyBEaXNwbGF5IHtcclxuXHJcbiAgICBwcml2YXRlIGxvYzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHBpbm5lZDogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgcHJpdmF0ZSB1blBpbm5lZDogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgcHJpdmF0ZSBpbnB1dDogSW5wdXQgPSBuZXcgSW5wdXQoKTtcclxuICAgIGNvbnN0cnVjdG9yKGxvYzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5sb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsb2MpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIHRoaXMubG9jLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiXHJcbiAgICAgICAgLy8gY3JlYXRlIDIgc2VjdGlvbnMgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVTZWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMubG9jLmFwcGVuZENoaWxkKHRoaXMuaW5wdXQucmV0dXJuSW5wdXQoKSk7XHJcblxyXG4gICAgfVxyXG4gICAgLy8gcHVibGljIHJlbmRlciA9ICgpOiB2b2lkID0+IHtcclxuICAgIC8vICAgICBjb25zb2xlLmxvZygncmVuZGVyaW5nJylcclxuICAgIC8vICAgICB0aGlzLmRpc3BsYXlQbGF0ZShKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2RhdGEnKSkpO1xyXG4gICAgLy8gfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVNlY3Rpb25zKCkge1xyXG5cclxuICAgICAgICB0aGlzLnBpbm5lZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBERUZBVUxUUy5kaXNwbGF5LnBpbm5lZC5iYWNrZ3JvdW5nQ29sb3I7XHJcbiAgICAgICAgdGhpcy5waW5uZWQuaWQgPSBERUZBVUxUUy5kaXNwbGF5LnBpbm5lZC5jbGFzc1xyXG4gICAgICAgIHRoaXMudW5QaW5uZWQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gREVGQVVMVFMuZGlzcGxheS51blBpbm5lZC5iYWNrZ3JvdW5nQ29sb3JcclxuICAgICAgICB0aGlzLnVuUGlubmVkLmlkID0gREVGQVVMVFMuZGlzcGxheS51blBpbm5lZC5jbGFzc1xyXG4gICAgICAgIHRoaXMubG9jLmFwcGVuZENoaWxkKHRoaXMucGlubmVkKVxyXG4gICAgICAgIHRoaXMubG9jLmFwcGVuZENoaWxkKHRoaXMudW5QaW5uZWQpXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyTm90ZXMobm90ZXM6IE5vdGVzKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaW5uZWRcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVucGlubmVkXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgbm90ZXMubm90ZXMuZm9yRWFjaCgoZWw6IE5vdGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsLmlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBpbm5lZC5hcHBlbmRDaGlsZChlbC5yZXR1cm5Ob3RlRGl2KCkpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuUGlubmVkLmFwcGVuZENoaWxkKGVsLnJldHVybk5vdGVEaXYoKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlTm90ZShlbGVtZW50OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50KVxyXG4gICAgICAgIGxldCBtb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudClcclxuXHJcblxyXG4gICAgICAgIGlmIChtb3ZlLmNsYXNzTmFtZSA9PSBcInVucGluXCIpIHtcclxuICAgICAgICAgICAgLy8gPyBpZHogZG8gcGlubmVkIGtsYXN5XHJcbiAgICAgICAgICAgIGxldCBtb3ZlVG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpbm5lZFwiKVxyXG4gICAgICAgICAgICBtb3ZlLmNsYXNzTmFtZSA9IFwicGluXCJcclxuICAgICAgICAgICAgbW92ZVRvLmluc2VydEJlZm9yZShtb3ZlLCBudWxsKVxyXG4gICAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlubmVkJykuYXBwZW5kQ2hpbGQobW92ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8/IGlkeiBkbyB1bnBpbm5lZCBrbGFzeVxyXG4gICAgICAgICAgICBsZXQgbW92ZVRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1bnBpbm5lZFwiKVxyXG4gICAgICAgICAgICBtb3ZlLmNsYXNzTmFtZSA9IFwidW5waW5cIlxyXG4gICAgICAgICAgICBtb3ZlVG8uaW5zZXJ0QmVmb3JlKG1vdmUsIG51bGwpXHJcblxyXG4gICAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW5waW5uZWQnKS5hcHBlbmRDaGlsZChtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2cobW92ZSwgbW92ZVRvKVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZU5vdGUoZWxlbWVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudCkucmVtb3ZlKClcclxuICAgIH1cclxuICAgIC8vIHB1YmxpYyByZW5kZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAvLyAgICAgbGV0IGVsZW1Ub1JlbW92ZUZyb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmxvYyk7XHJcbiAgICAvLyAgICAgbGV0IGVsZW1Ub1JlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMubG9jfSA+ZGl2IGApO1xyXG4gICAgLy8gICAgIGlmIChlbGVtVG9SZW1vdmUpIHtcclxuICAgIC8vICAgICAgICAgZWxlbVRvUmVtb3ZlRnJvbS5yZW1vdmVDaGlsZChlbGVtVG9SZW1vdmUpXHJcbiAgICAvLyAgICAgfVxyXG5cclxuICAgIC8vICAgICB0aGlzLmRpc3BsYXlQbGF0ZSgpO1xyXG4gICAgLy8gfVxyXG4gICAgLy8gcHVibGljIGRpc3BsYXlQbGF0ZSA9ICgpOiB2b2lkID0+IHtcclxuXHJcbiAgICAvLyAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlPy5nZXRJdGVtKCdkYXRhJykpO1xyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAvLyAgICAgaWYgKGRhdGEuY29kID09PSAyMDApIHtcclxuXHJcbiAgICAvLyAgICAgICAgIC8qIFxyXG4gICAgLy8gICAgICAgICAxLiBkaXNwbGF5IGRhdGUgYW5kIHRpbWUsXHJcbiAgICAvLyAgICAgICAgIDIuICBuYW1lIGFuZCBjaXR5IFxyXG4gICAgLy8gICAgICAgICAzLiAgdGVtcGVyYXR1cmUgaW4gYm90aCBmIGFuZCBjICAgICBcclxuICAgIC8vICAgICAgICAqL1xyXG4gICAgLy8gICAgICAgICBsZXQgbWFpbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgIC8vICAgICAgICAgbGV0IGFycnIgPSBbYE1pZWpzY293b8WbxIc6ICR7ZGF0YS5uYW1lfWAsIGBLcmFqOiAke2RhdGEuc3lzLmNvdW50cnl9YCwgYERhdGE6ICR7VXRpbC5EYXRlKCl9YCwgYFRlbXBlcmF0dXJhIHcgJHtTdHJpbmcuZnJvbUNoYXJDb2RlKDE3Nil9RjogJHtVdGlsLlRlbXBlcmF0dXJlSW5GKGRhdGEubWFpbi50ZW1wKX0gYCwgYFRlbXBlcmF0dXJhIHcgJHtTdHJpbmcuZnJvbUNoYXJDb2RlKDE3Nil9QzogJHtVdGlsLlRlbXBlcmF0dXJlSW5DKGRhdGEubWFpbi50ZW1wKX1gXVxyXG5cclxuICAgIC8vICAgICAgICAgYXJyci5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICAgbGV0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIC8vICAgICAgICAgICAgIGkuaW5uZXJIVE1MID0gZWxlbWVudDtcclxuICAgIC8vICAgICAgICAgICAgIG1haW5EaXYuYXBwZW5kQ2hpbGQoaSk7XHJcbiAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmxvYykuYXBwZW5kQ2hpbGQobWFpbkRpdik7XHJcbiAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgIC8vICAgICAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIC8vICAgICAgICAgZWxlbS5pbm5lckhUTUwgPSBcIlByb3N6xJkgcG9kYcSHIG9kcG93aWVkbmnEhSBsb2thbGl6YWNqxJlcIlxyXG4gICAgLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmxvYykuYXBwZW5kQ2hpbGQoZWxlbSk7XHJcbiAgICAvLyAgICAgfVxyXG5cclxuICAgIC8vIH1cclxuXHJcblxyXG5cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCB7IE5vdGUsIE5vdGVUeXBlIH0gZnJvbSBcIi4vbm90ZVwiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RlcyB7XHJcbiAgICBwdWJsaWMgbm90ZXM6IE5vdGVbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgYWRkTm90ZShub3RlOiBOb3RlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ub3Rlcy5wdXNoKG5vdGUpXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlTm90ZShpZDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5ub3Rlcy5maWx0ZXIoKGVsOiBOb3RlKSA9PiBlbC5pZCAhPSBpZClcclxuICAgIH1cclxuXHJcblxyXG5cclxufSIsIlxyXG5cclxuZXhwb3J0IHR5cGUgTm90ZVR5cGUgPSB7XHJcbiAgICBpZD86IG51bWJlciB8IHN0cmluZyxcclxuICAgIHRpdGxlOiBzdHJpbmcsXHJcbiAgICBjb250ZW50OiBzdHJpbmcsXHJcbiAgICBjb2xvcjogc3RyaW5nLFxyXG4gICAgaXNQaW5uZWQ6IGJvb2xlYW5cclxuICAgIGRhdGVDcmVhdGlvbj86IERhdGVcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5vdGUge1xyXG4gICAgcHVibGljIGlkOiBudW1iZXIgfCBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdGl0bGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBjb250ZW50OiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgY29sb3I6IHN0cmluZztcclxuICAgIHB1YmxpYyBpc1Bpbm5lZDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBkYXRlQ3JlYXRpb246IERhdGU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeyB0aXRsZSwgY29udGVudCwgY29sb3IsIGlzUGlubmVkLCBkYXRlQ3JlYXRpb24sIGlkIH06IE5vdGVUeXBlKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMuaXNQaW5uZWQgPSBpc1Bpbm5lZDtcclxuICAgICAgICB0aGlzLmRhdGVDcmVhdGlvbiA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuTm90ZURpdigpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgbGV0IG5vdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKVxyXG4gICAgICAgIGxldCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcclxuICAgICAgICBsZXQgcGluID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHBpbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcbiAgICAgICAgcGluLmNsYXNzTmFtZT1cInJlcGluXCJcclxuICAgICAgICBsZXQgcmVtb3ZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBub3RlLmlkID0gdGhpcy5pZC50b1N0cmluZygpO1xyXG4gICAgICAgIG5vdGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb2xvcjtcclxuICAgICAgICBub3RlLmNsYXNzTmFtZT1cIm5vdGVcIlxyXG5cclxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgY29udGVudC50ZXh0Q29udGVudCA9IHRoaXMuY29udGVudDtcclxuICAgICAgICBwaW4uY2hlY2tlZCA9IHRoaXMuaXNQaW5uZWQ7XHJcbiAgICAgICAgcmVtb3ZlLnRleHRDb250ZW50ID0gXCJyZW1vdmVcIjtcclxuICAgICAgICByZW1vdmUuY2xhc3NOYW1lID0gXCJyZW1vdmVcIlxyXG4gICAgICAgIG5vdGUuYXBwZW5kQ2hpbGQodGl0bGUpXHJcbiAgICAgICAgbm90ZS5hcHBlbmRDaGlsZChjb250ZW50KVxyXG4gICAgICAgIG5vdGUuYXBwZW5kQ2hpbGQocGluKVxyXG4gICAgICAgIG5vdGUuYXBwZW5kQ2hpbGQocmVtb3ZlKVxyXG4gICAgICAgIHJldHVybiBub3RlXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBTY3JpcHRFbGVtZW50S2luZCB9IGZyb20gXCJ0eXBlc2NyaXB0XCI7XHJcbmltcG9ydCB7IElBcHBTdG9yYWdlIH0gZnJvbSBcIi4uL2ludGVyZmFjZXNcIjtcclxuaW1wb3J0IHsgTm90ZSB9IGZyb20gXCIuL25vdGVcIjtcclxuaW1wb3J0IHsgTm90ZXMgfSBmcm9tIFwiLi9ub3Rlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcFN0b3JhZ2UgaW1wbGVtZW50cyBJQXBwU3RvcmFnZSB7XHJcblxyXG4gICAgcHVibGljIG5vdGVzOiBOb3RlcyA9IG5ldyBOb3RlcygpO1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuICAgIHNhdmVOb3RlKG5vdGU6IE5vdGUpIHtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oYE5vdGUke25vdGUuaWR9YCwgSlNPTi5zdHJpbmdpZnkobm90ZSkpXHJcbiAgICB9XHJcbiAgICByZWFkTm90ZXMoKTogTm90ZVtdIHtcclxuICAgICAgICBsZXQgdmFsdWVzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChrZXkpID0+IGtleS5zdGFydHNXaXRoKFwiTm90ZVwiKSlcclxuICAgICAgICAgICAgLm1hcCgoa2V5KSA9PiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVtrZXldKSk7XHJcbiAgICAgICAgdmFsdWVzLmZvckVhY2goKGVsOiBOb3RlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBub3RlID0gbmV3IE5vdGUoeyB0aXRsZTogZWwudGl0bGUsIGNvbnRlbnQ6IGVsLmNvbnRlbnQsIGNvbG9yOiBlbC5jb2xvciwgaXNQaW5uZWQ6IGVsLmlzUGlubmVkLCBkYXRlQ3JlYXRpb246IGVsLmRhdGVDcmVhdGlvbiwgaWQ6IGVsLmlkIH0pXHJcbiAgICAgICAgICAgIHRoaXMubm90ZXMuYWRkTm90ZShub3RlKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm90ZXMubm90ZXNcclxuICAgIH1cclxuICAgIGNoYW5nZU5vdGUoZWxlbWVudDogc3RyaW5nLCBub3RlOiBOb3RlKSB7XHJcbiAgICAgICAgbGV0IHJlcyA9IHRoaXMubm90ZXMubm90ZXMuZmluZCgoZWw6IE5vdGUpID0+IGVsLmlkID09PSArZWxlbWVudClcclxuICAgICAgICByZXMuaXNQaW5uZWQgPSAhcmVzLmlzUGlubmVkO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShgTm90ZSR7cmVzLmlkfWAsIEpTT04uc3RyaW5naWZ5KHJlcykpXHJcbiAgICB9XHJcbiAgICByZW1vdmVOb3RlKGVsZW1lbnQ6IHN0cmluZykge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGBOb3RlJHtlbGVtZW50fWApXHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGdldEdsb2JhbCgpIHtcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoZS5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcbiAgICBjb25zdCB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4vKipcclxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpIHtcclxuICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xyXG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XHJcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhxdWVyeVN0YXJ0LCBmcmFnbWVudFN0YXJ0ID4gMCA/IGZyYWdtZW50U3RhcnQgOiB1bmRlZmluZWQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaC5cclxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcclxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcclxuICogICBzaGExLnVwZGF0ZShieXRlcyk7XHJcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZTpcclxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcclxuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcclxuICpcclxuICovXHJcbi8qKlxyXG4gKiBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2ggY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGZpbmFsXHJcbiAqIEBzdHJ1Y3RcclxuICovXHJcbmNsYXNzIFNoYTEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29tcHJlc3NfKGJ1Ziwgb2Zmc2V0KSB7XHJcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIGxldCBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgbGV0IGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIGxldCBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBlID0gZDtcclxuICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGIgPSBhO1xyXG4gICAgICAgICAgICBhID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcclxuICAgICAgICBsZXQgaW5idWYgPSB0aGlzLmluYnVmXztcclxuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxyXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxyXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxyXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cclxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzLmNoYXJDb2RlQXQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgZGlnZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXHJcbiAqIFRoZW5hYmxlKS5cclxuICpcclxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAqICAgICBhcyBhIHByb3h5LlxyXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbmNsYXNzIE9ic2VydmVyUHJveHkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuZXh0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgY29tcGxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeWNocm9ub3VzbHkgdG8gdGhlaXJcclxuICAgICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cclxuICAgICAqL1xyXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICBsZXQgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHRoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoT2JzZXJ2ZXIoZm4pIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxyXG4gICAgICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIHNlbmRPbmUoaSwgZm4pIHtcclxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIHRoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZShlcnIpIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmZ1bmN0aW9uIGFzeW5jKGZuLCBvbkVycm9yKSB7XHJcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmogJiYgdHlwZW9mIG9ialttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBub29wKCkge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cclxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gbWF4Q291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50IHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxyXG4gKi9cclxuY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIGxldCBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcmV0dXJuIFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcclxuICAgIHJldHVybiBgJHtmbk5hbWV9IGZhaWxlZDogJHthcmdOYW1lfSBhcmd1bWVudCBgO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROYW1lLCBjb250ZXh0LCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xyXG4gICAgICAgICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cclxuICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gZXhwb25lbnRpYWxseSBpbmNyZWFzZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cclxuICogU2hvdWxkIGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxyXG4vKipcclxuICogVGhlIHBlcmNlbnRhZ2Ugb2YgYmFja29mZiB0aW1lIHRvIHJhbmRvbWl6ZSBieS5cclxuICogU2VlXHJcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xyXG4gKiBmb3IgY29udGV4dC5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcclxuLyoqXHJcbiAqIEJhc2VkIG9uIHRoZSBiYWNrb2ZmIG1ldGhvZCBmcm9tXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cclxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XHJcbiAgICAvLyBDYWxjdWxhdGVzIGFuIGV4cG9uZW50aWFsbHkgaW5jcmVhc2luZyB2YWx1ZS5cclxuICAgIC8vIERldmlhdGlvbjogY2FsY3VsYXRlcyB2YWx1ZSBmcm9tIGNvdW50IGFuZCBhIGNvbnN0YW50IGludGVydmFsLCBzbyB3ZSBvbmx5IG5lZWQgdG8gc2F2ZSB2YWx1ZVxyXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXHJcbiAgICBjb25zdCBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXHJcbiAgICAvLyBBIGZyYWN0aW9uIG9mIHRoZSBiYWNrb2ZmIHZhbHVlIHRvIGFkZC9zdWJ0cmFjdC5cclxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxyXG4gICAgUkFORE9NX0ZBQ1RPUiAqXHJcbiAgICAgICAgY3VyckJhc2VWYWx1ZSAqXHJcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXHJcbiAgICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxyXG4gICAgICAgIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqXHJcbiAgICAgICAgMik7XHJcbiAgICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXHJcbiAgICByZXR1cm4gTWF0aC5taW4oTUFYX1ZBTFVFX01JTExJUywgY3VyckJhc2VWYWx1ZSArIHJhbmRvbVdhaXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlIEVuZ2xpc2ggb3JkaW5hbCBsZXR0ZXJzIGFmdGVyIGEgbnVtYmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKGkpIHtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcclxuICAgIGlmIChjZW50ID49IDEwICYmIGNlbnQgPD0gMjApIHtcclxuICAgICAgICByZXR1cm4gJ3RoJztcclxuICAgIH1cclxuICAgIGNvbnN0IGRlYyA9IGkgJSAxMDtcclxuICAgIGlmIChkZWMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gJ3N0JztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gJ25kJztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDMpIHtcclxuICAgICAgICByZXR1cm4gJ3JkJztcclxuICAgIH1cclxuICAgIHJldHVybiAndGgnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZShzZXJ2aWNlKSB7XHJcbiAgICBpZiAoc2VydmljZSAmJiBzZXJ2aWNlLl9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENPTlNUQU5UUywgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSwgc2FmZUdldCwgc3RyaW5nTGVuZ3RoLCBzdHJpbmdUb0J5dGVBcnJheSwgc3RyaW5naWZ5LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBFcXVhbCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjcuMTRcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG5jb25zdCBuYW1lJG4gPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbSA9IFwiQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRsID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbmNvbnN0IG5hbWUkayA9IFwiQGZpcmViYXNlL2FwcC1jaGVjay1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRqID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrXCI7XG5cbmNvbnN0IG5hbWUkaSA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxuY29uc3QgbmFtZSRoID0gXCJAZmlyZWJhc2UvYXV0aC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRnID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxuY29uc3QgbmFtZSRmID0gXCJAZmlyZWJhc2UvZGF0YWJhc2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZSA9IFwiQGZpcmViYXNlL2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGQgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYyA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcblxuY29uc3QgbmFtZSRiID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRhID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nXCI7XG5cbmNvbnN0IG5hbWUkOSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ4ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2VcIjtcblxuY29uc3QgbmFtZSQ3ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNiA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWdcIjtcblxuY29uc3QgbmFtZSQ1ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ0ID0gXCJAZmlyZWJhc2Uvc3RvcmFnZVwiO1xuXG5jb25zdCBuYW1lJDMgPSBcIkBmaXJlYmFzZS9zdG9yYWdlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDIgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuY29uc3QgbmFtZSQxID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lID0gXCJmaXJlYmFzZVwiO1xuY29uc3QgdmVyc2lvbiA9IFwiOS42LjRcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBjb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNEZWxldGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlbGV0ZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaXNEZWxldGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBjaGVja0Rlc3Ryb3llZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgY3VycmVudCBTREsgdmVyc2lvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgU0RLX1ZFUlNJT04gPSB2ZXJzaW9uO1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKG9wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSwgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LCByYXdDb25maWcpO1xyXG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcclxuICAgICAgICAvLyByZXR1cm4gdGhlIGV4aXN0aW5nIGFwcCBpZiBvcHRpb25zIGFuZCBjb25maWcgZGVlcCBlcXVhbCB0aGUgb25lcyBpbiB0aGUgZXhpc3RpbmcgYXBwLlxyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgZXhpc3RpbmdBcHAub3B0aW9ucykgJiZcclxuICAgICAgICAgICAgZGVlcEVxdWFsKGNvbmZpZywgZXhpc3RpbmdBcHAuY29uZmlnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lKTtcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICBfYXBwcy5zZXQobmFtZSwgbmV3QXBwKTtcclxuICAgIHJldHVybiBuZXdBcHA7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogV2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC4gV2hlbiBhbiBhcHAgbmFtZVxyXG4gKiBpcyBwcm92aWRlZCwgdGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cclxuICpcclxuICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgYXBwIGJlaW5nIHJldHJpZXZlZCBoYXMgbm90IHlldCBiZWVuXHJcbiAqIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcclxuICogY29uc3QgYXBwID0gZ2V0QXBwKCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxyXG4gKiBjb25zdCBvdGhlckFwcCA9IGdldEFwcChcIm90aGVyQXBwXCIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuLiBJZiBubyBuYW1lIGlzXHJcbiAqICAgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGlzIGBcIltERUZBVUxUXVwiYC5cclxuICpcclxuICogQHJldHVybnMgVGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBhcHAgbmFtZS5cclxuICogICBJZiBubyBhcHAgbmFtZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHAobmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIE5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLykpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXHJcbiAqIHRoZSBGaXJlYmFzZSBTREsgbWFrZXMgYSBsb2dnaW5nIGNhbGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovKTtcclxuICAgIH1cclxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcclxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgdmFyaWFudCk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCAnZXNtMjAxNycpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBcHBcclxuICpcclxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYSgpe31mdW5jdGlvbiBiYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZWEpJiZhW2VhXXx8KGFbZWFdPSsrZmEpfXZhciBlYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGZhPTA7ZnVuY3Rpb24gaGEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBpYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9aGE6cT1pYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBqYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiB0KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLlo9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLlZiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGthPTAsbGE9e307di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5uYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5NKCksMCE9a2EpKXt2YXIgYT1kYSh0aGlzKTtkZWxldGUgbGFbYV07fX07di5wcm90b3R5cGUuTT1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbmE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2NvbnN0IGQ9YS5sZW5ndGgsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG9hKGEpe2E6e3ZhciBiPXBhO2NvbnN0IGM9YS5sZW5ndGgsZD1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHNhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgdGE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHcoYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiB1YShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgeDthOnt2YXIgdmE9bC5uYXZpZ2F0b3I7aWYodmEpe3ZhciB3YT12YS51c2VyQWdlbnQ7aWYod2Epe3g9d2E7YnJlYWsgYX19eD1cIlwiO31mdW5jdGlvbiB4YShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHlhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHphPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIEFhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHphLmxlbmd0aDtmKyspYz16YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBDYShhKXtDYVtcIiBcIl0oYSk7cmV0dXJuIGF9Q2FbXCIgXCJdPWFhO2Z1bmN0aW9uIEZhKGEpe3ZhciBiPUdhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiw5KT9iWzldOmJbOV09YSg5KX12YXIgSGE9dyh4LFwiT3BlcmFcIikseT13KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpLElhPXcoeCxcIkVkZ2VcIiksSmE9SWF8fHksS2E9dyh4LFwiR2Vja29cIikmJiEodyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpKSYmISh3KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpKSYmIXcoeCxcIkVkZ2VcIiksTGE9dyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpO2Z1bmN0aW9uIE1hKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIE5hO1xuYTp7dmFyIE9hPVwiXCIsUGE9ZnVuY3Rpb24oKXt2YXIgYT14O2lmKEthKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoSWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKExhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKEhhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO1BhJiYoT2E9UGE/UGFbMV06XCJcIik7aWYoeSl7dmFyIFFhPU1hKCk7aWYobnVsbCE9UWEmJlFhPnBhcnNlRmxvYXQoT2EpKXtOYT1TdHJpbmcoUWEpO2JyZWFrIGF9fU5hPU9hO312YXIgR2E9e307XG5mdW5jdGlvbiBSYSgpe3JldHVybiBGYShmdW5jdGlvbigpe2xldCBhPTA7Y29uc3QgYj10YShTdHJpbmcoTmEpKS5zcGxpdChcIi5cIiksYz10YShcIjlcIikuc3BsaXQoXCIuXCIpLGQ9TWF0aC5tYXgoYi5sZW5ndGgsYy5sZW5ndGgpO2ZvcihsZXQgaD0wOzA9PWEmJmg8ZDtoKyspe3ZhciBlPWJbaF18fFwiXCIsZj1jW2hdfHxcIlwiO2Rve2U9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtmPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGYpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09ZVswXS5sZW5ndGgmJjA9PWZbMF0ubGVuZ3RoKWJyZWFrO2E9dWEoMD09ZVsxXS5sZW5ndGg/MDpwYXJzZUludChlWzFdLDEwKSwwPT1mWzFdLmxlbmd0aD8wOnBhcnNlSW50KGZbMV0sMTApKXx8dWEoMD09ZVsyXS5sZW5ndGgsMD09ZlsyXS5sZW5ndGgpfHx1YShlWzJdLGZbMl0pO2U9ZVszXTtmPWZbM107fXdoaWxlKDA9PWEpfXJldHVybiAwPD1hfSl9dmFyIFNhO1xuaWYobC5kb2N1bWVudCYmeSl7dmFyIFRhPU1hKCk7U2E9VGE/VGE6cGFyc2VJbnQoTmEsMTApfHx2b2lkIDA7fWVsc2UgU2E9dm9pZCAwO3ZhciBVYT1TYTt2YXIgVmE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB6KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO316LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307ZnVuY3Rpb24gQShhLGIpe3ouY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihLYSl7YTp7dHJ5e0NhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpXYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLlouaC5jYWxsKHRoaXMpO319dChBLHopO3ZhciBXYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS5aLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBCPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgWGE9MDtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaWE9ZTt0aGlzLmtleT0rK1hhO3RoaXMuY2E9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gWmEoYSl7YS5jYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5pYT1udWxsO31mdW5jdGlvbiAkYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9JGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPWFiKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBZYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBiYihhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9bWEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihaYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBhYihhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5jYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaWE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBjYj1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLGRiPXt9O2Z1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBnYihhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1oYihjKTtyZXR1cm4gYSYmYVtCXT9hLk4oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmliKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1qYihhKTtufHwoYVtjYl09bj1uZXcgJGEoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9a2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVZhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGxiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBrYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfXZhciBiPW1iO3JldHVybiBhfWZ1bmN0aW9uIGdiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZ2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyluYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz1oYihjKSxhJiZhW0JdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9YWIoZixjLGQsZSksLTE8YyYmKFphKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1qYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9YWIoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmb2IoYykpO31cbmZ1bmN0aW9uIG9iKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuY2Epe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pYmIoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQobGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1qYihiKSk/KGJiKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW2NiXT1udWxsKSk6WmEoYSk7fX19ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEgaW4gZGI/ZGJbYV06ZGJbYV09XCJvblwiK2F9ZnVuY3Rpb24gbWIoYSxiKXtpZihhLmNhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmlhfHxhLnNyYzthLmZhJiZvYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGpiKGEpe2E9YVtjYl07cmV0dXJuIGEgaW5zdGFuY2VvZiAkYT9hOm51bGx9dmFyIHBiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBoYihhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW3BiXXx8KGFbcGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbcGJdfWZ1bmN0aW9uIEMoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyAkYSh0aGlzKTt0aGlzLlA9dGhpczt0aGlzLkk9bnVsbDt9dChDLHYpO0MucHJvdG90eXBlW0JdPSEwO0MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7bmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gRChhLGIpe3ZhciBjLGQ9YS5JO2lmKGQpZm9yKGM9W107ZDtkPWQuSSljLnB1c2goZCk7YT1hLlA7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHooYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB6KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgeihkLGEpO0FhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1xYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1xYihoLGQsITAsYikmJmU7ZT1xYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1xYihoLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0MuWi5NLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkk9bnVsbDt9O0MucHJvdG90eXBlLk49ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qy5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIHFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguY2EmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix1PWguaWF8fGguc3JjO2guZmEmJmJiKGEuaSxoKTtlPSExIT09bi5jYWxsKHUsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgcmI9bC5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBzYigpe3ZhciBhPXRiO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgdWJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9dmIuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciB2Yj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fSgoKT0+bmV3IHdiLGE9PmEucmVzZXQoKSk7XG5jbGFzcyB3Yntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiB5YihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHpiKGEsYil7QWJ8fEJiKCk7Q2J8fChBYigpLENiPSEwKTt0Yi5hZGQoYSxiKTt9dmFyIEFiO2Z1bmN0aW9uIEJiKCl7dmFyIGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtBYj1mdW5jdGlvbigpe2EudGhlbihEYik7fTt9dmFyIENiPSExLHRiPW5ldyB1YjtmdW5jdGlvbiBEYigpe2Zvcih2YXIgYTthPXNiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7eWIoYyk7fXZhciBiPXZiO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fUNiPSExO31mdW5jdGlvbiBFYihhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLmtiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO310KEViLEMpO2s9RWIucHJvdG90eXBlO2suZGE9ITE7ay5TPW51bGw7ay5rYj1mdW5jdGlvbigpe2lmKHRoaXMuZGEpe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuUyYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSx0aGlzLlM9bnVsbCksRCh0aGlzLFwidGlja1wiKSx0aGlzLmRhJiYoRmIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZGE9ITA7dGhpcy5TfHwodGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24gRmIoYSl7YS5kYT0hMTthLlMmJihhLmcuY2xlYXJUaW1lb3V0KGEuUyksYS5TPW51bGwpO31rLk09ZnVuY3Rpb24oKXtFYi5aLk0uY2FsbCh0aGlzKTtGYih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24gR2IoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBIYihhKXthLmc9R2IoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsSGIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgSWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOkhiKHRoaXMpO31NKCl7c3VwZXIuTSgpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEUoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9dChFLHYpO3ZhciBKYj1bXTtmdW5jdGlvbiBLYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEpiWzBdPWMudG9TdHJpbmcoKSksYz1KYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWZiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gTGIoYSl7eGEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZvYihiKTt9LGEpO2EuZz17fTt9RS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0UuWi5NLmNhbGwodGhpcyk7TGIodGhpcyk7fTtFLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIE1iKCl7dGhpcy5nPSEwO31NYi5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHU9MDt1PG4ubGVuZ3RoO3UrKyl7dmFyIG09blt1XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHI9bVswXTttPW1bMV07dmFyIEc9ci5zcGxpdChcIl9cIik7aD0yPD1HLmxlbmd0aCYmXCJ0eXBlXCI9PUdbMV0/aCsocitcIj1cIittK1wiJlwiKTpoKyhyK1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIE9iKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBGKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK1BiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBRYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9TWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gUGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIHJiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgSD17fSxSYj1udWxsO2Z1bmN0aW9uIFNiKCl7cmV0dXJuIFJiPVJifHxuZXcgQ31ILk1hPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gVGIoYSl7ei5jYWxsKHRoaXMsSC5NYSxhKTt9dChUYix6KTtmdW5jdGlvbiBJKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFRiKGIsYSkpO31ILlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBVYihhLGIpe3ouY2FsbCh0aGlzLEguU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9dChVYix6KTtmdW5jdGlvbiBKKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFViKGIsYSkpO31ILk5hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBWYihhLGIpe3ouY2FsbCh0aGlzLEguTmEsYSk7dGhpcy5zaXplPWI7fXQoVmIseik7XG5mdW5jdGlvbiBLKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBXYj17Tk9fRVJST1I6MCxsYjoxLHliOjIseGI6MyxzYjo0LHdiOjUsemI6NixKYTo3LFRJTUVPVVQ6OCxDYjo5fTt2YXIgWGI9e3FiOlwiY29tcGxldGVcIixNYjpcInN1Y2Nlc3NcIixLYTpcImVycm9yXCIsSmE6XCJhYm9ydFwiLEViOlwicmVhZHlcIixGYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEFiOlwiaW5jcmVtZW50YWxkYXRhXCIsRGI6XCJwcm9ncmVzc1wiLHRiOlwiZG93bmxvYWRwcm9ncmVzc1wiLFViOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWWIoKXt9WWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBaYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiAkYigpe312YXIgTD17T1BFTjpcImFcIixwYjpcImJcIixLYTpcImNcIixCYjpcImRcIn07ZnVuY3Rpb24gYWMoKXt6LmNhbGwodGhpcyxcImRcIik7fXQoYWMseik7ZnVuY3Rpb24gYmMoKXt6LmNhbGwodGhpcyxcImNcIik7fXQoYmMseik7dmFyIGNjO2Z1bmN0aW9uIGRjKCl7fXQoZGMsWWIpO2RjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07ZGMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319O2NjPW5ldyBkYztmdW5jdGlvbiBNKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuWD1kfHwxO3RoaXMuVj1uZXcgRSh0aGlzKTt0aGlzLlA9ZWM7YT1KYT8xMjU6dm9pZCAwO3RoaXMuVz1uZXcgRWIoYSk7dGhpcy5IPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuSz10aGlzLkY9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRD1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5OPS0xO3RoaXMuST0hMTt0aGlzLk89MDt0aGlzLkw9bnVsbDt0aGlzLmFhPXRoaXMuSj10aGlzLiQ9dGhpcy5VPSExO3RoaXMuaD1uZXcgZmM7fWZ1bmN0aW9uIGZjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgZWM9NDVFMyxnYz17fSxoYz17fTtrPU0ucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuSz0xO2Eudj1qYyhOKGIpKTthLnM9YzthLlU9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkY9RGF0ZS5ub3coKTtsYyhhKTthLkE9TihhLnYpO3ZhciBjPWEuQSxkPWEuWDtBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5oLFwidFwiLGQpO2EuQz0wO2M9YS5sLkg7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5MPW5ldyBJYihxKGEuSWEsYSxhLmcpLGEuTykpO0tiKGEuVixhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5nYik7Yj1hLkg/eWEoYS5IKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5lYShhLkEsYS51LG51bGwsYikpO0koMSk7TmIoYS5qLGEudSxhLkEsYS5tLGEuWCxhLnMpO31cbmsuZ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTDtiJiYzPT1PKGEpP2IubCgpOnRoaXMuSWEoYSk7fTtcbmsuSWE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCByPU8odGhpcy5nKTt2YXIgYj10aGlzLmcuRGEoKTtjb25zdCBHPXRoaXMuZy5iYSgpO2lmKCEoMz5yKSYmKDMhPXJ8fEphfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmdhKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5JfHw0IT1yfHw3PT1ifHwoOD09Ynx8MD49Rz9JKDMpOkkoMikpO3BjKHRoaXMpO3ZhciBjPXRoaXMuZy5iYSgpO3RoaXMuTj1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09Tyh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7UCh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmdhKCk7dGhpcy5pPTIwMD09YztPYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5YLHIsYyk7aWYodGhpcy5pKXtpZih0aGlzLiQmJiF0aGlzLkope2I6e2lmKHRoaXMuZyl7dmFyIG4sdT10aGlzLmc7aWYoKG49dS5nP3UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYhc2Eobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRih0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5KPSEwLHNjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0ooMTIpO1AodGhpcyk7cmModGhpcyk7YnJlYWsgYX19dGhpcy5VPyh0Yyh0aGlzLHIsaCksSmEmJnRoaXMuaSYmMz09ciYmKEtiKHRoaXMuVix0aGlzLlcsXCJ0aWNrXCIsdGhpcy5mYiksXG50aGlzLlcuc3RhcnQoKSkpOihGKHRoaXMuaix0aGlzLm0saCxudWxsKSxzYyh0aGlzLGgpKTs0PT1yJiZQKHRoaXMpO3RoaXMuaSYmIXRoaXMuSSYmKDQ9PXI/dWModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsbGModGhpcykpKTt9ZWxzZSA0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEooMTIpKToodGhpcy5vPTAsSigxMykpLFAodGhpcykscmModGhpcyk7fX19Y2F0Y2gocil7fWZpbmFsbHl7fX07ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuSyYmYS5sLkJhOiExfVxuZnVuY3Rpb24gdGMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5JJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dmMoYSxjKSxlPT1oYyl7ND09YiYmKGEubz00LEooMTQpLGQ9ITEpO0YoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09Z2Mpe2Eubz00O0ooMTUpO0YoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBGKGEuaixhLm0sZSxudWxsKSxzYyhhLGUpO3FjKGEpJiZlIT1oYyYmZSE9Z2MmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxKKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYWEmJihhLmFhPSEwLGI9YS5sLGIuZz09YSYmYi4kJiYhYi5MJiYoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHdjKGIpLGIuTD0hMCxKKDExKSkpOihGKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksUChhKSxyYyhhKSk7fWsuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPU8odGhpcy5nKSxiPXRoaXMuZy5nYSgpO3RoaXMuQzxiLmxlbmd0aCYmKHBjKHRoaXMpLHRjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmxjKHRoaXMpKTt9fTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBoYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZ2M7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGhjO2I9Yi5zdWJzdHIoZCxjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5JPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBsYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7eGMoYSxhLlApO31cbmZ1bmN0aW9uIHhjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPUsocShhLmViLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5lYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oUWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5LJiYoSSgzKSxKKDE3KSksUCh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuR3x8YS5JfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIFAoYSl7cGMoYSk7dmFyIGI9YS5MO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubmEmJmIubmEoKTthLkw9bnVsbDtGYihhLlcpO0xiKGEuVik7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIubmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuRyYmKGMuZz09YXx8eWMoYy5pLGEpKSlpZihjLkk9YS5OLCFhLkomJnljKGMuaSxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5DYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpemMoYyksQWMoYyk7ZWxzZSBicmVhayBhO0JjKGMpO0ooMTgpO319ZWxzZSBjLnRhPWVbMV0sMDxjLnRhLWMuVSYmMzc1MDA+ZVsyXSYmYy5OJiYwPT1jLkEmJiFjLnYmJihjLnY9SyhxKGMuYWIsYyksNkUzKSk7aWYoMT49Q2MoYy5pKSYmYy5rYSl7dHJ5e2Mua2EoKTt9Y2F0Y2gobSl7fWMua2E9dm9pZCAwO319ZWxzZSBRKGMsMTEpO31lbHNlIGlmKChhLkp8fGMuZz09YSkmJnpjKGMpLCFzYShiKSlmb3IoZT1jLkNhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO1xuYy5VPW1bMF07bT1tWzFdO2lmKDI9PWMuRylpZihcImNcIj09bVswXSl7Yy5KPW1bMV07Yy5sYT1tWzJdO2NvbnN0IHI9bVszXTtudWxsIT1yJiYoYy5tYT1yLGMuaC5pbmZvKFwiVkVSPVwiK2MubWEpKTtjb25zdCBHPW1bNF07bnVsbCE9RyYmKGMuemE9RyxjLmguaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IERhPW1bNV07bnVsbCE9RGEmJlwibnVtYmVyXCI9PT10eXBlb2YgRGEmJjA8RGEmJihkPTEuNSpEYSxjLks9ZCxjLmguaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBjYT1hLmc7aWYoY2Epe2NvbnN0IEVhPWNhLmc/Y2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihFYSl7dmFyIGY9ZC5pOyFmLmcmJih3KEVhLFwic3BkeVwiKXx8dyhFYSxcInF1aWNcIil8fHcoRWEsXCJoMlwiKSkmJihmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKERjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IHhiPVxuY2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDt4YiYmKGQuc2E9eGIsUihkLkYsZC5ELHhiKSk7fX1jLkc9MztjLmomJmMuai54YSgpO2MuJCYmKGMuTz1EYXRlLm5vdygpLWEuRixjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuTytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLm9hPUVjKGQsZC5IP2QubGE6bnVsbCxkLlcpO2lmKGguSil7RmMoZC5pLGgpO3ZhciBuPWgsdT1kLks7dSYmbi5zZXRUaW1lb3V0KHUpO24uQiYmKHBjKG4pLGxjKG4pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMubC5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fFEoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/UShjLDcpOkljKGMpOlwibm9vcFwiIT1tWzBdJiZjLmomJmMuai53YShtKSxjLkE9MCk7fUkoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSmMoYSl7aWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpcmV0dXJuIGEuUigpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihiYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKW5hKGEsYix2b2lkIDApO2Vsc2Uge2lmKGEuVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5UKXZhciBjPWEuVCgpO2Vsc2UgaWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpYz12b2lkIDA7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPUpjKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmg9e307dGhpcy5nPVtdO3RoaXMuaT0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFMpZm9yKGM9YS5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31rPVMucHJvdG90eXBlO2suUj1mdW5jdGlvbigpe0xjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmcubGVuZ3RoO2IrKylhLnB1c2godGhpcy5oW3RoaXMuZ1tiXV0pO3JldHVybiBhfTtrLlQ9ZnVuY3Rpb24oKXtMYyh0aGlzKTtyZXR1cm4gdGhpcy5nLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIExjKGEpe2lmKGEuaSE9YS5nLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5nLmxlbmd0aDspe3ZhciBkPWEuZ1tiXTtUKGEuaCxkKSYmKGEuZ1tjKytdPWQpO2IrKzt9YS5nLmxlbmd0aD1jO31pZihhLmkhPWEuZy5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuZy5sZW5ndGg7KWQ9YS5nW2JdLFQoZSxkKXx8KGEuZ1tjKytdPWQsZVtkXT0xKSxiKys7YS5nLmxlbmd0aD1jO319ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLmgsYSk/dGhpcy5oW2FdOmJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7VCh0aGlzLmgsYSl8fCh0aGlzLmkrKyx0aGlzLmcucHVzaChhKSk7dGhpcy5oW2FdPWI7fTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O1xuZnVuY3Rpb24gVChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgTWM9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gVShhLGIpe3RoaXMuaT10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuZz0hMTtpZihhIGluc3RhbmNlb2YgVSl7dGhpcy5nPXZvaWQgMCE9PWI/YjphLmc7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7UGModGhpcyxhLmkpO1FjKHRoaXMsYS5tKTt0aGlzLmw9YS5sO2I9YS5oO3ZhciBjPW5ldyBSYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgUyhiLmcpLGMuaD1iLmgpO1NjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5nPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1UYyhjWzJdfHxcIlwiKSxQYyh0aGlzLGNbM118fFwiXCIsITApLFFjKHRoaXMsY1s0XSksdGhpcy5sPVRjKGNbNV18fFwiXCIsITApLFNjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5vPVRjKGNbN118fFwiXCIpKToodGhpcy5nPSEhYix0aGlzLmg9bmV3IFJjKG51bGwsdGhpcy5nKSk7fVxuVS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goVWMoYixWYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuaTtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goVWMoYixWYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuaSYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChVYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9XYzpYYywhMCkpOyhjPXRoaXMuaC50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixVYyhjLFljKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFUoYSl9XG5mdW5jdGlvbiBPYyhhLGIsYyl7YS5qPWM/VGMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIFBjKGEsYixjKXthLmk9Yz9UYyhiLCEwKTpiO31mdW5jdGlvbiBRYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFNjKGEsYixjKXtiIGluc3RhbmNlb2YgUmM/KGEuaD1iLFpjKGEuaCxhLmcpKTooY3x8KGI9VWMoYiwkYykpLGEuaD1uZXcgUmMoYixhLmcpKTt9ZnVuY3Rpb24gUihhLGIsYyl7YS5oLnNldChiLGMpO31mdW5jdGlvbiBqYyhhKXtSKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBhZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFU/TihhKTpuZXcgVShhLHZvaWQgMCl9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9bmV3IFUobnVsbCx2b2lkIDApO2EmJk9jKGUsYSk7YiYmUGMoZSxiKTtjJiZRYyhlLGMpO2QmJihlLmw9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFVjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsY2QpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIGNkKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9XG52YXIgVmM9L1sjXFwvXFw/QF0vZyxYYz0vWyNcXD86XS9nLFdjPS9bI1xcP10vZywkYz0vWyNcXD9AXS9nLFljPS8jL2c7ZnVuY3Rpb24gUmMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9ZnVuY3Rpb24gVihhKXthLmd8fChhLmc9bmV3IFMsYS5oPTAsYS5pJiZOYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1SYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O1xuZnVuY3Rpb24gZGQoYSxiKXtWKGEpO2I9VyhhLGIpO1QoYS5nLmgsYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGE9YS5nLFQoYS5oLGIpJiYoZGVsZXRlIGEuaFtiXSxhLmktLSxhLmcubGVuZ3RoPjIqYS5pJiZMYyhhKSkpO31mdW5jdGlvbiBlZChhLGIpe1YoYSk7Yj1XKGEsYik7cmV0dXJuIFQoYS5nLmgsYil9ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe25hKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2suVD1mdW5jdGlvbigpe1YodGhpcyk7Zm9yKHZhciBhPXRoaXMuZy5SKCksYj10aGlzLmcuVCgpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O1xuay5SPWZ1bmN0aW9uKGEpe1YodGhpcyk7dmFyIGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWVkKHRoaXMsYSkmJihiPXFhKGIsdGhpcy5nLmdldChXKHRoaXMsYSkpKSk7ZWxzZSB7YT10aGlzLmcuUigpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9cWEoYixhW2NdKTt9cmV0dXJuIGJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmk9bnVsbDthPVcodGhpcyxhKTtlZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5SKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBtYyhhLGIsYyl7ZGQoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChXKGEsYikscmEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuZy5UKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlIoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBXKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIFpjKGEsYil7YiYmIWEuaiYmKFYoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKGRkKHRoaXMsZCksbWModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGZkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7fX07ZnVuY3Rpb24gZ2QoYSl7dGhpcy5sPWF8fGhkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuRWEmJmwuZy5FYSgpJiZsLmcuRWEoKS5aYik7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgaGQ9MTA7ZnVuY3Rpb24gaWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBDYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geWMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBEYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEZjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31nZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWpkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gamQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIHJhKGEuaSl9ZnVuY3Rpb24ga2QoKXt9a2QucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2tkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24gbGQoKXt0aGlzLmc9bmV3IGtkO31mdW5jdGlvbiBtZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1yYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG5kKGEsYil7Y29uc3QgYz1uZXcgTWI7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG9kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIHBkKGEpe3RoaXMubD1hLiRifHxudWxsO3RoaXMuaj1hLmlifHwhMTt9dChwZCxZYik7cGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFkKHRoaXMubCx0aGlzLmopfTtwZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBxZChhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkQ9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1yZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXQocWQsQyk7dmFyIHJkPTA7az1xZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPXJkKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7c2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkR8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLlZhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHRkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9cmQ7fTtcbmsuVmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixzZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsc2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5UYS5iaW5kKHRoaXMpLHRoaXMuaGEuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7dWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlVhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHVkKGEpe2Euai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7fWsuU2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT90ZCh0aGlzKTpzZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnVkKHRoaXMpO319O1xuay5VYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEsdGQodGhpcykpO307ay5UYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEsdGQodGhpcykpO307ay5oYT1mdW5jdGlvbigpe3RoaXMuZyYmdGQodGhpcyk7fTtmdW5jdGlvbiB0ZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtzZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIHNkKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHZkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFM7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkg9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5GPXRoaXMudj10aGlzLkQ9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5KPXdkO3RoaXMuSz10aGlzLkw9ITE7fXQoWCxDKTt2YXIgd2Q9XCJcIix4ZD0vXmh0dHBzPyQvaSx5ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1YLnByb3RvdHlwZTtcbmsuZWE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSCtcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkg9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkQ9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTpjYy5nKCk7dGhpcy5DPXRoaXMudT9aYih0aGlzLnUpOlpiKGNjKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5GYSx0aGlzKTt0cnl7dGhpcy5GPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjb25zdCBlPW5ldyBTKHRoaXMuaGVhZGVycyk7ZCYmS2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1vYShlLlQoKSk7Yz1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTtcbiEoMDw9bWEoeWQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSiYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5KKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5MJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz10aGlzLkwpO3RyeXtBZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLks9QmQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy5wYSx0aGlzKSk6dGhpcy5BPUdiKHRoaXMucGEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt6ZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gQmQoYSl7cmV0dXJuIHkmJlJhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBwYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWsucGE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEQodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB6ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTtDZChhKTtEZChhKTt9ZnVuY3Rpb24gQ2QoYSl7YS5EfHwoYS5EPSEwLEQoYSxcImNvbXBsZXRlXCIpLEQoYSxcImVycm9yXCIpKTt9XG5rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsRCh0aGlzLFwiY29tcGxldGVcIiksRCh0aGlzLFwiYWJvcnRcIiksRGQodGhpcykpO307ay5NPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLERkKHRoaXMsITApKTtYLlouTS5jYWxsKHRoaXMpO307ay5GYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuRnx8dGhpcy52fHx0aGlzLmw/RWQodGhpcyk6dGhpcy5jYigpKTt9O2suY2I9ZnVuY3Rpb24oKXtFZCh0aGlzKTt9O1xuZnVuY3Rpb24gRWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPU8oYSl8fDIhPWEuYmEoKSkpaWYoYS52JiY0PT1PKGEpKUdiKGEuRmEsMCxhKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5oPSExO3RyeXtjb25zdCBuPWEuYmEoKTthOnN3aXRjaChuKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09bil7dmFyIGU9U3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdfHxudWxsO2lmKCFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbil7dmFyIGY9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2U9Zi5zdWJzdHIoMCxmLmxlbmd0aC0xKTt9ZD0heGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUQoYSxcImNvbXBsZXRlXCIpLEQoYSxcblwic3VjY2Vzc1wiKTtlbHNlIHthLm09Njt0cnl7dmFyIGg9MjxPKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKHUpe2g9XCJcIjt9YS5qPWgrXCIgW1wiK2EuYmEoKStcIl1cIjtDZChhKTt9fWZpbmFsbHl7RGQoYSk7fX19ZnVuY3Rpb24gRGQoYSxiKXtpZihhLmcpe0FkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdP2FhOm51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8RChhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIEFkKGEpe2EuZyYmYS5LJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5iYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmdhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5RYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiB2ZChiKX19O2Z1bmN0aW9uIG9jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkope2Nhc2Ugd2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fWsuRGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtcbmsuTGE9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBGZChhKXtsZXQgYj1cIlwiO3hhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBHZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1GZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpSKGEsYixjKSk7fWZ1bmN0aW9uIEhkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIElkKGEpe3RoaXMuemE9MDt0aGlzLmw9W107dGhpcy5oPW5ldyBNYjt0aGlzLmxhPXRoaXMub2E9dGhpcy5GPXRoaXMuVz10aGlzLmc9dGhpcy5zYT10aGlzLkQ9dGhpcy5hYT10aGlzLm89dGhpcy5QPXRoaXMucz1udWxsO3RoaXMuWmE9dGhpcy5WPTA7dGhpcy5YYT1IZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5OPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaj1udWxsO3RoaXMuWD0hMDt0aGlzLkk9dGhpcy50YT10aGlzLlU9LTE7dGhpcy5ZPXRoaXMuQT10aGlzLkM9MDt0aGlzLlBhPUhkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLiRhPUhkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLllhPUhkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnJhPUhkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMucWE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuQmE9YSYmYS5ZYnx8ITE7XG50aGlzLks9dm9pZCAwO3RoaXMuSD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSj1cIlwiO3RoaXMuaT1uZXcgZ2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkNhPW5ldyBsZDt0aGlzLmphPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5SYT1hJiZhLldifHwhMTthJiZhLkFhJiZ0aGlzLmguQWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLlg9ITEpO3RoaXMuJD0hdGhpcy5qYSYmdGhpcy5YJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLmthPXZvaWQgMDt0aGlzLk89MDt0aGlzLkw9ITE7dGhpcy5CPW51bGw7dGhpcy5XYT0hYXx8ITEhPT1hLlhiO31rPUlkLnByb3RvdHlwZTtrLm1hPTg7ay5HPTE7XG5mdW5jdGlvbiBJYyhhKXtKZChhKTtpZigzPT1hLkcpe3ZhciBiPWEuVisrLGM9TihhLkYpO1IoYyxcIlNJRFwiLGEuSik7UihjLFwiUklEXCIsYik7UihjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0tkKGEsYyk7Yj1uZXcgTShhLGEuaCxiLHZvaWQgMCk7Yi5LPTI7Yi52PWpjKE4oYykpO2M9ITE7bC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIikpOyFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPW5jKGIubCxudWxsKSxiLmcuZWEoYi52KSk7Yi5GPURhdGUubm93KCk7bGMoYik7fUxkKGEpO31rLmhiPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgaW52b2tlZDogXCIrYSk7fWNhdGNoKGIpe319O2Z1bmN0aW9uIEFjKGEpe2EuZyYmKHdjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gSmQoYSl7QWMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7emMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTWQoYSxiKXthLmwucHVzaChuZXcgZmQoYS5aYSsrLGIpKTszPT1hLkcmJkhjKGEpO31mdW5jdGlvbiBIYyhhKXtpZChhLmkpfHxhLm18fChhLm09ITAsemIoYS5IYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIE5kKGEsYil7aWYoQ2MoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEubD1iLkQuY29uY2F0KGEubCksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQz49KGEuWGE/MDphLllhKSlyZXR1cm4gITE7YS5tPUsocShhLkhhLGEsYiksT2QoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkcpe2lmKCFhKXt0aGlzLlY9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlYrKztjb25zdCBlPW5ldyBNKHRoaXMsdGhpcy5oLGEsdm9pZCAwKTtsZXQgZj10aGlzLnM7dGhpcy5QJiYoZj8oZj15YShmKSxBYShmLHRoaXMuUCkpOmY9dGhpcy5QKTtudWxsPT09dGhpcy5vJiYoZS5IPWYpO2lmKHRoaXMuamEpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMubC5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmxbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5nJiYoZD1kLmcuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMubC5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj0xRTM7Yj1cblBkKHRoaXMsZSxiKTtjPU4odGhpcy5GKTtSKGMsXCJSSURcIixhKTtSKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUihjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpO0tkKHRoaXMsYyk7dGhpcy5vJiZmJiZHZChjLHRoaXMubyxmKTtEYyh0aGlzLmksZSk7dGhpcy5SYSYmUihjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLmphPyhSKGMsXCIkcmVxXCIsYiksUihjLFwiU0lEXCIsXCJudWxsXCIpLGUuJD0hMCxpYyhlLGMsbnVsbCkpOmljKGUsYyxiKTt0aGlzLkc9Mjt9fWVsc2UgMz09dGhpcy5HJiYoYT9RZCh0aGlzLGEpOjA9PXRoaXMubC5sZW5ndGh8fGlkKHRoaXMuaSl8fFFkKHRoaXMpKTt9O1xuZnVuY3Rpb24gUWQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5WKys7Y29uc3QgZD1OKGEuRik7UihkLFwiU0lEXCIsYS5KKTtSKGQsXCJSSURcIixjKTtSKGQsXCJBSURcIixhLlUpO0tkKGEsZCk7YS5vJiZhLnMmJkdkKGQsYS5vLGEucyk7Yz1uZXcgTShhLGEuaCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5IPWEucyk7YiYmKGEubD1iLkQuY29uY2F0KGEubCkpO2I9UGQoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5yYSkrTWF0aC5yb3VuZCguNSphLnJhKk1hdGgucmFuZG9tKCkpKTtEYyhhLmksYyk7aWMoYyxkLGIpO31mdW5jdGlvbiBLZChhLGIpe2EuaiYmS2Moe30sZnVuY3Rpb24oYyxkKXtSKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBQZChhLGIsYyl7Yz1NYXRoLm1pbihhLmwubGVuZ3RoLGMpO3ZhciBkPWEuaj9xKGEuai5PYSxhLmosYSk6bnVsbDthOnt2YXIgZT1hLmw7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdT0wO3U8Yzt1Kyspe2xldCBtPWVbdV0uaDtjb25zdCByPWVbdV0uZzttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt1XS5oLTEwMCksbj0hMTtlbHNlIHRyeXttZChyLGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goRyl7ZCYmZChyKTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmwuc3BsaWNlKDAsYyk7Yi5EPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLlk9MSx6YihhLkdhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBCYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLlkrKzthLnU9SyhxKGEuR2EsYSksT2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5HYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO1JkKHRoaXMpO2lmKHRoaXMuJCYmISh0aGlzLkx8fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5PKSl7dmFyIGE9Mip0aGlzLk87dGhpcy5oLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPUsocSh0aGlzLmJiLHRoaXMpLGEpO319O2suYmI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLk49ITEsdGhpcy5MPSEwLEooMTApLEFjKHRoaXMpLFJkKHRoaXMpKTt9O1xuZnVuY3Rpb24gd2MoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIFJkKGEpe2EuZz1uZXcgTShhLGEuaCxcInJwY1wiLGEuWSk7bnVsbD09PWEubyYmKGEuZy5IPWEucyk7YS5nLk89MDt2YXIgYj1OKGEub2EpO1IoYixcIlJJRFwiLFwicnBjXCIpO1IoYixcIlNJRFwiLGEuSik7UihiLFwiQ0lcIixhLk4/XCIwXCI6XCIxXCIpO1IoYixcIkFJRFwiLGEuVSk7S2QoYSxiKTtSKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO2EubyYmYS5zJiZHZChiLGEubyxhLnMpO2EuSyYmYS5nLnNldFRpbWVvdXQoYS5LKTt2YXIgYz1hLmc7YT1hLmxhO2MuSz0xO2Mudj1qYyhOKGIpKTtjLnM9bnVsbDtjLlU9ITA7a2MoYyxhKTt9ay5hYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLEFjKHRoaXMpLEJjKHRoaXMpLEooMTkpKTt9O2Z1bmN0aW9uIHpjKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31cbmZ1bmN0aW9uIHVjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3pjKGEpO3djKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeWMoYS5pLGIpKWM9Yi5ELEZjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47YS5JPWIuTjtpZigwIT1hLkcpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuQztkPVNiKCk7RChkLG5ldyBWYihkLGMsYixlKSk7SGMoYSk7fWVsc2UgR2MoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGEuSXx8ISgxPT1kJiZOZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOlEoYSw1KTticmVhaztjYXNlIDQ6UShhLDEwKTticmVhaztjYXNlIDM6UShhLDYpO2JyZWFrO2RlZmF1bHQ6UShhLDIpO319XG5mdW5jdGlvbiBPZChhLGIpe2xldCBjPWEuUGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuJGEpO2Euanx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gUShhLGIpe2EuaC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaiYmKGM9bnVsbCk7dmFyIGQ9cShhLmpiLGEpO2N8fChjPW5ldyBVKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO25kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBKKDIpO2EuRz0wO2EuaiYmYS5qLnZhKGIpO0xkKGEpO0pkKGEpO31rLmpiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuaC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEooMikpOih0aGlzLmguaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksSigxKSk7fTtcbmZ1bmN0aW9uIExkKGEpe2EuRz0wO2EuST0tMTtpZihhLmope2lmKDAhPWpkKGEuaSkubGVuZ3RofHwwIT1hLmwubGVuZ3RoKWEuaS5pLmxlbmd0aD0wLHJhKGEubCksYS5sLmxlbmd0aD0wO2Euai51YSgpO319ZnVuY3Rpb24gRWMoYSxiLGMpe2xldCBkPWFkKGMpO2lmKFwiXCIhPWQuaSliJiZQYyhkLGIrXCIuXCIrZC5pKSxRYyhkLGQubSk7ZWxzZSB7Y29uc3QgZT1sLmxvY2F0aW9uO2Q9YmQoZS5wcm90b2NvbCxiP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lLCtlLnBvcnQsYyk7fWEuYWEmJnhhKGEuYWEsZnVuY3Rpb24oZSxmKXtSKGQsZixlKTt9KTtiPWEuRDtjPWEuc2E7YiYmYyYmUihkLGIsYyk7UihkLFwiVkVSXCIsYS5tYSk7S2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIG5jKGEsYixjKXtpZihiJiYhYS5IKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5CYSYmIWEucWE/bmV3IFgobmV3IHBkKHtpYjohMH0pKTpuZXcgWChhLnFhKTtiLkw9YS5IO3JldHVybiBifWZ1bmN0aW9uIFNkKCl7fWs9U2QucHJvdG90eXBlO2sueGE9ZnVuY3Rpb24oKXt9O2sud2E9ZnVuY3Rpb24oKXt9O2sudmE9ZnVuY3Rpb24oKXt9O2sudWE9ZnVuY3Rpb24oKXt9O2suT2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRkKCl7aWYoeSYmISgxMDw9TnVtYmVyKFVhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9VGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgSWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueWEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi55YTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueWF9KTt0aGlzLmcuUD1cbmE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXNhKGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXNhKGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaj10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkg9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO2EuV2EmJihhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksemIocShhLmhiLGEsYikpKTtKKDApO2EuVz1iO2EuYWE9Y3x8e307YS5OPWEuWDthLkY9RWMoYSxudWxsLGEuVyk7SGMoYSk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0ljKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7TWQodGhpcy5nLGIpO31lbHNlIHRoaXMudj8oYj17fSxiLl9fZGF0YV9fPXJiKGEpLE1kKHRoaXMuZyxiKSk6TWQodGhpcy5nLGEpO307WS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3RoaXMuZy5qPW51bGw7ZGVsZXRlIHRoaXMuajtJYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk0uY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFVkKGEpe2FjLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9dChVZCxhYyk7ZnVuY3Rpb24gVmQoKXtiYy5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXQoVmQsYmMpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fVxudChaLFNkKTtaLnByb3RvdHlwZS54YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLndhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBVZChhKSk7fTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbihhKXtEKHRoaXMuZyxuZXcgVmQoYSkpO307Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtEKHRoaXMuZyxcImJcIik7fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuVGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9VGQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS51O1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtXYi5OT19FUlJPUj0wO1diLlRJTUVPVVQ9ODtXYi5IVFRQX0VSUk9SPTY7WGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiOyRiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0MucHJvdG90eXBlLmxpc3Rlbj1DLnByb3RvdHlwZS5OO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuTztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuTGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS5EYTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuYmE7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlFhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmdhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7dmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgVGR9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFNiKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVdiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVhiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1IO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3JiOjAsdWI6MSx2YjoyLE9iOjMsVGI6NCxRYjo1LFJiOjYsUGI6NyxOYjo4LFNiOjksUFJPWFk6MTAsTk9QUk9YWToxMSxMYjoxMixIYjoxMyxJYjoxNCxHYjoxNSxKYjoxNixLYjoxNyxuYjoxOCxtYjoxOSxvYjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1wZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPSRiO1xudmFyIFhocklvID0gZXNtLlhocklvPVg7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXRVQSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzU2FmYXJpLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIGlzRWxlY3Ryb24sIGlzSUUsIGlzVVdQLCBpc0Jyb3dzZXJFeHRlbnNpb24gfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJztcblxuY29uc3QgRCA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBDIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWlkID0gdDtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBDLlVOQVVUSEVOVElDQVRFRCA9IG5ldyBDKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cbkMuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IEMoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBDLkZJUlNUX1BBUlRZID0gbmV3IEMoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuQy5NT0NLX1VTRVIgPSBuZXcgQyhcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBOID0gXCI5LjYuM1wiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgayA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIHgoKSB7XG4gICAgcmV0dXJuIGsubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiAkKHQpIHtcbiAgICBrLnNldExvZ0xldmVsKHQpO1xufVxuXG5mdW5jdGlvbiBPKHQsIC4uLmUpIHtcbiAgICBpZiAoay5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTCk7XG4gICAgICAgIGsuZGVidWcoYEZpcmVzdG9yZSAoJHtOfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE0odCwgLi4uZSkge1xuICAgIGlmIChrLmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChMKTtcbiAgICAgICAgay5lcnJvcihgRmlyZXN0b3JlICgke059KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBGKHQsIC4uLmUpIHtcbiAgICBpZiAoay5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChMKTtcbiAgICAgICAgay53YXJuKGBGaXJlc3RvcmUgKCR7Tn0pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBMKHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGUgPSB0LCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgIHZhciBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIEIodCA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgZSA9IGBGSVJFU1RPUkUgKCR7Tn0pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyB0O1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IE0oZSksIG5ldyBFcnJvcihlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBVKHQsIGUpIHtcbiAgICB0IHx8IEIoKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gcSh0LCBlKSB7XG4gICAgdCB8fCBCKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBLKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgaiA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgUSBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tlbmQgZXJyb3IgY29kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlcnJvci5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIGN1c3RvbSBlcnJvciBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLmNvZGUgPSB0LCB0aGlzLm1lc3NhZ2UgPSBlLCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgVyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gdCwgdGhpcy5yZWplY3QgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBHIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke3R9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB6IHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShDLlVOQVVUSEVOVElDQVRFRCkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyByZXR1cm5zIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgZm9yXG4gKiBlbXVsYXRvciB0b2tlbiBtb2NraW5nLlxuICovIGNsYXNzIEgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGUsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBKIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudCA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBDLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdCA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgZSh0KSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgLy8gQSBwcm9taXNlIHRoYXQgY2FuIGJlIHdhaXRlZCBvbiB0byBibG9jayBvbiB0aGUgbmV4dCB0b2tlbiBjaGFuZ2UuXG4gICAgICAgIC8vIFRoaXMgcHJvbWlzZSBpcyByZS1jcmVhdGVkIGFmdGVyIGVhY2ggY2hhbmdlLlxuICAgICAgICAgICAgICAgIGxldCBpID0gbmV3IFc7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIGkucmVzb2x2ZSgpLCBpID0gbmV3IFcsIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gcyh0aGlzLmN1cnJlbnRVc2VyKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGk7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBlLnByb21pc2UsIGF3YWl0IHModGhpcy5jdXJyZW50VXNlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIG8gPSB0ID0+IHtcbiAgICAgICAgICAgIE8oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gdCwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgcigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KCh0ID0+IG8odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbyh0KSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgIE8oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBXKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCByKCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICAvLyBUYWtlIG5vdGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRva2VuQ291bnRlciBzbyB0aGF0IHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGNhbiBmYWlsICh3aXRoIGFuIEFCT1JURUQgZXJyb3IpIGlmIHRoZXJlIGlzIGEgdG9rZW4gY2hhbmdlIHdoaWxlIHRoZVxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5pLCBlID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPyB0aGlzLmF1dGguZ2V0VG9rZW4oZSkudGhlbigoZSA9PiBcbiAgICAgICAgLy8gQ2FuY2VsIHRoZSByZXF1ZXN0IHNpbmNlIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIHRoZSByZXF1ZXN0IHdhc1xuICAgICAgICAvLyBvdXRzdGFuZGluZyBzbyB0aGUgcmVzcG9uc2UgaXMgcG90ZW50aWFsbHkgZm9yIGEgcHJldmlvdXMgdXNlciAod2hpY2hcbiAgICAgICAgLy8gdXNlciwgd2UgY2FuJ3QgYmUgc3VyZSkuXG4gICAgICAgIHRoaXMuaSAhPT0gdCA/IChPKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcImdldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS5cIiksIFxuICAgICAgICB0aGlzLmdldFRva2VuKCkpIDogZSA/IChVKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuYWNjZXNzVG9rZW4pLCBuZXcgRyhlLmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIFUobnVsbCA9PT0gdCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSwgbmV3IEModCk7XG4gICAgfVxufVxuXG4vKlxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXG4gKi8gY2xhc3MgWSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkZpcnN0UGFydHlcIiwgdGhpcy51c2VyID0gQy5GSVJTVF9QQVJUWSwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIlgtR29vZy1BdXRoVXNlclwiLCBlKTtcbiAgICAgICAgY29uc3QgcyA9IHQuYXV0aC5nZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5KFtdKTtcbiAgICAgICAgcyAmJiB0aGlzLmhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBzKSwgbiAmJiB0aGlzLmhlYWRlcnMuc2V0KFwiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCIsIG4pO1xuICAgIH1cbn1cblxuLypcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcbiAqIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciwgdXNpbmcgdGVjaG5pcXVlIHRoYXQgaXMgb25seSBhdmFpbGFibGVcbiAqIHRvIGFwcGxpY2F0aW9ucyBob3N0ZWQgYnkgR29vZ2xlLlxuICovIGNsYXNzIFgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbjtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFkodGhpcy5oLCB0aGlzLmwsIHRoaXMubSkpO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVpZC5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKEMuRklSU1RfUEFSVFkpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxufVxuXG5jbGFzcyBaIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0LCB0aGlzLnR5cGUgPSBcIkFwcENoZWNrXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHQgJiYgdC5sZW5ndGggPiAwICYmIHRoaXMuaGVhZGVycy5zZXQoXCJ4LWZpcmViYXNlLWFwcGNoZWNrXCIsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuY2xhc3MgdHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5nID0gdCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5vID0gbiA9PiB7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+ICh0ID0+IChudWxsICE9IHQuZXJyb3IgJiYgTyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBFcnJvciBnZXR0aW5nIEFwcCBDaGVjayB0b2tlbjsgdXNpbmcgcGxhY2Vob2xkZXIgdG9rZW4gaW5zdGVhZC4gRXJyb3I6ICR7dC5lcnJvci5tZXNzYWdlfWApLCBcbiAgICAgICAgICAgIGUodC50b2tlbikpKShuKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBuID0gdCA9PiB7XG4gICAgICAgICAgICBPKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBkZXRlY3RlZFwiKSwgdGhpcy5hcHBDaGVjayA9IHQsIHRoaXMuYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmcub25Jbml0KCh0ID0+IG4odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBcHBDaGVjayBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmcuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IG4odCkgOiBcbiAgICAgICAgICAgICAgICAvLyBJZiBBcHBDaGVjayBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGhvdXQgaXQuXG4gICAgICAgICAgICAgICAgTyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgbm90IHlldCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA/IHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4odCkudGhlbigodCA9PiB0ID8gKFUoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50b2tlbiksIFxuICAgICAgICBuZXcgWih0LnRva2VuKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgJiYgdGhpcy5hcHBDaGVjay5yZW1vdmVUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIEFwcENoZWNrIHRva2VuIHByb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGV0IHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgWihcIlwiKSk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge31cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovXG5jbGFzcyBudCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSB0LCBlICYmIChlLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IHQgPT4gdGhpcy5wKHQpLCB0aGlzLlQgPSB0ID0+IGUud3JpdGVTZXF1ZW5jZU51bWJlcih0KSk7XG4gICAgfVxuICAgIHAodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlID0gTWF0aC5tYXgodCwgdGhpcy5wcmV2aW91c1ZhbHVlKSwgdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCB0ID0gKyt0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzLlQgJiYgdGhpcy5UKHQpLCB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGBuQnl0ZXNgIG9mIHJhbmRvbSBieXRlcy5cbiAqXG4gKiBJZiBgbkJ5dGVzIDwgMGAgLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZnVuY3Rpb24gc3QodCkge1xuICAgIC8vIFBvbHlmaWxscyBmb3IgSUUgYW5kIFdlYldvcmtlciBieSB1c2luZyBgc2VsZmAgYW5kIGBtc0NyeXB0b2Agd2hlbiBgY3J5cHRvYCBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGNvbnN0IGUgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNlbGYgJiYgKHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG8pLCBuID0gbmV3IFVpbnQ4QXJyYXkodCk7XG4gICAgaWYgKGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLmdldFJhbmRvbVZhbHVlcykgZS5nZXRSYW5kb21WYWx1ZXMobik7IGVsc2UgXG4gICAgLy8gRmFsbHMgYmFjayB0byBNYXRoLnJhbmRvbVxuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdDsgZSsrKSBuW2VdID0gTWF0aC5mbG9vcigyNTYgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICByZXR1cm4gbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gbnQuSSA9IC0xO1xuXG5jbGFzcyBpdCB7XG4gICAgc3RhdGljIEEoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IHQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIGUgPSBNYXRoLmZsb29yKDI1NiAvIHQubGVuZ3RoKSAqIHQubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gc3QoNDApO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmxlbmd0aDsgKytpKSBcbiAgICAgICAgICAgIC8vIE9ubHkgYWNjZXB0IHZhbHVlcyB0aGF0IGFyZSBbMCwgbWF4TXVsdGlwbGUpLCB0aGlzIGVuc3VyZXMgdGhleSBjYW5cbiAgICAgICAgICAgIC8vIGJlIGV2ZW5seSBtYXBwZWQgdG8gaW5kaWNlcyBvZiBgY2hhcnNgIHZpYSBhIG1vZHVsbyBvcGVyYXRpb24uXG4gICAgICAgICAgICBuLmxlbmd0aCA8IDIwICYmIHNbaV0gPCBlICYmIChuICs9IHQuY2hhckF0KHNbaV0gJSB0Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcnQodCwgZSkge1xuICAgIHJldHVybiB0IDwgZSA/IC0xIDogdCA+IGUgPyAxIDogMDtcbn1cblxuLyoqIEhlbHBlciB0byBjb21wYXJlIGFycmF5cyB1c2luZyBpc0VxdWFsKCkuICovIGZ1bmN0aW9uIG90KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdC5sZW5ndGggPT09IGUubGVuZ3RoICYmIHQuZXZlcnkoKCh0LCBzKSA9PiBuKHQsIGVbc10pKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1tZWRpYXRlIGxleGljb2dyYXBoaWNhbGx5LWZvbGxvd2luZyBzdHJpbmcuIFRoaXMgaXMgdXNlZnVsIHRvXG4gKiBjb25zdHJ1Y3QgYW4gaW5jbHVzaXZlIHJhbmdlIGZvciBpbmRleGVkZGIgaXRlcmF0b3JzLlxuICovIGZ1bmN0aW9uIGN0KHQpIHtcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxuICAgIHJldHVybiB0ICsgXCJcXDBcIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBlYXJsaWVzdCBkYXRlIHN1cHBvcnRlZCBieSBGaXJlc3RvcmUgdGltZXN0YW1wcyAoMDAwMS0wMS0wMVQwMDowMDowMFopLlxuLyoqXG4gKiBBIGBUaW1lc3RhbXBgIHJlcHJlc2VudHMgYSBwb2ludCBpbiB0aW1lIGluZGVwZW5kZW50IG9mIGFueSB0aW1lIHpvbmUgb3JcbiAqIGNhbGVuZGFyLCByZXByZXNlbnRlZCBhcyBzZWNvbmRzIGFuZCBmcmFjdGlvbnMgb2Ygc2Vjb25kcyBhdCBuYW5vc2Vjb25kXG4gKiByZXNvbHV0aW9uIGluIFVUQyBFcG9jaCB0aW1lLlxuICpcbiAqIEl0IGlzIGVuY29kZWQgdXNpbmcgdGhlIFByb2xlcHRpYyBHcmVnb3JpYW4gQ2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuIEl0IGlzIGVuY29kZWQgYXNzdW1pbmcgYWxsIG1pbnV0ZXNcbiAqIGFyZSA2MCBzZWNvbmRzIGxvbmcsIGkuZS4gbGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXAgc2Vjb25kXG4gKiB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLiBSYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gKiA5OTk5LTEyLTMxVDIzOjU5OjU5Ljk5OTk5OTk5OVouXG4gKlxuICogRm9yIGV4YW1wbGVzIGFuZCBmdXJ0aGVyIHNwZWNpZmljYXRpb25zLCByZWZlciB0byB0aGVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3Byb3RvYnVmL2Jsb2IvbWFzdGVyL3NyYy9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvIHwgVGltZXN0YW1wIGRlZmluaXRpb259LlxuICovXG5jbGFzcyBhdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vjb25kcyAtIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLiBNdXN0IGJlIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAgICAgKiAgICAgOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgICAqIEBwYXJhbSBuYW5vc2Vjb25kcyAtIFRoZSBub24tbmVnYXRpdmUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmRcbiAgICAgKiAgICAgcmVzb2x1dGlvbi4gTmVnYXRpdmUgc2Vjb25kIHZhbHVlcyB3aXRoIGZyYWN0aW9ucyBtdXN0IHN0aWxsIGhhdmVcbiAgICAgKiAgICAgbm9uLW5lZ2F0aXZlIG5hbm9zZWNvbmRzIHZhbHVlcyB0aGF0IGNvdW50IGZvcndhcmQgaW4gdGltZS4gTXVzdCBiZVxuICAgICAqICAgICBmcm9tIDAgdG8gOTk5LDk5OSw5OTkgaW5jbHVzaXZlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZCByZXNvbHV0aW9uLipcbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZSwgZSA8IDApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAoZSA+PSAxZTkpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAodCA8IC02MjEzNTU5NjgwMCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJyZWFrIGluIHRoZSB5ZWFyIDEwLDAwMC5cbiAgICAgICAgICAgICAgICBpZiAodCA+PSAyNTM0MDIzMDA4MDApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIHdpdGggdGhlIGN1cnJlbnQgZGF0ZSwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIG5ldyB0aW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBhdC5mcm9tTWlsbGlzKERhdGUubm93KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSB0byBpbml0aWFsaXplIHRoZSBgVGltZXN0YW1wYCBmcm9tLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbURhdGUodCkge1xuICAgICAgICByZXR1cm4gYXQuZnJvbU1pbGxpcyh0LmdldFRpbWUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWlsbGlzZWNvbmRzIC0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbU1pbGxpcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHQgLyAxZTMpLCBuID0gTWF0aC5mbG9vcigxZTYgKiAodCAtIDFlMyAqIGUpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdC4gVGhpcyBjb252ZXJzaW9uXG4gICAgICogY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24gc2luY2UgYERhdGVgIG9iamVjdHMgb25seSBzdXBwb3J0IG1pbGxpc2Vjb25kXG4gICAgICogcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzXG4gICAgICogICAgIHRoaXMgYFRpbWVzdGFtcGAsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqLyAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgbnVtZXJpYyB0aW1lc3RhbXAgKGluIG1pbGxpc2Vjb25kcyBzaW5jZVxuICAgICAqIGVwb2NoKS4gVGhpcyBvcGVyYXRpb24gY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcG9pbnQgaW4gdGltZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgdGltZXN0YW1wLCByZXByZXNlbnRlZCBhc1xuICAgICAqICAgICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqLyAgICB0b01pbGxpcygpIHtcbiAgICAgICAgcmV0dXJuIDFlMyAqIHRoaXMuc2Vjb25kcyArIHRoaXMubmFub3NlY29uZHMgLyAxZTY7XG4gICAgfVxuICAgIF9jb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzID09PSB0LnNlY29uZHMgPyBydCh0aGlzLm5hbm9zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKSA6IHJ0KHRoaXMuc2Vjb25kcywgdC5zZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgVGltZXN0YW1wYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgdC5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJUaW1lc3RhbXAoc2Vjb25kcz1cIiArIHRoaXMuc2Vjb25kcyArIFwiLCBuYW5vc2Vjb25kcz1cIiArIHRoaXMubmFub3NlY29uZHMgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnNlY29uZHMsXG4gICAgICAgICAgICBuYW5vc2Vjb25kczogdGhpcy5uYW5vc2Vjb25kc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIHByaW1pdGl2ZSBzdHJpbmcsIHdoaWNoIGFsbG93cyBgVGltZXN0YW1wYCBvYmplY3RzXG4gICAgICogdG8gYmUgY29tcGFyZWQgdXNpbmcgdGhlIGA+YCwgYDw9YCwgYD49YCBhbmQgYD5gIG9wZXJhdG9ycy5cbiAgICAgKi8gICAgdmFsdWVPZigpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHN0cmluZyBvZiB0aGUgZm9ybSA8c2Vjb25kcz4uPG5hbm9zZWNvbmRzPiB3aGVyZVxuICAgICAgICAvLyA8c2Vjb25kcz4gaXMgdHJhbnNsYXRlZCB0byBoYXZlIGEgbm9uLW5lZ2F0aXZlIHZhbHVlIGFuZCBib3RoIDxzZWNvbmRzPlxuICAgICAgICAvLyBhbmQgPG5hbm9zZWNvbmRzPiBhcmUgbGVmdC1wYWRkZWQgd2l0aCB6ZXJvZXMgdG8gYmUgYSBjb25zaXN0ZW50IGxlbmd0aC5cbiAgICAgICAgLy8gU3RyaW5ncyB3aXRoIHRoaXMgZm9ybWF0IHRoZW4gaGF2ZSBhIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nIHRoYXQgbWF0Y2hlc1xuICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZCBoYXZpbmdcbiAgICAgICAgLy8gYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmdcbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlY29uZHMgLSAtNjIxMzU1OTY4MDA7XG4gICAgICAgIC8vIE5vdGU6IFVwIHRvIDEyIGRlY2ltYWwgZGlnaXRzIGFyZSByZXF1aXJlZCB0byByZXByZXNlbnQgYWxsIHZhbGlkXG4gICAgICAgIC8vICdzZWNvbmRzJyB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh0KS5wYWRTdGFydCgxMiwgXCIwXCIpICsgXCIuXCIgKyBTdHJpbmcodGhpcy5uYW5vc2Vjb25kcykucGFkU3RhcnQoOSwgXCIwXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSB2ZXJzaW9uXG4gKiB0aW1lc3RhbXAsIHN1Y2ggYXMgdXBkYXRlX3RpbWUgb3IgcmVhZF90aW1lLlxuICovIGNsYXNzIHV0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UaW1lc3RhbXAodCkge1xuICAgICAgICByZXR1cm4gbmV3IHV0KHQpO1xuICAgIH1cbiAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IHV0KG5ldyBhdCgwLCAwKSk7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqLyAgICB0b01pY3Jvc2Vjb25kcygpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXG4gICAgICAgIHJldHVybiAxZTYgKiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxZTM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJTbmFwc2hvdFZlcnNpb24oXCIgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIHRvVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBodCh0KSB7XG4gICAgbGV0IGUgPSAwO1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZSsrO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBsdCh0LCBlKSB7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKG4sIHRbbl0pO1xufVxuXG5mdW5jdGlvbiBmdCh0KSB7XG4gICAgZm9yIChjb25zdCBlIGluIHQpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgZSkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqL1xuY2xhc3MgZHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdm9pZCAwID09PSBlID8gZSA9IDAgOiBlID4gdC5sZW5ndGggJiYgQigpLCB2b2lkIDAgPT09IG4gPyBuID0gdC5sZW5ndGggLSBlIDogbiA+IHQubGVuZ3RoIC0gZSAmJiBCKCksIFxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gdCwgdGhpcy5vZmZzZXQgPSBlLCB0aGlzLmxlbiA9IG47XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbjtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiAwID09PSBkdC5jb21wYXJhdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBjaGlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGR0ID8gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0KTtcbiAgICAgICAgfSkpIDogZS5wdXNoKHQpLCB0aGlzLmNvbnN0cnVjdChlKTtcbiAgICB9XG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqLyAgICBsaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIHBvcEZpcnN0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB2b2lkIDAgPT09IHQgPyAxIDogdCwgdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyB0LCB0aGlzLmxlbmd0aCAtIHQpO1xuICAgIH1cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGZpcnN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xuICAgIH1cbiAgICBsYXN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgdF07XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgaXNQcmVmaXhPZih0KSB7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA8IHRoaXMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlzSW1tZWRpYXRlUGFyZW50T2YodCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IHRoaXMub2Zmc2V0LCBuID0gdGhpcy5saW1pdCgpOyBlIDwgbjsgZSsrKSB0KHRoaXMuc2VnbWVudHNbZV0pO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4odC5sZW5ndGgsIGUubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuOyBzKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChzKSwgaSA9IGUuZ2V0KHMpO1xuICAgICAgICAgICAgaWYgKG4gPCBpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAobiA+IGkpIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCA8IGUubGVuZ3RoID8gLTEgOiB0Lmxlbmd0aCA+IGUubGVuZ3RoID8gMSA6IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxuICogd2l0aGluIEZpcmVzdG9yZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB3dCBleHRlbmRzIGR0IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IHd0KHQsIGUsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLiBJZiBtdWx0aXBsZVxuICAgICAqIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQsIGFsbCBjb21wb25lbnRzIGFyZSBjb21iaW5lZC4gTGVhZGluZyBhbmQgdHJhaWxpbmdcbiAgICAgKiBzbGFzaGVzIGZyb20gYWxsIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU3RyaW5nKC4uLnQpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkge1xuICAgICAgICAgICAgaWYgKG4uaW5kZXhPZihcIi8vXCIpID49IDApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgc2VnbWVudCAoJHtufSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5gKTtcbiAgICAgICAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKHQgPT4gdC5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgd3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgd3QoW10pO1xuICAgIH1cbn1cblxuY29uc3QgX3QgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcblxuLyoqXG4gKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIG10IGV4dGVuZHMgZHQge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgbXQodCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXG4gICAgICovICAgIHN0YXRpYyBpc1ZhbGlkSWRlbnRpZmllcih0KSB7XG4gICAgICAgIHJldHVybiBfdC50ZXN0KHQpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKHQgPT4gKHQgPSB0LnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBtdC5pc1ZhbGlkSWRlbnRpZmllcih0KSB8fCAodCA9IFwiYFwiICsgdCArIFwiYFwiKSwgdCkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIFwiX19uYW1lX19cIiA9PT0gdGhpcy5nZXQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIHN0YXRpYyBrZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtdChbIFwiX19uYW1lX19cIiBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlcnZlckZvcm1hdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBcIlwiLCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2ApO1xuICAgICAgICAgICAgZS5wdXNoKG4pLCBuID0gXCJcIjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgZm9yICg7cyA8IHQubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0W3NdO1xuICAgICAgICAgICAgaWYgKFwiXFxcXFwiID09PSBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMgKyAxID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRbcyArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gZSAmJiBcIi5cIiAhPT0gZSAmJiBcImBcIiAhPT0gZSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIGludmFsaWQgZXNjYXBlIHNlcXVlbmNlOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIG4gKz0gZSwgcyArPSAyO1xuICAgICAgICAgICAgfSBlbHNlIFwiYFwiID09PSBlID8gKHIgPSAhciwgcysrKSA6IFwiLlwiICE9PSBlIHx8IHIgPyAobiArPSBlLCBzKyspIDogKGkoKSwgcysrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSgpLCByKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogXCIgKyB0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBtdChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtdChbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdXNlZCB0byBwYXJ0aWFsbHkgcGF0Y2ggYSBkb2N1bWVudC5cbiAqIEZpZWxkTWFzayBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggT2JqZWN0VmFsdWUuXG4gKiBFeGFtcGxlczpcbiAqICAgZm9vIC0gT3ZlcndyaXRlcyBmb28gZW50aXJlbHkgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuIElmIGZvbyBpcyBub3RcbiAqICAgICAgICAgcHJlc2VudCBpbiB0aGUgY29tcGFuaW9uIE9iamVjdFZhbHVlLCB0aGUgZmllbGQgaXMgZGVsZXRlZC5cbiAqICAgZm9vLmJhciAtIE92ZXJ3cml0ZXMgb25seSB0aGUgZmllbGQgYmFyIG9mIHRoZSBvYmplY3QgZm9vLlxuICogICAgICAgICAgICAgSWYgZm9vIGlzIG5vdCBhbiBvYmplY3QsIGZvbyBpcyByZXBsYWNlZCB3aXRoIGFuIG9iamVjdFxuICogICAgICAgICAgICAgY29udGFpbmluZyBmb29cbiAqLyBjbGFzcyBndCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IHQsIFxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpZWxkIG1hc2sgdG8gc3VwcG9ydCBgRmllbGRNYXNrLmlzRXF1YWwoKWAgYW5kIGFzc2VydCBiZWxvdy5cbiAgICAgICAgdC5zb3J0KG10LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXG4gICAgICogbWFzay5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cbiAgICAgKi8gICAgY292ZXJzKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZmllbGRzKSBpZiAoZS5pc1ByZWZpeE9mKHQpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBvdCh0aGlzLmZpZWxkcywgdC5maWVsZHMsICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIENvbnZlcnRzIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIGEgYmluYXJ5IHN0cmluZy4gKi9cbi8qKiBUcnVlIGlmIGFuZCBvbmx5IGlmIHRoZSBCYXNlNjQgY29udmVyc2lvbiBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIHl0KCkge1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBhdG9iO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbW11dGFibGUgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgXCJwcm90b1wiIGJ5dGUgc3RyaW5nLlxuICpcbiAqIFByb3RvIGJ5dGUgc3RyaW5ncyBjYW4gZWl0aGVyIGJlIEJhc2U2NC1lbmNvZGVkIHN0cmluZ3Mgb3IgVWludDhBcnJheXMgd2hlblxuICogc2VudCBvbiB0aGUgd2lyZS4gVGhpcyBjbGFzcyBhYnN0cmFjdHMgYXdheSB0aGlzIGRpZmZlcmVudGlhdGlvbiBieSBob2xkaW5nXG4gKiB0aGUgcHJvdG8gYnl0ZSBzdHJpbmcgaW4gYSBjb21tb24gY2xhc3MgdGhhdCBtdXN0IGJlIGNvbnZlcnRlZCBpbnRvIGEgc3RyaW5nXG4gKiBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIHByb3RvLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgcHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5iaW5hcnlTdHJpbmcgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBhdG9iKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHB0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkodCkge1xuICAgICAgICBjb25zdCBlID0gXG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYW4gVWludDhhcnJheSB0byBhIGJpbmFyeSBzdHJpbmcuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgbGV0IGUgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSBlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodFtuXSk7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGEgYmluYXJ5IHN0cmluZyB0byBhbiBVaW50OEFycmF5LlxuICovICh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBwdChlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5leHQ6ICgpID0+IHQgPCB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGggPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQodCsrKSxcbiAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdCA9IHRoaXMuYmluYXJ5U3RyaW5nLCBidG9hKHQpO1xuICAgICAgICAvKiogQ29udmVydHMgYSBiaW5hcnkgc3RyaW5nIHRvIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nLiAqL1xuICAgICAgICB2YXIgdDtcbiAgICB9XG4gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBVaW50OEFycmF5KHQubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgZVtuXSA9IHQuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXG4gICAgICAgICh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGFwcHJveGltYXRlQnl0ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiAyICogdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gcnQodGhpcy5iaW5hcnlTdHJpbmcsIHQuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVN0cmluZyA9PT0gdC5iaW5hcnlTdHJpbmc7XG4gICAgfVxufVxuXG5wdC5FTVBUWV9CWVRFX1NUUklORyA9IG5ldyBwdChcIlwiKTtcblxuY29uc3QgVHQgPSBuZXcgUmVnRXhwKC9eXFxkezR9LVxcZFxcZC1cXGRcXGRUXFxkXFxkOlxcZFxcZDpcXGRcXGQoPzpcXC4oXFxkKykpP1okLyk7XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHZhbHVlcyBmb3IgYSB0aW1lc3RhbXAgdmFsdWUgaW50byBhIFwic2Vjb25kcyBhbmRcbiAqIG5hbm9zXCIgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gRXQodCkge1xuICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcbiAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcbiAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxuICAgIGlmIChVKCEhdCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHtcbiAgICAgICAgLy8gVGhlIGRhdGUgc3RyaW5nIGNhbiBoYXZlIGhpZ2hlciBwcmVjaXNpb24gKG5hbm9zKSB0aGFuIHRoZSBEYXRlIGNsYXNzXG4gICAgICAgIC8vIChtaWxsaXMpLCBzbyB3ZSBkbyBzb21lIGN1c3RvbSBwYXJzaW5nIGhlcmUuXG4gICAgICAgIC8vIFBhcnNlIHRoZSBuYW5vcyByaWdodCBvdXQgb2YgdGhlIHN0cmluZy5cbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBjb25zdCBuID0gVHQuZXhlYyh0KTtcbiAgICAgICAgaWYgKFUoISFuKSwgblsxXSkge1xuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cbiAgICAgICAgICAgIGxldCB0ID0gblsxXTtcbiAgICAgICAgICAgIHQgPSAodCArIFwiMDAwMDAwMDAwXCIpLnN1YnN0cigwLCA5KSwgZSA9IE51bWJlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQYXJzZSB0aGUgZGF0ZSB0byBnZXQgdGhlIHNlY29uZHMuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBEYXRlKHQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogTWF0aC5mbG9vcihzLmdldFRpbWUoKSAvIDFlMyksXG4gICAgICAgICAgICBuYW5vczogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBJdCh0LnNlY29uZHMpLFxuICAgICAgICBuYW5vczogSXQodC5uYW5vcylcbiAgICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgbnVtYmVycyBpbnRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBSZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuICovIGZ1bmN0aW9uIEl0KHQpIHtcbiAgICAvLyBUT0RPKGJqb3JuaWNrKTogSGFuZGxlIGludDY0IGdyZWF0ZXIgdGhhbiA1MyBiaXRzLlxuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ID8gdCA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBOdW1iZXIodCkgOiAwO1xufVxuXG4vKiogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBCbG9icyBpbnRvIGEgQnl0ZVN0cmluZy4gKi8gZnVuY3Rpb24gQXQodCkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gcHQuZnJvbUJhc2U2NFN0cmluZyh0KSA6IHB0LmZyb21VaW50OEFycmF5KHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cbiAqXG4gKiBTZXJ2ZXIgVGltZXN0YW1wcyBhcmUgYmFja2VkIGJ5IE1hcFZhbHVlcyB0aGF0IGNvbnRhaW4gYW4gaW50ZXJuYWwgZmllbGRcbiAqIGBfX3R5cGVfX2Agd2l0aCBhIHZhbHVlIG9mIGBzZXJ2ZXJfdGltZXN0YW1wYC4gVGhlIHByZXZpb3VzIHZhbHVlIGFuZCBsb2NhbFxuICogd3JpdGUgdGltZSBhcmUgc3RvcmVkIGluIGl0cyBgX19wcmV2aW91c192YWx1ZV9fYCBhbmQgYF9fbG9jYWxfd3JpdGVfdGltZV9fYFxuICogZmllbGRzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBOb3RlczpcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxuICogICB0cmFuc2Zvcm0uIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW4gdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlXG4gKiAgIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yIHNlcmlhbGl6ZWQuXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIFJ0KHQpIHtcbiAgICB2YXIgZSwgbjtcbiAgICByZXR1cm4gXCJzZXJ2ZXJfdGltZXN0YW1wXCIgPT09IChudWxsID09PSAobiA9ICgobnVsbCA9PT0gKGUgPSBudWxsID09IHQgPyB2b2lkIDAgOiB0Lm1hcFZhbHVlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmZpZWxkcykgfHwge30pLl9fdHlwZV9fKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnN0cmluZ1ZhbHVlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFNlcnZlclRpbWVzdGFtcCBwcm90byB2YWx1ZSAodXNpbmcgdGhlIGludGVybmFsIGZvcm1hdCkuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIGJlZm9yZSB0aGlzIFNlcnZlclRpbWVzdGFtcCB3YXMgc2V0LlxuICpcbiAqIFByZXNlcnZpbmcgdGhlIHByZXZpb3VzIHZhbHVlcyBhbGxvd3MgdGhlIHVzZXIgdG8gZGlzcGxheSB0aGUgbGFzdCByZXNvbGVkXG4gKiB2YWx1ZSB1bnRpbCB0aGUgYmFja2VuZCByZXNwb25kcyB3aXRoIHRoZSB0aW1lc3RhbXAuXG4gKi9cbmZ1bmN0aW9uIGJ0KHQpIHtcbiAgICBjb25zdCBlID0gdC5tYXBWYWx1ZS5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fO1xuICAgIHJldHVybiBSdChlKSA/IGJ0KGUpIDogZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb2NhbCB0aW1lIGF0IHdoaWNoIHRoaXMgdGltZXN0YW1wIHdhcyBmaXJzdCBzZXQuXG4gKi8gZnVuY3Rpb24gUHQodCkge1xuICAgIGNvbnN0IGUgPSBFdCh0Lm1hcFZhbHVlLmZpZWxkcy5fX2xvY2FsX3dyaXRlX3RpbWVfXy50aW1lc3RhbXBWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBhdChlLnNlY29uZHMsIGUubmFub3MpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlbnRpbmVsIHZhbHVlIHRoYXQgc29ydHMgYmVmb3JlIGFueSBNdXRhdGlvbiBCYXRjaCBJRC4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxuICovXG5mdW5jdGlvbiB2dCh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyAtMC4gKi8gZnVuY3Rpb24gVnQodCkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSB0ICYmIDEgLyB0ID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBTdCh0KSB7XG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgJiYgTnVtYmVyLmlzSW50ZWdlcih0KSAmJiAhVnQodCkgJiYgdCA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiB0ID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBEdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgodCkge1xuICAgICAgICByZXR1cm4gbmV3IER0KHd0LmZyb21TdHJpbmcodCkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IER0KHd0LmZyb21TdHJpbmcodCkucG9wRmlyc3QoNSkpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gdDtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIDAgPT09IHd0LmNvbXBhcmF0b3IodGhpcy5wYXRoLCB0LnBhdGgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIHJldHVybiB3dC5jb21wYXJhdG9yKHQucGF0aCwgZS5wYXRoKTtcbiAgICB9XG4gICAgc3RhdGljIGlzRG9jdW1lbnRLZXkodCkge1xuICAgICAgICByZXR1cm4gdC5sZW5ndGggJSAyID09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHdpdGggdGhlIGdpdmVuIHNlZ21lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlZ21lbnRzIC0gVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VnbWVudHModCkge1xuICAgICAgICByZXR1cm4gbmV3IER0KG5ldyB3dCh0LnNsaWNlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovIGZ1bmN0aW9uIEN0KHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gMCAvKiBOdWxsVmFsdWUgKi8gOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCB8fCBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IDIgLyogTnVtYmVyVmFsdWUgKi8gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IDUgLyogU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gNiAvKiBCbG9iVmFsdWUgKi8gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IDcgLyogUmVmVmFsdWUgKi8gOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gOCAvKiBHZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IDkgLyogQXJyYXlWYWx1ZSAqLyA6IFwibWFwVmFsdWVcIiBpbiB0ID8gUnQodCkgPyA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogMTAgLyogT2JqZWN0VmFsdWUgKi8gOiBCKCk7XG59XG5cbi8qKiBUZXN0cyBgbGVmdGAgYW5kIGByaWdodGAgZm9yIGVxdWFsaXR5IGJhc2VkIG9uIHRoZSBiYWNrZW5kIHNlbWFudGljcy4gKi8gZnVuY3Rpb24gTnQodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gITA7XG4gICAgY29uc3QgbiA9IEN0KHQpO1xuICAgIGlmIChuICE9PSBDdChlKSkgcmV0dXJuICExO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZSA9PT0gZS5ib29sZWFuVmFsdWU7XG5cbiAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBQdCh0KS5pc0VxdWFsKFB0KGUpKTtcblxuICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUudGltZXN0YW1wVmFsdWUgJiYgdC50aW1lc3RhbXBWYWx1ZS5sZW5ndGggPT09IGUudGltZXN0YW1wVmFsdWUubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFVzZSBzdHJpbmcgZXF1YWxpdHkgZm9yIElTTyA4NjAxIHRpbWVzdGFtcHNcbiAgICAgICAgICAgIHJldHVybiB0LnRpbWVzdGFtcFZhbHVlID09PSBlLnRpbWVzdGFtcFZhbHVlO1xuICAgICAgICAgICAgY29uc3QgbiA9IEV0KHQudGltZXN0YW1wVmFsdWUpLCBzID0gRXQoZS50aW1lc3RhbXBWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5zZWNvbmRzID09PSBzLnNlY29uZHMgJiYgbi5uYW5vcyA9PT0gcy5uYW5vcztcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWUgPT09IGUuc3RyaW5nVmFsdWU7XG5cbiAgICAgIGNhc2UgNiAvKiBCbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIEF0KHQuYnl0ZXNWYWx1ZSkuaXNFcXVhbChBdChlLmJ5dGVzVmFsdWUpKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQucmVmZXJlbmNlVmFsdWUgPT09IGUucmVmZXJlbmNlVmFsdWU7XG5cbiAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBJdCh0Lmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpID09PSBJdChlLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpICYmIEl0KHQuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpID09PSBJdChlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmIChcImludGVnZXJWYWx1ZVwiIGluIHQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiBlKSByZXR1cm4gSXQodC5pbnRlZ2VyVmFsdWUpID09PSBJdChlLmludGVnZXJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gSXQodC5kb3VibGVWYWx1ZSksIHMgPSBJdChlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gcyA/IFZ0KG4pID09PSBWdChzKSA6IGlzTmFOKG4pICYmIGlzTmFOKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBvdCh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCBlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCBOdCk7XG5cbiAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubWFwVmFsdWUuZmllbGRzIHx8IHt9LCBzID0gZS5tYXBWYWx1ZS5maWVsZHMgfHwge307XG4gICAgICAgICAgICBpZiAoaHQobikgIT09IGh0KHMpKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgaW4gbikgaWYgKG4uaGFzT3duUHJvcGVydHkodCkgJiYgKHZvaWQgMCA9PT0gc1t0XSB8fCAhTnQoblt0XSwgc1t0XSkpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgQXJyYXlWYWx1ZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuICovICh0LCBlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEIoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGt0KHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSAodC52YWx1ZXMgfHwgW10pLmZpbmQoKHQgPT4gTnQodCwgZSkpKTtcbn1cblxuZnVuY3Rpb24geHQodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gMDtcbiAgICBjb25zdCBuID0gQ3QodCksIHMgPSBDdChlKTtcbiAgICBpZiAobiAhPT0gcykgcmV0dXJuIHJ0KG4sIHMpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHJ0KHQuYm9vbGVhblZhbHVlLCBlLmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gSXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSksIHMgPSBJdChlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuIDwgcyA/IC0xIDogbiA+IHMgPyAxIDogbiA9PT0gcyA/IDAgOiBcbiAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXG4gICAgICAgICAgICBpc05hTihuKSA/IGlzTmFOKHMpID8gMCA6IC0xIDogMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICR0KHQudGltZXN0YW1wVmFsdWUsIGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gJHQoUHQodCksIFB0KGUpKTtcblxuICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHJ0KHQuc3RyaW5nVmFsdWUsIGUuc3RyaW5nVmFsdWUpO1xuXG4gICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBBdCh0KSwgcyA9IEF0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uY29tcGFyZVRvKHMpO1xuICAgICAgICB9KHQuYnl0ZXNWYWx1ZSwgZS5ieXRlc1ZhbHVlKTtcblxuICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnNwbGl0KFwiL1wiKSwgcyA9IGUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBydChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LnJlZmVyZW5jZVZhbHVlLCBlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHJ0KEl0KHQubGF0aXR1ZGUpLCBJdChlLmxhdGl0dWRlKSk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICByZXR1cm4gcnQoSXQodC5sb25naXR1ZGUpLCBJdChlLmxvbmdpdHVkZSkpO1xuICAgICAgICB9KHQuZ2VvUG9pbnRWYWx1ZSwgZS5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudmFsdWVzIHx8IFtdLCBzID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHh0KG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQuYXJyYXlWYWx1ZSwgZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5maWVsZHMgfHwge30sIHMgPSBPYmplY3Qua2V5cyhuKSwgaSA9IGUuZmllbGRzIHx8IHt9LCByID0gT2JqZWN0LmtleXMoaSk7XG4gICAgICAgICAgICAvLyBFdmVuIHRob3VnaCBNYXBWYWx1ZXMgYXJlIGxpa2VseSBzb3J0ZWQgY29ycmVjdGx5IGJhc2VkIG9uIHRoZWlyIGluc2VydGlvblxuICAgICAgICAgICAgLy8gb3JkZXIgKGUuZy4gd2hlbiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kKSwgbG9jYWwgbW9kaWZpY2F0aW9ucyBjYW4gYnJpbmdcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzIG91dCBvZiBvcmRlci4gV2UgbmVlZCB0byByZS1zb3J0IHRoZSBlbGVtZW50cyB0byBlbnN1cmUgdGhhdFxuICAgICAgICAgICAgLy8gY2Fub25pY2FsIElEcyBhcmUgaW5kZXBlbmRlbnQgb2YgaW5zZXJ0aW9uIG9yZGVyLlxuICAgICAgICAgICAgcy5zb3J0KCksIHIuc29ydCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBzLmxlbmd0aCAmJiB0IDwgci5sZW5ndGg7ICsrdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBydChzW3RdLCByW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHh0KG5bc1t0XV0sIGlbclt0XV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBvKSByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydChzLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogR2VuZXJhdGVzIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZSBwcm92aWRlZCBmaWVsZCB2YWx1ZSAoYXMgdXNlZCBpbiBUYXJnZXRcbiAqIHNlcmlhbGl6YXRpb24pLlxuICovICh0Lm1hcFZhbHVlLCBlLm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgQigpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gJHQodCwgZSkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgdC5sZW5ndGggPT09IGUubGVuZ3RoKSByZXR1cm4gcnQodCwgZSk7XG4gICAgY29uc3QgbiA9IEV0KHQpLCBzID0gRXQoZSksIGkgPSBydChuLnNlY29uZHMsIHMuc2Vjb25kcyk7XG4gICAgcmV0dXJuIDAgIT09IGkgPyBpIDogcnQobi5uYW5vcywgcy5uYW5vcyk7XG59XG5cbmZ1bmN0aW9uIE90KHQpIHtcbiAgICByZXR1cm4gTXQodCk7XG59XG5cbmZ1bmN0aW9uIE10KHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gXCJudWxsXCIgOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5ib29sZWFuVmFsdWUgOiBcImludGVnZXJWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5pbnRlZ2VyVmFsdWUgOiBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmRvdWJsZVZhbHVlIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBFdCh0KTtcbiAgICAgICAgcmV0dXJuIGB0aW1lKCR7ZS5zZWNvbmRzfSwke2UubmFub3N9KWA7XG4gICAgfSh0LnRpbWVzdGFtcFZhbHVlKSA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gdC5zdHJpbmdWYWx1ZSA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyBBdCh0LmJ5dGVzVmFsdWUpLnRvQmFzZTY0KCkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IChuID0gdC5yZWZlcmVuY2VWYWx1ZSwgXG4gICAgRHQuZnJvbU5hbWUobikudG9TdHJpbmcoKSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gYGdlbygkeyhlID0gdC5nZW9Qb2ludFZhbHVlKS5sYXRpdHVkZX0sJHtlLmxvbmdpdHVkZX0pYCA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlID0gXCJbXCIsIG4gPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHQudmFsdWVzIHx8IFtdKSBuID8gbiA9ICExIDogZSArPSBcIixcIiwgZSArPSBNdChzKTtcbiAgICAgICAgcmV0dXJuIGUgKyBcIl1cIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByZWZlcmVuY2UgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBkYXRhYmFzZSBhbmQga2V5LiAqLyAodC5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdGVyYXRpb24gb3JkZXIgaW4gSmF2YVNjcmlwdCBpcyBub3QgZ3VhcmFudGVlZC4gVG8gZW5zdXJlIHRoYXQgd2UgZ2VuZXJhdGVcbiAgICAgICAgLy8gbWF0Y2hpbmcgY2Fub25pY2FsIElEcyBmb3IgaWRlbnRpY2FsIG1hcHMsIHdlIG5lZWQgdG8gc29ydCB0aGUga2V5cy5cbiAgICAgICAgY29uc3QgZSA9IE9iamVjdC5rZXlzKHQuZmllbGRzIHx8IHt9KS5zb3J0KCk7XG4gICAgICAgIGxldCBuID0gXCJ7XCIsIHMgPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHMgPyBzID0gITEgOiBuICs9IFwiLFwiLCBuICs9IGAke2l9OiR7TXQodC5maWVsZHNbaV0pfWA7XG4gICAgICAgIHJldHVybiBuICsgXCJ9XCI7XG4gICAgfSh0Lm1hcFZhbHVlKSA6IEIoKTtcbiAgICB2YXIgZSwgbjtcbn1cblxuZnVuY3Rpb24gRnQodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlZmVyZW5jZVZhbHVlOiBgcHJvamVjdHMvJHt0LnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dC5kYXRhYmFzZX0vZG9jdW1lbnRzLyR7ZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpfWBcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gSW50ZWdlclZhbHVlIC4gKi8gZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBEb3VibGVWYWx1ZS4gKi9cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBBcnJheVZhbHVlLiAqL1xuZnVuY3Rpb24gQnQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJhcnJheVZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTnVsbFZhbHVlLiAqLyBmdW5jdGlvbiBVdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm51bGxWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBOYU4uICovIGZ1bmN0aW9uIHF0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIGlzTmFOKE51bWJlcih0LmRvdWJsZVZhbHVlKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE1hcFZhbHVlLiAqLyBmdW5jdGlvbiBLdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm1hcFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAuICovIGZ1bmN0aW9uIGp0KHQpIHtcbiAgICBpZiAodC5nZW9Qb2ludFZhbHVlKSByZXR1cm4ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0Lmdlb1BvaW50VmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC50aW1lc3RhbXBWYWx1ZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlKSByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC50aW1lc3RhbXBWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0Lm1hcFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGx0KHQubWFwVmFsdWUuZmllbGRzLCAoKHQsIG4pID0+IGUubWFwVmFsdWUuZmllbGRzW3RdID0ganQobikpKSwgZTtcbiAgICB9XG4gICAgaWYgKHQuYXJyYXlWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkubGVuZ3RoOyArK24pIGUuYXJyYXlWYWx1ZS52YWx1ZXNbbl0gPSBqdCh0LmFycmF5VmFsdWUudmFsdWVzW25dKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gT2JqZWN0VmFsdWUgcmVwcmVzZW50cyBhIE1hcFZhbHVlIGluIHRoZSBGaXJlc3RvcmUgUHJvdG8gYW5kIG9mZmVycyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgZmllbGRzICh2aWEgdGhlIE9iamVjdFZhbHVlQnVpbGRlcikuXG4gKi8gY2xhc3MgUXQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaFxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBhdCB0aGUgcGF0aCBvciBudWxsIGlmIHRoZSBwYXRoIGlzIG5vdCBzZXQuXG4gICAgICovICAgIGZpZWxkKHQpIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAtIDE7ICsrbikgaWYgKGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QuZ2V0KG4pXSwgXG4gICAgICAgICAgICAhS3QoZSkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QubGFzdFNlZ21lbnQoKV0sIGUgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmaWVsZCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHNldC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLmdldEZpZWxkc01hcCh0LnBvcExhc3QoKSlbdC5sYXN0U2VnbWVudCgpXSA9IGp0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbCh0KSB7XG4gICAgICAgIGxldCBlID0gbXQuZW1wdHlQYXRoKCksIG4gPSB7fSwgcyA9IFtdO1xuICAgICAgICB0LmZvckVhY2goKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyh0LCBuLCBzKSwgbiA9IHt9LCBzID0gW10sIGUgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSBqdCh0KSA6IHMucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5maWVsZCh0LnBvcExhc3QoKSk7XG4gICAgICAgIEt0KGUpICYmIGUubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSBlLm1hcFZhbHVlLmZpZWxkc1t0Lmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIE50KHRoaXMudmFsdWUsIHQudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGUubWFwVmFsdWUuZmllbGRzIHx8IChlLm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXTtcbiAgICAgICAgICAgIEt0KHMpICYmIHMubWFwVmFsdWUuZmllbGRzIHx8IChzID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV0gPSBzKSwgZSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgbHQoZSwgKChlLCBuKSA9PiB0W2VdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZGVsZXRlIHRbZV07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFF0KGp0KHRoaXMudmFsdWUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBmaWVsZHMgaW4gYSBNYXBWYWx1ZS5cbiAqLyBmdW5jdGlvbiBXdCh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiBsdCh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgbXQoWyB0IF0pO1xuICAgICAgICBpZiAoS3QobikpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXdChuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIGUucHVzaChzKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlLnB1c2gocy5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIGUucHVzaChzKTtcbiAgICB9KSksIG5ldyBndChlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIGl0XG4gKiBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXG4gKlxuICogRG9jdW1lbnRzIGNhbiB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdGVzIHZpYSBgY29udmVydFRvRm91bmREb2N1bWVudCgpYCxcbiAqIGBjb252ZXJ0VG9Ob0RvY3VtZW50KClgIGFuZCBgY29udmVydFRvVW5rbm93bkRvY3VtZW50KClgLiBJZiBhIGRvY3VtZW50IGRvZXNcbiAqIG5vdCB0cmFuc2l0aW9uIHRvIG9uZSBvZiB0aGVzZSBzdGF0ZXMgZXZlbiBhZnRlciBhbGwgbXV0YXRpb25zIGhhdmUgYmVlblxuICogYXBwbGllZCwgYGlzVmFsaWREb2N1bWVudCgpYCByZXR1cm5zIGZhbHNlIGFuZCB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIHJlbW92ZWRcbiAqIGZyb20gYWxsIHZpZXdzLlxuICovIGNsYXNzIEd0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSBlLCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLmRhdGEgPSBzLCB0aGlzLmRvY3VtZW50U3RhdGUgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZG9jdW1lbnQgd2l0aCBubyBrbm93biB2ZXJzaW9uIG9yIGRhdGEsIGJ1dCB3aGljaCBjYW4gc2VydmUgYXNcbiAgICAgKiBiYXNlIGRvY3VtZW50IGZvciBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBuZXdJbnZhbGlkRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IEd0KHQsIDAgLyogSU5WQUxJRCAqLyAsIHV0Lm1pbigpLCBRdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHdCh0LCAxIC8qIEZPVU5EX0RPQ1VNRU5UICovICwgZSwgbiwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIG5vdCBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbi4gKi8gICAgc3RhdGljIG5ld05vRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IEd0KHQsIDIgLyogTk9fRE9DVU1FTlQgKi8gLCBlLCBRdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB3aG9zZSBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIHN0YXRpYyBuZXdVbmtub3duRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IEd0KHQsIDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyAsIGUsIFF0LmVtcHR5KCksIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGFuZCB0aGF0IGl0cyB2ZXJzaW9uXG4gICAgICogYW5kIGRhdGEgYXJlIGtub3duLlxuICAgICAqLyAgICBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IGUsIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIE5PX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gUXQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhdCBhIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogdGhhdCBpdHMgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBRdC5lbXB0eSgpLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDEgLyogSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIGdldCBoYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgfVxuICAgIGlzVmFsaWREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogSU5WQUxJRCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRm91bmREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc05vRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIE5PX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNVbmtub3duRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBHdCAmJiB0aGlzLmtleS5pc0VxdWFsKHQua2V5KSAmJiB0aGlzLnZlcnNpb24uaXNFcXVhbCh0LnZlcnNpb24pICYmIHRoaXMuZG9jdW1lbnRUeXBlID09PSB0LmRvY3VtZW50VHlwZSAmJiB0aGlzLmRvY3VtZW50U3RhdGUgPT09IHQuZG9jdW1lbnRTdGF0ZSAmJiB0aGlzLmRhdGEuaXNFcXVhbCh0LmRhdGEpO1xuICAgIH1cbiAgICBtdXRhYmxlQ29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHdCh0aGlzLmtleSwgdGhpcy5kb2N1bWVudFR5cGUsIHRoaXMudmVyc2lvbiwgdGhpcy5kYXRhLmNsb25lKCksIHRoaXMuZG9jdW1lbnRTdGF0ZSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYERvY3VtZW50KCR7dGhpcy5rZXl9LCAke3RoaXMudmVyc2lvbn0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhLnZhbHVlKX0sIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIHp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLm9yZGVyQnkgPSBuLCB0aGlzLmZpbHRlcnMgPSBzLCB0aGlzLmxpbWl0ID0gaSwgXG4gICAgICAgIHRoaXMuc3RhcnRBdCA9IHIsIHRoaXMuZW5kQXQgPSBvLCB0aGlzLlIgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gKlxuICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXG4gKiB1c2luZyB0aGlzIGZhY3RvcnkgbWV0aG9kLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXG4gKiBwcm9wZXJ0eS5cbiAqLyBmdW5jdGlvbiBIdCh0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IHp0KHQsIGUsIG4sIHMsIGksIHIsIG8pO1xufVxuXG5mdW5jdGlvbiBKdCh0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgaWYgKG51bGwgPT09IGUuUikge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKHQgKz0gXCJ8Y2c6XCIgKyBlLmNvbGxlY3Rpb25Hcm91cCksIHQgKz0gXCJ8ZjpcIiwgdCArPSBlLmZpbHRlcnMubWFwKCh0ID0+IGVlKHQpKSkuam9pbihcIixcIiksIFxuICAgICAgICB0ICs9IFwifG9iOlwiLCB0ICs9IGUub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQuZGlyO1xuICAgICAgICB9KHQpKSkuam9pbihcIixcIiksIHZ0KGUubGltaXQpIHx8ICh0ICs9IFwifGw6XCIsIHQgKz0gZS5saW1pdCksIGUuc3RhcnRBdCAmJiAodCArPSBcInxsYjpcIiwgXG4gICAgICAgIHQgKz0gbGUoZS5zdGFydEF0KSksIGUuZW5kQXQgJiYgKHQgKz0gXCJ8dWI6XCIsIHQgKz0gbGUoZS5lbmRBdCkpLCBlLlIgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gZS5SO1xufVxuXG5mdW5jdGlvbiBZdCh0KSB7XG4gICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIHQuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgdC5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgZmlsdGVyczogWyR7dC5maWx0ZXJzLm1hcCgodCA9PiB7XG4gICAgICAgIHJldHVybiBgJHsoZSA9IHQpLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAke2Uub3B9ICR7T3QoZS52YWx1ZSl9YDtcbiAgICAgICAgLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovXG4gICAgICAgIHZhciBlO1xuICAgICAgICAvKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIChpLmUuICdfX25hbWVfXycpLiAqLyAgICB9KSkuam9pbihcIiwgXCIpfV1gKSwgXG4gICAgdnQodC5saW1pdCkgfHwgKGUgKz0gXCIsIGxpbWl0OiBcIiArIHQubGltaXQpLCB0Lm9yZGVyQnkubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBvcmRlckJ5OiBbJHt0Lm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke3QuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICgke3QuZGlyfSlgO1xuICAgIH0odCkpKS5qb2luKFwiLCBcIil9XWApLCB0LnN0YXJ0QXQgJiYgKGUgKz0gXCIsIHN0YXJ0QXQ6IFwiICsgbGUodC5zdGFydEF0KSksIHQuZW5kQXQgJiYgKGUgKz0gXCIsIGVuZEF0OiBcIiArIGxlKHQuZW5kQXQpKSwgXG4gICAgYFRhcmdldCgke2V9KWA7XG59XG5cbmZ1bmN0aW9uIFh0KHQsIGUpIHtcbiAgICBpZiAodC5saW1pdCAhPT0gZS5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmICh0Lm9yZGVyQnkubGVuZ3RoICE9PSBlLm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghZGUodC5vcmRlckJ5W25dLCBlLm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKHQuZmlsdGVycy5sZW5ndGggIT09IGUuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQuZmlsdGVycy5sZW5ndGg7IGkrKykgaWYgKG4gPSB0LmZpbHRlcnNbaV0sIHMgPSBlLmZpbHRlcnNbaV0sIFxuICAgIG4ub3AgIT09IHMub3AgfHwgIW4uZmllbGQuaXNFcXVhbChzLmZpZWxkKSB8fCAhTnQobi52YWx1ZSwgcy52YWx1ZSkpIHJldHVybiAhMTtcbiAgICB2YXIgbiwgcztcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmICghIXQucGF0aC5pc0VxdWFsKGUucGF0aCkgJiYgKCEhX2UodC5zdGFydEF0LCBlLnN0YXJ0QXQpICYmIF9lKHQuZW5kQXQsIGUuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIFp0KHQpIHtcbiAgICByZXR1cm4gRHQuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG59XG5cbmNsYXNzIHRlIGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIElOICovID09PSBlIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gdGhpcy5QKHQsIGUsIG4pIDogbmV3IG5lKHQsIGUsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovID09PSBlID8gbmV3IG9lKHQsIG4pIDogXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IGNlKHQsIG4pIDogXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IGUgPyBuZXcgYWUodCwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZSA/IG5ldyB1ZSh0LCBuKSA6IG5ldyB0ZSh0LCBlLCBuKTtcbiAgICB9XG4gICAgc3RhdGljIFAodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IHNlKHQsIG4pIDogbmV3IGllKHQsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSBlICYmIHRoaXMudih4dChlLCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSBlICYmIEN0KHRoaXMudmFsdWUpID09PSBDdChlKSAmJiB0aGlzLnYoeHQoZSwgdGhpcy52YWx1ZSkpO1xuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cbiAgICAgICAgfVxuICAgIHYodCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIExFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIEVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBWKCkge1xuICAgICAgICByZXR1cm4gWyBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gLCBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovICwgXCI+XCIgLyogR1JFQVRFUl9USEFOICovICwgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyAsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdLmluZGV4T2YodGhpcy5vcCkgPj0gMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVlKHQpIHtcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5vcC50b1N0cmluZygpICsgT3QodC52YWx1ZSk7XG59XG5cbmNsYXNzIG5lIGV4dGVuZHMgdGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIHRoaXMua2V5ID0gRHQuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gRHQuY29tcGFyYXRvcih0LmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy52KGUpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIHNlIGV4dGVuZHMgdGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIElOICovICwgZSksIHRoaXMua2V5cyA9IHJlKFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgbm90IHByZXNlbnQgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBpZSBleHRlbmRzIHRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSksIHRoaXMua2V5cyA9IHJlKFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gIXRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlKHQsIGUpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKChudWxsID09PSAobiA9IGUuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52YWx1ZXMpIHx8IFtdKS5tYXAoKHQgPT4gRHQuZnJvbU5hbWUodC5yZWZlcmVuY2VWYWx1ZSkpKTtcbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovIGNsYXNzIG9lIGV4dGVuZHMgdGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gQnQoZSkgJiYga3QoZS5hcnJheVZhbHVlLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIElOIG9wZXJhdG9yLiAqLyBjbGFzcyBjZSBleHRlbmRzIHRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYga3QodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIG5vdC1pbiBvcGVyYXRvci4gKi8gY2xhc3MgYWUgZXh0ZW5kcyB0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgaWYgKGt0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiAha3QodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgdWUgZXh0ZW5kcyB0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoIUJ0KGUpIHx8ICFlLmFycmF5VmFsdWUudmFsdWVzKSAmJiBlLmFycmF5VmFsdWUudmFsdWVzLnNvbWUoKHQgPT4ga3QodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cbiAqXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxuICogcXVlcnkgb3JkZXIgaXMpLlxuICpcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXG4gKlxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gKi8gY2xhc3MgaGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHQsIHRoaXMuYmVmb3JlID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxlKHQpIHtcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cbiAgICByZXR1cm4gYCR7dC5iZWZvcmUgPyBcImJcIiA6IFwiYVwifToke3QucG9zaXRpb24ubWFwKCh0ID0+IE90KHQpKSkuam9pbihcIixcIil9YDtcbn1cblxuLyoqXG4gKiBBbiBvcmRlcmluZyBvbiBhIGZpZWxkLCBpbiBzb21lIERpcmVjdGlvbi4gRGlyZWN0aW9uIGRlZmF1bHRzIHRvIEFTQ0VORElORy5cbiAqLyBjbGFzcyBmZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IFwiYXNjXCIgLyogQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLmRpciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZGlyID09PSBlLmRpciAmJiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYmVmb3JlIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIHdlKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0LnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSBlW2ldLCBvID0gdC5wb3NpdGlvbltpXTtcbiAgICAgICAgaWYgKHIuZmllbGQuaXNLZXlGaWVsZCgpKSBzID0gRHQuY29tcGFyYXRvcihEdC5mcm9tTmFtZShvLnJlZmVyZW5jZVZhbHVlKSwgbi5rZXkpOyBlbHNlIHtcbiAgICAgICAgICAgIHMgPSB4dChvLCBuLmRhdGEuZmllbGQoci5maWVsZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSByLmRpciAmJiAocyAqPSAtMSksIDAgIT09IHMpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdC5iZWZvcmUgPyBzIDw9IDAgOiBzIDwgMDtcbn1cblxuZnVuY3Rpb24gX2UodCwgZSkge1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbCA9PT0gZTtcbiAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuICExO1xuICAgIGlmICh0LmJlZm9yZSAhPT0gZS5iZWZvcmUgfHwgdC5wb3NpdGlvbi5sZW5ndGggIT09IGUucG9zaXRpb24ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0LnBvc2l0aW9uLmxlbmd0aDsgbisrKSB7XG4gICAgICAgIGlmICghTnQodC5wb3NpdGlvbltuXSwgZS5wb3NpdGlvbltuXSkpIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqLyBjbGFzcyBtZSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBRdWVyeSB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBcIkZcIiAvKiBGaXJzdCAqLyAsIG8gPSBudWxsLCBjID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHIsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSBjLCB0aGlzLlMgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxuICAgICAgICB0aGlzLkQgPSBudWxsLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQ7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBpbnN0YW5jZSB3aXRoIHRoZSBvcHRpb25zIHByb3ZpZGVkLiAqLyBmdW5jdGlvbiBnZSh0LCBlLCBuLCBzLCBpLCByLCBvLCBjKSB7XG4gICAgcmV0dXJuIG5ldyBtZSh0LCBlLCBuLCBzLCBpLCByLCBvLCBjKTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgYXQgYHBhdGhgICovIGZ1bmN0aW9uIHllKHQpIHtcbiAgICByZXR1cm4gbmV3IG1lKHQpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovIGZ1bmN0aW9uIHBlKHQpIHtcbiAgICByZXR1cm4gIXZ0KHQubGltaXQpICYmIFwiRlwiIC8qIEZpcnN0ICovID09PSB0LmxpbWl0VHlwZTtcbn1cblxuZnVuY3Rpb24gVGUodCkge1xuICAgIHJldHVybiAhdnQodC5saW1pdCkgJiYgXCJMXCIgLyogTGFzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIEVlKHQpIHtcbiAgICByZXR1cm4gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gSWUodCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIGlmIChlLlYoKSkgcmV0dXJuIGUuZmllbGQ7XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgT3BlcmF0b3JzIGFyZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkgYW5kXG4gKiByZXR1cm5zIHRoZSBmaXJzdCBvbmUgdGhhdCBpcywgb3IgbnVsbCBpZiBub25lIGFyZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBjb2xsZWN0aW9uIGdyb3VwIHJhdGhlciB0aGFuIGEgc3BlY2lmaWNcbiAqIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIEFlKHQpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1wbGljaXQgb3JkZXIgYnkgY29uc3RyYWludCB0aGF0IGlzIHVzZWQgdG8gZXhlY3V0ZSB0aGUgUXVlcnksXG4gKiB3aGljaCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yZGVyIGJ5IGNvbnN0cmFpbnRzIHRoZSB1c2VyIHByb3ZpZGVkIChlLmcuXG4gKiB0aGUgU0RLIGFuZCBiYWNrZW5kIGFsd2F5cyBvcmRlcnMgYnkgYF9fbmFtZV9fYCkuXG4gKi8gZnVuY3Rpb24gUmUodCkge1xuICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgIGlmIChudWxsID09PSBlLlMpIHtcbiAgICAgICAgZS5TID0gW107XG4gICAgICAgIGNvbnN0IHQgPSBJZShlKSwgbiA9IEVlKGUpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiBudWxsID09PSBuKSBcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gaW1wbGljaXRseSBhZGQga2V5IG9yZGVyaW5nLCB3ZSBtdXN0IGFsc28gYWRkIHRoZVxuICAgICAgICAvLyBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZCBmb3IgaXQgdG8gYmUgYSB2YWxpZCBxdWVyeS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXG4gICAgICAgIHQuaXNLZXlGaWVsZCgpIHx8IGUuUy5wdXNoKG5ldyBmZSh0KSksIGUuUy5wdXNoKG5ldyBmZShtdC5rZXlGaWVsZCgpLCBcImFzY1wiIC8qIEFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5leHBsaWNpdE9yZGVyQnkpIGUuUy5wdXNoKG4pLCBuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiAodCA9ICEwKTtcbiAgICAgICAgICAgIGlmICghdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXIgYnlcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IGUuZXhwbGljaXRPcmRlckJ5W2UuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogQVNDRU5ESU5HICovO1xuICAgICAgICAgICAgICAgIGUuUy5wdXNoKG5ldyBmZShtdC5rZXlGaWVsZCgpLCB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUuUztcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIGJlKHQpIHtcbiAgICBjb25zdCBlID0gSyh0KTtcbiAgICBpZiAoIWUuRCkgaWYgKFwiRlwiIC8qIEZpcnN0ICovID09PSBlLmxpbWl0VHlwZSkgZS5EID0gSHQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgUmUoZSksIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTsgZWxzZSB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgUmUoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSBuLmRpciA/IFwiYXNjXCIgLyogQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHQucHVzaChuZXcgZmUobi5maWVsZCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgaGUoZS5lbmRBdC5wb3NpdGlvbiwgIWUuZW5kQXQuYmVmb3JlKSA6IG51bGwsIHMgPSBlLnN0YXJ0QXQgPyBuZXcgaGUoZS5zdGFydEF0LnBvc2l0aW9uLCAhZS5zdGFydEF0LmJlZm9yZSkgOiBudWxsO1xuICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxuICAgICAgICBlLkQgPSBIdChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHMpO1xuICAgIH1cbiAgICByZXR1cm4gZS5EO1xufVxuXG5mdW5jdGlvbiBQZSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBtZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgZSwgbiwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gdmUodCwgZSkge1xuICAgIHJldHVybiBYdChiZSh0KSwgYmUoZSkpICYmIHQubGltaXRUeXBlID09PSBlLmxpbWl0VHlwZTtcbn1cblxuLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3Jcbi8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cbi8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXG5mdW5jdGlvbiBWZSh0KSB7XG4gICAgcmV0dXJuIGAke0p0KGJlKHQpKX18bHQ6JHt0LmxpbWl0VHlwZX1gO1xufVxuXG5mdW5jdGlvbiBTZSh0KSB7XG4gICAgcmV0dXJuIGBRdWVyeSh0YXJnZXQ9JHtZdChiZSh0KSl9OyBsaW1pdFR5cGU9JHt0LmxpbWl0VHlwZX0pYDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciBgZG9jYCBtYXRjaGVzIHRoZSBjb25zdHJhaW50cyBvZiBgcXVlcnlgLiAqLyBmdW5jdGlvbiBEZSh0LCBlKSB7XG4gICAgcmV0dXJuIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5rZXkucGF0aDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwID8gZS5rZXkuaGFzQ29sbGVjdGlvbklkKHQuY29sbGVjdGlvbkdyb3VwKSAmJiB0LnBhdGguaXNQcmVmaXhPZihuKSA6IER0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSA/IHQucGF0aC5pc0VxdWFsKG4pIDogdC5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2Yobik7XG4gICAgfVxuICAgIC8qKlxuICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcbiAqIGluIHRoZSByZXN1bHRzLlxuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmV4cGxpY2l0T3JkZXJCeSkgXG4gICAgICAgIC8vIG9yZGVyIGJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IGUuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfSh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmICh0LnN0YXJ0QXQgJiYgIXdlKHQuc3RhcnRBdCwgUmUodCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0LmVuZEF0ICYmIHdlKHQuZW5kQXQsIFJlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wYXJhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcGFyZSB0d28gZG9jdW1lbnRzXG4gKiBiYXNlZCBvbiB0aGUgUXVlcnkncyBvcmRlcmluZyBjb25zdHJhaW50LlxuICovICh0LCBlKTtcbn1cblxuZnVuY3Rpb24gQ2UodCkge1xuICAgIHJldHVybiAoZSwgbikgPT4ge1xuICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgUmUodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBOZShpLCBlLCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIHMgPSBzIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIE5lKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5maWVsZC5pc0tleUZpZWxkKCkgPyBEdC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQodCksIGkgPSBuLmRhdGEuZmllbGQodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBzICYmIG51bGwgIT09IGkgPyB4dChzLCBpKSA6IEIoKTtcbiAgICB9KHQuZmllbGQsIGUsIG4pO1xuICAgIHN3aXRjaCAodC5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gcztcblxuICAgICAgY2FzZSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEIoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIGtlKHQsIGUpIHtcbiAgICBpZiAodC5DKSB7XG4gICAgICAgIGlmIChpc05hTihlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIk5hTlwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAxIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIkluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IC0xIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIi1JbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBWdChlKSA/IFwiLTBcIiA6IGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIHhlKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IFwiXCIgKyB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiBJbnRlZ2VyVmFsdWUgaWYgaXQgY2FuIHNhZmVseSByZXByZXNlbnQgdGhlIHZhbHVlLFxuICogb3RoZXJ3aXNlIGEgRG91YmxlVmFsdWUgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gJGUodCwgZSkge1xuICAgIHJldHVybiBTdChlKSA/IHhlKGUpIDoga2UodCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgT2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgc3RydWN0dXJhbCB0eXBlIG9mIGBUcmFuc2Zvcm1PcGVyYXRpb25gIGlzIHVuaXF1ZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTQ1MVxuICAgICAgICB0aGlzLl8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm0gcmVzdWx0IGFnYWluc3QgdGhlIHByb3ZpZGVkIGBwcmV2aW91c1ZhbHVlYCxcbiAqIG9wdGlvbmFsbHkgdXNpbmcgdGhlIHByb3ZpZGVkIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIE1lKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEJlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdC5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IHQubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGUgJiYgKG4uZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXyA9IGUpLCB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgZSkgOiB0IGluc3RhbmNlb2YgVWUgPyBxZSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBLZSA/IGplKHQsIGUpIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0gTGUodCwgZSksIHMgPSBXZShuKSArIFdlKHQuTik7XG4gICAgICAgIHJldHVybiBMdChuKSAmJiBMdCh0Lk4pID8geGUocykgOiBrZSh0LmssIHMpO1xuICAgIH0odCwgZSk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBmaW5hbCB0cmFuc2Zvcm0gcmVzdWx0IGFmdGVyIHRoZSB0cmFuc2Zvcm0gaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gKiBieSB0aGUgc2VydmVyLCBwb3RlbnRpYWxseSB1c2luZyB0aGUgc2VydmVyLXByb3ZpZGVkIHRyYW5zZm9ybVJlc3VsdC5cbiAqLyBmdW5jdGlvbiBGZSh0LCBlLCBuKSB7XG4gICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXG4gICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXG4gICAgLy8gYXBwbGljYXRpb25zLlxuICAgIHJldHVybiB0IGluc3RhbmNlb2YgVWUgPyBxZSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBLZSA/IGplKHQsIGUpIDogbjtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIHRyYW5zZm9ybSBvcGVyYXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG9cbiAqIHBlcnNpc3QgZm9yIHRoaXMgdHJhbnNmb3JtLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSB0cmFuc2Zvcm1cbiAqIG9wZXJhdGlvbiBpcyBhbHdheXMgYXBwbGllZCB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzXG4gKiBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBCYXNlIHZhbHVlcyBwcm92aWRlIGNvbnNpc3RlbnQgYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kXG4gKiBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWUgbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kXG4gKiBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZSB0cmFuc2Zvcm0gb3BlcmF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLCBhcyB0aGV5IGNhbiBiZSByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXNcbiAqIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3Jtcy5cbiAqLyBmdW5jdGlvbiBMZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBRZSA/IEx0KG4gPSBlKSB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBlaXRoZXIgYW4gSW50ZWdlclZhbHVlIG9yIGEgRG91YmxlVmFsdWUuICovIChuKSA/IGUgOiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogMFxuICAgIH0gOiBudWxsO1xuICAgIHZhciBuO1xufVxuXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cbmNsYXNzIEJlIGV4dGVuZHMgT2Uge31cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLiAqLyBjbGFzcyBVZSBleHRlbmRzIE9lIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcWUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHZShlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbi5zb21lKCh0ID0+IE50KHQsIGUpKSkgfHwgbi5wdXNoKGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgcmVtb3ZlIG9wZXJhdGlvbi4gKi8gY2xhc3MgS2UgZXh0ZW5kcyBPZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGplKHQsIGUpIHtcbiAgICBsZXQgbiA9IEdlKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuID0gbi5maWx0ZXIoKHQgPT4gIU50KHQsIGUpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXG4gKiB0cmFuc2Zvcm1zLiBDb252ZXJ0cyBhbGwgZmllbGQgdmFsdWVzIHRvIGludGVnZXJzIG9yIGRvdWJsZXMsIGJ1dCB1bmxpa2UgdGhlXG4gKiBiYWNrZW5kIGRvZXMgbm90IGNhcCBpbnRlZ2VyIHZhbHVlcyBhdCAyXjYzLiBJbnN0ZWFkLCBKYXZhU2NyaXB0IG51bWJlclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cbiAqLyBjbGFzcyBRZSBleHRlbmRzIE9lIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuayA9IHQsIHRoaXMuTiA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBXZSh0KSB7XG4gICAgcmV0dXJuIEl0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBHZSh0KSB7XG4gICAgcmV0dXJuIEJ0KHQpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMgPyB0LmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyB6ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy50cmFuc2Zvcm0gPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSGUodCwgZSkge1xuICAgIHJldHVybiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFVlICYmIGUgaW5zdGFuY2VvZiBVZSB8fCB0IGluc3RhbmNlb2YgS2UgJiYgZSBpbnN0YW5jZW9mIEtlID8gb3QodC5lbGVtZW50cywgZS5lbGVtZW50cywgTnQpIDogdCBpbnN0YW5jZW9mIFFlICYmIGUgaW5zdGFuY2VvZiBRZSA/IE50KHQuTiwgZS5OKSA6IHQgaW5zdGFuY2VvZiBCZSAmJiBlIGluc3RhbmNlb2YgQmU7XG4gICAgfSh0LnRyYW5zZm9ybSwgZS50cmFuc2Zvcm0pO1xufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBzdWNjZXNzZnVsbHkgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byB0aGUgYmFja2VuZC4gKi9cbmNsYXNzIEplIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdmVyc2lvbiBhdCB3aGljaCB0aGUgbXV0YXRpb24gd2FzIGNvbW1pdHRlZDpcbiAgICAgKlxuICAgICAqIC0gRm9yIG1vc3Qgb3BlcmF0aW9ucywgdGhpcyBpcyB0aGUgdXBkYXRlVGltZSBpbiB0aGUgV3JpdGVSZXN1bHQuXG4gICAgICogLSBGb3IgZGVsZXRlcywgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgKGJlY2F1c2UgZGVsZXRlcyBhcmVcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhlc2UgdmVyc2lvbnMgY2FuIGJlIGRpZmZlcmVudDogTm8tb3Agd3JpdGVzIHdpbGwgbm90IGNoYW5nZVxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHRpbmcgZmllbGRzIHJldHVybmVkIGZyb20gdGhlIGJhY2tlbmQgYWZ0ZXIgYSBtdXRhdGlvblxuICAgICAqIGNvbnRhaW5pbmcgZmllbGQgdHJhbnNmb3JtcyBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlXG4gICAgICogZm9yIGVhY2ggRmllbGRUcmFuc2Zvcm0gdGhhdCB3YXMgaW4gdGhlIG11dGF0aW9uLlxuICAgICAqXG4gICAgICogV2lsbCBiZSBlbXB0eSBpZiB0aGUgbXV0YXRpb24gZGlkIG5vdCBjb250YWluIGFueSBmaWVsZCB0cmFuc2Zvcm1zLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdCwgdGhpcy50cmFuc2Zvcm1SZXN1bHRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxuICogYmFja2VuZCBhY2NlcHRzIHdpdGggdGhlIHNwZWNpYWwgY2FzZSBvZiBhbiBleHBsaWNpdCBcImVtcHR5XCIgcHJlY29uZGl0aW9uXG4gKiAobWVhbmluZyBubyBwcmVjb25kaXRpb24pLlxuICovIGNsYXNzIFllIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZSA9IHQsIHRoaXMuZXhpc3RzID0gZTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZW1wdHkgUHJlY29uZGl0aW9uLiAqLyAgICBzdGF0aWMgbm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBZZTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIHdpdGggYW4gZXhpc3RzIGZsYWcuICovICAgIHN0YXRpYyBleGlzdHModCkge1xuICAgICAgICByZXR1cm4gbmV3IFllKHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovICAgIHN0YXRpYyB1cGRhdGVUaW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBZZSh0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciB0aGlzIFByZWNvbmRpdGlvbiBpcyBlbXB0eS4gKi8gICAgZ2V0IGlzTm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy51cGRhdGVUaW1lICYmIHZvaWQgMCA9PT0gdGhpcy5leGlzdHM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IHQuZXhpc3RzICYmICh0aGlzLnVwZGF0ZVRpbWUgPyAhIXQudXBkYXRlVGltZSAmJiB0aGlzLnVwZGF0ZVRpbWUuaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogIXQudXBkYXRlVGltZSk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovIGZ1bmN0aW9uIFhlKHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyBlLmlzRm91bmREb2N1bWVudCgpICYmIGUudmVyc2lvbi5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiB2b2lkIDAgPT09IHQuZXhpc3RzIHx8IHQuZXhpc3RzID09PSBlLmlzRm91bmREb2N1bWVudCgpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cbiAqIGNyZWF0ZSwgcmVwbGFjZSwgZGVsZXRlLCBhbmQgdXBkYXRlIHN1YnNldHMgb2YgZG9jdW1lbnRzLlxuICpcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdHMgdmVyc2lvbi5cbiAqXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXG4gKiB0aGUgZXhpc3RpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEZvciBEZWxldGUgbXV0YXRpb25zLCB3ZVxuICogcmVzZXQgdGhlIHZlcnNpb24gdG8gMC5cbiAqXG4gKiBIZXJlJ3MgdGhlIGV4cGVjdGVkIHRyYW5zaXRpb24gdGFibGUuXG4gKlxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXG4gKlxuICogU2V0TXV0YXRpb24gICAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIERvY3VtZW50KHYwKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgVW5rbm93bkRvY3VtZW50KHYzKVxuICogRGVsZXRlTXV0YXRpb24gICAgIERvY3VtZW50KHYzKSAgICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIEludmFsaWREb2N1bWVudCh2MCkgICBOb0RvY3VtZW50KHYwKVxuICpcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcbiAqIHRoZSByZXN1bHRpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEFzIGRlbGV0ZXMgaGF2ZSBub1xuICogZXhwbGljaXQgdXBkYXRlIHRpbWUsIHdlIHVzZSB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBmb3JcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXG4gKlxuICogSWYgYSBtdXRhdGlvbiBpcyBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQgYnV0IGZhaWxzIHRoZSBwcmVjb25kaXRpb24gY2hlY2tcbiAqIGxvY2FsbHksIHdlIHRyYW5zaXRpb24gdG8gYW4gYFVua25vd25Eb2N1bWVudGAgYW5kIHJlbHkgb24gV2F0Y2ggdG8gc2VuZCB1c1xuICogdGhlIHVwZGF0ZWQgdmVyc2lvbi5cbiAqXG4gKiBGaWVsZCB0cmFuc2Zvcm1zIGFyZSB1c2VkIG9ubHkgd2l0aCBQYXRjaCBhbmQgU2V0IE11dGF0aW9ucy4gV2UgdXNlIHRoZVxuICogYHVwZGF0ZVRyYW5zZm9ybXNgIG1lc3NhZ2UgdG8gc3RvcmUgdHJhbnNmb3JtcywgcmF0aGVyIHRoYW4gdGhlIGB0cmFuc2Zvcm1zYHNcbiAqIG1lc3NhZ2VzLlxuICpcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXG4gKlxuICogRXZlcnkgdHlwZSBvZiBtdXRhdGlvbiBuZWVkcyB0byBpbXBsZW1lbnQgaXRzIG93biBhcHBseVRvUmVtb3RlRG9jdW1lbnQoKSBhbmRcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cbiAqIHRvIHNvbWUgc291cmNlIGRvY3VtZW50IChzZWUgYHNldE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KClgIGZvciBhblxuICogZXhhbXBsZSkuXG4gKi8gY2xhc3MgWmUge31cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nIGFcbiAqIG5ldyByZW1vdGUgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZSBleHBlY3RlZCBzdGF0ZVxuICogKGUuZy4gaXQgaXMgaW52YWxpZCBvciBvdXRkYXRlZCksIHRoZSBkb2N1bWVudCB0eXBlIG1heSB0cmFuc2l0aW9uIHRvXG4gKiB1bmtub3duLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIG11dGF0aW9uUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgbXV0YXRpb24gZnJvbSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiB0bih0LCBlLCBuKSB7XG4gICAgdCBpbnN0YW5jZW9mIG9uID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2Ugc2V0TXV0YXRpb25BcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGFcbiAgICAgICAgLy8gcmVtb3RlIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG11c3QgaGF2ZSBoZWxkLlxuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gdW4odC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyk7XG4gICAgICAgIHMuc2V0QWxsKGkpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBzKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogdCBpbnN0YW5jZW9mIGNuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIVhlKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxuICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCBjb252ZXJ0IHRvIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIGFcbiAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5jb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQobi52ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgcyA9IHVuKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpLCBpID0gZS5kYXRhO1xuICAgICAgICBpLnNldEFsbChhbih0KSksIGkuc2V0QWxsKHMpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBpKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XG4gICAgICAgIC8vIGhhdmUgaGVsZC5cbiAgICAgICAgZS5jb252ZXJ0VG9Ob0RvY3VtZW50KG4udmVyc2lvbikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSgwLCBlLCBuKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nXG4gKiB0aGUgbmV3IGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlXG4gKiBleHBlY3RlZCBzdGF0ZSwgdGhlIGRvY3VtZW50IGlzIG5vdCBtb2RpZmllZC5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKi8gZnVuY3Rpb24gZW4odCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBvbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFYZSh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gaG4odC5maWVsZFRyYW5zZm9ybXMsIG4sIGUpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHJuKGUpLCBzKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovICh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiBjbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFYZSh0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IGhuKHQuZmllbGRUcmFuc2Zvcm1zLCBuLCBlKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoYW4odCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHJuKGUpLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBYZSh0LnByZWNvbmRpdGlvbiwgZSkgJiYgXG4gICAgICAgIC8vIFdlIGRvbid0IGNhbGwgYHNldEhhc0xvY2FsTXV0YXRpb25zKClgIHNpbmNlIHdlIHdhbnQgdG8gYmUgYmFja3dhcmRzXG4gICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgZXhpc3RpbmcgU0RLIGJlaGF2aW9yLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQodXQubWluKCkpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKHQsIGUpO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBubih0LCBlKSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgcyBvZiB0LmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGQpLCBpID0gTGUocy50cmFuc2Zvcm0sIHQgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PSBuICYmIChuID0gUXQuZW1wdHkoKSksIG4uc2V0KHMuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gc24odCwgZSkge1xuICAgIHJldHVybiB0LnR5cGUgPT09IGUudHlwZSAmJiAoISF0LmtleS5pc0VxdWFsKGUua2V5KSAmJiAoISF0LnByZWNvbmRpdGlvbi5pc0VxdWFsKGUucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgdm9pZCAwID09PSBlIHx8ICEoIXQgfHwgIWUpICYmIG90KHQsIGUsICgodCwgZSkgPT4gSGUodCwgZSkpKTtcbiAgICB9KHQuZmllbGRUcmFuc2Zvcm1zLCBlLmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogU2V0ICovID09PSB0LnR5cGUgPyB0LnZhbHVlLmlzRXF1YWwoZS52YWx1ZSkgOiAxIC8qIFBhdGNoICovICE9PSB0LnR5cGUgfHwgdC5kYXRhLmlzRXF1YWwoZS5kYXRhKSAmJiB0LmZpZWxkTWFzay5pc0VxdWFsKGUuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmVyc2lvbiBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdXNlIGFzIHRoZSByZXN1bHQgb2YgYVxuICogbXV0YXRpb24uIE11dGF0aW9ucyBhcmUgZGVmaW5lZCB0byByZXR1cm4gdGhlIHZlcnNpb24gb2YgdGhlIGJhc2UgZG9jdW1lbnRcbiAqIG9ubHkgaWYgaXQgaXMgYW4gZXhpc3RpbmcgZG9jdW1lbnQuIERlbGV0ZWQgYW5kIHVua25vd24gZG9jdW1lbnRzIGhhdmUgYVxuICogcG9zdC1tdXRhdGlvbiB2ZXJzaW9uIG9mIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAqLyBmdW5jdGlvbiBybih0KSB7XG4gICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgPyB0LnZlcnNpb24gOiB1dC5taW4oKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIG9uIGV4dGVuZHMgWmUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gcywgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogU2V0ICovO1xuICAgIH1cbn1cblxuY2xhc3MgY24gZXh0ZW5kcyBaZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSBuLCB0aGlzLnByZWNvbmRpdGlvbiA9IHMsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGksIHRoaXMudHlwZSA9IDEgLyogUGF0Y2ggKi87XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhbih0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIHQuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICB9XG4gICAgfSkpLCBlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gdW4odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIFUodC5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IHRbaV0sIG8gPSByLnRyYW5zZm9ybSwgYyA9IGUuZGF0YS5maWVsZChyLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoci5maWVsZCwgRmUobywgYywgbltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcbiAqIHRyYW5zZm9ybSBsb2NhbGx5LlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIGxvY2FsIHRpbWUgb2YgdGhlIG11dGF0aW9uICh1c2VkIHRvXG4gKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiAgICAgcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gaG4odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLnRyYW5zZm9ybSwgciA9IG4uZGF0YS5maWVsZChpLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoaS5maWVsZCwgTWUodCwgciwgZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqIEEgbXV0YXRpb24gdGhhdCBkZWxldGVzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5LiAqLyBjbGFzcyBsbiBleHRlbmRzIFplIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAyIC8qIERlbGV0ZSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBmbiBleHRlbmRzIFplIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAzIC8qIFZlcmlmeSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBkbiB7XG4gICAgLy8gVE9ETyhiLzMzMDc4MTYzKToganVzdCB1c2Ugc2ltcGxlc3QgZm9ybSBvZiBleGlzdGVuY2UgZmlsdGVyIGZvciBub3dcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRXJyb3IgQ29kZXMgZGVzY3JpYmluZyB0aGUgZGlmZmVyZW50IHdheXMgR1JQQyBjYW4gZmFpbC4gVGhlc2UgYXJlIGNvcGllZFxuICogZGlyZWN0bHkgZnJvbSBHUlBDJ3Mgc291cmNlcyBoZXJlOlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gKlxuICogSW1wb3J0YW50ISBUaGUgbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgbWF0dGVyIGJlY2F1c2UgdGhlIHN0cmluZyBmb3Jtc1xuICogYXJlIHVzZWQgZm9yIHJldmVyc2UgbG9va3VwcyBmcm9tIHRoZSB3ZWJjaGFubmVsIHN0cmVhbS4gRG8gTk9UIGNoYW5nZSB0aGVcbiAqIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG9yIGNoYW5nZSB0aGlzIGludG8gYSBjb25zdCBlbnVtLlxuICovIHZhciB3biwgX247XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIG5vbi13cml0ZSBvcGVyYXRpb24uXG4gKlxuICogU2VlIGlzUGVybWFuZW50V3JpdGVFcnJvciBmb3IgY2xhc3NpZnlpbmcgd3JpdGUgZXJyb3JzLlxuICovXG5mdW5jdGlvbiBtbih0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQigpO1xuXG4gICAgICBjYXNlIGouQ0FOQ0VMTEVEOlxuICAgICAgY2FzZSBqLlVOS05PV046XG4gICAgICBjYXNlIGouREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICBjYXNlIGouUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgY2FzZSBqLklOVEVSTkFMOlxuICAgICAgY2FzZSBqLlVOQVZBSUxBQkxFOlxuIC8vIFVuYXV0aGVudGljYXRlZCBtZWFucyBzb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIG91ciB0b2tlbiBhbmQgd2UgbmVlZFxuICAgICAgICAvLyB0byByZXRyeSB3aXRoIG5ldyBjcmVkZW50aWFscyB3aGljaCB3aWxsIGhhcHBlbiBhdXRvbWF0aWNhbGx5LlxuICAgICAgICAgICAgICBjYXNlIGouVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGNhc2Ugai5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgY2FzZSBqLk5PVF9GT1VORDpcbiAgICAgIGNhc2Ugai5BTFJFQURZX0VYSVNUUzpcbiAgICAgIGNhc2Ugai5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgIGNhc2Ugai5GQUlMRURfUFJFQ09ORElUSU9OOlxuIC8vIEFib3J0ZWQgbWlnaHQgYmUgcmV0cmllZCBpbiBzb21lIHNjZW5hcmlvcywgYnV0IHRoYXQgaXMgZGVwZW5kYW50IG9uXG4gICAgICAgIC8vIHRoZSBjb250ZXh0IGFuZCBzaG91bGQgaGFuZGxlZCBpbmRpdmlkdWFsbHkgYnkgdGhlIGNhbGxpbmcgY29kZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2Rlc2lnbi9lcnJvcnMuXG4gICAgICAgICAgICAgIGNhc2Ugai5BQk9SVEVEOlxuICAgICAgY2FzZSBqLk9VVF9PRl9SQU5HRTpcbiAgICAgIGNhc2Ugai5VTklNUExFTUVOVEVEOlxuICAgICAgY2FzZSBqLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgd3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFdyaXRlIG9wZXJhdGlvbnMgbXVzdCBiZSBoYW5kbGVkIHNwZWNpYWxseSBiZWNhdXNlIGFzIG9mIGIvMTE5NDM3NzY0LCBBQk9SVEVEXG4gKiBlcnJvcnMgb24gdGhlIHdyaXRlIHN0cmVhbSBzaG91bGQgYmUgcmV0cmllZCB0b28gKGV2ZW4gdGhvdWdoIEFCT1JURUQgZXJyb3JzXG4gKiBhcmUgbm90IGdlbmVyYWxseSByZXRyeWFibGUpLlxuICpcbiAqIE5vdGUgdGhhdCBkdXJpbmcgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG9uIHRoZSB3cml0ZSBzdHJlYW0gYW4gQUJPUlRFRCBlcnJvclxuICogc2lnbmFscyB0aGF0IHdlIHNob3VsZCBkaXNjYXJkIG91ciBzdHJlYW0gdG9rZW4gKGkuZS4gaXQgaXMgcGVybWFuZW50KS4gVGhpc1xuICogbWVhbnMgYSBoYW5kc2hha2UgZXJyb3Igc2hvdWxkIGJlIGNsYXNzaWZpZWQgd2l0aCBpc1Blcm1hbmVudEVycm9yLCBhYm92ZS5cbiAqL1xuLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBHUlBDIHN0YXR1cyBjb2RlIG51bWJlciwgbGlrZSAwLCAxLCBvciAxNC4gVGhlc2VcbiAqIGFyZSBub3QgdGhlIHNhbWUgYXMgSFRUUCBzdGF0dXMgY29kZXMuXG4gKlxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gR1JQQyBzdGF0dXMgY29kZS4gRmFpbHMgaWYgdGhlcmVcbiAqICAgICBpcyBubyBtYXRjaC5cbiAqL1xuZnVuY3Rpb24gZ24odCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIFxuICAgIC8vIFRoaXMgc2hvdWxkbid0IG5vcm1hbGx5IGhhcHBlbiwgYnV0IGluIGNlcnRhaW4gZXJyb3IgY2FzZXMgKGxpa2UgdHJ5aW5nXG4gICAgLy8gdG8gc2VuZCBpbnZhbGlkIHByb3RvIG1lc3NhZ2VzKSB3ZSBtYXkgZ2V0IGFuIGVycm9yIHdpdGggbm8gR1JQQyBjb2RlLlxuICAgIHJldHVybiBNKFwiR1JQQyBlcnJvciBoYXMgbm8gLmNvZGVcIiksIGouVU5LTk9XTjtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2Ugd24uT0s6XG4gICAgICAgIHJldHVybiBqLk9LO1xuXG4gICAgICBjYXNlIHduLkNBTkNFTExFRDpcbiAgICAgICAgcmV0dXJuIGouQ0FOQ0VMTEVEO1xuXG4gICAgICBjYXNlIHduLlVOS05PV046XG4gICAgICAgIHJldHVybiBqLlVOS05PV047XG5cbiAgICAgIGNhc2Ugd24uREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICAgIHJldHVybiBqLkRFQURMSU5FX0VYQ0VFREVEO1xuXG4gICAgICBjYXNlIHduLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgICAgcmV0dXJuIGouUkVTT1VSQ0VfRVhIQVVTVEVEO1xuXG4gICAgICBjYXNlIHduLklOVEVSTkFMOlxuICAgICAgICByZXR1cm4gai5JTlRFUk5BTDtcblxuICAgICAgY2FzZSB3bi5VTkFWQUlMQUJMRTpcbiAgICAgICAgcmV0dXJuIGouVU5BVkFJTEFCTEU7XG5cbiAgICAgIGNhc2Ugd24uVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gai5VTkFVVEhFTlRJQ0FURUQ7XG5cbiAgICAgIGNhc2Ugd24uSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgICAgcmV0dXJuIGouSU5WQUxJRF9BUkdVTUVOVDtcblxuICAgICAgY2FzZSB3bi5OT1RfRk9VTkQ6XG4gICAgICAgIHJldHVybiBqLk5PVF9GT1VORDtcblxuICAgICAgY2FzZSB3bi5BTFJFQURZX0VYSVNUUzpcbiAgICAgICAgcmV0dXJuIGouQUxSRUFEWV9FWElTVFM7XG5cbiAgICAgIGNhc2Ugd24uUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICAgIHJldHVybiBqLlBFUk1JU1NJT05fREVOSUVEO1xuXG4gICAgICBjYXNlIHduLkZBSUxFRF9QUkVDT05ESVRJT046XG4gICAgICAgIHJldHVybiBqLkZBSUxFRF9QUkVDT05ESVRJT047XG5cbiAgICAgIGNhc2Ugd24uQUJPUlRFRDpcbiAgICAgICAgcmV0dXJuIGouQUJPUlRFRDtcblxuICAgICAgY2FzZSB3bi5PVVRfT0ZfUkFOR0U6XG4gICAgICAgIHJldHVybiBqLk9VVF9PRl9SQU5HRTtcblxuICAgICAgY2FzZSB3bi5VTklNUExFTUVOVEVEOlxuICAgICAgICByZXR1cm4gai5VTklNUExFTUVOVEVEO1xuXG4gICAgICBjYXNlIHduLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuIGouREFUQV9MT1NTO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQigpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBIVFRQIHJlc3BvbnNlJ3MgZXJyb3Igc3RhdHVzIHRvIHRoZSBlcXVpdmFsZW50IGVycm9yIGNvZGUuXG4gKlxuICogQHBhcmFtIHN0YXR1cyAtIEFuIEhUVFAgZXJyb3IgcmVzcG9uc2Ugc3RhdHVzIChcIkZBSUxFRF9QUkVDT05ESVRJT05cIixcbiAqIFwiVU5LTk9XTlwiLCBldGMuKVxuICogQHJldHVybnMgVGhlIGVxdWl2YWxlbnQgQ29kZS4gTm9uLW1hdGNoaW5nIHJlc3BvbnNlcyBhcmUgbWFwcGVkIHRvXG4gKiAgICAgQ29kZS5VTktOT1dOLlxuICovIChfbiA9IHduIHx8ICh3biA9IHt9KSlbX24uT0sgPSAwXSA9IFwiT0tcIiwgX25bX24uQ0FOQ0VMTEVEID0gMV0gPSBcIkNBTkNFTExFRFwiLCBcbl9uW19uLlVOS05PV04gPSAyXSA9IFwiVU5LTk9XTlwiLCBfbltfbi5JTlZBTElEX0FSR1VNRU5UID0gM10gPSBcIklOVkFMSURfQVJHVU1FTlRcIiwgXG5fbltfbi5ERUFETElORV9FWENFRURFRCA9IDRdID0gXCJERUFETElORV9FWENFRURFRFwiLCBfbltfbi5OT1RfRk9VTkQgPSA1XSA9IFwiTk9UX0ZPVU5EXCIsIFxuX25bX24uQUxSRUFEWV9FWElTVFMgPSA2XSA9IFwiQUxSRUFEWV9FWElTVFNcIiwgX25bX24uUEVSTUlTU0lPTl9ERU5JRUQgPSA3XSA9IFwiUEVSTUlTU0lPTl9ERU5JRURcIiwgXG5fbltfbi5VTkFVVEhFTlRJQ0FURUQgPSAxNl0gPSBcIlVOQVVUSEVOVElDQVRFRFwiLCBfbltfbi5SRVNPVVJDRV9FWEhBVVNURUQgPSA4XSA9IFwiUkVTT1VSQ0VfRVhIQVVTVEVEXCIsIFxuX25bX24uRkFJTEVEX1BSRUNPTkRJVElPTiA9IDldID0gXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsIF9uW19uLkFCT1JURUQgPSAxMF0gPSBcIkFCT1JURURcIiwgXG5fbltfbi5PVVRfT0ZfUkFOR0UgPSAxMV0gPSBcIk9VVF9PRl9SQU5HRVwiLCBfbltfbi5VTklNUExFTUVOVEVEID0gMTJdID0gXCJVTklNUExFTUVOVEVEXCIsIFxuX25bX24uSU5URVJOQUwgPSAxM10gPSBcIklOVEVSTkFMXCIsIF9uW19uLlVOQVZBSUxBQkxFID0gMTRdID0gXCJVTkFWQUlMQUJMRVwiLCBfbltfbi5EQVRBX0xPU1MgPSAxNV0gPSBcIkRBVEFfTE9TU1wiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQW4gaW1tdXRhYmxlIHNvcnRlZCBtYXAgaW1wbGVtZW50YXRpb24sIGJhc2VkIG9uIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFja1xuLy8gdHJlZS5cbmNsYXNzIHluIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMucm9vdCA9IGUgfHwgVG4uRU1QVFk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQgb3IgcmVwbGFjZWQuXG4gICAgaW5zZXJ0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB5bih0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5pbnNlcnQodCwgZSwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIFRuLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHluKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290LnJlbW92ZSh0LCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgVG4uQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxuICAgIGdldCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshZS5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuY29tcGFyYXRvcih0LCBlLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuIGUudmFsdWU7XG4gICAgICAgICAgICBuIDwgMCA/IGUgPSBlLmxlZnQgOiBuID4gMCAmJiAoZSA9IGUucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBpbiB0aGlzIHNvcnRlZCBtYXAsIG9yIC0xIGlmIGl0IGRvZXNuJ3RcbiAgICAvLyBleGlzdC5cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgLy8gTnVtYmVyIG9mIG5vZGVzIHRoYXQgd2VyZSBwcnVuZWQgd2hlbiBkZXNjZW5kaW5nIHJpZ2h0XG4gICAgICAgIGxldCBlID0gMCwgbiA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IW4uaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmNvbXBhcmF0b3IodCwgbi5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IHMpIHJldHVybiBlICsgbi5sZWZ0LnNpemU7XG4gICAgICAgICAgICBzIDwgMCA/IG4gPSBuLmxlZnQgOiAoXG4gICAgICAgICAgICAvLyBDb3VudCBhbGwgbm9kZXMgbGVmdCBvZiB0aGUgbm9kZSBwbHVzIHRoZSBub2RlIGl0c2VsZlxuICAgICAgICAgICAgZSArPSBuLmxlZnQuc2l6ZSArIDEsIG4gPSBuLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb2RlIG5vdCBmb3VuZFxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBub2RlcyBpbiB0aGUgbWFwLlxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1pbktleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUsIG4pLCAhMSkpKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0LnB1c2goYCR7ZX06JHtufWApLCAhMSkpKSwgYHske3Quam9pbihcIiwgXCIpfX1gO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzXG4gICAgLy8gYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhbiBpdGVyYXRvciBvdmVyIHRoZSBTb3J0ZWRNYXAuXG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgcG4odGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwbih0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgcG4odGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcG4odGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwXG4vLyBBbiBpdGVyYXRvciBvdmVyIGFuIExMUkJOb2RlLlxuY2xhc3MgcG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5pc1JldmVyc2UgPSBzLCB0aGlzLm5vZGVTdGFjayA9IFtdO1xuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgIGZvciAoOyF0LmlzRW1wdHkoKTsgKSBpZiAoaSA9IGUgPyBuKHQua2V5LCBlKSA6IDEsIFxuICAgICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcbiAgICAgICAgcyAmJiAoaSAqPSAtMSksIGkgPCAwKSBcbiAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5sZWZ0IDogdC5yaWdodDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQucmlnaHQgOiB0LmxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIGZvciAodCA9IHQubGVmdDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0LnJpZ2h0OyBlbHNlIGZvciAodCA9IHQucmlnaHQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCBcbiAgICAgICAgdCA9IHQubGVmdDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5ub2RlU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbmNsYXNzIFRuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy52YWx1ZSA9IGUsIHRoaXMuY29sb3IgPSBudWxsICE9IG4gPyBuIDogVG4uUkVELCB0aGlzLmxlZnQgPSBudWxsICE9IHMgPyBzIDogVG4uRU1QVFksIFxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbCAhPSBpID8gaSA6IFRuLkVNUFRZLCB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUbihudWxsICE9IHQgPyB0IDogdGhpcy5rZXksIG51bGwgIT0gZSA/IGUgOiB0aGlzLnZhbHVlLCBudWxsICE9IG4gPyBuIDogdGhpcy5jb2xvciwgbnVsbCAhPSBzID8gcyA6IHRoaXMubGVmdCwgbnVsbCAhPSBpID8gaSA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgbWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKSA/IHRoaXMgOiB0aGlzLmxlZnQubWluKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKSA/IHRoaXMua2V5IDogdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gdGhpcztcbiAgICAgICAgY29uc3QgaSA9IG4odCwgcy5rZXkpO1xuICAgICAgICByZXR1cm4gcyA9IGkgPCAwID8gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5pbnNlcnQodCwgZSwgbiksIG51bGwpIDogMCA9PT0gaSA/IHMuY29weShudWxsLCBlLCBudWxsLCBudWxsLCBudWxsKSA6IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0Lmluc2VydCh0LCBlLCBuKSksIFxuICAgICAgICBzLmZpeFVwKCk7XG4gICAgfVxuICAgIHJlbW92ZU1pbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHJldHVybiBUbi5FTVBUWTtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmlzUmVkKCkgfHwgdC5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAodCA9IHQubW92ZVJlZExlZnQoKSksIHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgdC5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKSwgXG4gICAgICAgIHQuZml4VXAoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICBsZXQgbiwgcyA9IHRoaXM7XG4gICAgICAgIGlmIChlKHQsIHMua2V5KSA8IDApIHMubGVmdC5pc0VtcHR5KCkgfHwgcy5sZWZ0LmlzUmVkKCkgfHwgcy5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZExlZnQoKSksIFxuICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5yZW1vdmUodCwgZSksIG51bGwpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzLmxlZnQuaXNSZWQoKSAmJiAocyA9IHMucm90YXRlUmlnaHQoKSksIHMucmlnaHQuaXNFbXB0eSgpIHx8IHMucmlnaHQuaXNSZWQoKSB8fCBzLnJpZ2h0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZFJpZ2h0KCkpLCBcbiAgICAgICAgICAgIDAgPT09IGUodCwgcy5rZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMucmlnaHQuaXNFbXB0eSgpKSByZXR1cm4gVG4uRU1QVFk7XG4gICAgICAgICAgICAgICAgbiA9IHMucmlnaHQubWluKCksIHMgPSBzLmNvcHkobi5rZXksIG4udmFsdWUsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlTWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZSh0LCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHMuZml4VXAoKTtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgZml4VXAoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQucmlnaHQuaXNSZWQoKSAmJiAhdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZUxlZnQoKSksIHQubGVmdC5pc1JlZCgpICYmIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdC5sZWZ0LmlzUmVkKCkgJiYgdC5yaWdodC5pc1JlZCgpICYmICh0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRMZWZ0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCB0LnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdCA9IHQucm90YXRlTGVmdCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRSaWdodCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICByb3RhdGVMZWZ0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIFRuLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCB0LCBudWxsKTtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgVG4uUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgdCk7XG4gICAgfVxuICAgIGNvbG9yRmxpcCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpLCBlID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgdCwgZSk7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCB0KSA8PSB0aGlzLnNpemUgKyAxO1xuICAgIH1cbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB0aHJvdyBCKCk7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHRocm93IEIoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jaGVjaygpO1xuICAgICAgICBpZiAodCAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB0aHJvdyBCKCk7XG4gICAgICAgIHJldHVybiB0ICsgKHRoaXMuaXNSZWQoKSA/IDAgOiAxKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgTExSQk5vZGVcbi8vIEVtcHR5IG5vZGUgaXMgc2hhcmVkIGJldHdlZW4gYWxsIExMUkIgdHJlZXMuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuVG4uRU1QVFkgPSBudWxsLCBUbi5SRUQgPSAhMCwgVG4uQkxBQ0sgPSAhMTtcblxuLy8gZW5kIExMUkJFbXB0eU5vZGVcblRuLkVNUFRZID0gbmV3IFxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICB0aHJvdyBCKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgQigpO1xuICAgIH1cbiAgICBnZXQgY29sb3IoKSB7XG4gICAgICAgIHRocm93IEIoKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHRocm93IEIoKTtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICB0aHJvdyBCKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFRuKHQsIGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNvcnRlZFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBlbGVtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLlxuICpcbiAqIE5PVEU6IGlmIHByb3ZpZGVkIGNvbXBhcmF0b3IgcmV0dXJucyAwIGZvciB0d28gZWxlbWVudHMsIHdlIGNvbnNpZGVyIHRoZW0gdG9cbiAqIGJlIGVxdWFsIVxuICovXG5jbGFzcyBFbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLmRhdGEgPSBuZXcgeW4odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZGF0YS5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zaXplO1xuICAgIH1cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKHQpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZWxlbWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiByYW5nZVswXSAmbHQ7PSBlbGVtICZsdDsgcmFuZ2VbMV0uICovICAgIGZvckVhY2hJblJhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odFswXSk7XG4gICAgICAgIGZvciAoO24uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3Iocy5rZXksIHRbMV0pID49IDApIHJldHVybjtcbiAgICAgICAgICAgIGUocy5rZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHN0YXJ0ICZsdDs9IGVsZW0gdW50aWwgZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGZvckVhY2hXaGlsZSh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBmb3IgKG4gPSB2b2lkIDAgIT09IGUgPyB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpIDogdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7IG4uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmICghdChuLmdldE5leHQoKS5rZXkpKSByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEZpbmRzIHRoZSBsZWFzdCBlbGVtZW50IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgZWxlbWAuICovICAgIGZpcnN0QWZ0ZXJPckVxdWFsKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCk7XG4gICAgICAgIHJldHVybiBlLmhhc05leHQoKSA/IGUuZ2V0TmV4dCgpLmtleSA6IG51bGw7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IEluKHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbih0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBlbGVtZW50ICovICAgIGFkZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KS5pbnNlcnQodCwgITApKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYW4gZWxlbWVudCAqLyAgICBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXModCkgPyB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgdW5pb25XaXRoKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICAvLyBNYWtlIHN1cmUgYHJlc3VsdGAgYWx3YXlzIHJlZmVycyB0byB0aGUgbGFyZ2VyIG9uZSBvZiB0aGUgdHdvIHNldHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuc2l6ZSA8IHQuc2l6ZSAmJiAoZSA9IHQsIHQgPSB0aGlzKSwgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUgPSBlLmFkZCh0KTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIEVuKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpLCBuID0gdC5kYXRhLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5jb21wYXJhdG9yKHQsIHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUpKSksIFwiU29ydGVkU2V0KFwiICsgdC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIGNvcHkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEVuKHRoaXMuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiBlLmRhdGEgPSB0LCBlO1xuICAgIH1cbn1cblxuY2xhc3MgSW4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5pdGVyID0gdDtcbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEFuID0gbmV3IHluKER0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBSbigpIHtcbiAgICByZXR1cm4gQW47XG59XG5cbmNvbnN0IGJuID0gbmV3IHluKER0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBQbigpIHtcbiAgICByZXR1cm4gYm47XG59XG5cbmNvbnN0IHZuID0gbmV3IHluKER0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBWbigpIHtcbiAgICByZXR1cm4gdm47XG59XG5cbmNvbnN0IFNuID0gbmV3IEVuKER0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBEbiguLi50KSB7XG4gICAgbGV0IGUgPSBTbjtcbiAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuYWRkKG4pO1xuICAgIHJldHVybiBlO1xufVxuXG5jb25zdCBDbiA9IG5ldyBFbihydCk7XG5cbmZ1bmN0aW9uIE5uKCkge1xuICAgIHJldHVybiBDbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cbiAqLyBjbGFzcyBrbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LiBMaXN0ZW5zIGZvciB0aGVzZVxuICAgICAqIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXQgcmVzdW1lIHRva2Vucy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSB0LCB0aGlzLnRhcmdldENoYW5nZXMgPSBlLCB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSBuLCB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IHMsIFxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gbi5zZXQodCwgeG4uY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUpKSwgbmV3IGtuKHV0Lm1pbigpLCBuLCBObigpLCBSbigpLCBEbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyB4biB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZSByZXN1bWVkXG4gICAgICogYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaFxuICAgICAqIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIFwiY3VycmVudFwiIChzeW5jZWQpIHN0YXR1cyBvZiB0aGlzIHRhcmdldC4gTm90ZSB0aGF0IFwiY3VycmVudFwiXG4gICAgICogaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sIHRoYXQgaW1wbGllcyB0aGF0IGEgdGFyZ2V0IGlzXG4gICAgICogYm90aCB1cC10by1kYXRlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoIHN0cmVhbS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgbmV3bHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYXMgcGFydCBvZlxuICAgICAqIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGJ1dCByZWNlaXZlZFxuICAgICAqIGFuIHVwZGF0ZSBkdXJpbmcgdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mIHRoaXNcbiAgICAgKiByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdCwgdGhpcy5jdXJyZW50ID0gZSwgdGhpcy5hZGRlZERvY3VtZW50cyA9IG4sIHRoaXMubW9kaWZpZWREb2N1bWVudHMgPSBzLCBcbiAgICAgICAgdGhpcy5yZW1vdmVkRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBUYXJnZXRDaGFuZ2VzIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiBhcHBseSBhIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcgKGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50XG4gICAgICogdGFiKSBvciBmb3IgbmV3IHF1ZXJpZXMgKHRvIHJhaXNlIHNuYXBzaG90cyB3aXRoIGNvcnJlY3QgQ1VSUkVOVCBzdGF0dXMpLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB4bihwdC5FTVBUWV9CWVRFX1NUUklORywgZSwgRG4oKSwgRG4oKSwgRG4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhbmdlZCBkb2N1bWVudCBhbmQgYSBsaXN0IG9mIHRhcmdldCBpZHMgdG8gd2hpY2ggdGhpcyBjaGFuZ2VcbiAqIGFwcGxpZXMuXG4gKlxuICogSWYgZG9jdW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBOb0RvY3VtZW50IHdpbGwgYmUgcHJvdmlkZWQuXG4gKi8gY2xhc3MgJG4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGFwcGxpZXMgdG8gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCBmb3IgdGhpcyBjaGFuZ2UuICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIG5ldyBkb2N1bWVudCBvciBOb0RvY3VtZW50IGlmIGl0IHdhcyBkZWxldGVkLiBJcyBudWxsIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IHdlbnQgb3V0IG9mIHZpZXcgd2l0aG91dCB0aGUgc2VydmVyIHNlbmRpbmcgYSBuZXcgZG9jdW1lbnQuXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLiQgPSB0LCB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSBlLCB0aGlzLmtleSA9IG4sIHRoaXMuTyA9IHM7XG4gICAgfVxufVxuXG5jbGFzcyBPbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5NID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIE1uIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogV2hhdCBraW5kIG9mIGNoYW5nZSBvY2N1cnJlZCB0byB0aGUgd2F0Y2ggdGFyZ2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgdGFyZ2V0IElEcyB0aGF0IHdlcmUgYWRkZWQvcmVtb3ZlZC9zZXQuICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuID0gcHQuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIHRoaXMudGFyZ2V0SWRzID0gZSwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSBzO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIEZuIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgKGFkZHMgb3IgcmVtb3ZlcykgdGhhdCB3ZSBhcmUgd2FpdGluZyBvbi5cbiAgICAgICAgICogV2Ugb25seSBjb25zaWRlciB0YXJnZXRzIGFjdGl2ZSB0aGF0IGhhdmUgbm8gcGVuZGluZyByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkYgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTCA9IFVuKCksIFxuICAgICAgICAvKiogU2VlIHB1YmxpYyBnZXR0ZXJzIGZvciBleHBsYW5hdGlvbnMgb2YgdGhlc2UgZmllbGRzLiAqL1xuICAgICAgICB0aGlzLkIgPSBwdC5FTVBUWV9CWVRFX1NUUklORywgdGhpcy5VID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIGJlZW4gbWFya2VkICdjdXJyZW50Jy5cbiAgICAgKlxuICAgICAqICdDdXJyZW50JyBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2w6IEl0IGltcGxpZXMgdGhhdCB0aGVcbiAgICAgKiBXYXRjaCBiYWNrZW5kIGhhcyBzZW50IHVzIGFsbCBjaGFuZ2VzIHVwIHRvIHRoZSBwb2ludCBhdCB3aGljaCB0aGUgdGFyZ2V0XG4gICAgICogd2FzIGFkZGVkIGFuZCB0aGF0IHRoZSB0YXJnZXQgaXMgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbS5cbiAgICAgKi8gICAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlU7XG4gICAgfVxuICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovICAgIGdldCByZXN1bWVUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQjtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCBLKCkge1xuICAgICAgICByZXR1cm4gMCAhPT0gdGhpcy5GO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovICAgIGdldCBqKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSByZXN1bWUgdG9rZW4gdG8gdGhlIFRhcmdldENoYW5nZSwgYnV0IG9ubHkgd2hlbiBpdCBoYXMgYSBuZXdcbiAgICAgKiB2YWx1ZS4gRW1wdHkgcmVzdW1lVG9rZW5zIGFyZSBkaXNjYXJkZWQuXG4gICAgICovICAgIFcodCkge1xuICAgICAgICB0LmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHRoaXMucSA9ICEwLCB0aGlzLkIgPSB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRhcmdldCBjaGFuZ2UgZnJvbSB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIFRvIHJlc2V0IHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFmdGVyIHJhaXNpbmcgdGhpcyBzbmFwc2hvdCwgY2FsbFxuICAgICAqIGBjbGVhclBlbmRpbmdDaGFuZ2VzKClgLlxuICAgICAqLyAgICBHKCkge1xuICAgICAgICBsZXQgdCA9IERuKCksIGUgPSBEbigpLCBuID0gRG4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuTC5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgdCA9IHQuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICAgICAgICAgICAgZSA9IGUuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBCKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IHhuKHRoaXMuQiwgdGhpcy5VLCB0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIEgoKSB7XG4gICAgICAgIHRoaXMucSA9ICExLCB0aGlzLkwgPSBVbigpO1xuICAgIH1cbiAgICBKKHQsIGUpIHtcbiAgICAgICAgdGhpcy5xID0gITAsIHRoaXMuTCA9IHRoaXMuTC5pbnNlcnQodCwgZSk7XG4gICAgfVxuICAgIFkodCkge1xuICAgICAgICB0aGlzLnEgPSAhMCwgdGhpcy5MID0gdGhpcy5MLnJlbW92ZSh0KTtcbiAgICB9XG4gICAgWCgpIHtcbiAgICAgICAgdGhpcy5GICs9IDE7XG4gICAgfVxuICAgIFooKSB7XG4gICAgICAgIHRoaXMuRiAtPSAxO1xuICAgIH1cbiAgICB0dCgpIHtcbiAgICAgICAgdGhpcy5xID0gITAsIHRoaXMuVSA9ICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyB0byBhY2N1bXVsYXRlIHdhdGNoIGNoYW5nZXMgaW50byBhIFJlbW90ZUV2ZW50LlxuICovXG5jbGFzcyBMbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmV0ID0gdCwgXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cbiAgICAgICAgdGhpcy5udCA9IG5ldyBNYXAsIFxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xuICAgICAgICB0aGlzLnN0ID0gUm4oKSwgXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cbiAgICAgICAgdGhpcy5pdCA9IEJuKCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucnQgPSBuZXcgRW4ocnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIG90KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuJCkgdC5PICYmIHQuTy5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMuY3QoZSwgdC5PKSA6IHRoaXMuYXQoZSwgdC5rZXksIHQuTyk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuYXQoZSwgdC5rZXksIHQuTyk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICB1dCh0KSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldCh0LCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5odChlKTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSkgJiYgbi5XKHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlooKSwgbi5LIHx8IFxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBmcmVzaGx5IGFkZGVkIHRhcmdldCwgc28gd2UgbmVlZCB0byByZXNldCBhbnkgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGhhZCBwcmV2aW91c2x5LiBUaGlzIGNhbiBoYXBwZW4gZS5nLiB3aGVuIHJlbW92ZSBhbmQgYWRkXG4gICAgICAgICAgICAgICAgLy8gYmFjayBhIHRhcmdldCBmb3IgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgICAgIG4uSCgpLCBuLlcodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlooKSwgbi5LIHx8IHRoaXMucmVtb3ZlVGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMyAvKiBDdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmx0KGUpICYmIChuLnR0KCksIG4uVyh0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA0IC8qIFJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmx0KGUpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLmZ0KGUpLCBuLlcodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgQigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYWxsIHRhcmdldElkcyB0aGF0IHRoZSB3YXRjaCBjaGFuZ2UgYXBwbGllcyB0bzogZWl0aGVyIHRoZVxuICAgICAqIHRhcmdldElkcyBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgY2hhbmdlIG9yIHRoZSB0YXJnZXRJZHMgb2YgYWxsIGN1cnJlbnRseVxuICAgICAqIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdC50YXJnZXRJZHMubGVuZ3RoID4gMCA/IHQudGFyZ2V0SWRzLmZvckVhY2goZSkgOiB0aGlzLm50LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmx0KG4pICYmIGUobik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBleGlzdGVuY2UgZmlsdGVycyBhbmQgc3ludGhlc2l6ZXMgZGVsZXRlcyBmb3IgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICogVGFyZ2V0cyB0aGF0IGFyZSBpbnZhbGlkYXRlZCBieSBmaWx0ZXIgbWlzbWF0Y2hlcyBhcmUgYWRkZWQgdG9cbiAgICAgKiBgcGVuZGluZ1RhcmdldFJlc2V0c2AuXG4gICAgICovICAgIGR0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQsIG4gPSB0Lk0uY291bnQsIHMgPSB0aGlzLnd0KGUpO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKFp0KHQpKSBpZiAoMCA9PT0gbikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBEdCh0LnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXQoZSwgbiwgR3QubmV3Tm9Eb2N1bWVudChuLCB1dC5taW4oKSkpO1xuICAgICAgICAgICAgfSBlbHNlIFUoMSA9PT0gbik7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3QoZSkgIT09IG4gJiYgKFxuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2g6IFdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZCByYWlzZSBhIG5ld1xuICAgICAgICAgICAgICAgIC8vIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxuICAgICAgICAgICAgICAgIHRoaXMuZnQoZSksIHRoaXMucnQgPSB0aGlzLnJ0LmFkZChlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAqLyAgICBndCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLm50LmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy53dChzKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4uY3VycmVudCAmJiBadChpLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRHQoaS50YXJnZXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMuc3QuZ2V0KGUpIHx8IHRoaXMueXQocywgZSkgfHwgdGhpcy5hdChzLCBlLCBHdC5uZXdOb0RvY3VtZW50KGUsIHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbi5qICYmIChlLnNldChzLCBuLkcoKSksIG4uSCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgbiA9IERuKCk7XG4gICAgICAgIC8vIFdlIGV4dHJhY3QgdGhlIHNldCBvZiBsaW1iby1vbmx5IGRvY3VtZW50IHVwZGF0ZXMgYXMgdGhlIEdDIGxvZ2ljXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxuICAgICAgICBcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcbiAgICAgICAgLy8gY2xpZW50LlxuICAgICAgICAgICAgICAgIHRoaXMuaXQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICBlLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMud3QodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFlIHx8IDIgLyogTGltYm9SZXNvbHV0aW9uICovID09PSBlLnB1cnBvc2UgfHwgKHMgPSAhMSwgITEpO1xuICAgICAgICAgICAgfSkpLCBzICYmIChuID0gbi5hZGQodCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcga24odCwgZSwgdGhpcy5ydCwgdGhpcy5zdCwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ID0gUm4oKSwgdGhpcy5pdCA9IEJuKCksIHRoaXMucnQgPSBuZXcgRW4ocnQpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBjdCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5sdCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy55dCh0LCBlLmtleSkgPyAyIC8qIE1vZGlmaWVkICovIDogMCAvKiBBZGRlZCAqLztcbiAgICAgICAgdGhpcy5odCh0KS5KKGUua2V5LCBuKSwgdGhpcy5zdCA9IHRoaXMuc3QuaW5zZXJ0KGUua2V5LCBlKSwgdGhpcy5pdCA9IHRoaXMuaXQuaW5zZXJ0KGUua2V5LCB0aGlzLlR0KGUua2V5KS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBhdCh0LCBlLCBuKSB7XG4gICAgICAgIGlmICghdGhpcy5sdCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5odCh0KTtcbiAgICAgICAgdGhpcy55dCh0LCBlKSA/IHMuSihlLCAxIC8qIFJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgcy5ZKGUpLCB0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQoZSwgdGhpcy5UdChlKS5kZWxldGUodCkpLCBuICYmICh0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQoZSwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCkge1xuICAgICAgICB0aGlzLm50LmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgX3QodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5odCh0KS5HKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmV0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuc2l6ZSArIGUuYWRkZWREb2N1bWVudHMuc2l6ZSAtIGUucmVtb3ZlZERvY3VtZW50cy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoIGJlZm9yZSB3ZSBjYW4gY29uc2lkZXIgdGhlXG4gICAgICogc2VydmVyIHRvIGJlICdpbi1zeW5jJyB3aXRoIHRoZSBjbGllbnQncyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgWCh0KSB7XG4gICAgICAgIHRoaXMuaHQodCkuWCgpO1xuICAgIH1cbiAgICBodCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5udC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IEZuLCB0aGlzLm50LnNldCh0LCBlKSksIGU7XG4gICAgfVxuICAgIFR0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLml0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgRW4ocnQpLCB0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQodCwgZSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBsdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsICE9PSB0aGlzLnd0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCBPKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICB3dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm50LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgJiYgZS5LID8gbnVsbCA6IHRoaXMuZXQuRXQodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQgdG8gaXRzIGluaXRpYWwgc3RhdGUgKGUuZy4gc2V0c1xuICAgICAqICdjdXJyZW50JyB0byBmYWxzZSwgY2xlYXJzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHJlbW92ZXMgaXRzIHRhcmdldCBtYXBwaW5nXG4gICAgICogZnJvbSBhbGwgZG9jdW1lbnRzKS5cbiAgICAgKi8gICAgZnQodCkge1xuICAgICAgICB0aGlzLm50LnNldCh0LCBuZXcgRm4pO1xuICAgICAgICB0aGlzLmV0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmF0KHQsIGUsIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdGhlIGRvY3VtZW50IHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogc3BlY2lmaWVkIHRhcmdldC5cbiAgICAgKi8gICAgeXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLmhhcyhlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEJuKCkge1xuICAgIHJldHVybiBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG59XG5cbmZ1bmN0aW9uIFVuKCkge1xuICAgIHJldHVybiBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHFuID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBhc2M6IFwiQVNDRU5ESU5HXCIsXG4gICAgICAgIGRlc2M6IFwiREVTQ0VORElOR1wiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCksIEtuID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBcIjxcIjogXCJMRVNTX1RIQU5cIixcbiAgICAgICAgXCI8PVwiOiBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj5cIjogXCJHUkVBVEVSX1RIQU5cIixcbiAgICAgICAgXCI+PVwiOiBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj09XCI6IFwiRVFVQUxcIixcbiAgICAgICAgXCIhPVwiOiBcIk5PVF9FUVVBTFwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zXCI6IFwiQVJSQVlfQ09OVEFJTlNcIixcbiAgICAgICAgaW46IFwiSU5cIixcbiAgICAgICAgXCJub3QtaW5cIjogXCJOT1RfSU5cIixcbiAgICAgICAgXCJhcnJheS1jb250YWlucy1hbnlcIjogXCJBUlJBWV9DT05UQUlOU19BTllcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3Mgam4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5DID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIFFuKHQsIGUpIHtcbiAgICBpZiAodC5DKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiBlLnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgZS5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgZS5zZWNvbmRzLFxuICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gV24odCwgZSkge1xuICAgIHJldHVybiB0LkMgPyBlLnRvQmFzZTY0KCkgOiBlLnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24gR24odCwgZSkge1xuICAgIHJldHVybiBRbih0LCBlLnRvVGltZXN0YW1wKCkpO1xufVxuXG5mdW5jdGlvbiB6bih0KSB7XG4gICAgcmV0dXJuIFUoISF0KSwgdXQuZnJvbVRpbWVzdGFtcChmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBFdCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBIbih0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3dChbIFwicHJvamVjdHNcIiwgdC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2UgXSk7XG4gICAgfSh0KS5jaGlsZChcImRvY3VtZW50c1wiKS5jaGlsZChlKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gSm4odCkge1xuICAgIGNvbnN0IGUgPSB3dC5mcm9tU3RyaW5nKHQpO1xuICAgIHJldHVybiBVKFJzKGUpKSwgZTtcbn1cblxuZnVuY3Rpb24gWW4odCwgZSkge1xuICAgIHJldHVybiBIbih0LmRhdGFiYXNlSWQsIGUucGF0aCk7XG59XG5cbmZ1bmN0aW9uIFhuKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSm4oZSk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSB0LmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IHByb2plY3Q6IFwiICsgbi5nZXQoMSkgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xuICAgIGlmIChuLmdldCgzKSAhPT0gdC5kYXRhYmFzZUlkLmRhdGFiYXNlKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgRHQobnMobikpO1xufVxuXG5mdW5jdGlvbiBabih0LCBlKSB7XG4gICAgcmV0dXJuIEhuKHQuZGF0YWJhc2VJZCwgZSk7XG59XG5cbmZ1bmN0aW9uIHRzKHQpIHtcbiAgICBjb25zdCBlID0gSm4odCk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSBlLmxlbmd0aCA/IHd0LmVtcHR5UGF0aCgpIDogbnMoZSk7XG59XG5cbmZ1bmN0aW9uIGVzKHQpIHtcbiAgICByZXR1cm4gbmV3IHd0KFsgXCJwcm9qZWN0c1wiLCB0LmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIG5zKHQpIHtcbiAgICByZXR1cm4gVSh0Lmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gdC5nZXQoNCkpLCB0LnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIHNzKHQsIGUsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBZbih0LCBlKSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGlzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gWG4odCwgZS5uYW1lKSwgaSA9IHpuKGUudXBkYXRlVGltZSksIHIgPSBuZXcgUXQoe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIG8gPSBHdC5uZXdGb3VuZERvY3VtZW50KHMsIGksIHIpO1xuICAgIHJldHVybiBuICYmIG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBvLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogbztcbn1cblxuZnVuY3Rpb24gcnModCwgZSkge1xuICAgIHJldHVybiBcImZvdW5kXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgVSghIWUuZm91bmQpLCBlLmZvdW5kLm5hbWUsIGUuZm91bmQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgbiA9IFhuKHQsIGUuZm91bmQubmFtZSksIHMgPSB6bihlLmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gbmV3IFF0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZvdW5kLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEd0Lm5ld0ZvdW5kRG9jdW1lbnQobiwgcywgaSk7XG4gICAgfSh0LCBlKSA6IFwibWlzc2luZ1wiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIFUoISFlLm1pc3NpbmcpLCBVKCEhZS5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSBYbih0LCBlLm1pc3NpbmcpLCBzID0gem4oZS5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBHdC5uZXdOb0RvY3VtZW50KG4sIHMpO1xuICAgIH0odCwgZSkgOiBCKCk7XG59XG5cbmZ1bmN0aW9uIG9zKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5PX0NIQU5HRVwiID09PSB0ID8gMCAvKiBOb0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IHQgPyAxIC8qIEFkZGVkICovIDogXCJSRU1PVkVcIiA9PT0gdCA/IDIgLyogUmVtb3ZlZCAqLyA6IFwiQ1VSUkVOVFwiID09PSB0ID8gMyAvKiBDdXJyZW50ICovIDogXCJSRVNFVFwiID09PSB0ID8gNCAvKiBSZXNldCAqLyA6IEIoKTtcbiAgICAgICAgfShlLnRhcmdldENoYW5nZS50YXJnZXRDaGFuZ2VUeXBlIHx8IFwiTk9fQ0hBTkdFXCIpLCBpID0gZS50YXJnZXRDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdLCByID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHQuQyA/IChVKHZvaWQgMCA9PT0gZSB8fCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSwgcHQuZnJvbUJhc2U2NFN0cmluZyhlIHx8IFwiXCIpKSA6IChVKHZvaWQgMCA9PT0gZSB8fCBlIGluc3RhbmNlb2YgVWludDhBcnJheSksIFxuICAgICAgICAgICAgcHQuZnJvbVVpbnQ4QXJyYXkoZSB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KHQsIGUudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IGUudGFyZ2V0Q2hhbmdlLmNhdXNlLCBjID0gbyAmJiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdm9pZCAwID09PSB0LmNvZGUgPyBqLlVOS05PV04gOiBnbih0LmNvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBRKGUsIHQubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgKG9yIG51bGwpIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50b1xuICogYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cbiAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XG4gKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZS4gQnV0IEdSUEMgYWN0dWFsbHlcbiAqIGV4cGVjdHMgYSB7IHZhbHVlOiA8bnVtYmVyPiB9IHN0cnVjdC5cbiAqLyAobyk7XG4gICAgICAgIG4gPSBuZXcgTW4ocywgaSwgciwgYyB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBzLmRvY3VtZW50LCBzLmRvY3VtZW50Lm5hbWUsIHMuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IFhuKHQsIHMuZG9jdW1lbnQubmFtZSksIHIgPSB6bihzLmRvY3VtZW50LnVwZGF0ZVRpbWUpLCBvID0gbmV3IFF0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYyA9IEd0Lm5ld0ZvdW5kRG9jdW1lbnQoaSwgciwgbyksIGEgPSBzLnRhcmdldElkcyB8fCBbXSwgdSA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyAkbihhLCB1LCBjLmtleSwgYyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50RGVsZXRlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IFhuKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZWFkVGltZSA/IHpuKHMucmVhZFRpbWUpIDogdXQubWluKCksIG8gPSBHdC5uZXdOb0RvY3VtZW50KGksIHIpLCBjID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3ICRuKFtdLCBjLCBvLmtleSwgbyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50UmVtb3ZlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IFhuKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3ICRuKFtdLCByLCBpLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShcImZpbHRlclwiIGluIGUpKSByZXR1cm4gQigpO1xuICAgICAgICB7XG4gICAgICAgICAgICBlLmZpbHRlcjtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcjtcbiAgICAgICAgICAgIHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5jb3VudCB8fCAwLCBpID0gbmV3IGRuKHMpLCByID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIG4gPSBuZXcgT24ociwgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGNzKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIG9uKSBuID0ge1xuICAgICAgICB1cGRhdGU6IHNzKHQsIGUua2V5LCBlLnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBsbikgbiA9IHtcbiAgICAgICAgZGVsZXRlOiBZbih0LCBlLmtleSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgY24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogc3ModCwgZS5rZXksIGUuZGF0YSksXG4gICAgICAgIHVwZGF0ZU1hc2s6IEFzKGUuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgZm4pKSByZXR1cm4gQigpO1xuICAgICAgICBuID0ge1xuICAgICAgICAgICAgdmVyaWZ5OiBZbih0LCBlLmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGUuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBCZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBVZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIEtlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgUWUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uTlxuICAgICAgICB9O1xuICAgICAgICB0aHJvdyBCKCk7XG4gICAgfSgwLCB0KSkpKSwgZS5wcmVjb25kaXRpb24uaXNOb25lIHx8IChuLmN1cnJlbnREb2N1bWVudCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51cGRhdGVUaW1lID8ge1xuICAgICAgICAgICAgdXBkYXRlVGltZTogR24odCwgZS51cGRhdGVUaW1lKVxuICAgICAgICB9IDogdm9pZCAwICE9PSBlLmV4aXN0cyA/IHtcbiAgICAgICAgICAgIGV4aXN0czogZS5leGlzdHNcbiAgICAgICAgfSA6IEIoKTtcbiAgICB9KHQsIGUucHJlY29uZGl0aW9uKSksIG47XG59XG5cbmZ1bmN0aW9uIGFzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IFllLnVwZGF0ZVRpbWUoem4odC51cGRhdGVUaW1lKSkgOiB2b2lkIDAgIT09IHQuZXhpc3RzID8gWWUuZXhpc3RzKHQuZXhpc3RzKSA6IFllLm5vbmUoKTtcbiAgICB9KGUuY3VycmVudERvY3VtZW50KSA6IFllLm5vbmUoKSwgcyA9IGUudXBkYXRlVHJhbnNmb3JtcyA/IGUudXBkYXRlVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbiA9IG51bGw7XG4gICAgICAgIGlmIChcInNldFRvU2VydmVyVmFsdWVcIiBpbiBlKSBVKFwiUkVRVUVTVF9USU1FXCIgPT09IGUuc2V0VG9TZXJ2ZXJWYWx1ZSksIG4gPSBuZXcgQmU7IGVsc2UgaWYgKFwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgVWUodCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJyZW1vdmVBbGxGcm9tQXJyYXlcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5yZW1vdmVBbGxGcm9tQXJyYXkudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBLZSh0KTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gZSA/IG4gPSBuZXcgUWUodCwgZS5pbmNyZW1lbnQpIDogQigpO1xuICAgICAgICBjb25zdCBzID0gbXQuZnJvbVNlcnZlckZvcm1hdChlLmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgemUocywgbik7XG4gICAgfSh0LCBlKSkpIDogW107XG4gICAgaWYgKGUudXBkYXRlKSB7XG4gICAgICAgIGUudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBYbih0LCBlLnVwZGF0ZS5uYW1lKSwgciA9IG5ldyBRdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogZS51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZS51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBndChlLm1hcCgodCA9PiBtdC5mcm9tU2VydmVyRm9ybWF0KHQpKSkpO1xuICAgICAgICAgICAgfShlLnVwZGF0ZU1hc2spO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBjbihpLCByLCB0LCBuLCBzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IG9uKGksIHIsIG4sIHMpO1xuICAgIH1cbiAgICBpZiAoZS5kZWxldGUpIHtcbiAgICAgICAgY29uc3QgcyA9IFhuKHQsIGUuZGVsZXRlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBsbihzLCBuKTtcbiAgICB9XG4gICAgaWYgKGUudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHMgPSBYbih0LCBlLnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgZm4ocywgbik7XG4gICAgfVxuICAgIHJldHVybiBCKCk7XG59XG5cbmZ1bmN0aW9uIHVzKHQsIGUpIHtcbiAgICByZXR1cm4gdCAmJiB0Lmxlbmd0aCA+IDAgPyAoVSh2b2lkIDAgIT09IGUpLCB0Lm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE5PVEU6IERlbGV0ZXMgZG9uJ3QgaGF2ZSBhbiB1cGRhdGVUaW1lLlxuICAgICAgICBsZXQgbiA9IHQudXBkYXRlVGltZSA/IHpuKHQudXBkYXRlVGltZSkgOiB6bihlKTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbCh1dC5taW4oKSkgJiYgKFxuICAgICAgICAvLyBUaGUgRmlyZXN0b3JlIEVtdWxhdG9yIGN1cnJlbnRseSByZXR1cm5zIGFuIHVwZGF0ZSB0aW1lIG9mIDAgZm9yXG4gICAgICAgIC8vIGRlbGV0ZXMgb2Ygbm9uLWV4aXN0aW5nIGRvY3VtZW50cyAocmF0aGVyIHRoYW4gbnVsbCkuIFRoaXMgYnJlYWtzIHRoZVxuICAgICAgICAvLyB0ZXN0IFwiZ2V0IGRlbGV0ZWQgZG9jIHdoaWxlIG9mZmxpbmUgd2l0aCBzb3VyY2U9Y2FjaGVcIiBhcyBOb0RvY3VtZW50c1xuICAgICAgICAvLyB3aXRoIHZlcnNpb24gMCBhcmUgZmlsdGVyZWQgYnkgSW5kZXhlZERiJ3MgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAgICAgICAgLy8gVE9ETygjMjE0OSk6IFJlbW92ZSB0aGlzIHdoZW4gRW11bGF0b3IgaXMgZml4ZWRcbiAgICAgICAgbiA9IHpuKGUpKSwgbmV3IEplKG4sIHQudHJhbnNmb3JtUmVzdWx0cyB8fCBbXSk7XG4gICAgfSh0LCBlKSkpKSA6IFtdO1xufVxuXG5mdW5jdGlvbiBocyh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIFpuKHQsIGUucGF0aCkgXVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGxzKHQsIGUpIHtcbiAgICAvLyBEaXNzZWN0IHRoZSBwYXRoIGludG8gcGFyZW50LCBjb2xsZWN0aW9uSWQsIGFuZCBvcHRpb25hbCBrZXkgZmlsdGVyLlxuICAgIGNvbnN0IG4gPSB7XG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeToge31cbiAgICB9LCBzID0gZS5wYXRoO1xuICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwID8gKG4ucGFyZW50ID0gWm4odCwgcyksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBlLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgYWxsRGVzY2VuZGFudHM6ICEwXG4gICAgfSBdKSA6IChuLnBhcmVudCA9IFpuKHQsIHMucG9wTGFzdCgpKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHMubGFzdFNlZ21lbnQoKVxuICAgIH0gXSk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hcCgodCA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoXCI9PVwiIC8qIEVRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKHF0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHBzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKFV0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHBzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTlVMTFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKHF0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHBzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05BTlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChVdCh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBwcyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBwcyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IHlzKHQub3ApLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gZVswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIG9wOiBcIkFORFwiLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUuZmlsdGVycyk7XG4gICAgaSAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkud2hlcmUgPSBpKTtcbiAgICBjb25zdCByID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHBzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZ3ModC5kaXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSk7XG4gICAgfShlLm9yZGVyQnkpO1xuICAgIHIgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSByKTtcbiAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5DIHx8IHZ0KGUpID8gZSA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG51bWJlciAob3IgbnVsbCkgZnJvbSBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICovICh0LCBlLmxpbWl0KTtcbiAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBvKSwgZS5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gX3MoZS5zdGFydEF0KSksIFxuICAgIGUuZW5kQXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gX3MoZS5lbmRBdCkpLCBuO1xufVxuXG5mdW5jdGlvbiBmcyh0KSB7XG4gICAgbGV0IGUgPSB0cyh0LnBhcmVudCk7XG4gICAgY29uc3QgbiA9IHQuc3RydWN0dXJlZFF1ZXJ5LCBzID0gbi5mcm9tID8gbi5mcm9tLmxlbmd0aCA6IDA7XG4gICAgbGV0IGkgPSBudWxsO1xuICAgIGlmIChzID4gMCkge1xuICAgICAgICBVKDEgPT09IHMpO1xuICAgICAgICBjb25zdCB0ID0gbi5mcm9tWzBdO1xuICAgICAgICB0LmFsbERlc2NlbmRhbnRzID8gaSA9IHQuY29sbGVjdGlvbklkIDogZSA9IGUuY2hpbGQodC5jb2xsZWN0aW9uSWQpO1xuICAgIH1cbiAgICBsZXQgciA9IFtdO1xuICAgIG4ud2hlcmUgJiYgKHIgPSB3cyhuLndoZXJlKSk7XG4gICAgbGV0IG8gPSBbXTtcbiAgICBuLm9yZGVyQnkgJiYgKG8gPSBuLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmZShUcyh0LmZpZWxkKSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJBU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkRFU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogREVTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICh0LmRpcmVjdGlvbikpO1xuICAgIH0odCkpKSk7XG4gICAgbGV0IGMgPSBudWxsO1xuICAgIG4ubGltaXQgJiYgKGMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICByZXR1cm4gZSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgPyB0LnZhbHVlIDogdCwgdnQoZSkgPyBudWxsIDogZTtcbiAgICB9KG4ubGltaXQpKTtcbiAgICBsZXQgYSA9IG51bGw7XG4gICAgbi5zdGFydEF0ICYmIChhID0gbXMobi5zdGFydEF0KSk7XG4gICAgbGV0IHUgPSBudWxsO1xuICAgIHJldHVybiBuLmVuZEF0ICYmICh1ID0gbXMobi5lbmRBdCkpLCBnZShlLCBpLCBvLCByLCBjLCBcIkZcIiAvKiBGaXJzdCAqLyAsIGEsIHUpO1xufVxuXG5mdW5jdGlvbiBkcyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIExpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoXCI7XG5cbiAgICAgICAgICBjYXNlIDIgLyogTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEIoKTtcbiAgICAgICAgfVxuICAgIH0oMCwgZS5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiB3cyh0KSB7XG4gICAgcmV0dXJuIHQgPyB2b2lkIDAgIT09IHQudW5hcnlGaWx0ZXIgPyBbIElzKHQpIF0gOiB2b2lkIDAgIT09IHQuZmllbGRGaWx0ZXIgPyBbIEVzKHQpIF0gOiB2b2lkIDAgIT09IHQuY29tcG9zaXRlRmlsdGVyID8gdC5jb21wb3NpdGVGaWx0ZXIuZmlsdGVycy5tYXAoKHQgPT4gd3ModCkpKS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmNvbmNhdChlKSkpIDogQigpIDogW107XG59XG5cbmZ1bmN0aW9uIF9zKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiZWZvcmU6IHQuYmVmb3JlLFxuICAgICAgICB2YWx1ZXM6IHQucG9zaXRpb25cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtcyh0KSB7XG4gICAgY29uc3QgZSA9ICEhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICByZXR1cm4gbmV3IGhlKG4sIGUpO1xufVxuXG4vLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBncyh0KSB7XG4gICAgcmV0dXJuIHFuW3RdO1xufVxuXG5mdW5jdGlvbiB5cyh0KSB7XG4gICAgcmV0dXJuIEtuW3RdO1xufVxuXG5mdW5jdGlvbiBwcyh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGRQYXRoOiB0LmNhbm9uaWNhbFN0cmluZygpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gVHModCkge1xuICAgIHJldHVybiBtdC5mcm9tU2VydmVyRm9ybWF0KHQuZmllbGRQYXRoKTtcbn1cblxuZnVuY3Rpb24gRXModCkge1xuICAgIHJldHVybiB0ZS5jcmVhdGUoVHModC5maWVsZEZpbHRlci5maWVsZCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIkVRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI9PVwiIC8qIEVRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8XCIgLyogTEVTU19USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi87XG5cbiAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImluXCIgLyogSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0lOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBOT1RfSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi87XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEIoKTtcbiAgICAgICAgfVxuICAgIH0odC5maWVsZEZpbHRlci5vcCksIHQuZmllbGRGaWx0ZXIudmFsdWUpO1xufVxuXG5mdW5jdGlvbiBJcyh0KSB7XG4gICAgc3dpdGNoICh0LnVuYXJ5RmlsdGVyLm9wKSB7XG4gICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgIGNvbnN0IGUgPSBUcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIHRlLmNyZWF0ZShlLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTlVMTFwiOlxuICAgICAgICBjb25zdCBuID0gVHModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiB0ZS5jcmVhdGUobiwgXCI9PVwiIC8qIEVRVUFMICovICwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05PVF9OQU5cIjpcbiAgICAgICAgY29uc3QgcyA9IFRzKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gdGUuY3JlYXRlKHMsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgY29uc3QgaSA9IFRzKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gdGUuY3JlYXRlKGksIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQigpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQXModCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gdC5maWVsZHMuZm9yRWFjaCgodCA9PiBlLnB1c2godC5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiBlXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gUnModCkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gdC5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IHQuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IHQuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIGJzKHQpIHtcbiAgICBsZXQgZSA9IFwiXCI7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlLmxlbmd0aCA+IDAgJiYgKGUgPSB2cyhlKSksIGUgPSBQcyh0LmdldChuKSwgZSk7XG4gICAgcmV0dXJuIHZzKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gUHModCwgZSkge1xuICAgIGxldCBuID0gZTtcbiAgICBjb25zdCBzID0gdC5sZW5ndGg7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzOyBlKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY2hhckF0KGUpO1xuICAgICAgICBzd2l0Y2ggKHMpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gdnModCkge1xuICAgIHJldHVybiB0ICsgXCJcdTAwMDFcdTAwMDFcIjtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XG4gKiBzdHJpbmdzLlxuICovIGZ1bmN0aW9uIFZzKHQpIHtcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxuICAgIC8vIHdpdGggZXhhY3RseSAyIG11c3QgYmUgdGhlIGVtcHR5IHBhdGguXG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGlmIChVKGUgPj0gMiksIDIgPT09IGUpIHJldHVybiBVKFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDEpKSwgd3QuZW1wdHlQYXRoKCk7XG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgY2Fubm90IGV4aXN0IHBhc3QgdGhlIHNlY29uZC10by1sYXN0IHBvc2l0aW9uIGluIHRoZVxuICAgIC8vIHNvdXJjZSB2YWx1ZS5cbiAgICAgICAgY29uc3QgbiA9IGUgLSAyLCBzID0gW107XG4gICAgbGV0IGkgPSBcIlwiO1xuICAgIGZvciAobGV0IHIgPSAwOyByIDwgZTsgKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHR3byBjaGFyYWN0ZXJzIG9mIGEgdmFsaWQgZW5jb2RlZCBwYXRoIG11c3QgYmUgYSBzZXBhcmF0b3IsIHNvXG4gICAgICAgIC8vIHRoZXJlIG11c3QgYmUgYW4gZW5kIHRvIHRoaXMgc2VnbWVudC5cbiAgICAgICAgY29uc3QgZSA9IHQuaW5kZXhPZihcIlx1MDAwMVwiLCByKTtcbiAgICAgICAgKGUgPCAwIHx8IGUgPiBuKSAmJiBCKCk7XG4gICAgICAgIHN3aXRjaCAodC5jaGFyQXQoZSArIDEpKSB7XG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuc3Vic3RyaW5nKHIsIGUpO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICAwID09PSBpLmxlbmd0aCA/IFxuICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxuICAgICAgICAgICAgLy8gYW5kIFxcMDAxXG4gICAgICAgICAgICBvID0gbiA6IChpICs9IG4sIG8gPSBpLCBpID0gXCJcIiksIHMucHVzaChvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMFwiOlxuICAgICAgICAgICAgaSArPSB0LnN1YnN0cmluZyhyLCBlKSwgaSArPSBcIlxcMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDExXCI6XG4gICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUgKyAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIEIoKTtcbiAgICAgICAgfVxuICAgICAgICByID0gZSArIDI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgd3Qocyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNjaGVtYSBWZXJzaW9uIGZvciB0aGUgV2ViIGNsaWVudDpcbiAqIDEuICBJbml0aWFsIHZlcnNpb24gaW5jbHVkaW5nIE11dGF0aW9uIFF1ZXVlLCBRdWVyeSBDYWNoZSwgYW5kIFJlbW90ZVxuICogICAgIERvY3VtZW50IENhY2hlXG4gKiAyLiAgVXNlZCB0byBlbnN1cmUgYSB0YXJnZXRHbG9iYWwgb2JqZWN0IGV4aXN0cyBhbmQgYWRkIHRhcmdldENvdW50IHRvIGl0LiBOb1xuICogICAgIGxvbmdlciByZXF1aXJlZCBiZWNhdXNlIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gKiAzLiAgRHJvcHBlZCBhbmQgcmUtY3JlYXRlZCBRdWVyeSBDYWNoZSB0byBkZWFsIHdpdGggY2FjaGUgY29ycnVwdGlvbiByZWxhdGVkXG4gKiAgICAgdG8gbGltYm8gcmVzb2x1dGlvbi4gQWRkcmVzc2VzXG4gKiAgICAgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWlvcy1zZGsvaXNzdWVzLzE1NDhcbiAqIDQuICBNdWx0aS1UYWIgU3VwcG9ydC5cbiAqIDUuICBSZW1vdmFsIG9mIGhlbGQgd3JpdGUgYWNrcy5cbiAqIDYuICBDcmVhdGUgZG9jdW1lbnQgZ2xvYmFsIGZvciB0cmFja2luZyBkb2N1bWVudCBjYWNoZSBzaXplLlxuICogNy4gIEVuc3VyZSBldmVyeSBjYWNoZWQgZG9jdW1lbnQgaGFzIGEgc2VudGluZWwgcm93IHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuXG4gKiA4LiAgQWRkIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGZvciBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJpZXMuXG4gKiA5LiAgQ2hhbmdlIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBzdG9yZSB0byBiZSBrZXllZCBieSByZWFkVGltZSByYXRoZXIgdGhhblxuICogICAgIGFuIGF1dG8taW5jcmVtZW50aW5nIElELiBUaGlzIGlzIHJlcXVpcmVkIGZvciBJbmRleC1GcmVlIHF1ZXJpZXMuXG4gKiAxMC4gUmV3cml0ZSB0aGUgY2Fub25pY2FsIElEcyB0byB0aGUgZXhwbGljaXQgUHJvdG9idWYtYmFzZWQgZm9ybWF0LlxuICogMTEuIEFkZCBidW5kbGVzIGFuZCBuYW1lZF9xdWVyaWVzIGZvciBidW5kbGUgc3VwcG9ydC5cbiAqL1xuLyoqXG4gKiBXcmFwcGVyIGNsYXNzIHRvIHN0b3JlIHRpbWVzdGFtcHMgKHNlY29uZHMgYW5kIG5hbm9zKSBpbiBJbmRleGVkRGIgb2JqZWN0cy5cbiAqL1xuY2xhc3MgU3Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5zZWNvbmRzID0gdCwgdGhpcy5uYW5vc2Vjb25kcyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2luZ2xldG9uIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdvd25lcicgc3RvcmUgaW4gSW5kZXhlZERiLlxuICpcbiAqIEEgZ2l2ZW4gZGF0YWJhc2UgY2FuIGhhdmUgYSBzaW5nbGUgcHJpbWFyeSB0YWIgYXNzaWduZWQgYXQgYSBnaXZlbiB0aW1lLiBUaGF0XG4gKiB0YWIgbXVzdCB2YWxpZGF0ZSB0aGF0IGl0IGlzIHN0aWxsIGhvbGRpbmcgdGhlIHByaW1hcnkgbGVhc2UgYmVmb3JlIGV2ZXJ5XG4gKiBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyBsb2NrZWQgYWNjZXNzLiBUaGUgcHJpbWFyeSB0YWIgc2hvdWxkIHJlZ3VsYXJseVxuICogd3JpdGUgYW4gdXBkYXRlZCB0aW1lc3RhbXAgdG8gdGhpcyBsZWFzZSB0byBwcmV2ZW50IG90aGVyIHRhYnMgZnJvbVxuICogXCJzdGVhbGluZ1wiIHRoZSBwcmltYXJ5IGxlYXNlXG4gKi8gY2xhc3MgRHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKiBXaGV0aGVyIHRvIGFsbG93IHNoYXJlZCBhY2Nlc3MgZnJvbSBtdWx0aXBsZSB0YWJzLiAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5vd25lcklkID0gdCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGUsIHRoaXMubGVhc2VUaW1lc3RhbXBNcyA9IG47XG4gICAgfVxufVxuXG4vKipcbiAqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBuYW1lICdvd25lcicgaXMgY2hvc2VuIHRvIGVuc3VyZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoXG4gKiBvbGRlciBjbGllbnRzIHRoYXQgb25seSBzdXBwb3J0ZWQgc2luZ2xlIGxvY2tlZCBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlXG4gKiBsYXllci5cbiAqLyBEcy5zdG9yZSA9IFwib3duZXJcIiwgXG4vKipcbiAqIFRoZSBrZXkgc3RyaW5nIHVzZWQgZm9yIHRoZSBzaW5nbGUgb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZVxuICogRGJQcmltYXJ5Q2xpZW50IHN0b3JlLlxuICovXG5Ecy5rZXkgPSBcIm93bmVyXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ211dGF0aW9uUXVldWVzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogRWFjaCB1c2VyIGdldHMgYSBzaW5nbGUgcXVldWUgb2YgTXV0YXRpb25CYXRjaGVzIHRvIGFwcGx5IHRvIHRoZSBzZXJ2ZXIuXG4gKiBEYk11dGF0aW9uUXVldWUgdHJhY2tzIHRoZSBtZXRhZGF0YSBhYm91dCB0aGUgcXVldWUuXG4gKi9cbmNsYXNzIENzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VyIElEIHRvIHdoaWNoIHRoaXMgcXVldWUgYmVsb25ncy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGUgaGlnaGVzdCBudW1iZXJlZCBiYXRjaCB0aGF0IGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICAgICAqIGJ5IHRoZSBzZXJ2ZXIuIEFsbCBNdXRhdGlvbkJhdGNoZXMgaW4gdGhpcyBxdWV1ZSB3aXRoIGJhdGNoSWRzIGxlc3NcbiAgICAgKiB0aGFuIG9yIGVxdWFsIHRvIHRoaXMgdmFsdWUgYXJlIGNvbnNpZGVyZWQgdG8gaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBieVxuICAgICAqIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgc3RyZWFtIHRva2VuIHRoYXQgd2FzIHByZXZpb3VzbHkgc2VudCBieSB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogU2VlIFN0cmVhbWluZ1dyaXRlUmVxdWVzdCBpbiBkYXRhc3RvcmUucHJvdG8gZm9yIG1vcmUgZGV0YWlscyBhYm91dFxuICAgICAqIHVzYWdlLlxuICAgICAqXG4gICAgICogQWZ0ZXIgc2VuZGluZyB0aGlzIHRva2VuLCBlYXJsaWVyIHRva2VucyBtYXkgbm90IGJlIHVzZWQgYW55bW9yZSBzb1xuICAgICAqIG9ubHkgYSBzaW5nbGUgc3RyZWFtIHRva2VuIGlzIHJldGFpbmVkLlxuICAgICAqXG4gICAgICogTk9URTogdGhpcyBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgdXNlZCBieSB0aGUgY29kZS5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCA9IGUsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gbjtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gQ3Muc3RvcmUgPSBcIm11dGF0aW9uUXVldWVzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB1c2VySWQgcHJvcGVydHkuICovXG5Dcy5rZXlQYXRoID0gXCJ1c2VySWRcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogUmVwcmVzZW50cyBhIGJhdGNoIG9mIHVzZXItbGV2ZWwgbXV0YXRpb25zIGludGVuZGVkIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICogaW4gYSBzaW5nbGUgd3JpdGUuIEVhY2ggdXNlci1sZXZlbCBiYXRjaCBnZXRzIGEgc2VwYXJhdGUgRGJNdXRhdGlvbkJhdGNoXG4gKiB3aXRoIGEgbmV3IGJhdGNoSWQuXG4gKi9cbmNsYXNzIE5zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VyIElEIHRvIHdoaWNoIHRoaXMgYmF0Y2ggYmVsb25ncy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGlzIGJhdGNoLCBhbGxvY2F0ZWQgdXNpbmcgYW4gYXV0by1nZW5lcmF0ZWQga2V5LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZSBiYXRjaCwgc3RvcmVkIGFzIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGVcbiAgICAgKiBlcG9jaC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgXCJtdXRhdGlvbnNcIiB0aGF0IHJlcHJlc2VudCBhIHBhcnRpYWwgYmFzZSBzdGF0ZSBmcm9tIHdoZW4gdGhpc1xuICAgICAqIHdyaXRlIGJhdGNoIHdhcyBpbml0aWFsbHkgY3JlYXRlZC4gRHVyaW5nIGxvY2FsIGFwcGxpY2F0aW9uIG9mIHRoZSB3cml0ZVxuICAgICAqIGJhdGNoLCB0aGVzZSBiYXNlTXV0YXRpb25zIGFyZSBhcHBsaWVkIHByaW9yIHRvIHRoZSByZWFsIHdyaXRlcyBpbiBvcmRlclxuICAgICAqIHRvIG92ZXJyaWRlIGNlcnRhaW4gZG9jdW1lbnQgZmllbGRzIGZyb20gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gVGhpc1xuICAgICAqIGlzIG5lY2Vzc2FyeSBpbiB0aGUgY2FzZSBvZiBub24taWRlbXBvdGVudCB3cml0ZXMgKGUuZy4gYGluY3JlbWVudCgpYFxuICAgICAqIHRyYW5zZm9ybXMpIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBtb2RpZmllZCBkb2N1bWVudHNcbiAgICAgKiBkb2Vzbid0IGZsaWNrZXIgaWYgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSByZWNlaXZlcyB0aGUgcmVzdWx0IG9mIHRoZVxuICAgICAqIG5vbi1pZGVtcG90ZW50IHdyaXRlIGJlZm9yZSB0aGUgd3JpdGUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIFRoZXNlIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgbXV0YXRpb25zIHRvIGFwcGx5LiBBbGwgbXV0YXRpb25zIHdpbGwgYmUgYXBwbGllZCBhdG9taWNhbGx5LlxuICAgICAqXG4gICAgICogTXV0YXRpb25zIGFyZSBzZXJpYWxpemVkIHZpYSB0b011dGF0aW9uKCkuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMubG9jYWxXcml0ZVRpbWVNcyA9IG4sIHRoaXMuYmFzZU11dGF0aW9ucyA9IHMsIFxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IGk7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovIE5zLnN0b3JlID0gXCJtdXRhdGlvbnNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCwgYmF0Y2hJZCBwcm9wZXJ0aWVzLiAqL1xuTnMua2V5UGF0aCA9IFwiYmF0Y2hJZFwiLCBcbi8qKiBUaGUgaW5kZXggbmFtZSBmb3IgbG9va3VwIG9mIG11dGF0aW9ucyBieSB1c2VyLiAqL1xuTnMudXNlck11dGF0aW9uc0luZGV4ID0gXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgXG4vKiogVGhlIHVzZXIgbXV0YXRpb25zIGluZGV4IGlzIGtleWVkIGJ5IFt1c2VySWQsIGJhdGNoSWRdIHBhaXJzLiAqL1xuTnMudXNlck11dGF0aW9uc0tleVBhdGggPSBbIFwidXNlcklkXCIsIFwiYmF0Y2hJZFwiIF07XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ2RvY3VtZW50TXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogQSBtYW51YWxseSBtYWludGFpbmVkIGluZGV4IG9mIGFsbCB0aGUgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IGFmZmVjdCBhIGdpdmVuXG4gKiBkb2N1bWVudCBrZXkuIFRoZSByb3dzIGluIHRoaXMgdGFibGUgYXJlIHJlZmVyZW5jZXMgYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mXG4gKiBEYk11dGF0aW9uQmF0Y2gubXV0YXRpb25zLlxuICovXG5jbGFzcyBrcyB7XG4gICAgY29uc3RydWN0b3IoKSB7fVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbdXNlcklkXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleCB0byBpdGVyYXRlXG4gICAgICogb3ZlciBhbGwgb2YgYSB1c2VyJ3MgZG9jdW1lbnQgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgcHJlZml4Rm9yVXNlcih0KSB7XG4gICAgICAgIHJldHVybiBbIHQgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICAgICAqIGluZGV4IHRvIGl0ZXJhdGUgb3ZlciBhbGwgYXQgZG9jdW1lbnQgbXV0YXRpb25zIGZvciBhIGdpdmVuIHBhdGggb3IgbG93ZXIuXG4gICAgICovICAgIHN0YXRpYyBwcmVmaXhGb3JQYXRoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFsgdCwgYnMoZSkgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bGwgaW5kZXgga2V5IG9mIFt1c2VySWQsIGVuY29kZWRQYXRoLCBiYXRjaElkXSBmb3IgaW5zZXJ0aW5nXG4gICAgICogYW5kIGRlbGV0aW5nIGludG8gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXguXG4gICAgICovICAgIHN0YXRpYyBrZXkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gWyB0LCBicyhlKSwgbiBdO1xuICAgIH1cbn1cblxua3Muc3RvcmUgPSBcImRvY3VtZW50TXV0YXRpb25zXCIsIFxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovXG5rcy5QTEFDRUhPTERFUiA9IG5ldyBrcztcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBrbm93biBhYnNlbmNlIG9mIGEgZG9jdW1lbnQgYXQgYSBwYXJ0aWN1bGFyIHZlcnNpb24uXG4gKiBTdG9yZWQgaW4gSW5kZXhlZERiIGFzIHBhcnQgb2YgYSBEYlJlbW90ZURvY3VtZW50IG9iamVjdC5cbiAqL1xuY2xhc3MgeHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5yZWFkVGltZSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGJ1dCB3aG9zZSBkYXRhIGlzIHVua25vd24uXG4gKiBTdG9yZWQgaW4gSW5kZXhlZERiIGFzIHBhcnQgb2YgYSBEYlJlbW90ZURvY3VtZW50IG9iamVjdC5cbiAqLyBjbGFzcyAkcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLnZlcnNpb24gPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAncmVtb3RlRG9jdW1lbnRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlcjpcbiAqXG4gKiAtIEEgY29tcGxldGUgZG9jdW1lbnQuXG4gKiAtIEEgXCJubyBkb2N1bWVudFwiIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gbm90IHRvIGV4aXN0IChhdFxuICogc29tZSB2ZXJzaW9uKS5cbiAqIC0gQW4gXCJ1bmtub3duIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCAoYXRcbiAqIHNvbWUgdmVyc2lvbikgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSB1bmtub3duLlxuICpcbiAqIE5vdGU6IFRoaXMgaXMgdGhlIHBlcnNpc3RlZCBlcXVpdmFsZW50IG9mIGEgTWF5YmVEb2N1bWVudCBhbmQgY291bGQgcGVyaGFwc1xuICogYmUgbWFkZSBtb3JlIGdlbmVyYWwgaWYgbmVjZXNzYXJ5LlxuICovIGNsYXNzIE9zIHtcbiAgICAvLyBUT0RPOiBXZSBhcmUgY3VycmVudGx5IHN0b3JpbmcgZnVsbCBkb2N1bWVudCBrZXlzIGFsbW9zdCB0aHJlZSB0aW1lc1xuICAgIC8vIChvbmNlIGFzIHBhcnQgb2YgdGhlIHByaW1hcnkga2V5LCBvbmNlIC0gcGFydGx5IC0gYXMgYHBhcmVudFBhdGhgIGFuZCBvbmNlXG4gICAgLy8gaW5zaWRlIHRoZSBlbmNvZGVkIGRvY3VtZW50cykuIER1cmluZyBvdXIgbmV4dCBtaWdyYXRpb24sIHdlIHNob3VsZFxuICAgIC8vIHJld3JpdGUgdGhlIHByaW1hcnkga2V5IGFzIHBhcmVudFBhdGggKyBkb2N1bWVudCBJRCB3aGljaCB3b3VsZCBhbGxvdyB1c1xuICAgIC8vIHRvIGRyb3Agb25lIHZhbHVlLlxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBEYlVua25vd25Eb2N1bWVudCBpZiB0aGUgZGF0YSBmb3IgYSBkb2N1bWVudCBpc1xuICAgICAqIG5vdCBrbm93biwgYnV0IGl0IGlzIGtub3duIHRoYXQgYSBkb2N1bWVudCBleGlzdHMgYXQgdGhlIHNwZWNpZmllZFxuICAgICAqIHZlcnNpb24gKGUuZy4gaXQgaGFkIGEgc3VjY2Vzc2Z1bCB1cGRhdGUgYXBwbGllZCB0byBpdClcbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgYSBEYk5vRG9jdW1lbnQgaWYgaXQgaXMga25vd24gdGhhdCBubyBkb2N1bWVudFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgYSBEb2N1bWVudCBpZiB0aGVyZSdzIGEgY2FjaGVkIHZlcnNpb24gb2YgdGhlXG4gICAgICogZG9jdW1lbnQuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogRG9jdW1lbnRzIHRoYXQgd2VyZSB3cml0dGVuIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgc3RvcmUgYmFzZWQgb25cbiAgICAgKiBhIHdyaXRlIGFja25vd2xlZGdtZW50IGFyZSBtYXJrZWQgd2l0aCBgaGFzQ29tbWl0dGVkTXV0YXRpb25zYC4gVGhlc2VcbiAgICAgKiBkb2N1bWVudHMgYXJlIHBvdGVudGlhbGx5IGluY29uc2lzdGVudCB3aXRoIHRoZSBiYWNrZW5kJ3MgY29weSBhbmQgdXNlXG4gICAgICogdGhlIHdyaXRlJ3MgY29tbWl0IHZlcnNpb24gYXMgdGhlaXIgZG9jdW1lbnQgdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBkb2N1bWVudCB3YXMgcmVhZCBmcm9tIHRoZSBiYWNrZW5kLiBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlblxuICAgICAqIHByaW9yIHRvIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgaSwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggb2YgdGhlIGNvbGxlY3Rpb24gdGhpcyBkb2N1bWVudCBpcyBwYXJ0IG9mLiBVbmRlZmluZWQgZm9yIGRhdGFcbiAgICAgKiB3cml0dGVuIHByaW9yIHRvIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgcikge1xuICAgICAgICB0aGlzLnVua25vd25Eb2N1bWVudCA9IHQsIHRoaXMubm9Eb2N1bWVudCA9IGUsIHRoaXMuZG9jdW1lbnQgPSBuLCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9IHMsIFxuICAgICAgICB0aGlzLnJlYWRUaW1lID0gaSwgdGhpcy5wYXJlbnRQYXRoID0gcjtcbiAgICB9XG59XG5cbk9zLnN0b3JlID0gXCJyZW1vdGVEb2N1bWVudHNcIiwgXG4vKipcbiAqIEFuIGluZGV4IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIGFsbCBlbnRyaWVzIHNvcnRlZCBieSByZWFkIHRpbWUgKHdoaWNoXG4gKiBjb3JyZXNwb25kcyB0byB0aGUgbGFzdCBtb2RpZmljYXRpb24gdGltZSBvZiBlYWNoIHJvdykuXG4gKlxuICogVGhpcyBpbmRleCBpcyB1c2VkIHRvIHByb3ZpZGUgYSBjaGFuZ2Vsb2cgZm9yIE11bHRpLVRhYi5cbiAqL1xuT3MucmVhZFRpbWVJbmRleCA9IFwicmVhZFRpbWVJbmRleFwiLCBPcy5yZWFkVGltZUluZGV4UGF0aCA9IFwicmVhZFRpbWVcIiwgXG4vKipcbiAqIEFuIGluZGV4IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24gc29ydGVkIGJ5IHJlYWRcbiAqIHRpbWUuXG4gKlxuICogVGhpcyBpbmRleCBpcyB1c2VkIHRvIGFsbG93IHRoZSBSZW1vdGVEb2N1bWVudENhY2hlIHRvIGZldGNoIG5ld2x5IGNoYW5nZWRcbiAqIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24uXG4gKi9cbk9zLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4ID0gXCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleFwiLCBPcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGggPSBbIFwicGFyZW50UGF0aFwiLCBcInJlYWRUaW1lXCIgXTtcblxuLyoqXG4gKiBDb250YWlucyBhIHNpbmdsZSBlbnRyeSB0aGF0IGhhcyBtZXRhZGF0YSBhYm91dCB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLlxuICovXG5jbGFzcyBNcyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJ5dGVTaXplIC0gQXBwcm94aW1hdGVseSB0aGUgdG90YWwgc2l6ZSBpbiBieXRlcyBvZiBhbGwgdGhlXG4gICAgICogZG9jdW1lbnRzIGluIHRoZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYnl0ZVNpemUgPSB0O1xuICAgIH1cbn1cblxuTXMuc3RvcmUgPSBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIE1zLmtleSA9IFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAndGFyZ2V0cycgc3RvcmUgaW4gSW5kZXhlZERiLlxuICpcbiAqIFRoaXMgaXMgYmFzZWQgb24gYW5kIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TXG4gKiBjbGllbnQuXG4gKlxuICogRWFjaCBxdWVyeSB0aGUgY2xpZW50IGxpc3RlbnMgdG8gYWdhaW5zdCB0aGUgc2VydmVyIGlzIHRyYWNrZWQgb24gZGlzayBzb1xuICogdGhhdCB0aGUgcXVlcnkgY2FuIGJlIGVmZmljaWVudGx5IHJlc3VtZWQgb24gcmVzdGFydC5cbiAqL1xuY2xhc3MgRnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIGF1dG8tZ2VuZXJhdGVkIHNlcXVlbnRpYWwgbnVtZXJpYyBpZGVudGlmaWVyIGZvciB0aGUgcXVlcnkuXG4gICAgICpcbiAgICAgKiBRdWVyaWVzIGFyZSBzdG9yZWQgdXNpbmcgdGhlaXIgY2Fub25pY2FsSWQgYXMgdGhlIGtleSwgYnV0IHRoZXNlXG4gICAgICogY2Fub25pY2FsSWRzIGNhbiBiZSBxdWl0ZSBsb25nIHNvIHdlIGFkZGl0aW9uYWxseSBhc3NpZ24gYSB1bmlxdWVcbiAgICAgKiBxdWVyeUlkIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IHJlZmVyZW5jZWQgZGF0YSBzdHJ1Y3R1cmVzIChlLmcuXG4gICAgICogaW5kZXhlcykgdG8gbWluaW1pemUgdGhlIG9uLWRpc2sgY29zdC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgY2Fub25pY2FsIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBxdWVyeS4gVGhpcyBpcyBub3QgdW5pcXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IHJlYWRUaW1lIHJlY2VpdmVkIGZyb20gdGhlIFdhdGNoIFNlcnZpY2UgZm9yIHRoaXMgcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZWFkX3RpbWUgaW4gdGhlIHByb3Rvcy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhXG4gICAgICogdGhhdCBtYXRjaGVzIHRoZSBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGFcbiAgICAgKiBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgcmVsYXRlZCB0byB0aGUgc25hcHNob3RWZXJzaW9uIGluIHRoYXQgdGhlIHJlc3VtZVRva2VuXG4gICAgICogZWZmZWN0aXZlbHkgYWxzbyBlbmNvZGVzIHRoYXQgdmFsdWUsIGJ1dCB0aGUgcmVzdW1lVG9rZW4gaXMgb3BhcXVlXG4gICAgICogYW5kIHNvbWV0aW1lcyBlbmNvZGVzIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCB0aGUgcmVzdW1lVG9rZW4gc2hvdWxkIGJlIHVzZWQgd2hlblxuICAgICAqIGFza2luZyB0aGUgc2VydmVyIHRvIHJlYXNvbiBhYm91dCB3aGVyZSB0aGlzIGNsaWVudCBpcyBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0sIGJ1dCB0aGUgY2xpZW50IHNob3VsZCB1c2UgdGhlIHNuYXBzaG90VmVyc2lvbiBmb3IgaXRzIG93blxuICAgICAqIHB1cnBvc2VzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyB0aGUgc2FtZSB2YWx1ZSBhcyBUYXJnZXRDaGFuZ2UucmVzdW1lX3Rva2VuIGluIHRoZSBwcm90b3MuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBzZXF1ZW5jZSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBsYXN0IHRpbWUgdGhpcyBxdWVyeSB3YXNcbiAgICAgKiBsaXN0ZW5lZCB0bywgdXNlZCBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIHB1cnBvc2VzLlxuICAgICAqXG4gICAgICogQ29udmVudGlvbmFsbHkgdGhpcyB3b3VsZCBiZSBhIHRpbWVzdGFtcCB2YWx1ZSwgYnV0IGRldmljZS1sb2NhbFxuICAgICAqIGNsb2NrcyBhcmUgdW5yZWxpYWJsZSBhbmQgdGhleSBtdXN0IGJlIGFibGUgdG8gY3JlYXRlIG5ldyBsaXN0ZW5zXG4gICAgICogZXZlbiB3aGlsZSBkaXNjb25uZWN0ZWQuIEluc3RlYWQgdGhpcyBzaG91bGQgYmUgYSBtb25vdG9uaWNhbGx5XG4gICAgICogaW5jcmVhc2luZyBudW1iZXIgdGhhdCdzIGluY3JlbWVudGVkIG9uIGVhY2ggbGlzdGVuIGNhbGwuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBxdWVyeUlkIHNpbmNlIHRoZSBxdWVyeUlkIGlzIGFuXG4gICAgICogaW1tdXRhYmxlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhlIFF1ZXJ5IG9uIGZpcnN0IHVzZSB3aGlsZVxuICAgICAqIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyB1cGRhdGVkIGV2ZXJ5IHRpbWUgdGhlIHF1ZXJ5IGlzXG4gICAgICogbGlzdGVuZWQgdG8uXG4gICAgICovXG4gICAgaSwgXG4gICAgLyoqXG4gICAgICogRGVub3RlcyB0aGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHF1ZXJ5IHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLiAgVW5kZWZpbmVkIGZvciBkYXRhIHdyaXR0ZW4gcHJpb3IgdG9cbiAgICAgKiBzY2hlbWEgdmVyc2lvbiA5LlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBCZWNhdXNlIGNhbm9uaWNhbCBpZHMgYXJlIG5vdCB1bmlxdWUgd2UgbXVzdCBzdG9yZSB0aGUgYWN0dWFsIHF1ZXJ5LiBXZVxuICAgICAqIHVzZSB0aGUgcHJvdG8gdG8gaGF2ZSBhbiBvYmplY3Qgd2UgY2FuIHBlcnNpc3Qgd2l0aG91dCBoYXZpbmcgdG9cbiAgICAgKiBkdXBsaWNhdGUgdHJhbnNsYXRpb24gbG9naWMgdG8gYW5kIGZyb20gYSBgUXVlcnlgIG9iamVjdC5cbiAgICAgKi9cbiAgICBvKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLmNhbm9uaWNhbElkID0gZSwgdGhpcy5yZWFkVGltZSA9IG4sIHRoaXMucmVzdW1lVG9rZW4gPSBzLCBcbiAgICAgICAgdGhpcy5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBpLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnF1ZXJ5ID0gbztcbiAgICB9XG59XG5cbkZzLnN0b3JlID0gXCJ0YXJnZXRzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB0YXJnZXRJZCBwcm9wZXJ0eS4gKi9cbkZzLmtleVBhdGggPSBcInRhcmdldElkXCIsIFxuLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeVRhcmdldHMgaW5kZXguICovXG5Gcy5xdWVyeVRhcmdldHNJbmRleE5hbWUgPSBcInF1ZXJ5VGFyZ2V0c0luZGV4XCIsIFxuLyoqXG4gKiBUaGUgaW5kZXggb2YgYWxsIGNhbm9uaWNhbElkcyB0byB0aGUgdGFyZ2V0cyB0aGF0IHRoZXkgbWF0Y2guIFRoaXMgaXMgbm90XG4gKiBhIHVuaXF1ZSBtYXBwaW5nIGJlY2F1c2UgY2Fub25pY2FsSWQgZG9lcyBub3QgcHJvbWlzZSBhIHVuaXF1ZSBuYW1lIGZvciBhbGxcbiAqIHBvc3NpYmxlIHF1ZXJpZXMsIHNvIHdlIGFwcGVuZCB0aGUgdGFyZ2V0SWQgdG8gbWFrZSB0aGUgbWFwcGluZyB1bmlxdWUuXG4gKi9cbkZzLnF1ZXJ5VGFyZ2V0c0tleVBhdGggPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF07XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgdGFyZ2V0IGFuZCBhIGRvY3VtZW50LCBvciBhXG4gKiBzZW50aW5lbCByb3cgbWFya2luZyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYXQgd2hpY2ggYSBkb2N1bWVudCB3YXMgdXNlZC5cbiAqIEVhY2ggZG9jdW1lbnQgY2FjaGVkIG11c3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93IGJlZm9yZSBscnVcbiAqIGdhcmJhZ2UgY29sbGVjdGlvbiBpcyBlbmFibGVkLlxuICpcbiAqIFRoZSB0YXJnZXQgYXNzb2NpYXRpb25zIGFuZCBzZW50aW5lbCByb3dzIGFyZSBjby1sb2NhdGVkIHNvIHRoYXQgb3JwaGFuZWRcbiAqIGRvY3VtZW50cyBhbmQgdGhlaXIgc2VxdWVuY2UgbnVtYmVycyBjYW4gYmUgaWRlbnRpZmllZCBlZmZpY2llbnRseSB2aWEgYSBzY2FuXG4gKiBvZiB0aGlzIHN0b3JlLlxuICovXG5jbGFzcyBMcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldElkIGlkZW50aWZ5aW5nIGEgdGFyZ2V0IG9yIDAgZm9yIGEgc2VudGluZWwgcm93LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudCwgYXMgZW5jb2RlZCBpbiB0aGUga2V5LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIElmIHRoaXMgaXMgYSBzZW50aW5lbCByb3csIHRoaXMgc2hvdWxkIGJlIHRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3RcbiAgICAgKiB0aW1lIHRoZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHBhdGhgIHdhcyB1c2VkLiBPdGhlcndpc2UsIGl0IHNob3VsZCBiZVxuICAgICAqIGB1bmRlZmluZWRgLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMucGF0aCA9IGUsIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyBMcy5zdG9yZSA9IFwidGFyZ2V0RG9jdW1lbnRzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB0YXJnZXRJZCwgcGF0aCBwcm9wZXJ0aWVzLiAqL1xuTHMua2V5UGF0aCA9IFsgXCJ0YXJnZXRJZFwiLCBcInBhdGhcIiBdLCBcbi8qKiBUaGUgaW5kZXggbmFtZSBmb3IgdGhlIHJldmVyc2UgaW5kZXguICovXG5Mcy5kb2N1bWVudFRhcmdldHNJbmRleCA9IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIiwgXG4vKiogV2UgYWxzbyBuZWVkIHRvIGNyZWF0ZSB0aGUgcmV2ZXJzZSBpbmRleCBmb3IgdGhlc2UgcHJvcGVydGllcy4gKi9cbkxzLmRvY3VtZW50VGFyZ2V0c0tleVBhdGggPSBbIFwicGF0aFwiLCBcInRhcmdldElkXCIgXTtcblxuLyoqXG4gKiBBIHJlY29yZCBvZiBnbG9iYWwgc3RhdGUgdHJhY2tlZCBhY3Jvc3MgYWxsIFRhcmdldHMsIHRyYWNrZWQgc2VwYXJhdGVseVxuICogdG8gYXZvaWQgdGhlIG5lZWQgZm9yIGV4dHJhIGluZGV4ZXMuXG4gKlxuICogVGhpcyBzaG91bGQgYmUga2VwdCBpbi1zeW5jIHdpdGggdGhlIHByb3RvIHVzZWQgaW4gdGhlIGlPUyBjbGllbnQuXG4gKi9cbmNsYXNzIEJzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgaWQgYWNyb3NzIGFsbCB0YXJnZXRzLlxuICAgICAqXG4gICAgICogU2VlIERiVGFyZ2V0LnRhcmdldElkLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBhY3Jvc3MgYWxsIHRhcmdldHMuXG4gICAgICpcbiAgICAgKiBTZWUgRGJUYXJnZXQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgZ2xvYmFsIHNuYXBzaG90IHZlcnNpb24gcmVwcmVzZW50aW5nIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3Qgd2VcbiAgICAgKiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kLiBUaGlzIGlzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBhbmQgYW55XG4gICAgICogc25hcHNob3RzIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQgcHJpb3IgdG8gdGhpcyB2ZXJzaW9uIChlLmcuIGZvclxuICAgICAqIHRhcmdldHMgcmVzdW1lZCB3aXRoIGEgcmVzdW1lVG9rZW4pIHNob3VsZCBiZSBzdXBwcmVzc2VkIChidWZmZXJlZClcbiAgICAgKiB1bnRpbCB0aGUgYmFja2VuZCBoYXMgY2F1Z2h0IHVwIHRvIHRoaXMgc25hcHNob3QgdmVyc2lvbiBhZ2Fpbi4gVGhpc1xuICAgICAqIHByZXZlbnRzIG91ciBjYWNoZSBmcm9tIGV2ZXIgZ29pbmcgYmFja3dhcmRzIGluIHRpbWUuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiB0YXJnZXRzIHBlcnNpc3RlZC5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdCwgdGhpcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLCB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLCBcbiAgICAgICAgdGhpcy50YXJnZXRDb3VudCA9IHM7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSBrZXkgc3RyaW5nIHVzZWQgZm9yIHRoZSBzaW5nbGUgb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZVxuICogRGJUYXJnZXRHbG9iYWwgc3RvcmUuXG4gKi8gQnMua2V5ID0gXCJ0YXJnZXRHbG9iYWxLZXlcIiwgQnMuc3RvcmUgPSBcInRhcmdldEdsb2JhbFwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXNzb2NpYXRpb24gYmV0d2VlbiBhIENvbGxlY3Rpb24gaWQgKGUuZy4gJ21lc3NhZ2VzJylcbiAqIHRvIGEgcGFyZW50IHBhdGggKGUuZy4gJy9jaGF0cy8xMjMnKSB0aGF0IGNvbnRhaW5zIGl0IGFzIGEgKHN1Yiljb2xsZWN0aW9uLlxuICogVGhpcyBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGZpbmQgYWxsIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IHdoZW4gcGVyZm9ybWluZ1xuICogYSBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJ5LlxuICovXG5jbGFzcyBVcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb25JZCAoZS5nLiAnbWVzc2FnZXMnKVxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBwYXRoIHRvIHRoZSBwYXJlbnQgKGVpdGhlciBhIGRvY3VtZW50IGxvY2F0aW9uIG9yIGFuIGVtcHR5IHBhdGggZm9yXG4gICAgICogYSByb290LWxldmVsIGNvbGxlY3Rpb24pLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uSWQgPSB0LCB0aGlzLnBhcmVudCA9IGU7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gVXMuc3RvcmUgPSBcImNvbGxlY3Rpb25QYXJlbnRzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjb2xsZWN0aW9uSWQsIHBhcmVudCBwcm9wZXJ0aWVzLiAqL1xuVXMua2V5UGF0aCA9IFsgXCJjb2xsZWN0aW9uSWRcIiwgXCJwYXJlbnRcIiBdO1xuXG4vKipcbiAqIEEgcmVjb3JkIG9mIHRoZSBtZXRhZGF0YSBzdGF0ZSBvZiBlYWNoIGNsaWVudC5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgdXNlZCB0byBzeW5jaHJvbml6ZSBtdWx0aS10YWIgc3RhdGUgYW5kIGRvZXMgbm90IG5lZWRcbiAqIHRvIGJlIHBvcnRlZCB0byBpT1Mgb3IgQW5kcm9pZC5cbiAqL1xuY2xhc3MgcXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIE5vdGU6IFByZXZpb3VzIHNjaGVtYSB2ZXJzaW9ucyBpbmNsdWRlZCBhIGZpZWxkXG4gICAgLy8gXCJsYXN0UHJvY2Vzc2VkRG9jdW1lbnRDaGFuZ2VJZFwiLiBEb24ndCB1c2UgYW55bW9yZS5cbiAgICAvKiogVGhlIGF1dG8tZ2VuZXJhdGVkIGNsaWVudCBpZCBhc3NpZ25lZCBhdCBjbGllbnQgc3RhcnR1cC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGxhc3QgdGltZSB0aGlzIHN0YXRlIHdhcyB1cGRhdGVkLiAqL1xuICAgIGUsIFxuICAgIC8qKiBXaGV0aGVyIHRoZSBjbGllbnQncyBuZXR3b3JrIGNvbm5lY3Rpb24gaXMgZW5hYmxlZC4gKi9cbiAgICBuLCBcbiAgICAvKiogV2hldGhlciB0aGlzIGNsaWVudCBpcyBydW5uaW5nIGluIGEgZm9yZWdyb3VuZCB0YWIuICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy51cGRhdGVUaW1lTXMgPSBlLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gbiwgdGhpcy5pbkZvcmVncm91bmQgPSBzO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIHFzLnN0b3JlID0gXCJjbGllbnRNZXRhZGF0YVwiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgY2xpZW50SWQgcHJvcGVydGllcy4gKi9cbnFzLmtleVBhdGggPSBcImNsaWVudElkXCI7XG5cbi8qKlxuICogQSBvYmplY3QgcmVwcmVzZW50aW5nIGEgYnVuZGxlIGxvYWRlZCBieSB0aGUgU0RLLlxuICovXG5jbGFzcyBLcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBJRCBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNyZWF0ZSB0aW1lIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgc2NoZW1hIHZlcnNpb24gb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgbikge1xuICAgICAgICB0aGlzLmJ1bmRsZUlkID0gdCwgdGhpcy5jcmVhdGVUaW1lID0gZSwgdGhpcy52ZXJzaW9uID0gbjtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBLcy5zdG9yZSA9IFwiYnVuZGxlc1wiLCBLcy5rZXlQYXRoID0gXCJidW5kbGVJZFwiO1xuXG4vKipcbiAqIEEgb2JqZWN0IHJlcHJlc2VudGluZyBhIG5hbWVkIHF1ZXJ5IGxvYWRlZCBieSB0aGUgU0RLIHZpYSBhIGJ1bmRsZS5cbiAqL1xuY2xhc3MganMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSByZWFkIHRpbWUgb2YgdGhlIHJlc3VsdHMgc2F2ZWQgaW4gdGhlIGJ1bmRsZSBmcm9tIHRoZSBuYW1lZCBxdWVyeS4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHF1ZXJ5IHNhdmVkIGluIHRoZSBidW5kbGUuICovXG4gICAgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnJlYWRUaW1lID0gZSwgdGhpcy5idW5kbGVkUXVlcnkgPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIGpzLnN0b3JlID0gXCJuYW1lZFF1ZXJpZXNcIiwganMua2V5UGF0aCA9IFwibmFtZVwiO1xuXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jb25zdCBRcyA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBDcy5zdG9yZSwgTnMuc3RvcmUsIGtzLnN0b3JlLCBPcy5zdG9yZSwgRnMuc3RvcmUsIERzLnN0b3JlLCBCcy5zdG9yZSwgTHMuc3RvcmUgXSwgcXMuc3RvcmUgXSwgTXMuc3RvcmUgXSwgVXMuc3RvcmUgXSwgS3Muc3RvcmUsIGpzLnN0b3JlIF0sIFdzID0gXCJUaGUgY3VycmVudCB0YWIgaXMgbm90IGluIHRoZSByZXF1aXJlZCBzdGF0ZSB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uLiBJdCBtaWdodCBiZSBuZWNlc3NhcnkgdG8gcmVmcmVzaCB0aGUgYnJvd3NlciB0YWIuXCI7XG5cbi8vIFYyIGlzIG5vIGxvbmdlciB1c2FibGUgKHNlZSBjb21tZW50IGF0IHRvcCBvZiBmaWxlKVxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuLyoqXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xuICogb24gcGVyc2lzdGVuY2UuXG4gKi9cbmNsYXNzIEdzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgICBhZGRPbkNvbW1pdHRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKHQpO1xuICAgIH1cbiAgICByYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMuZm9yRWFjaCgodCA9PiB0KCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBlcnNpc3RlbmNlUHJvbWlzZSBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2UgZXhjZXB0XG4gKiBpdCBoYXMgYSAubmV4dCgpIG1ldGhvZCBpbnN0ZWFkIG9mIC50aGVuKCkgYW5kIC5uZXh0KCkgYW5kIC5jYXRjaCgpIGNhbGxiYWNrc1xuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxuICogYXN5bmNocm9ub3VzbHkgKFByb21pc2UgaW1wbGVtZW50YXRpb25zIHVzZSBzZXRJbW1lZGlhdGUoKSBvciBzaW1pbGFyKS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBpbnRlcm9wZXJhdGUgd2l0aCBJbmRleGVkREIgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBjb21taXQgdHJhbnNhY3Rpb25zIGlmIGNvbnRyb2wgaXMgcmV0dXJuZWQgdG8gdGhlIGV2ZW50IGxvb3Agd2l0aG91dFxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBOT1RFOiAudGhlbigpIGFuZCAuY2F0Y2goKSBvbmx5IGFsbG93IGEgc2luZ2xlIGNvbnN1bWVyLCB1bmxpa2Ugbm9ybWFsXG4gKiBQcm9taXNlcy5cbiAqLyBjbGFzcyB6cyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIHQoKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSB0LCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKHQpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IHQsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2sodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIG5leHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIEIoKSwgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITAsIHRoaXMuaXNEb25lID8gdGhpcy5lcnJvciA/IHRoaXMud3JhcEZhaWx1cmUoZSwgdGhpcy5lcnJvcikgOiB0aGlzLndyYXBTdWNjZXNzKHQsIHRoaXMucmVzdWx0KSA6IG5ldyB6cygoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2Vzcyh0LCBlKS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZShlLCB0KS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0KCk7XG4gICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIHpzID8gZSA6IHpzLnJlc29sdmUoZSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB6cy5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogenMucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgd3JhcEZhaWx1cmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogenMucmVqZWN0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgenMoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBlKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QodCkge1xuICAgICAgICByZXR1cm4gbmV3IHpzKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgd2FpdEZvcihcbiAgICAvLyBBY2NlcHQgYWxsIFByb21pc2UgdHlwZXMgaW4gd2FpdEZvcigpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCkge1xuICAgICAgICByZXR1cm4gbmV3IHpzKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAwLCBpID0gMCwgciA9ICExO1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICArK3MsIHQubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICArK2ksIHIgJiYgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgICAgICAgICAgfSksICh0ID0+IG4odCkpKTtcbiAgICAgICAgICAgIH0pKSwgciA9ICEwLCBpID09PSBzICYmIGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxuICAgICAqLyAgICBzdGF0aWMgb3IodCkge1xuICAgICAgICBsZXQgZSA9IHpzLnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUubmV4dCgodCA9PiB0ID8genMucmVzb2x2ZSh0KSA6IG4oKSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljIGZvckVhY2godCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuLnB1c2goZS5jYWxsKHRoaXMsIHQsIHMpKTtcbiAgICAgICAgfSkpLCB0aGlzLndhaXRGb3Iobik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBTaW1wbGVEYi5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxuICogc3BlY2lmaWMgb2JqZWN0IHN0b3JlLlxuICovXG5jbGFzcyBIcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IHQsIHRoaXMudHJhbnNhY3Rpb24gPSBlLCB0aGlzLmFib3J0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgSW5kZXhlZERiIHRyYW5zYWN0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JdCA9IG5ldyBXLCB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkl0LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZS5lcnJvciA/IHRoaXMuSXQucmVqZWN0KG5ldyBYcyh0LCBlLmVycm9yKSkgOiB0aGlzLkl0LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gc2koZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5JdC5yZWplY3QobmV3IFhzKHQsIG4pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIG9wZW4odCwgZSwgbiwgcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBIcyhlLCB0LnRyYW5zYWN0aW9uKHMsIG4pKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFhzKGUsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSXQucHJvbWlzZTtcbiAgICB9XG4gICAgYWJvcnQodCkge1xuICAgICAgICB0ICYmIHRoaXMuSXQucmVqZWN0KHQpLCB0aGlzLmFib3J0ZWQgfHwgKE8oXCJTaW1wbGVEYlwiLCBcIkFib3J0aW5nIHRyYW5zYWN0aW9uOlwiLCB0ID8gdC5tZXNzYWdlIDogXCJDbGllbnQtaW5pdGlhdGVkIGFib3J0XCIpLCBcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gITAsIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBTaW1wbGVEYlN0b3JlPEtleVR5cGUsIFZhbHVlVHlwZT4gZm9yIHRoZSBzcGVjaWZpZWQgc3RvcmUuIEFsbFxuICAgICAqIG9wZXJhdGlvbnMgcGVyZm9ybWVkIG9uIHRoZSBTaW1wbGVEYlN0b3JlIGhhcHBlbiB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpc1xuICAgICAqIHRyYW5zYWN0aW9uIGFuZCBpdCBjYW5ub3QgYmUgdXNlZCBhbnltb3JlIG9uY2UgdGhlIHRyYW5zYWN0aW9uIGlzXG4gICAgICogY29tcGxldGVkLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHdlIGNhbid0IGFjdHVhbGx5IGVuZm9yY2UgdGhhdCB0aGUgS2V5VHlwZSBhbmQgVmFsdWVUeXBlIGFyZVxuICAgICAqIGNvcnJlY3QsIGJ1dCB0aGV5IGFsbG93IHR5cGUgc2FmZXR5IHRocm91Z2ggdGhlIHJlc3Qgb2YgdGhlIGNvbnN1bWluZyBjb2RlLlxuICAgICAqLyAgICBzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHRpKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIEluZGV4ZWREYiB3aXRoIGEgc2ltcGxpZmllZCBpbnRlcmZhY2UgdGhhdCB1c2VzXG4gKiBQcm9taXNlLWxpa2UgcmV0dXJuIHZhbHVlcyB0byBjaGFpbiBvcGVyYXRpb25zLiBSZWFsIHByb21pc2VzIGNhbm5vdCBiZSB1c2VkXG4gKiBzaW5jZSAudGhlbigpIGNvbnRpbnVhdGlvbnMgYXJlIGV4ZWN1dGVkIGFzeW5jaHJvbm91c2x5IChlLmcuIHZpYVxuICogLnNldEltbWVkaWF0ZSksIHdoaWNoIHdvdWxkIGNhdXNlIEluZGV4ZWREQiB0byBlbmQgdGhlIHRyYW5zYWN0aW9uLlxuICogU2VlIFBlcnNpc3RlbmNlUHJvbWlzZSBmb3IgbW9yZSBkZXRhaWxzLlxuICovIGNsYXNzIEpzIHtcbiAgICAvKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2ltcGxlRGIgd3JhcHBlciBmb3IgSW5kZXhlZERiIGRhdGFiYXNlIGBuYW1lYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBgdmVyc2lvbmAgbXVzdCBub3QgYmUgYSBkb3duZ3JhZGUuIEluZGV4ZWREQiBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICogZG93bmdyYWRpbmcgdGhlIHNjaGVtYSB2ZXJzaW9uLiBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgYW55IHdheSB0byBkb1xuICAgICAqIHZlcnNpb25pbmcgb3V0c2lkZSBvZiBJbmRleGVkREIncyB2ZXJzaW9uaW5nIG1lY2hhbmlzbSwgYXMgb25seVxuICAgICAqIHZlcnNpb24tdXBncmFkZSB0cmFuc2FjdGlvbnMgYXJlIGFsbG93ZWQgdG8gZG8gdGhpbmdzIGxpa2UgY3JlYXRlXG4gICAgICogb2JqZWN0c3RvcmVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdCwgdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5SdCA9IG47XG4gICAgICAgIC8vIE5PVEU6IEFjY29yZGluZyB0byBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk3MDUwLCB0aGVcbiAgICAgICAgLy8gYnVnIHdlJ3JlIGNoZWNraW5nIGZvciBzaG91bGQgZXhpc3QgaW4gaU9TID49IDEyLjIgYW5kIDwgMTMsIGJ1dCBmb3JcbiAgICAgICAgLy8gd2hhdGV2ZXIgcmVhc29uIGl0J3MgbXVjaCBoYXJkZXIgdG8gaGl0IGFmdGVyIDEyLjIgc28gd2Ugb25seSBwcm9hY3RpdmVseVxuICAgICAgICAvLyBsb2cgb24gMTIuMi5cbiAgICAgICAgMTIuMiA9PT0gSnMuYnQoZ2V0VUEoKSkgJiYgTShcIkZpcmVzdG9yZSBwZXJzaXN0ZW5jZSBzdWZmZXJzIGZyb20gYSBidWcgaW4gaU9TIDEyLjIgU2FmYXJpIHRoYXQgbWF5IGNhdXNlIHlvdXIgYXBwIHRvIHN0b3Agd29ya2luZy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuXCIpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLiAqLyAgICBzdGF0aWMgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIE8oXCJTaW1wbGVEYlwiLCBcIlJlbW92aW5nIGRhdGFiYXNlOlwiLCB0KSwgZWkod2luZG93LmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZSh0KSkudG9Qcm9taXNlKCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIFB0KCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKEpzLnZ0KCkpIHJldHVybiAhMDtcbiAgICAgICAgLy8gV2UgZXh0ZW5zaXZlbHkgdXNlIGluZGV4ZWQgYXJyYXkgdmFsdWVzIGFuZCBjb21wb3VuZCBrZXlzLFxuICAgICAgICAvLyB3aGljaCBJRSBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydC4gSG93ZXZlciwgdGhleSBzdGlsbCBoYXZlIGluZGV4ZWREQlxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXG4gICAgICAgIC8vIHRvIHJldHVybiB0aGF0IHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkIGZvciB0aG9zZSBicm93c2Vycy5cbiAgICAgICAgLy8gRm9yIHRyYWNraW5nIHN1cHBvcnQgb2YgdGhpcyBmZWF0dXJlLCBzZWUgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXG4gICAgICAgIC8vIENoZWNrIHRoZSBVQSBzdHJpbmcgdG8gZmluZCBvdXQgdGhlIGJyb3dzZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGdldFVBKCksIGUgPSBKcy5idCh0KSwgbiA9IDAgPCBlICYmIGUgPCAxMCwgcyA9IEpzLlZ0KHQpLCBpID0gMCA8IHMgJiYgcyA8IDQuNTtcbiAgICAgICAgLy8gSUUgMTBcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XG4gICAgICAgIC8vIElFIDExXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xuICAgICAgICAvLyBFZGdlXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhKHQuaW5kZXhPZihcIk1TSUUgXCIpID4gMCB8fCB0LmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDAgfHwgdC5pbmRleE9mKFwiRWRnZS9cIikgPiAwIHx8IG4gfHwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cbiAgICAgKi8gICAgc3RhdGljIHZ0KCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgXCJZRVNcIiA9PT0gKG51bGwgPT09ICh0ID0gcHJvY2Vzcy5lbnYpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuU3QpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZnJvbSBhIHRyYW5zYWN0aW9uLiAqLyAgICBzdGF0aWMgRHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdC5zdG9yZShlKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIGJ0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL2koPzpwaG9uZXxwYWR8cG9kKSBvcyAoW1xcZF9dKykvaSksIG4gPSBlID8gZVsxXS5zcGxpdChcIl9cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgQW5kcm9pZCB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgVnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvQW5kcm9pZCAoW1xcZC5dKykvaSksIG4gPSBlID8gZVsxXS5zcGxpdChcIi5cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIGNyZWF0aW5nIG9yIHVwZ3JhZGluZyBpdCBpZiBuZWNlc3NhcnkuXG4gICAgICovICAgIGFzeW5jIEN0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIgfHwgKE8oXCJTaW1wbGVEYlwiLCBcIk9wZW5pbmcgZGF0YWJhc2U6XCIsIHRoaXMubmFtZSksIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHMgPSBpbmRleGVkREIub3Blbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICBzLm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgZShuKTtcbiAgICAgICAgICAgIH0sIHMub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG4obmV3IFhzKHQsIFwiQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiBDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC5cIikpO1xuICAgICAgICAgICAgfSwgcy5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgICAgIFwiVmVyc2lvbkVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgRmlyZXN0b3JlIFNESyB3YXMgcHJldmlvdXNseSB1c2VkIGFuZCBzbyB0aGUgcGVyc2lzdGVkIGRhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLIHdpbGwgb3BlcmF0ZSB3aXRoIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBJZiB5b3UgbmVlZCBwZXJzaXN0ZW5jZSwgcGxlYXNlIHJlLXVwZ3JhZGUgdG8gYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBTREsgb3IgZWxzZSBjbGVhciB0aGUgcGVyc2lzdGVkIEluZGV4ZWREQiBkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC5cIikpIDogXCJJbnZhbGlkU3RhdGVFcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJVbmFibGUgdG8gb3BlbiBhbiBJbmRleGVkREIgY29ubmVjdGlvbi4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gcnVubmluZyBpbiBhIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbiBvbiBhIGJyb3dzZXIgd2hvc2UgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9ucyBkbyBub3Qgc3VwcG9ydCBJbmRleGVkREI6IFwiICsgcykpIDogbihuZXcgWHModCwgcykpO1xuICAgICAgICAgICAgfSwgcy5vbnVwZ3JhZGVuZWVkZWQgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBPKFwiU2ltcGxlRGJcIiwgJ0RhdGFiYXNlIFwiJyArIHRoaXMubmFtZSArICdcIiByZXF1aXJlcyB1cGdyYWRlIGZyb20gdmVyc2lvbjonLCB0Lm9sZFZlcnNpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5SdC5OdChlLCBzLnRyYW5zYWN0aW9uLCB0Lm9sZFZlcnNpb24sIHRoaXMudmVyc2lvbikubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBPKFwiU2ltcGxlRGJcIiwgXCJEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gXCIgKyB0aGlzLnZlcnNpb24gKyBcIiBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkpLCB0aGlzLmt0ICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IHQgPT4gdGhpcy5rdCh0KSksIHRoaXMuZGI7XG4gICAgfVxuICAgIHh0KHQpIHtcbiAgICAgICAgdGhpcy5rdCA9IHQsIHRoaXMuZGIgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZSA9PiB0KGUpKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuVHJhbnNhY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gXCJyZWFkb25seVwiID09PSBlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICsrcjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IGF3YWl0IHRoaXMuQ3QodCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEhzLm9wZW4odGhpcy5kYiwgdCwgaSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCIsIG4pLCByID0gcyhlKS5jYXRjaCgodCA9PiAoXG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHRyYW5zYWN0aW9uIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICBlLmFib3J0KHQpLCB6cy5yZWplY3QodCkpKSkudG9Qcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXG4gICAgICAgICAgICAgICAgLy8gd2Ugc3dhbGxvdyBhbnkgZXJyb3IgaGVyZSB0byBhdm9pZCB0aGUgYnJvd3NlciBsb2dnaW5nIGl0IGFzIHVuaGFuZGxlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gci5jYXRjaCgoKCkgPT4ge30pKSwgXG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xuICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxuICAgICAgICAgICAgICAgIGF3YWl0IGUuQXQsIHI7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFdlIGNvdWxkIHByb2JhYmx5IGJlIHNtYXJ0ZXIgYWJvdXQgdGhpcyBhbmRcbiAgICAgICAgICAgICAgICAvLyBub3QgcmV0cnkgZXhjZXB0aW9ucyB0aGF0IGFyZSBsaWtlbHkgdW5yZWNvdmVyYWJsZSAoc3VjaCBhcyBxdW90YVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VlZGVkIGVycm9ycykuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2Fubm90IHVzZSBhbiBpbnN0YW5jZW9mIGNoZWNrIGZvciBGaXJlc3RvcmVFeGNlcHRpb24sIHNpbmNlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBpcyB3cmFwcGVkIGluIGEgZ2VuZXJpYyBlcnJvciBieSBvdXIgYXN5bmMvYXdhaXQgaGFuZGxpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFwiRmlyZWJhc2VFcnJvclwiICE9PSB0Lm5hbWUgJiYgciA8IDM7XG4gICAgICAgICAgICAgICAgaWYgKE8oXCJTaW1wbGVEYlwiLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCB0Lm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIGUpLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFlKSByZXR1cm4gUHJvbWlzZS5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyBZcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLiR0ID0gdCwgdGhpcy5PdCA9ICExLCB0aGlzLk10ID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT3Q7XG4gICAgfVxuICAgIGdldCBGdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTXQ7XG4gICAgfVxuICAgIHNldCBjdXJzb3IodCkge1xuICAgICAgICB0aGlzLiR0ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHN0b3AgaXRlcmF0aW9uIGF0IGFueSBwb2ludC5cbiAgICAgKi8gICAgZG9uZSgpIHtcbiAgICAgICAgdGhpcy5PdCA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc2tpcCB0byB0aGF0IG5leHQga2V5LCB3aGljaCBjb3VsZCBiZVxuICAgICAqIGFuIGluZGV4IG9yIGEgcHJpbWFyeSBrZXkuXG4gICAgICovICAgIEx0KHQpIHtcbiAgICAgICAgdGhpcy5NdCA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSB0aGUgY3VycmVudCBjdXJzb3IgdmFsdWUgZnJvbSB0aGUgb2JqZWN0IHN0b3JlLlxuICAgICAqXG4gICAgICogTk9URTogWW91IENBTk5PVCBkbyB0aGlzIHdpdGggYSBrZXlzT25seSBxdWVyeS5cbiAgICAgKi8gICAgZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gZWkodGhpcy4kdC5kZWxldGUoKSk7XG4gICAgfVxufVxuXG4vKiogQW4gZXJyb3IgdGhhdCB3cmFwcyBleGNlcHRpb25zIHRoYXQgdGhyb3duIGR1cmluZyBJbmRleGVkREIgZXhlY3V0aW9uLiAqLyBjbGFzcyBYcyBleHRlbmRzIFEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoai5VTkFWQUlMQUJMRSwgYEluZGV4ZWREQiB0cmFuc2FjdGlvbiAnJHt0fScgZmFpbGVkOiAke2V9YCksIHRoaXMubmFtZSA9IFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiO1xuICAgIH1cbn1cblxuLyoqIFZlcmlmaWVzIHdoZXRoZXIgYGVgIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuICovIGZ1bmN0aW9uIFpzKHQpIHtcbiAgICAvLyBVc2UgbmFtZSBlcXVhbGl0eSwgYXMgaW5zdGFuY2VvZiBjaGVja3Mgb24gZXJyb3JzIGRvbid0IHdvcmsgd2l0aCBlcnJvcnNcbiAgICAvLyB0aGF0IHdyYXAgb3RoZXIgZXJyb3JzLlxuICAgIHJldHVybiBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIiA9PT0gdC5uYW1lO1xufVxuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gSURCT2JqZWN0U3RvcmUgcHJvdmlkaW5nIGFuIEFQSSB0aGF0OlxuICpcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXG4gKiBtZXRob2RzIGZvciBhY3RpbmcgYWdhaW5zdCB0aGUgb2JqZWN0IHN0b3JlLlxuICogMikgRGVhbHMgd2l0aCBJbmRleGVkREIncyBvbnN1Y2Nlc3MgLyBvbmVycm9yIGV2ZW50IGNhbGxiYWNrcywgbWFraW5nIGV2ZXJ5XG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXG4gKiAzKSBQcm92aWRlcyBhIGhpZ2hlci1sZXZlbCBBUEkgdG8gYXZvaWQgbmVlZGluZyB0byBkbyBleGNlc3NpdmUgd3JhcHBpbmcgb2ZcbiAqIGludGVybWVkaWF0ZSBJbmRleGVkREIgdHlwZXMgKElEQkN1cnNvcldpdGhWYWx1ZSwgZXRjLilcbiAqLyBjbGFzcyB0aSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnN0b3JlID0gdDtcbiAgICB9XG4gICAgcHV0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgPyAoTyhcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIG4gPSB0aGlzLnN0b3JlLnB1dChlLCB0KSkgOiAoTyhcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgXCI8YXV0by1rZXk+XCIsIHQpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KHQpKSwgZWkobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgdmFsdWUgaW50byBhbiBPYmplY3QgU3RvcmUgYW5kIHJldHVybnMgdGhlIG5ldyBrZXkuIFNpbWlsYXIgdG9cbiAgICAgKiBJbmRleGVkRGIncyBgYWRkKClgLCB0aGlzIG1ldGhvZCB3aWxsIGZhaWwgb24gcHJpbWFyeSBrZXkgY29sbGlzaW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBvYmplY3QgdG8gd3JpdGUuXG4gICAgICogQHJldHVybnMgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gYWRkLlxuICAgICAqLyAgICBhZGQodCkge1xuICAgICAgICBPKFwiU2ltcGxlRGJcIiwgXCJBRERcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCB0KTtcbiAgICAgICAgcmV0dXJuIGVpKHRoaXMuc3RvcmUuYWRkKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZnJvbSB0aGUgc3BlY2lmaWVkIHN0b3JlLCBvciBudWxsXG4gICAgICogaWYgbm8gb2JqZWN0IGV4aXN0cyB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxuICAgICAqXG4gICAgICogQGtleSBUaGUga2V5IG9mIHRoZSBvYmplY3QgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBvciBudWxsIGlmIG5vIG9iamVjdCBleGlzdHMuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIC8vIFdlJ3JlIGRvaW5nIGFuIHVuc2FmZSBjYXN0IHRvIFZhbHVlVHlwZS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIGVpKHRoaXMuc3RvcmUuZ2V0KHQpKS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBudWxsKSwgTyhcIlNpbXBsZURiXCIsIFwiR0VUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIGUpKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkRFTEVURVwiLCB0aGlzLnN0b3JlLm5hbWUsIHQpO1xuICAgICAgICByZXR1cm4gZWkodGhpcy5zdG9yZS5kZWxldGUodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cbiAgICAgKi8gICAgY291bnQoKSB7XG4gICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkNPVU5UXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIHJldHVybiBlaSh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBCdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmN1cnNvcih0aGlzLm9wdGlvbnModCwgZSkpLCBzID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLlV0KG4sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBxdCh0LCBlKSB7XG4gICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkRFTEVURSBBTExcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyh0LCBlKTtcbiAgICAgICAgbi5LdCA9ICExO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLlV0KHMsICgodCwgZSwgbikgPT4gbi5kZWxldGUoKSkpO1xuICAgIH1cbiAgICBqdCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBlID8gbiA9IHQgOiAobiA9IHt9LCBlID0gdCk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVXQocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzdG9yZSwgYnV0IHdhaXRzIGZvciB0aGUgZ2l2ZW4gY2FsbGJhY2sgdG8gY29tcGxldGUgZm9yXG4gICAgICogZWFjaCBlbnRyeSBiZWZvcmUgaXRlcmF0aW5nIHRoZSBuZXh0IGVudHJ5LiBUaGlzIGFsbG93cyB0aGUgY2FsbGJhY2sgdG8gZG9cbiAgICAgKiBhc3luY2hyb25vdXMgd29yayB0byBkZXRlcm1pbmUgaWYgdGhpcyBpdGVyYXRpb24gc2hvdWxkIGNvbnRpbnVlLlxuICAgICAqXG4gICAgICogVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHNob3VsZCByZXR1cm4gYHRydWVgIHRvIGNvbnRpbnVlIGl0ZXJhdGlvbiwgYW5kXG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovICAgIFF0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY3Vyc29yKHt9KTtcbiAgICAgICAgcmV0dXJuIG5ldyB6cygoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICAgICAgcyhlKTtcbiAgICAgICAgICAgIH0sIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBzID8gdChzLnByaW1hcnlLZXksIHMudmFsdWUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ID8gcy5jb250aW51ZSgpIDogbigpO1xuICAgICAgICAgICAgICAgIH0pKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiBuZXcgenMoKChzLCBpKSA9PiB7XG4gICAgICAgICAgICB0Lm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBpKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIH0sIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiB2b2lkIHMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFlzKGkpLCBvID0gZShpLnByaW1hcnlLZXksIGkudmFsdWUsIHIpO1xuICAgICAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgenMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uY2F0Y2goKHQgPT4gKHIuZG9uZSgpLCB6cy5yZWplY3QodCkpKSk7XG4gICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgci5pc0RvbmUgPyBzKCkgOiBudWxsID09PSByLkZ0ID8gaS5jb250aW51ZSgpIDogaS5jb250aW51ZShyLkZ0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB6cy53YWl0Rm9yKG4pKSk7XG4gICAgfVxuICAgIG9wdGlvbnModCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdCAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IG4gPSB0IDogZSA9IHQpLCB7XG4gICAgICAgICAgICBpbmRleDogbixcbiAgICAgICAgICAgIHJhbmdlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGN1cnNvcih0KSB7XG4gICAgICAgIGxldCBlID0gXCJuZXh0XCI7XG4gICAgICAgIGlmICh0LnJldmVyc2UgJiYgKGUgPSBcInByZXZcIiksIHQuaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmluZGV4KHQuaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIHQuS3QgPyBuLm9wZW5LZXlDdXJzb3IodC5yYW5nZSwgZSkgOiBuLm9wZW5DdXJzb3IodC5yYW5nZSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHMgYW4gSURCUmVxdWVzdCBpbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSwgdXNpbmcgdGhlIG9uc3VjY2VzcyAvIG9uZXJyb3JcbiAqIGhhbmRsZXJzIHRvIHJlc29sdmUgLyByZWplY3QgdGhlIFBlcnNpc3RlbmNlUHJvbWlzZSBhcyBhcHByb3ByaWF0ZS5cbiAqLyBmdW5jdGlvbiBlaSh0KSB7XG4gICAgcmV0dXJuIG5ldyB6cygoKGUsIG4pID0+IHtcbiAgICAgICAgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICBlKG4pO1xuICAgICAgICB9LCB0Lm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBzaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICBuKGUpO1xuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLy8gR3VhcmQgc28gd2Ugb25seSByZXBvcnQgdGhlIGVycm9yIG9uY2UuXG5sZXQgbmkgPSAhMTtcblxuZnVuY3Rpb24gc2kodCkge1xuICAgIGNvbnN0IGUgPSBKcy5idChnZXRVQSgpKTtcbiAgICBpZiAoZSA+PSAxMi4yICYmIGUgPCAxMykge1xuICAgICAgICBjb25zdCBlID0gXCJBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyXCI7XG4gICAgICAgIGlmICh0Lm1lc3NhZ2UuaW5kZXhPZihlKSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IFEoXCJpbnRlcm5hbFwiLCBgSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnJHtlfScuIFRoaXMgaXMgbGlrZWx5IGR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBuaSB8fCAobmkgPSAhMCwgXG4gICAgICAgICAgICAvLyBUaHJvdyBhIGdsb2JhbCBleGNlcHRpb24gb3V0c2lkZSBvZiB0aGlzIHByb21pc2UgY2hhaW4sIGZvciB0aGUgdXNlciB0b1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgY2F0Y2guXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgIH0pLCAwKSksIHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGlpIGV4dGVuZHMgR3Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5XdCA9IHQsIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICByZXR1cm4gSnMuRHQobi5XdCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIG9pIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxuICAgICAqIEBwYXJhbSBiYXNlTXV0YXRpb25zIC0gTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcbiAgICAgKiB2YWx1ZXMgd2hlbiB0aGlzIG11dGF0aW9uIGlzIGFwcGxpZWQgbG9jYWxseS4gVGhpcyBjYW4gYmUgdXNlZCB0byBsb2NhbGx5XG4gICAgICogb3ZlcndyaXRlIHZhbHVlcyB0aGF0IGFyZSBwZXJzaXN0ZWQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gQmFzZVxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKiBAcGFyYW0gbXV0YXRpb25zIC0gVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogVXNlci1wcm92aWRlZCBtdXRhdGlvbnMgYXJlIGFwcGxpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseSBvbiB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaElkID0gdCwgdGhpcy5sb2NhbFdyaXRlVGltZSA9IGUsIHRoaXMuYmFzZU11dGF0aW9ucyA9IG4sIHRoaXMubXV0YXRpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzIE11dGF0aW9uQmF0Y2ggdG8gdGhlIHNwZWNpZmllZCBkb2N1bWVudFxuICAgICAqIHRvIGNvbXB1dGUgdGhlIHN0YXRlIG9mIHRoZSByZW1vdGUgZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgTXV0YXRpb25CYXRjaCB0byB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqLyAgICBhcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5tdXRhdGlvblJlc3VsdHM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLm11dGF0aW9uc1tlXTtcbiAgICAgICAgICAgIGlmIChzLmtleS5pc0VxdWFsKHQua2V5KSkge1xuICAgICAgICAgICAgICAgIHRuKHMsIHQsIG5bZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsVmlldyh0KSB7XG4gICAgICAgIC8vIEZpcnN0LCBhcHBseSB0aGUgYmFzZSBzdGF0ZS4gVGhpcyBhbGxvd3MgdXMgdG8gYXBwbHkgbm9uLWlkZW1wb3RlbnRcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFnYWluc3QgYSBjb25zaXN0ZW50IHNldCBvZiB2YWx1ZXMuXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmJhc2VNdXRhdGlvbnMpIGUua2V5LmlzRXF1YWwodC5rZXkpICYmIGVuKGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xuICAgICAgICAvLyBTZWNvbmQsIGFwcGx5IGFsbCB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5tdXRhdGlvbnMpIGUua2V5LmlzRXF1YWwodC5rZXkpICYmIGVuKGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IFRoaXMgaW1wbGVtZW50YXRpb24gaXMgTyhuXjIpLiBJZiB3ZSBhcHBseSB0aGUgbXV0YXRpb25zXG4gICAgICAgIC8vIGRpcmVjdGx5IChhcyBkb25lIGluIGBhcHBseVRvTG9jYWxWaWV3KClgKSwgd2UgY2FuIHJlZHVjZSB0aGUgY29tcGxleGl0eVxuICAgICAgICAvLyB0byBPKG4pLlxuICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChlLmtleSksIHMgPSBuO1xuICAgICAgICAgICAgLy8gVE9ETyhtdXRhYmxlZG9jdW1lbnRzKTogVGhpcyBtZXRob2Qgc2hvdWxkIHRha2UgYSBNdXRhYmxlRG9jdW1lbnRNYXBcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBzaG91bGQgcmVtb3ZlIHRoaXMgY2FzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUb0xvY2FsVmlldyhzKSwgbi5pc1ZhbGlkRG9jdW1lbnQoKSB8fCBzLmNvbnZlcnRUb05vRG9jdW1lbnQodXQubWluKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBEbigpKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoSWQgPT09IHQuYmF0Y2hJZCAmJiBvdCh0aGlzLm11dGF0aW9ucywgdC5tdXRhdGlvbnMsICgodCwgZSkgPT4gc24odCwgZSkpKSAmJiBvdCh0aGlzLmJhc2VNdXRhdGlvbnMsIHQuYmFzZU11dGF0aW9ucywgKCh0LCBlKSA9PiBzbih0LCBlKSkpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSBtdXRhdGlvbiBiYXRjaCB0byB0aGUgYmFja2VuZC4gKi8gY2xhc3MgY2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8qKlxuICAgICAqIEEgcHJlLWNvbXB1dGVkIG1hcHBpbmcgZnJvbSBlYWNoIG11dGF0ZWQgZG9jdW1lbnQgdG8gdGhlIHJlc3VsdGluZ1xuICAgICAqIHZlcnNpb24uXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmJhdGNoID0gdCwgdGhpcy5jb21taXRWZXJzaW9uID0gZSwgdGhpcy5tdXRhdGlvblJlc3VsdHMgPSBuLCB0aGlzLmRvY1ZlcnNpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0IGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHJlc3VsdHMuIFRoZXJlXG4gICAgICogbXVzdCBiZSBvbmUgcmVzdWx0IGZvciBlYWNoIG11dGF0aW9uIGluIHRoZSBiYXRjaC4gVGhpcyBzdGF0aWMgZmFjdG9yeVxuICAgICAqIGNhY2hlcyBhIGRvY3VtZW50PSZndDt2ZXJzaW9uIG1hcHBpbmcgKGRvY1ZlcnNpb25zKS5cbiAgICAgKi8gICAgc3RhdGljIGZyb20odCwgZSwgbikge1xuICAgICAgICBVKHQubXV0YXRpb25zLmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgICAgICBsZXQgcyA9IFZuKCk7XG4gICAgICAgIGNvbnN0IGkgPSB0Lm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpLmxlbmd0aDsgdCsrKSBzID0gcy5pbnNlcnQoaVt0XS5rZXksIG5bdF0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgY2kodCwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgYWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IHV0Lm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCByID0gdXQubWluKClcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqLyAsIG8gPSBwdC5FTVBUWV9CWVRFX1NUUklORykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gcywgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gciwgdGhpcy5yZXN1bWVUb2tlbiA9IG87XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYWkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdCwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHJlc3VtZSB0b2tlbiBhbmRcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uLlxuICAgICAqLyAgICB3aXRoUmVzdW1lVG9rZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGFpKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIGUsIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYWkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHQsIHRoaXMucmVzdW1lVG9rZW4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZXJpYWxpemVyIGZvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBMb2NhbFN0b3JlLiAqLyBjbGFzcyB1aSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkd0ID0gdDtcbiAgICB9XG59XG5cbi8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovIGZ1bmN0aW9uIGhpKHQsIGUpIHtcbiAgICBpZiAoZS5kb2N1bWVudCkgcmV0dXJuIGlzKHQuR3QsIGUuZG9jdW1lbnQsICEhZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgIGlmIChlLm5vRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdCA9IER0LmZyb21TZWdtZW50cyhlLm5vRG9jdW1lbnQucGF0aCksIG4gPSBfaShlLm5vRG9jdW1lbnQucmVhZFRpbWUpLCBzID0gR3QubmV3Tm9Eb2N1bWVudCh0LCBuKTtcbiAgICAgICAgcmV0dXJuIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zID8gcy5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IHM7XG4gICAgfVxuICAgIGlmIChlLnVua25vd25Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gRHQuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpLCBuID0gX2koZS51bmtub3duRG9jdW1lbnQudmVyc2lvbik7XG4gICAgICAgIHJldHVybiBHdC5uZXdVbmtub3duRG9jdW1lbnQodCwgbik7XG4gICAgfVxuICAgIHJldHVybiBCKCk7XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gbGkodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBmaShuKSwgaSA9IGUua2V5LnBhdGgucG9wTGFzdCgpLnRvQXJyYXkoKTtcbiAgICBpZiAoZS5pc0ZvdW5kRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBZbih0LCBlLmtleSksXG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmRhdGEudmFsdWUubWFwVmFsdWUuZmllbGRzLFxuICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWU6IFFuKHQsIGUudmVyc2lvbi50b1RpbWVzdGFtcCgpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0Lkd0LCBlKSwgciA9IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgICAgICByZXR1cm4gbmV3IE9zKFxuICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIFxuICAgICAgICAvKiBub0RvY3VtZW50PSAqLyBudWxsLCBuLCByLCBzLCBpKTtcbiAgICB9XG4gICAgaWYgKGUuaXNOb0RvY3VtZW50KCkpIHtcbiAgICAgICAgY29uc3QgdCA9IGUua2V5LnBhdGgudG9BcnJheSgpLCBuID0gd2koZS52ZXJzaW9uKSwgciA9IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgICAgICByZXR1cm4gbmV3IE9zKFxuICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIG5ldyB4cyh0LCBuKSwgXG4gICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCByLCBzLCBpKTtcbiAgICB9XG4gICAgaWYgKGUuaXNVbmtub3duRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aC50b0FycmF5KCksIG4gPSB3aShlLnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gbmV3IE9zKG5ldyAkcyh0LCBuKSwgXG4gICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIFxuICAgICAgICAvKiBkb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIGhhc0NvbW1pdHRlZE11dGF0aW9ucz0gKi8gITAsIHMsIGkpO1xuICAgIH1cbiAgICByZXR1cm4gQigpO1xufVxuXG5mdW5jdGlvbiBmaSh0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4gWyBlLnNlY29uZHMsIGUubmFub3NlY29uZHMgXTtcbn1cblxuZnVuY3Rpb24gZGkodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgYXQodFswXSwgdFsxXSk7XG4gICAgcmV0dXJuIHV0LmZyb21UaW1lc3RhbXAoZSk7XG59XG5cbmZ1bmN0aW9uIHdpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBuZXcgU3MoZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKTtcbn1cblxuZnVuY3Rpb24gX2kodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgYXQodC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gdXQuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBtaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IChlLmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgoZSA9PiBhcyh0Lkd0LCBlKSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKyt0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uc1t0XTtcbiAgICAgICAgaWYgKHQgKyAxIDwgZS5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gZS5tdXRhdGlvbnNbdCArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubXV0YXRpb25zW3QgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHMudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgZS5tdXRhdGlvbnMuc3BsaWNlKHQgKyAxLCAxKSwgXG4gICAgICAgICAgICArK3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcyA9IGUubXV0YXRpb25zLm1hcCgoZSA9PiBhcyh0Lkd0LCBlKSkpLCBpID0gYXQuZnJvbU1pbGxpcyhlLmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgb2koZS5iYXRjaElkLCBpLCBuLCBzKTtcbn1cblxuLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi8gZnVuY3Rpb24gZ2kodCkge1xuICAgIGNvbnN0IGUgPSBfaSh0LnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gdC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gX2kodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA6IHV0Lm1pbigpO1xuICAgIGxldCBzO1xuICAgIHZhciBpO1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQucXVlcnkuZG9jdW1lbnRzID8gKFUoMSA9PT0gKGkgPSB0LnF1ZXJ5KS5kb2N1bWVudHMubGVuZ3RoKSwgXG4gICAgcyA9IGJlKHllKHRzKGkuZG9jdW1lbnRzWzBdKSkpKSA6IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBiZShmcyh0KSk7XG4gICAgfSh0LnF1ZXJ5KSwgbmV3IGFpKHMsIHQudGFyZ2V0SWQsIDAgLyogTGlzdGVuICovICwgdC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGUsIG4sIHB0LmZyb21CYXNlNjRTdHJpbmcodC5yZXN1bWVUb2tlbikpO1xufVxuXG4vKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiB5aSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHdpKGUuc25hcHNob3RWZXJzaW9uKSwgcyA9IHdpKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XG4gICAgbGV0IGk7XG4gICAgaSA9IFp0KGUudGFyZ2V0KSA/IGhzKHQuR3QsIGUudGFyZ2V0KSA6IGxzKHQuR3QsIGUudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgciA9IGUucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIG5ldyBGcyhlLnRhcmdldElkLCBKdChlLnRhcmdldCksIG4sIHIsIGUuc2VxdWVuY2VOdW1iZXIsIHMsIGkpO1xufVxuXG4vKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgYEJ1bmRsZWRRdWVyeWAgZnJvbSBidW5kbGUgcHJvdG8gdG8gYSBRdWVyeSBvYmplY3QuXG4gKlxuICogVGhpcyByZWNvbnN0cnVjdHMgdGhlIG9yaWdpbmFsIHF1ZXJ5IHVzZWQgdG8gYnVpbGQgdGhlIGJ1bmRsZSBiZWluZyBsb2FkZWQsXG4gKiBpbmNsdWRpbmcgZmVhdHVyZXMgZXhpc3RzIG9ubHkgaW4gU0RLcyAoZm9yIGV4YW1wbGU6IGxpbWl0LXRvLWxhc3QpLlxuICovXG5mdW5jdGlvbiBwaSh0KSB7XG4gICAgY29uc3QgZSA9IGZzKHtcbiAgICAgICAgcGFyZW50OiB0LnBhcmVudCxcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB0LnN0cnVjdHVyZWRRdWVyeVxuICAgIH0pO1xuICAgIHJldHVybiBcIkxBU1RcIiA9PT0gdC5saW1pdFR5cGUgPyBQZShlLCBlLmxpbWl0LCBcIkxcIiAvKiBMYXN0ICovKSA6IGU7XG59XG5cbi8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBwcm90byBvYmplY3QgdG8gYSBOYW1lZFF1ZXJ5IG1vZGVsIG9iamVjdC4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBUaSB7XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gRWkodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IChlID0gdCkuYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX2koZS5jcmVhdGVUaW1lKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIERiQnVuZGxlIHRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHRvIGEgRGJCdW5kbGUuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBFaSh0KS5wdXQoe1xuICAgICAgICAgICAgYnVuZGxlSWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiB3aSh6bihuLmNyZWF0ZVRpbWUpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIC8qKiBFbmNvZGVzIGEgRGJOYW1lZFF1ZXJ5IHRvIGEgTmFtZWRRdWVyeS4gKi8gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gSWkodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogKGUgPSB0KS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBwaShlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9pKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgZnJvbSBhIGJ1bmRsZSBwcm90byB0byBhIERiTmFtZWRRdWVyeS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gSWkodCkucHV0KGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiB3aSh6bih0LnJlYWRUaW1lKSksXG4gICAgICAgICAgICAgICAgYnVuZGxlZFF1ZXJ5OiB0LmJ1bmRsZWRRdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgYnVuZGxlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gRWkodCkge1xuICAgIHJldHVybiByaSh0LCBLcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBuYW1lZFF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIElpKHQpIHtcbiAgICByZXR1cm4gcmkodCwganMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICovIGNsYXNzIEFpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy56dCA9IG5ldyBSaTtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy56dC5hZGQoZSksIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLnp0LmdldEVudHJpZXMoZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZXhwb3NlZCBieSBNZW1vcnlJbmRleE1hbmFnZXIuXG4gKiBBbHNvIHVzZWQgZm9yIGluLW1lbW9yeSBjYWNoaW5nIGJ5IEluZGV4ZWREYkluZGV4TWFuYWdlciBhbmQgaW5pdGlhbCBpbmRleCBwb3B1bGF0aW9uXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXG4gKi8gY2xhc3MgUmkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluZGV4ID0ge307XG4gICAgfVxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cbiAgICBhZGQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdIHx8IG5ldyBFbih3dC5jb21wYXJhdG9yKSwgaSA9ICFzLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbZV0gPSBzLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgcy5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXModCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbdF0gfHwgbmV3IEVuKHd0LmNvbXBhcmF0b3IpKS50b0FycmF5KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgYmkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmUgdXNlZCB0b1xuICAgICAgICAgKiBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5IdCA9IG5ldyBSaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBlbnRyeSB0byB0aGUgY29sbGVjdGlvbiBwYXJlbnQgaW5kZXguXG4gICAgICpcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcbiAgICAgKiB0cmFuc2FjdGlvbiBhcyBJbmRleGVkRGJJbmRleE1hbmFnZXIgb25seSBjYWNoZXMgd3JpdGVzIG9uY2UgYSB0cmFuc2FjdGlvblxuICAgICAqIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgKi8gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMuSHQuaGFzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5sYXN0U2VnbWVudCgpLCBzID0gZS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbGxlY3Rpb24gdG8gdGhlIGluIG1lbW9yeSBjYWNoZSBvbmx5IGlmIHRoZSB0cmFuc2FjdGlvbiB3YXNcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLlxuICAgICAgICAgICAgICAgIHRoaXMuSHQuYWRkKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IG4sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBicyhzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBQaSh0KS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUsIFwiXCIgXSwgWyBjdChlKSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBQaSh0KS5CdChzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHMuY29sbGVjdGlvbklkICE9PSBlKSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2goVnMocy5wYXJlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY29sbGVjdGlvblBhcmVudHNcbiAqIGRvY3VtZW50IHN0b3JlLlxuICovIGZ1bmN0aW9uIFBpKHQpIHtcbiAgICByZXR1cm4gcmkodCwgVXMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB2aSA9IHtcbiAgICBkaWRSdW46ICExLFxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcbiAgICB0YXJnZXRzUmVtb3ZlZDogMCxcbiAgICBkb2N1bWVudHNSZW1vdmVkOiAwXG59O1xuXG5jbGFzcyBWaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXG4gICAgdCwgXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XG4gICAgZSwgXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IHQsIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IGUsIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG47XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoQ2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWaSh0LCBWaS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgVmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiBTaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuc3RvcmUoTnMuc3RvcmUpLCBpID0gdC5zdG9yZShrcy5zdG9yZSksIHIgPSBbXSwgbyA9IElEQktleVJhbmdlLm9ubHkobi5iYXRjaElkKTtcbiAgICBsZXQgYyA9IDA7XG4gICAgY29uc3QgYSA9IHMuanQoe1xuICAgICAgICByYW5nZTogb1xuICAgIH0sICgodCwgZSwgbikgPT4gKGMrKywgbi5kZWxldGUoKSkpKTtcbiAgICByLnB1c2goYS5uZXh0KCgoKSA9PiB7XG4gICAgICAgIFUoMSA9PT0gYyk7XG4gICAgfSkpKTtcbiAgICBjb25zdCB1ID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIG4ubXV0YXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHMgPSBrcy5rZXkoZSwgdC5rZXkucGF0aCwgbi5iYXRjaElkKTtcbiAgICAgICAgci5wdXNoKGkuZGVsZXRlKHMpKSwgdS5wdXNoKHQua2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHpzLndhaXRGb3IocikubmV4dCgoKCkgPT4gdSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIERpKHQpIHtcbiAgICBpZiAoIXQpIHJldHVybiAwO1xuICAgIGxldCBlO1xuICAgIGlmICh0LmRvY3VtZW50KSBlID0gdC5kb2N1bWVudDsgZWxzZSBpZiAodC51bmtub3duRG9jdW1lbnQpIGUgPSB0LnVua25vd25Eb2N1bWVudDsgZWxzZSB7XG4gICAgICAgIGlmICghdC5ub0RvY3VtZW50KSB0aHJvdyBCKCk7XG4gICAgICAgIGUgPSB0Lm5vRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqLyBWaS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwLCBcblZpLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDFlMywgVmkuREVGQVVMVCA9IG5ldyBWaSg0MTk0MzA0MCwgVmkuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIFZpLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCksIFxuVmkuRElTQUJMRUQgPSBuZXcgVmkoLTEsIDAsIDApO1xuXG5jbGFzcyBDaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMuayA9IGUsIHRoaXMuSnQgPSBuLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgdGhpcy5ZdCA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxuICAgICAqLyAgICBzdGF0aWMgWHQodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cbiAgICAgICAgVShcIlwiICE9PSB0LnVpZCk7XG4gICAgICAgIGNvbnN0IGkgPSB0LmlzQXV0aGVudGljYXRlZCgpID8gdC51aWQgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IENpKGksIGUsIG4sIHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMDtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBraSh0KS5qdCh7XG4gICAgICAgICAgICBpbmRleDogTnMudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBlID0gITEsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHhpKHQpLCByID0ga2kodCk7XG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiByLmFkZCh7fSkubmV4dCgobyA9PiB7XG4gICAgICAgICAgICBVKFwibnVtYmVyXCIgPT0gdHlwZW9mIG8pO1xuICAgICAgICAgICAgY29uc3QgYyA9IG5ldyBvaShvLCBlLCBuLCBzKSwgYSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5iYXNlTXV0YXRpb25zLm1hcCgoZSA9PiBjcyh0Lkd0LCBlKSkpLCBpID0gbi5tdXRhdGlvbnMubWFwKChlID0+IGNzKHQuR3QsIGUpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOcyhlLCBuLmJhdGNoSWQsIG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSwgcywgaSk7XG4gICAgICAgICAgICB9KHRoaXMuaywgdGhpcy51c2VySWQsIGMpLCB1ID0gW107XG4gICAgICAgICAgICBsZXQgaCA9IG5ldyBFbigoKHQsIGUpID0+IHJ0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBrcy5rZXkodGhpcy51c2VySWQsIHQua2V5LnBhdGgsIG8pO1xuICAgICAgICAgICAgICAgIGggPSBoLmFkZCh0LmtleS5wYXRoLnBvcExhc3QoKSksIHUucHVzaChyLnB1dChhKSksIHUucHVzaChpLnB1dChlLCBrcy5QTEFDRUhPTERFUikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGguZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgdS5wdXNoKHRoaXMuSnQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkpO1xuICAgICAgICAgICAgfSkpLCB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLll0W29dID0gYy5rZXlzKCk7XG4gICAgICAgICAgICB9KSksIHpzLndhaXRGb3IodSkubmV4dCgoKCkgPT4gYykpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4ga2kodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IChVKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG1pKHRoaXMuaywgdCkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgWnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZdFtlXSA/IHpzLnJlc29sdmUodGhpcy5ZdFtlXSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ZdFtlXSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4ga2kodCkuanQoe1xuICAgICAgICAgICAgaW5kZXg6IE5zLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgZS51c2VySWQgPT09IHRoaXMudXNlcklkICYmIChVKGUuYmF0Y2hJZCA+PSBuKSwgaSA9IG1pKHRoaXMuaywgZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSAtMTtcbiAgICAgICAgcmV0dXJuIGtpKHQpLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBOcy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogZSxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgbiA9IGUuYmF0Y2hJZCwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCAtMSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBraSh0KS5CdChOcy51c2VyTXV0YXRpb25zSW5kZXgsIGUpLm5leHQoKHQgPT4gdC5tYXAoKHQgPT4gbWkodGhpcy5rLCB0KSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IGtzLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKG4pLCBpID0gW107XG4gICAgICAgIHJldHVybiB4aSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKG4sIHMsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCBjLCBhXSA9IG4sIHUgPSBWcyhjKTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKHUpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBraSh0KS5nZXQoYSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBCKCk7XG4gICAgICAgICAgICAgICAgVSh0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBpLnB1c2gobWkodGhpcy5rLCB0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgRW4ocnQpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGtzLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGUucGF0aCksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpLCBvID0geGkodCkuanQoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgICAgICB9LCAoKHQsIHMsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbciwgbywgY10gPSB0LCBhID0gVnMobyk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGEpID8gbiA9IG4uYWRkKGMpIDogaS5kb25lKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBzLnB1c2gobyk7XG4gICAgICAgIH0pKSwgenMud2FpdEZvcihzKS5uZXh0KCgoKSA9PiB0aGlzLnRlKHQsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMSwgaSA9IGtzLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIG4pLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKTtcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxuICAgICAgICBsZXQgbyA9IG5ldyBFbihydCk7XG4gICAgICAgIHJldHVybiB4aSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKHQsIGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCBjLCBhXSA9IHQsIHUgPSBWcyhjKTtcbiAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZih1KSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIHUubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQoYSkpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLnRlKHQsIG8pKSk7XG4gICAgfVxuICAgIHRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaChraSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IEIoKTtcbiAgICAgICAgICAgICAgICBVKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG4ucHVzaChtaSh0aGlzLmssIHQpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgenMud2FpdEZvcihzKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gU2kodC5XdCwgdGhpcy51c2VySWQsIGUpLm5leHQoKG4gPT4gKHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lZShlLmJhdGNoSWQpO1xuICAgICAgICB9KSksIHpzLmZvckVhY2gobiwgKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgZWUodCkge1xuICAgICAgICBkZWxldGUgdGhpcy5ZdFt0XTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4genMucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChrcy5wcmVmaXhGb3JVc2VyKHRoaXMudXNlcklkKSksIHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB4aSh0KS5qdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0WzBdID09PSB0aGlzLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gVnModFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbi5kb25lKCk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIFUoMCA9PT0gcy5sZW5ndGgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE5pKHQsIHRoaXMudXNlcklkLCBlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXG4gICAgLyoqIFJldHVybnMgdGhlIG11dGF0aW9uIHF1ZXVlJ3MgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuICovXG4gICAgbmUodCkge1xuICAgICAgICByZXR1cm4gJGkodCkuZ2V0KHRoaXMudXNlcklkKS5uZXh0KCh0ID0+IHQgfHwgbmV3IENzKHRoaXMudXNlcklkLCAtMSwgXG4gICAgICAgIC8qbGFzdFN0cmVhbVRva2VuPSovIFwiXCIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXG4gKi8gZnVuY3Rpb24gTmkodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBrcy5wcmVmaXhGb3JQYXRoKGUsIG4ucGF0aCksIGkgPSBzWzFdLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChzKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiB4aSh0KS5qdCh7XG4gICAgICAgIHJhbmdlOiByLFxuICAgICAgICBLdDogITBcbiAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgY29uc3QgW3IsIGMsIC8qYmF0Y2hJRCovIGFdID0gdDtcbiAgICAgICAgciA9PT0gZSAmJiBjID09PSBpICYmIChvID0gITApLCBzLmRvbmUoKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gbykpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cbiAqL1xuZnVuY3Rpb24ga2kodCkge1xuICAgIHJldHVybiByaSh0LCBOcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24geGkodCkge1xuICAgIHJldHVybiByaSh0LCBrcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gJGkodCkge1xuICAgIHJldHVybiByaSh0LCBDcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogT2Zmc2V0IHRvIGVuc3VyZSBub24tb3ZlcmxhcHBpbmcgdGFyZ2V0IGlkcy4gKi9cbi8qKlxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXG4gKiB3YXRjaCBzdHJlYW0uXG4gKlxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIGFuZCBvbmUgZm9yXG4gKiBmb3IgdGhlIHN5bmMgZW5naW5lICh0byBnZW5lcmF0ZSBsaW1ibyBkb2N1bWVudHMgdGFyZ2V0cykuIFRoZXNlXG4gKiBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xuICogcmVzcGVjdGl2ZWx5KS5cbiAqXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxuICogcmVzdGFydC5cbiAqL1xuY2xhc3MgT2kge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zZSA9IHQ7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlICs9IDIsIHRoaXMuc2U7XG4gICAgfVxuICAgIHN0YXRpYyBpZSgpIHtcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjYWNoZSBnZW5lcmF0b3IgbXVzdCByZXR1cm4gJzInIGluIGl0cyBmaXJzdCBjYWxsIHRvIGBuZXh0KClgXG4gICAgICAgIC8vIGFzIHRoZXJlIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldFxuICAgICAgICAvLyBudW1iZXIgYW5kIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSURcbiAgICAgICAgLy8gJzAnLCB0aGUgYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXG4gICAgICAgIHJldHVybiBuZXcgT2koMCk7XG4gICAgfVxuICAgIHN0YXRpYyByZSgpIHtcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXG4gICAgICAgIHJldHVybiBuZXcgT2koLTEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgTWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQsIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxuICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcbiAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXG4gICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xuICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXG4gICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IE9pKGUuaGlnaGVzdFRhcmdldElkKTtcbiAgICAgICAgICAgIHJldHVybiBlLmhpZ2hlc3RUYXJnZXRJZCA9IG4ubmV4dCgpLCB0aGlzLmNlKHQsIGUpLm5leHQoKCgpID0+IGUuaGlnaGVzdFRhcmdldElkKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9lKHQpLm5leHQoKHQgPT4gdXQuZnJvbVRpbWVzdGFtcChuZXcgYXQodC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9lKHQpLm5leHQoKHQgPT4gdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgocyA9PiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLCBuICYmIChzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLnRvVGltZXN0YW1wKCkpLCBcbiAgICAgICAgZSA+IHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUpLCB0aGlzLmNlKHQsIHMpKSkpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWUodCwgZSkubmV4dCgoKCkgPT4gdGhpcy5vZSh0KS5uZXh0KChuID0+IChuLnRhcmdldENvdW50ICs9IDEsIHRoaXMudWUoZSwgbiksIFxuICAgICAgICB0aGlzLmNlKHQsIG4pKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKCgpID0+IEZpKHQpLmRlbGV0ZShlLnRhcmdldElkKSkpLm5leHQoKCgpID0+IHRoaXMub2UodCkpKS5uZXh0KChlID0+IChVKGUudGFyZ2V0Q291bnQgPiAwKSwgXG4gICAgICAgIGUudGFyZ2V0Q291bnQgLT0gMSwgdGhpcy5jZSh0LCBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gRmkodCkuanQoKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjID0gZ2kobyk7XG4gICAgICAgICAgICBjLnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQoYy50YXJnZXRJZCkgJiYgKHMrKywgaS5wdXNoKHRoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0LCBjKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4genMud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gRmkodCkuanQoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gZ2kobik7XG4gICAgICAgICAgICBlKHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG9lKHQpIHtcbiAgICAgICAgcmV0dXJuIExpKHQpLmdldChCcy5rZXkpLm5leHQoKHQgPT4gKFUobnVsbCAhPT0gdCksIHQpKSk7XG4gICAgfVxuICAgIGNlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIExpKHQpLnB1dChCcy5rZXksIGUpO1xuICAgIH1cbiAgICBhZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBGaSh0KS5wdXQoeWkodGhpcy5rLCBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluLXBsYWNlIHVwZGF0ZXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIHRvIGFjY291bnQgZm9yIHZhbHVlcyBpbiB0aGUgZ2l2ZW5cbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSBtZXRhZGF0YS5cbiAgICAgKi8gICAgdWUodCwgZSkge1xuICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICByZXR1cm4gdC50YXJnZXRJZCA+IGUuaGlnaGVzdFRhcmdldElkICYmIChlLmhpZ2hlc3RUYXJnZXRJZCA9IHQudGFyZ2V0SWQsIG4gPSAhMCksIFxuICAgICAgICB0LnNlcXVlbmNlTnVtYmVyID4gZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdC5zZXF1ZW5jZU51bWJlciwgXG4gICAgICAgIG4gPSAhMCksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgodCA9PiB0LnRhcmdldENvdW50KSk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICAvLyBJdGVyYXRpbmcgYnkgdGhlIGNhbm9uaWNhbElkIG1heSB5aWVsZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBiZWNhdXNlXG4gICAgICAgIC8vIGNhbm9uaWNhbElkIHZhbHVlcyBhcmUgbm90IHJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBwZXIgdGFyZ2V0LiBUaGlzIHF1ZXJ5XG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXG4gICAgICAgIGNvbnN0IG4gPSBKdChlKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBGaSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogcyxcbiAgICAgICAgICAgIGluZGV4OiBGcy5xdWVyeVRhcmdldHNJbmRleE5hbWVcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gZ2kobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgWHQoZSwgci50YXJnZXQpICYmIChpID0gciwgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IFtdLCBpID0gQmkodCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGJzKGUucGF0aCk7XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQobmV3IExzKG4sIHIpKSksIHMucHVzaCh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBuLCBlKSk7XG4gICAgICAgIH0pKSwgenMud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHMgPSBCaSh0KTtcbiAgICAgICAgcmV0dXJuIHpzLmZvckVhY2goZSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGJzKGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm4genMud2FpdEZvcihbIHMuZGVsZXRlKFsgbiwgaSBdKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgbiwgZSkgXSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gQmkodCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShzKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlIF0sIFsgZSArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApLCBzID0gQmkodCk7XG4gICAgICAgIGxldCBpID0gRG4oKTtcbiAgICAgICAgcmV0dXJuIHMuanQoe1xuICAgICAgICAgICAgcmFuZ2U6IG4sXG4gICAgICAgICAgICBLdDogITBcbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gVnModFsxXSksIHIgPSBuZXcgRHQocyk7XG4gICAgICAgICAgICBpID0gaS5hZGQocik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGJzKGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4gXSwgWyBjdChuKSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIEJpKHQpLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBMcy5kb2N1bWVudFRhcmdldHNJbmRleCxcbiAgICAgICAgICAgIEt0OiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgoW3QsIGVdLCBuLCBzKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IHQgJiYgKGkrKywgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgRXQodCwgZSkge1xuICAgICAgICByZXR1cm4gRmkodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IGdpKHQpIDogbnVsbCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIEZpKHQpIHtcbiAgICByZXR1cm4gcmkodCwgRnMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIExpKHQpIHtcbiAgICByZXR1cm4gcmkodCwgQnMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgdGFyZ2V0IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBCaSh0KSB7XG4gICAgcmV0dXJuIHJpKHQsIExzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xuICogYXJlIHJlLXRocm93bi5cbiAqXG4gKiBAcGFyYW0gZXJyIC0gQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxuICovIGFzeW5jIGZ1bmN0aW9uIFVpKHQpIHtcbiAgICBpZiAodC5jb2RlICE9PSBqLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5tZXNzYWdlICE9PSBXcykgdGhyb3cgdDtcbiAgICBPKFwiTG9jYWxTdG9yZVwiLCBcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIHFpKFt0LCBlXSwgW24sIHNdKSB7XG4gICAgY29uc3QgaSA9IHJ0KHQsIG4pO1xuICAgIHJldHVybiAwID09PSBpID8gcnQoZSwgcykgOiBpO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cbiAqLyBjbGFzcyBLaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmhlID0gdCwgdGhpcy5idWZmZXIgPSBuZXcgRW4ocWkpLCB0aGlzLmxlID0gMDtcbiAgICB9XG4gICAgZmUoKSB7XG4gICAgICAgIHJldHVybiArK3RoaXMubGU7XG4gICAgfVxuICAgIGRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFsgdCwgdGhpcy5mZSgpIF07XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy5oZSkgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQoZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcbiAgICAgICAgICAgIHFpKGUsIHQpIDwgMCAmJiAodGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUodCkuYWRkKGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxuICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxuICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXG4gICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XG4gICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxuICovIGNsYXNzIGppIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMud2UgPSAhMSwgdGhpcy5fZSA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgLTEgIT09IHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAmJiB0aGlzLm1lKHQpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLl9lICYmICh0aGlzLl9lLmNhbmNlbCgpLCB0aGlzLl9lID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZTtcbiAgICB9XG4gICAgbWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy53ZSA/IDNlNSA6IDZlNDtcbiAgICAgICAgTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHtlfW1zYCksIHRoaXMuX2UgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZSA9IG51bGwsIHRoaXMud2UgPSAhMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdC5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIFpzKHQpID8gTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbjogXCIsIHQpIDogYXdhaXQgVWkodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1lKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uICovIGNsYXNzIFFpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2UgPSB0LCB0aGlzLnBhcmFtcyA9IGU7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UueWUodCkubmV4dCgodCA9PiBNYXRoLmZsb29yKGUgLyAxMDAgKiB0KSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcih0LCBlKSB7XG4gICAgICAgIGlmICgwID09PSBlKSByZXR1cm4genMucmVzb2x2ZShudC5JKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBLaShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UuZm9yRWFjaFRhcmdldCh0LCAodCA9PiBuLmRlKHQuc2VxdWVuY2VOdW1iZXIpKSkubmV4dCgoKCkgPT4gdGhpcy5nZS5wZSh0LCAodCA9PiBuLmRlKHQpKSkpKS5uZXh0KCgoKSA9PiBuLm1heFZhbHVlKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpO1xuICAgIH1cbiAgICBjb2xsZWN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIC0xID09PSB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkXCIpLCBcbiAgICAgICAgenMucmVzb2x2ZSh2aSkpIDogdGhpcy5nZXRDYWNoZVNpemUodCkubmV4dCgobiA9PiBuIDwgdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChPKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgJHtufSBpcyBsb3dlciB0aGFuIHRocmVzaG9sZCAke3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGR9YCksIFxuICAgICAgICB2aSkgOiB0aGlzLlRlKHQsIGUpKSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLmdldENhY2hlU2l6ZSh0KTtcbiAgICB9XG4gICAgVGUodCwgZSkge1xuICAgICAgICBsZXQgbiwgcywgaSwgciwgbywgYSwgdTtcbiAgICAgICAgY29uc3QgaCA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KHQsIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBDYXAgYXQgdGhlIGNvbmZpZ3VyZWQgbWF4XG4gICAgICAgIGUgPiB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID8gKE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duIHRvIHRoZSBtYXhpbXVtIG9mICR7dGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdH0gZnJvbSAke2V9YCksIFxuICAgICAgICBzID0gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkgOiBzID0gZSwgciA9IERhdGUubm93KCksIHRoaXMubnRoU2VxdWVuY2VOdW1iZXIodCwgcykpKSkubmV4dCgocyA9PiAobiA9IHMsIFxuICAgICAgICBvID0gRGF0ZS5ub3coKSwgdGhpcy5yZW1vdmVUYXJnZXRzKHQsIG4sIGUpKSkpLm5leHQoKGUgPT4gKGkgPSBlLCBhID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHRoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgbikpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodSA9IERhdGUubm93KCksIHgoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICAgICAgICAgIE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBMUlUgR2FyYmFnZSBDb2xsZWN0aW9uXFxuXFx0Q291bnRlZCB0YXJnZXRzIGluICR7ciAtIGh9bXNcXG5cXHREZXRlcm1pbmVkIGxlYXN0IHJlY2VudGx5IHVzZWQgJHtzfSBpbiBgICsgKG8gLSByKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7aX0gdGFyZ2V0cyBpbiBgICsgKGEgLSBvKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7dH0gZG9jdW1lbnRzIGluIGAgKyAodSAtIGEpICsgXCJtc1xcblwiICsgYFRvdGFsIER1cmF0aW9uOiAke3UgLSBofW1zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4genMucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgZGlkUnVuOiAhMCxcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IHMsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQ6IGksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzUmVtb3ZlZDogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi9cbmNsYXNzIFdpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGIgPSB0LCB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFFpKHQsIGUpO1xuICAgICAgICB9KHRoaXMsIGUpO1xuICAgIH1cbiAgICB5ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkVlKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KHQpLm5leHQoKHQgPT4gZS5uZXh0KChlID0+IHQgKyBlKSkpKTtcbiAgICB9XG4gICAgRWUodCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLnBlKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGUrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0LCBlKTtcbiAgICB9XG4gICAgcGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5JZSh0LCAoKHQsIG4pID0+IGUobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIEdpKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gR2kodCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdpKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICBBZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICAgICAgcmV0dXJuICRpKHQpLlF0KChzID0+IE5pKHQsIHMsIGUpLm5leHQoKHQgPT4gKHQgJiYgKG4gPSAhMCksIHpzLnJlc29sdmUoIXQpKSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgICAgICB9KHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKSwgcyA9IFtdO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLkllKHQsICgociwgbykgPT4ge1xuICAgICAgICAgICAgaWYgKG8gPD0gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkFlKHQsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUpIFxuICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkrKywgbi5nZXRFbnRyeSh0LCByKS5uZXh0KCgoKSA9PiAobi5yZW1vdmVFbnRyeShyKSwgQmkodCkuZGVsZXRlKFsgMCwgYnMoci5wYXRoKSBdKSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkubmV4dCgoKCkgPT4genMud2FpdEZvcihzKSkpLm5leHQoKCgpID0+IG4uYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0LCBuKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHaSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxuICAgICAqIG1lYW5zIG5vdCBhIHBhcnQgb2YgYW55IHRhcmdldCwgc28gdGhlIG9ubHkgZW50cnkgaW4gdGhlIHRhcmdldC1kb2N1bWVudCBpbmRleCBmb3JcbiAgICAgKiB0aGF0IGRvY3VtZW50IHdpbGwgYmUgdGhlIHNlbnRpbmVsIHJvdyAodGFyZ2V0SWQgMCksIHdoaWNoIHdpbGwgYWxzbyBoYXZlIHRoZSBzZXF1ZW5jZVxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxuICAgICAqLyAgICBJZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBCaSh0KTtcbiAgICAgICAgbGV0IHMsIGkgPSBudC5JO1xuICAgICAgICByZXR1cm4gbi5qdCh7XG4gICAgICAgICAgICBpbmRleDogTHMuZG9jdW1lbnRUYXJnZXRzSW5kZXhcbiAgICAgICAgfSwgKChbdCwgbl0sIHtwYXRoOiByLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IHQgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IG50LkkgJiYgZShuZXcgRHQoVnMocykpLCBpKSwgXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxuICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXG4gICAgICAgICAgICAvLyBpcyAwLlxuICAgICAgICAgICAgaSA9IG8sIHMgPSByKSA6IFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSBpbnZhbGlkLCB3ZSBrbm93IHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAvLyB0aGlzIG9uZSBzaW5jZSB3ZSBmb3VuZCBhIHRhcmdldCBmb3IgaXQuXG4gICAgICAgICAgICBpID0gbnQuSTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXG4gICAgICAgICAgICBpICE9PSBudC5JICYmIGUobmV3IER0KFZzKHMpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBHaSh0LCBlKSB7XG4gICAgcmV0dXJuIEJpKHQpLnB1dChcbiAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTHMoMCwgYnModC5wYXRoKSwgZSk7XG4gICAgfShlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaGF2ZSBhblxuICogYXNzb2NpYXRlZCBlcXVhbHMgZnVuY3Rpb24gYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlXG4gKiBzdG9yZWQgdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cbiAqLyBjbGFzcyB6aSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gdCwgdGhpcy5lcXVhbHNGbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fTtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykge1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgcmV0dXJuIHZvaWQgKHNbbl0gPSBbIHQsIGUgXSk7XG4gICAgICAgICAgICBzLnB1c2goWyB0LCBlIF0pO1xuICAgICAgICB9IGVsc2UgdGhpcy5pbm5lcltuXSA9IFsgWyB0LCBlIF0gXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGx0KHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gZnQodGhpcy5pbm5lcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3MgSGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbiAob3IgbnVsbCBpZiBhbnlcbiAgICAgICAgLy8gZXhpc3RpbmcgY2FjaGUgZW50cnkgc2hvdWxkIGJlIHJlbW92ZWQpLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgemkoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICBnZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoYW5nZXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IGUucmVhZFRpbWUgOiB1dC5taW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQua2V5LCB7XG4gICAgICAgICAgICBkb2N1bWVudDogdCxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBHdC5uZXdJbnZhbGlkRG9jdW1lbnQodCksXG4gICAgICAgICAgICByZWFkVGltZTogZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IHpzLnJlc29sdmUobi5kb2N1bWVudCkgOiB0aGlzLmdldEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXModCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBKaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmsgPSB0LCB0aGlzLkp0ID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gWmkodCkucHV0KHRyKGUpLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBaaSh0KSwgcyA9IHRyKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gZSwgdGhpcy5SZSh0LCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICByZXR1cm4gWmkodCkuZ2V0KHRyKGUpKS5uZXh0KCh0ID0+IHRoaXMuYmUoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgUGUodCwgZSkge1xuICAgICAgICByZXR1cm4gWmkodCkuZ2V0KHRyKGUpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudDogdGhpcy5iZShlLCB0KSxcbiAgICAgICAgICAgIHNpemU6IERpKHQpXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IFJuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnZlKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuYmUodCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIFZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBSbigpLCBzID0gbmV3IHluKER0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy52ZSh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmJlKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgRGkoZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIFNlOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIHZlKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4genMucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoZS5maXJzdCgpLnBhdGgudG9BcnJheSgpLCBlLmxhc3QoKS5wYXRoLnRvQXJyYXkoKSksIGkgPSBlLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBaaSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBEdC5mcm9tU2VnbWVudHModCk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ciAmJiBEdC5jb21wYXJhdG9yKHIsIG8pIDwgMDsgKSBuKHIsIG51bGwpLCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgICAgICByICYmIHIuaXNFcXVhbChvKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKHIsIGUpLCByID0gaS5oYXNOZXh0KCkgPyBpLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgciA/IHMuTHQoci5wYXRoLnRvQXJyYXkoKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO3I7ICkgbihyLCBudWxsKSwgciA9IGkuaGFzTmV4dCgpID8gaS5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFJuKCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLnBhdGgubGVuZ3RoICsgMSwgciA9IHt9O1xuICAgICAgICBpZiAobi5pc0VxdWFsKHV0Lm1pbigpKSkge1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvd1xuICAgICAgICAgICAgLy8gZG93biB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHIucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBpbmRleC1mcmVlIHF1ZXJ5IGFuZCBmaWx0ZXIgYnkgcmVhZCB0aW1lLiBUaGlzIGlzIHNhZmVcbiAgICAgICAgICAgIC8vIHNpbmNlIGFsbCBkb2N1bWVudCBjaGFuZ2VzIHRvIHF1ZXJpZXMgdGhhdCBoYXZlIGFcbiAgICAgICAgICAgIC8vIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gKGBzaW5jZVJlYWRUaW1lYCkgaGF2ZSBhIHJlYWQgdGltZSBzZXQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKSwgcyA9IGZpKG4pO1xuICAgICAgICAgICAgci5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0LCBzIF0sIFxuICAgICAgICAgICAgLyogb3Blbj0gKi8gITApLCByLmluZGV4ID0gT3MuY29sbGVjdGlvblJlYWRUaW1lSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFppKHQpLmp0KHIsICgodCwgbiwgcikgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGlzIGFjdHVhbGx5IHJldHVybmluZyBhbnkgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBwcmVmaXggd2hpY2ggbWF5IGluY2x1ZGUgZG9jdW1lbnRzIGluIHN1YmNvbGxlY3Rpb25zLiBGb3JcbiAgICAgICAgICAgIC8vIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyB3aWxsIHJldHVybiByb29tcy9hYmMvbWVzc2FnZXMveHl4IGJ1dCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkbid0IG1hdGNoIGl0LiBGaXggdGhpcyBieSBkaXNjYXJkaW5nIHJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzXG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5IHBhdGguXG4gICAgICAgICAgICBpZiAodC5sZW5ndGggIT09IGkpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBoaSh0aGlzLmssIG4pO1xuICAgICAgICAgICAgZS5wYXRoLmlzUHJlZml4T2Yoby5rZXkucGF0aCkgPyBEZShlLCBvKSAmJiAocyA9IHMuaW5zZXJ0KG8ua2V5LCBvKSkgOiByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBZaSh0aGlzLCAhIXQgJiYgdC50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKHQgPT4gdC5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YSh0KSB7XG4gICAgICAgIHJldHVybiBYaSh0KS5nZXQoTXMua2V5KS5uZXh0KCh0ID0+IChVKCEhdCksIHQpKSk7XG4gICAgfVxuICAgIFJlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFhpKHQpLnB1dChNcy5rZXksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGByZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgbnVsbCwgaWYgdGhlIGRvY3VtZW50XG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgYmUodCwgZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGhpKHRoaXMuaywgZSk7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0LmlzTm9Eb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKHV0Lm1pbigpKSkpIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHdC5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICogQHBhcmFtIGluZGV4TWFuYWdlciAtIFRoZSBxdWVyeSBpbmRleGVzIHRoYXQgbmVlZCB0byBiZSBtYWludGFpbmVkLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqL1xuY2xhc3MgWWkgZXh0ZW5kcyBIaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkRlID0gdCwgdGhpcy50cmFja1JlbW92YWxzID0gZSwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLkNlID0gbmV3IHppKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCBzID0gbmV3IEVuKCgodCwgZSkgPT4gcnQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuQ2UuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKHIuZG9jdW1lbnQuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gbGkodGhpcy5EZS5rLCByLmRvY3VtZW50LCB0aGlzLmdldFJlYWRUaW1lKGkpKTtcbiAgICAgICAgICAgICAgICBzID0gcy5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IERpKGMpO1xuICAgICAgICAgICAgICAgIG4gKz0gYSAtIG8sIGUucHVzaCh0aGlzLkRlLmFkZEVudHJ5KHQsIGksIGMpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gbGkodGhpcy5EZS5rLCBHdC5uZXdOb0RvY3VtZW50KGksIHV0Lm1pbigpKSwgdGhpcy5nZXRSZWFkVGltZShpKSk7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuRGUuYWRkRW50cnkodCwgaSwgbikpO1xuICAgICAgICAgICAgfSBlbHNlIGUucHVzaCh0aGlzLkRlLnJlbW92ZUVudHJ5KHQsIGkpKTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMuRGUuSnQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbikpO1xuICAgICAgICB9KSksIGUucHVzaCh0aGlzLkRlLnVwZGF0ZU1ldGFkYXRhKHQsIG4pKSwgenMud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5EZS5QZSh0LCBlKS5uZXh0KCh0ID0+ICh0aGlzLkNlLnNldChlLCB0LnNpemUpLCB0LmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLkRlLlZlKHQsIGUpLm5leHQoKCh7ZG9jdW1lbnRzOiB0LCBTZTogZX0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuQ2Uuc2V0KHQsIGUpO1xuICAgICAgICB9KSksIHQpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBYaSh0KSB7XG4gICAgcmV0dXJuIHJpKHQsIE1zLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWmkodCkge1xuICAgIHJldHVybiByaSh0LCBPcy5zdG9yZSk7XG59XG5cbmZ1bmN0aW9uIHRyKHQpIHtcbiAgICByZXR1cm4gdC5wYXRoLnRvQXJyYXkoKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqLyBjbGFzcyBlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmsgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIE50KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgVShuIDwgcyAmJiBuID49IDAgJiYgcyA8PSAxMSk7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgSHMoXCJjcmVhdGVPclVwZ3JhZGVcIiwgZSk7XG4gICAgICAgIG4gPCAxICYmIHMgPj0gMSAmJiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShEcy5zdG9yZSk7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoQ3Muc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBDcy5rZXlQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoTnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBOcy5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChOcy51c2VyTXV0YXRpb25zSW5kZXgsIE5zLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoa3Muc3RvcmUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgbnIodCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoT3Muc3RvcmUpO1xuICAgICAgICB9KHQpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCByID0genMucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgcyA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKExzLnN0b3JlKSwgdC5kZWxldGVPYmplY3RTdG9yZShGcy5zdG9yZSksIHQuZGVsZXRlT2JqZWN0U3RvcmUoQnMuc3RvcmUpO1xuICAgICAgICB9KHQpLCBucih0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoQnMuc3RvcmUpLCBuID0gbmV3IEJzKFxuICAgICAgICAgICAgLypoaWdoZXN0VGFyZ2V0SWQ9Ki8gMCwgXG4gICAgICAgICAgICAvKmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj0qLyAwLCB1dC5taW4oKS50b1RpbWVzdGFtcCgpLCBcbiAgICAgICAgICAgIC8qdGFyZ2V0Q291bnQ9Ki8gMCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoQnMua2V5LCBuKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgaW5kaWNlcyBvbiB0aGUgUmVtb3RlRG9jdW1lbnRzIHN0b3JlIHVzZWQgZm9yIGJvdGggbXVsdGktdGFiXG4gKiBhbmQgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICovIChpKSkpKSwgbiA8IDQgJiYgcyA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICByID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZShOcy5zdG9yZSkuQnQoKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKE5zLnN0b3JlKTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKE5zLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IE5zLmtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoTnMudXNlck11dGF0aW9uc0luZGV4LCBOcy51c2VyTXV0YXRpb25zS2V5UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuc3RvcmUoTnMuc3RvcmUpLCBpID0gbi5tYXAoKHQgPT4gcy5wdXQodCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4genMud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSh0LCBpKSkpKSwgciA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKHFzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IHFzLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHMgPj0gNSAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5OZShpKSkpKSwgbiA8IDYgJiYgcyA+PSA2ICYmIChyID0gci5uZXh0KCgoKSA9PiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShNcy5zdG9yZSk7XG4gICAgICAgIH0odCksIHRoaXMua2UoaSkpKSkpLCBuIDwgNyAmJiBzID49IDcgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMueGUoaSkpKSksIG4gPCA4ICYmIHMgPj0gOCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy4kZSh0LCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHMgPj0gOSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0Lm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5vYmplY3RTdG9yZShPcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVJbmRleChPcy5yZWFkVGltZUluZGV4LCBPcy5yZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIGUuY3JlYXRlSW5kZXgoT3MuY29sbGVjdGlvblJlYWRUaW1lSW5kZXgsIE9zLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTAgJiYgcyA+PSAxMCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5PZShpKSkpKSwgbiA8IDExICYmIHMgPj0gMTEgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShLcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBLcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShqcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBqcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgIH0pKSksIHI7XG4gICAgfVxuICAgIGtlKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShPcy5zdG9yZSkuanQoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlICs9IERpKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNcyhlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKE1zLnN0b3JlKS5wdXQoTXMua2V5LCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBOZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKENzLnN0b3JlKSwgbiA9IHQuc3RvcmUoTnMuc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5CdCgpLm5leHQoKGUgPT4genMuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLnVzZXJJZCwgLTEgXSwgWyBlLnVzZXJJZCwgZS5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuLkJ0KE5zLnVzZXJNdXRhdGlvbnNJbmRleCwgcykubmV4dCgobiA9PiB6cy5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBVKG4udXNlcklkID09PSBlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG1pKHRoaXMuaywgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNpKHQsIGUudXNlcklkLCBzKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIHhlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoTHMuc3RvcmUpLCBuID0gdC5zdG9yZShPcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKEJzLnN0b3JlKS5nZXQoQnMua2V5KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLmp0KCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgd3QobiksIG8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIGJzKHQpIF07XG4gICAgICAgICAgICAgICAgfShyKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5nZXQobykubmV4dCgobiA9PiBuID8genMucmVzb2x2ZSgpIDogKG4gPT4gZS5wdXQobmV3IExzKDAsIGJzKG4pLCB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpKShyKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB6cy53YWl0Rm9yKHMpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgJGUodCwgZSkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFVzLnN0b3JlLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBVcy5rZXlQYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShVcy5zdG9yZSksIHMgPSBuZXcgUmksIGkgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChzLmFkZCh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIHMgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogYnMocylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoT3Muc3RvcmUpLmp0KHtcbiAgICAgICAgICAgIEt0OiAhMFxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgd3QodCk7XG4gICAgICAgICAgICByZXR1cm4gaShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlLnN0b3JlKGtzLnN0b3JlKS5qdCh7XG4gICAgICAgICAgICBLdDogITBcbiAgICAgICAgfSwgKChbdCwgZSwgbl0sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBWcyhlKTtcbiAgICAgICAgICAgIHJldHVybiBpKHIucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIE9lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoRnMuc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5qdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBnaShuKSwgaSA9IHlpKHRoaXMuaywgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5yKHQpIHtcbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKExzLnN0b3JlLCB7XG4gICAgICAgIGtleVBhdGg6IExzLmtleVBhdGhcbiAgICB9KS5jcmVhdGVJbmRleChMcy5kb2N1bWVudFRhcmdldHNJbmRleCwgTHMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoRnMuc3RvcmUsIHtcbiAgICAgICAga2V5UGF0aDogRnMua2V5UGF0aFxuICAgIH0pLmNyZWF0ZUluZGV4KEZzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSwgRnMucXVlcnlUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoQnMuc3RvcmUpO1xufVxuXG5jb25zdCBzciA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBpciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMsIGksIHIsIG8sIGMsIGEsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIHUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gZSwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLk1lID0gaSwgdGhpcy53aW5kb3cgPSByLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5GZSA9IGEsIHRoaXMuTGUgPSB1LCB0aGlzLkJlID0gbnVsbCwgXG4gICAgICAgIHRoaXMuVWUgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMucWUgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5LZSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMuamUgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMuUWUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLldlID0gdCA9PiBQcm9taXNlLnJlc29sdmUoKSwgIWlyLlB0KCkpIHRocm93IG5ldyBRKGouVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IFdpKHRoaXMsIHMpLCB0aGlzLkdlID0gZSArIFwibWFpblwiLCB0aGlzLmsgPSBuZXcgdWkoYyksIFxuICAgICAgICB0aGlzLnplID0gbmV3IEpzKHRoaXMuR2UsIDExLCBuZXcgZXIodGhpcy5rKSksIHRoaXMuSGUgPSBuZXcgTWkodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5rKSwgXG4gICAgICAgIHRoaXMuSnQgPSBuZXcgYmksIHRoaXMuSmUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEppKHQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgc3BlY2lmaWVkIHJlYWRcbiAqIHRpbWUuXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgKHRoaXMuaywgdGhpcy5KdCksIHRoaXMuWWUgPSBuZXcgVGksIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuWGUgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5YZSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBNKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLlplKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIHNyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRuKCksIHRoaXMuZW4oKSwgdGhpcy5ubigpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy5IZS5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5CZSA9IG5ldyBudCh0LCB0aGlzLkZlKTtcbiAgICAgICAgfSkpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuVWUgPSAhMDtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+ICh0aGlzLnplICYmIHRoaXMuemUuY2xvc2UoKSwgUHJvbWlzZS5yZWplY3QodCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgcHJpbWFyeSBzdGF0ZSBvZiB0aGVcbiAgICAgKiBpbnN0YW5jZSBjaGFuZ2VzLiBVcG9uIHJlZ2lzdGVyaW5nLCB0aGlzIGxpc3RlbmVyIGlzIGludm9rZWQgaW1tZWRpYXRlbHlcbiAgICAgKiB3aXRoIHRoZSBjdXJyZW50IHByaW1hcnkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLldlID0gYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm4gdChlKTtcbiAgICAgICAgfSwgdCh0aGlzLmlzUHJpbWFyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZGF0YWJhc2UgcmVjZWl2ZXMgYVxuICAgICAqIHZlcnNpb24gY2hhbmdlIGV2ZW50IGluZGljYXRpbmcgdGhhdCBpdCBoYXMgZGVsZXRlZC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy56ZS54dCgoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gZGVsZXRlIEluZGV4ZWREQi5cbiAgICAgICAgICAgIG51bGwgPT09IGUubmV3VmVyc2lvbiAmJiBhd2FpdCB0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0cyB0aGUgY3VycmVudCBuZXR3b3JrIHN0YXRlIGluIHRoZSBjbGllbnQncyBtZXRhZGF0YSwgcG90ZW50aWFsbHlcbiAgICAgKiBhZmZlY3RpbmcgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXROZXR3b3JrRW5hYmxlZCh0KSB7XG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgIT09IHQgJiYgKHRoaXMubmV0d29ya0VuYWJsZWQgPSB0LCBcbiAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxuICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxuICAgICAgICB0aGlzLk1lLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCAmJiBhd2FpdCB0aGlzLlplKCk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXG4gICAgICogcHJpbWFyeSBsZWFzZS5cbiAgICAgKi8gICAgWmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG9yKHQpLnB1dChuZXcgcXModGhpcy5jbGllbnRJZCwgRGF0ZS5ub3coKSwgdGhpcy5uZXR3b3JrRW5hYmxlZCwgdGhpcy5pbkZvcmVncm91bmQpKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHJldHVybiB0aGlzLnJuKHQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgKHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMuTWUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5XZSghMSkpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLm9uKHQpKSkubmV4dCgoZSA9PiB0aGlzLmlzUHJpbWFyeSAmJiAhZSA/IHRoaXMuY24odCkubmV4dCgoKCkgPT4gITEpKSA6ICEhZSAmJiB0aGlzLmFuKHQpLm5leHQoKCgpID0+ICEwKSkpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChacyh0KSkgXG4gICAgICAgICAgICAvLyBQcm9jZWVkIHdpdGggdGhlIGV4aXN0aW5nIHN0YXRlLiBBbnkgc3Vic2VxdWVudCBhY2Nlc3MgdG9cbiAgICAgICAgICAgIC8vIEluZGV4ZWREQiB3aWxsIHZlcmlmeSB0aGUgbGVhc2UuXG4gICAgICAgICAgICByZXR1cm4gTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGV4dGVuZCBvd25lciBsZWFzZTogXCIsIHQpLCB0aGlzLmlzUHJpbWFyeTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgdGhyb3cgdDtcbiAgICAgICAgICAgIHJldHVybiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgb3duZXIgbGVhc2UgYWZ0ZXIgZXJyb3IgZHVyaW5nIGxlYXNlIHJlZnJlc2hcIiwgdCksIFxuICAgICAgICAgICAgLyogaXNQcmltYXJ5PSAqLyAhMTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgdGhpcy5NZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLldlKHQpKSksIHRoaXMuaXNQcmltYXJ5ID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBybih0KSB7XG4gICAgICAgIHJldHVybiBycih0KS5nZXQoRHMua2V5KS5uZXh0KCh0ID0+IHpzLnJlc29sdmUodGhpcy51bih0KSkpKTtcbiAgICB9XG4gICAgaG4odCkge1xuICAgICAgICByZXR1cm4gb3IodCkuZGVsZXRlKHRoaXMuY2xpZW50SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIHRocmVzaG9sZCBoYXMgcGFzc2VkLCBwcnVuZXMgdGhlXG4gICAgICogUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIGFuZCB0aGUgQ2xpZW50TWV0YWRhdGEgc3RvcmUgYmFzZWQgb24gdGhlIGxhc3QgdXBkYXRlXG4gICAgICogdGltZSBvZiBhbGwgY2xpZW50cy5cbiAgICAgKi8gICAgYXN5bmMgbG4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5mbih0aGlzLlFlLCAxOGU1KSkge1xuICAgICAgICAgICAgdGhpcy5RZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5ydW5UcmFuc2FjdGlvbihcIm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSByaSh0LCBxcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuQnQoKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZG4odCwgMThlNSksIHMgPSB0LmZpbHRlcigodCA9PiAtMSA9PT0gbi5pbmRleE9mKHQpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB6cy5mb3JFYWNoKHMsICh0ID0+IGUuZGVsZXRlKHQuY2xpZW50SWQpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgoKCkgPT4gW10pKTtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBwb3RlbnRpYWwgbGVmdG92ZXIgZW50cmllcyB0aGF0IG1heSBjb250aW51ZSB0byBtYXJrIHRoZVxuICAgICAgICAgICAgLy8gaW5hY3RpdmUgY2xpZW50cyBhcyB6b21iaWVkIGluIExvY2FsU3RvcmFnZS5cbiAgICAgICAgICAgIC8vIElkZWFsbHkgd2UnZCBkZWxldGUgdGhlIEluZGV4ZWREYiBhbmQgTG9jYWxTdG9yYWdlIHpvbWJpZSBlbnRyaWVzIGZvclxuICAgICAgICAgICAgLy8gdGhlIGNsaWVudCBhdG9taWNhbGx5LCBidXQgd2UgY2FuJ3QuIFNvIHdlIG9wdCB0byBkZWxldGUgdGhlIEluZGV4ZWREYlxuICAgICAgICAgICAgLy8gZW50cmllcyBmaXJzdCB0byBhdm9pZCBwb3RlbnRpYWxseSByZXZpdmluZyBhIHpvbWJpZWQgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuWGUpIGZvciAoY29uc3QgZSBvZiB0KSB0aGlzLlhlLnJlbW92ZUl0ZW0odGhpcy53bihlLmNsaWVudElkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcmVjdXJyaW5nIHRpbWVyIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGFuZCB0byBlaXRoZXJcbiAgICAgKiBleHRlbmQgb3IgYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSBpZiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlLlxuICAgICAqLyAgICBubigpIHtcbiAgICAgICAgdGhpcy5qZSA9IHRoaXMuTWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJjbGllbnRfbWV0YWRhdGFfcmVmcmVzaFwiIC8qIENsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMuWmUoKS50aGVuKCgoKSA9PiB0aGlzLmxuKCkpKS50aGVuKCgoKSA9PiB0aGlzLm5uKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgdW4odCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIHQub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgb24odCkge1xuICAgICAgICBpZiAodGhpcy5MZSkgcmV0dXJuIHpzLnJlc29sdmUoITApO1xuICAgICAgICByZXR1cm4gcnIodCkuZ2V0KERzLmtleSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gdGhlIGBmb3JjZU93bmluZ1RhYmAgc2V0dGluZyB3YXMgcGFzc2VkIGluLlxuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgdGhpcy5mbihlLmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuX24oZS5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuKGUpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudW4oZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIHNyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKCF0aGlzLm5ldHdvcmtFbmFibGVkIHx8ICF0aGlzLmluRm9yZWdyb3VuZCkgfHwgb3IodCkuQnQoKS5uZXh0KCh0ID0+IHZvaWQgMCA9PT0gdGhpcy5kbih0LCA1ZTMpLmZpbmQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSB0LmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiB0Lm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIHQuaW5Gb3JlZ3JvdW5kLCBzID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gdC5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgfHwgbiAmJiBzKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiAodGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJHt0ID8gXCJpc1wiIDogXCJpcyBub3RcIn0gZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5gKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKCkge1xuICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxuICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXG4gICAgICAgIHRoaXMuVWUgPSAhMSwgdGhpcy5tbigpLCB0aGlzLmplICYmICh0aGlzLmplLmNhbmNlbCgpLCB0aGlzLmplID0gbnVsbCksIHRoaXMuZ24oKSwgXG4gICAgICAgIHRoaXMueW4oKSwgXG4gICAgICAgIC8vIFVzZSBgU2ltcGxlRGIucnVuVHJhbnNhY3Rpb25gIGRpcmVjdGx5IHRvIGF2b2lkIGZhaWxpbmcgaWYgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gaGFzIG9idGFpbmVkIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICBhd2FpdCB0aGlzLnplLnJ1blRyYW5zYWN0aW9uKFwic2h1dGRvd25cIiwgXCJyZWFkd3JpdGVcIiwgWyBEcy5zdG9yZSwgcXMuc3RvcmUgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBpaSh0LCBudC5JKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNuKGUpLm5leHQoKCgpID0+IHRoaXMuaG4oZSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnplLmNsb3NlKCksIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXG4gICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cbiAgICAgICAgdGhpcy5wbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNsaWVudHMgdGhhdCBhcmUgbm90IHpvbWJpZWQgYW5kIGhhdmUgYW4gdXBkYXRlVGltZSB3aXRoaW4gdGhlXG4gICAgICogcHJvdmlkZWQgdGhyZXNob2xkLlxuICAgICAqLyAgICBkbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LmZpbHRlcigodCA9PiB0aGlzLmZuKHQudXBkYXRlVGltZU1zLCBlKSAmJiAhdGhpcy5fbih0LmNsaWVudElkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gSWYgbXVsdGktdGFiXG4gICAgICogaXMgbm90IHN1cHBvcnRlZCwgcmV0dXJucyBhbiBhcnJheSB0aGF0IG9ubHkgY29udGFpbnMgdGhlIGxvY2FsIGNsaWVudCdzXG4gICAgICogSUQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBUbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRBY3RpdmVDbGllbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gb3IodCkuQnQoKS5uZXh0KCh0ID0+IHRoaXMuZG4odCwgMThlNSkubWFwKCh0ID0+IHQuY2xpZW50SWQpKSkpKSk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VZTtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0KSB7XG4gICAgICAgIHJldHVybiBDaS5YdCh0LCB0aGlzLmssIHRoaXMuSnQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGU7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplO1xuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkp0O1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWWU7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gXCJyZWFkb25seVwiID09PSBlID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIjtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIC8vIERvIGFsbCB0cmFuc2FjdGlvbnMgYXMgcmVhZHdyaXRlIGFnYWluc3QgYWxsIG9iamVjdCBzdG9yZXMsIHNpbmNlIHdlXG4gICAgICAgIC8vIGFyZSB0aGUgb25seSByZWFkZXIvd3JpdGVyLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnplLnJ1blRyYW5zYWN0aW9uKHQsIHMsIFFzLCAocyA9PiAoaSA9IG5ldyBpaShzLCB0aGlzLkJlID8gdGhpcy5CZS5uZXh0KCkgOiBudC5JKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gZSA/IHRoaXMucm4oaSkubmV4dCgodCA9PiAhIXQgfHwgdGhpcy5vbihpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBNKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHt0fScuYCksIHRoaXMuaXNQcmltYXJ5ID0gITEsIFxuICAgICAgICAgICAgdGhpcy5NZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLldlKCExKSkpLCBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIFdzKTtcbiAgICAgICAgICAgIHJldHVybiBuKGkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiB0aGlzLmFuKGkpLm5leHQoKCgpID0+IHQpKSkpIDogdGhpcy5FbihpKS5uZXh0KCgoKSA9PiBuKGkpKSkpKSkudGhlbigodCA9PiAoaS5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIEVuKHQpIHtcbiAgICAgICAgcmV0dXJuIHJyKHQpLmdldChEcy5rZXkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5mbih0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuX24odC5vd25lcklkKSAmJiAhdGhpcy51bih0KSAmJiAhKHRoaXMuTGUgfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiB0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBzcik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBhbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRHModGhpcy5jbGllbnRJZCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgRGF0ZS5ub3coKSk7XG4gICAgICAgIHJldHVybiBycih0KS5wdXQoRHMua2V5LCBlKTtcbiAgICB9XG4gICAgc3RhdGljIFB0KCkge1xuICAgICAgICByZXR1cm4gSnMuUHQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgY24odCkge1xuICAgICAgICBjb25zdCBlID0gcnIodCk7XG4gICAgICAgIHJldHVybiBlLmdldChEcy5rZXkpLm5leHQoKHQgPT4gdGhpcy51bih0KSA/IChPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShEcy5rZXkpKSA6IHpzLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgZm4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKE0oYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIHRuKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLktlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5NZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5aZSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuS2UpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIGduKCkge1xuICAgICAgICB0aGlzLktlICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuS2UpLCB0aGlzLktlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICBlbigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMucWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy5tbigpLCBpc1NhZmFyaSgpICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9WZXJzaW9uXFwvMVs0NV0vKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCBhbmQgMTUsIHdlIGRvIG5vdCBydW4gYW55IGNsZWFudXAgYWN0aW9ucyBhcyBpdCBtaWdodFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhIGJ1ZyB0aGF0IHByZXZlbnRzIFNhZmFyaSBmcm9tIHJlLW9wZW5pbmcgSW5kZXhlZERCIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlIG5leHQgcGFnZSBsb2FkLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjY1NDdcbiAgICAgICAgICAgIHRoaXMuTWUuZW50ZXJSZXN0cmljdGVkTW9kZSgvKiBwdXJnZUV4aXN0aW5nVGFza3M9ICovICEwKSwgdGhpcy5NZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnNodXRkb3duKCkpKTtcbiAgICAgICAgfSwgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMucWUpKTtcbiAgICB9XG4gICAgeW4oKSB7XG4gICAgICAgIHRoaXMucWUgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLnFlKSwgdGhpcy5xZSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxuICAgICAqLyAgICBfbih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbiA9IG51bGwgIT09IChudWxsID09PSAoZSA9IHRoaXMuWGUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZ2V0SXRlbSh0aGlzLnduKHQpKSk7XG4gICAgICAgICAgICByZXR1cm4gTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJyR7dH0nICR7biA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgbjtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gTShcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC5cIiwgdCksICExO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXG4gICAgICogY2xpZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgcHJpbWFyeSB0YWIgc2VsZWN0aW9uLlxuICAgICAqLyAgICBtbigpIHtcbiAgICAgICAgaWYgKHRoaXMuWGUpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLlhlLnNldEl0ZW0odGhpcy53bih0aGlzLmNsaWVudElkKSwgU3RyaW5nKERhdGUubm93KCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IGF2YWlsYWJsZSAvIHdvcmtpbmcuXG4gICAgICAgICAgICBNKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBwbigpIHtcbiAgICAgICAgaWYgKHRoaXMuWGUpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLlhlLnJlbW92ZUl0ZW0odGhpcy53bih0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIHduKHQpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHt0fWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHJyKHQpIHtcbiAgICByZXR1cm4gcmkodCwgRHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBvcih0KSB7XG4gICAgcmV0dXJuIHJpKHQsIHFzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gY3IodCwgZSkge1xuICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cbiAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xuICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXG4gICAgbGV0IG4gPSB0LnByb2plY3RJZDtcbiAgICByZXR1cm4gdC5pc0RlZmF1bHREYXRhYmFzZSB8fCAobiArPSBcIi5cIiArIHQuZGF0YWJhc2UpLCBcImZpcmVzdG9yZS9cIiArIGUgKyBcIi9cIiArIG4gKyBcIi9cIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIGFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0LCB0aGlzLkluID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVhZG9ubHkgdmlldyBvZiB0aGUgbG9jYWwgc3RhdGUgb2YgYWxsIGRvY3VtZW50cyB3ZSdyZSB0cmFja2luZyAoaS5lLiB3ZVxuICogaGF2ZSBhIGNhY2hlZCB2ZXJzaW9uIGluIHJlbW90ZURvY3VtZW50Q2FjaGUgb3IgbG9jYWwgbXV0YXRpb25zIGZvciB0aGVcbiAqIGRvY3VtZW50KS4gVGhlIHZpZXcgaXMgY29tcHV0ZWQgYnkgYXBwbHlpbmcgdGhlIG11dGF0aW9ucyBpbiB0aGVcbiAqIE11dGF0aW9uUXVldWUgdG8gdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi8gY2xhc3MgdXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5KZSA9IHQsIHRoaXMuQW4gPSBlLCB0aGlzLkp0ID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBpZGVudGlmaWVkIGJ5IGBrZXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgb3IgbnVsbCBpZiB3ZSBkb24ndCBoYXZlIGFueSBjYWNoZWRcbiAgICAgKiBzdGF0ZSBmb3IgaXQuXG4gICAgICovICAgIFJuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkubmV4dCgobiA9PiB0aGlzLmJuKHQsIGUsIG4pKSk7XG4gICAgfVxuICAgIC8qKiBJbnRlcm5hbCB2ZXJzaW9uIG9mIGBnZXREb2N1bWVudGAgdGhhdCBhbGxvd3MgcmV1c2luZyBiYXRjaGVzLiAqLyAgICBibih0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplLmdldEVudHJ5KHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGUuYXBwbHlUb0xvY2FsVmlldyh0KTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZpZXcgb2YgdGhlIGdpdmVuIGBkb2NzYCBhcyB0aGV5IHdvdWxkIGFwcGVhciBhZnRlciBhcHBseWluZ1xuICAgIC8vIGFsbCBtdXRhdGlvbnMgaW4gdGhlIGdpdmVuIGBiYXRjaGVzYC5cbiAgICBQbih0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB0LmFwcGx5VG9Mb2NhbFZpZXcobik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxuICAgICAqXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXG4gICAgICovICAgIHZuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmUuZ2V0RW50cmllcyh0LCBlKS5uZXh0KChlID0+IHRoaXMuVm4odCwgZSkubmV4dCgoKCkgPT4gZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGxvY2FsIHZpZXcgdGhlIGdpdmVuIGBiYXNlRG9jc2Agd2l0aG91dCByZXRyaWV2aW5nIGRvY3VtZW50c1xuICAgICAqIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxuICAgICAqLyAgICBWbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkFuLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKS5uZXh0KCh0ID0+IHRoaXMuUG4oZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBzaW5jZVJlYWRUaW1lIC0gSWYgbm90IHNldCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCksIHJldHVybiBvbmx5XG4gICAgICogICAgIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiByZWFkIHNpbmNlIHRoaXMgc25hcHNob3QgdmVyc2lvbiAoZXhjbHVzaXZlKS5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgc2luZ2xlIGRvY3VtZW50IGJ5IHBhdGggKHJhdGhlciB0aGFuIGFcbiAqIGNvbGxlY3Rpb24pLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gRHQuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG4gICAgICAgIH0oZSkgPyB0aGlzLlNuKHQsIGUucGF0aCkgOiBBZShlKSA/IHRoaXMuRG4odCwgZSwgbikgOiB0aGlzLkNuKHQsIGUsIG4pO1xuICAgIH1cbiAgICBTbih0LCBlKSB7XG4gICAgICAgIC8vIEp1c3QgZG8gYSBzaW1wbGUgZG9jdW1lbnQgbG9va3VwLlxuICAgICAgICByZXR1cm4gdGhpcy5Sbih0LCBuZXcgRHQoZSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbGV0IGUgPSBQbigpO1xuICAgICAgICAgICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgKGUgPSBlLmluc2VydCh0LmtleSwgdCkpLCBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIERuKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUuY29sbGVjdGlvbkdyb3VwO1xuICAgICAgICBsZXQgaSA9IFBuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLkp0LmdldENvbGxlY3Rpb25QYXJlbnRzKHQsIHMpLm5leHQoKHIgPT4genMuZm9yRWFjaChyLCAociA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbWUoZSwgXG4gICAgICAgICAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XG4gKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cbiAqLyAoZSwgci5jaGlsZChzKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Dbih0LCBvLCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBpLmluc2VydCh0LCBlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSkpKTtcbiAgICB9XG4gICAgQ24odCwgZSwgbikge1xuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXG4gICAgICAgIGxldCBzLCBpO1xuICAgICAgICByZXR1cm4gdGhpcy5KZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pLm5leHQoKG4gPT4gKHMgPSBuLCB0aGlzLkFuLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpKSkpLm5leHQoKGUgPT4gKGkgPSBlLCBcbiAgICAgICAgdGhpcy5Obih0LCBpLCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHMgPSB0O1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGkpIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmtleTtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IHMuZ2V0KG4pO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gaSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGludmFsaWQgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIG9uIHRvcCBvZlxuICAgICAgICAgICAgICAgIGkgPSBHdC5uZXdJbnZhbGlkRG9jdW1lbnQobiksIHMgPSBzLmluc2VydChuLCBpKSksIGVuKGUsIGksIHQubG9jYWxXcml0ZVRpbWUpLCBpLmlzRm91bmREb2N1bWVudCgpIHx8IChzID0gcy5yZW1vdmUobikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpKSkubmV4dCgoKCkgPT4gKFxuICAgICAgICAvLyBGaW5hbGx5LCBmaWx0ZXIgb3V0IGFueSBkb2N1bWVudHMgdGhhdCBkb24ndCBhY3R1YWxseSBtYXRjaFxuICAgICAgICAvLyB0aGUgcXVlcnkuXG4gICAgICAgIHMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIERlKGUsIG4pIHx8IChzID0gcy5yZW1vdmUodCkpO1xuICAgICAgICB9KSksIHMpKSk7XG4gICAgfVxuICAgIE5uKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSBEbigpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBlIGluc3RhbmNlb2YgY24gJiYgbnVsbCA9PT0gbi5nZXQoZS5rZXkpICYmIChzID0gcy5hZGQoZS5rZXkpKTtcbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICByZXR1cm4gdGhpcy5KZS5nZXRFbnRyaWVzKHQsIHMpLm5leHQoKHQgPT4gKHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgKGkgPSBpLmluc2VydCh0LCBlKSk7XG4gICAgICAgIH0pKSwgaSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcbiAqIGEgZ2l2ZW4gcXVlcnkuIFRoZXNlIGNoYW5nZXMgYXJlIHNlbnQgdG8gdGhlIExvY2FsU3RvcmUgYnkgdGhlIFZpZXcgKHZpYVxuICogdGhlIFN5bmNFbmdpbmUpIGFuZCBhcmUgdXNlZCB0byBwaW4gLyB1bnBpbiBkb2N1bWVudHMgYXMgYXBwcm9wcmlhdGUuXG4gKi8gY2xhc3MgaHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuZnJvbUNhY2hlID0gZSwgdGhpcy5rbiA9IG4sIHRoaXMueG4gPSBzO1xuICAgIH1cbiAgICBzdGF0aWMgJG4odCwgZSkge1xuICAgICAgICBsZXQgbiA9IERuKCksIHMgPSBEbigpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5kb2NDaGFuZ2VzKSBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICBuID0gbi5hZGQodC5kb2Mua2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgcyA9IHMuYWRkKHQuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBocih0LCBlLmZyb21DYWNoZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHF1ZXJ5IGVuZ2luZSB0aGF0IHRha2VzIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0IGRvY3VtZW50IG1hcHBpbmcgaW4gdGhlXG4gKiBRdWVyeUNhY2hlLiBRdWVyeSBleGVjdXRpb24gaXMgb3B0aW1pemVkIGJ5IG9ubHkgcmVhZGluZyB0aGUgZG9jdW1lbnRzIHRoYXRcbiAqIHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55IGRvY3VtZW50cyB0aGF0IHdlcmUgZWRpdGVkIGFmdGVyIHRoZVxuICogcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqLyBjbGFzcyBsciB7XG4gICAgLyoqIFNldHMgdGhlIGRvY3VtZW50IHZpZXcgdG8gcXVlcnkgYWdhaW5zdC4gKi9cbiAgICBPbih0KSB7XG4gICAgICAgIHRoaXMuTW4gPSB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbGwgbG9jYWwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgcXVlcnkuICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgbWF0Y2ggYWxsIGRvY3VtZW50cyBkb24ndCBiZW5lZml0IGZyb20gdXNpbmdcbiAgICAgICAgLy8ga2V5LWJhc2VkIGxvb2t1cHMuIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHNjYW4gYWxsIGRvY3VtZW50cyBpbiBhXG4gICAgICAgIC8vIGNvbGxlY3Rpb24sIHJhdGhlciB0aGFuIHRvIHBlcmZvcm0gaW5kaXZpZHVhbCBsb29rdXBzLlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQuZmlsdGVycy5sZW5ndGggJiYgbnVsbCA9PT0gdC5saW1pdCAmJiBudWxsID09IHQuc3RhcnRBdCAmJiBudWxsID09IHQuZW5kQXQgJiYgKDAgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCB8fCAxID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggJiYgdC5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQuaXNLZXlGaWVsZCgpKTtcbiAgICAgICAgfShlKSB8fCBuLmlzRXF1YWwodXQubWluKCkpID8gdGhpcy5Gbih0LCBlKSA6IHRoaXMuTW4udm4odCwgcykubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5MbihlLCBpKTtcbiAgICAgICAgICAgIHJldHVybiAocGUoZSkgfHwgVGUoZSkpICYmIHRoaXMuQm4oZS5saW1pdFR5cGUsIHIsIHMsIG4pID8gdGhpcy5Gbih0LCBlKSA6ICh4KCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgTyhcIlF1ZXJ5RW5naW5lXCIsIFwiUmUtdXNpbmcgcHJldmlvdXMgcmVzdWx0IGZyb20gJXMgdG8gZXhlY3V0ZSBxdWVyeTogJXNcIiwgbi50b1N0cmluZygpLCBTZShlKSksIFxuICAgICAgICAgICAgdGhpcy5Nbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pLm5leHQoKHQgPT4gKFxuICAgICAgICAgICAgLy8gV2UgbWVyZ2UgYHByZXZpb3VzUmVzdWx0c2AgaW50byBgdXBkYXRlUmVzdWx0c2AsIHNpbmNlXG4gICAgICAgICAgICAvLyBgdXBkYXRlUmVzdWx0c2AgaXMgYWxyZWFkeSBhIERvY3VtZW50TWFwLiBJZiBhIGRvY3VtZW50IGlzXG4gICAgICAgICAgICAvLyBjb250YWluZWQgaW4gYm90aCBsaXN0cywgdGhlbiBpdHMgY29udGVudHMgYXJlIHRoZSBzYW1lLlxuICAgICAgICAgICAgci5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQoZS5rZXksIGUpO1xuICAgICAgICAgICAgfSkpLCB0KSkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBzZWVuIGEgc25hcHNob3Qgd2l0aG91dCBsaW1ibyBmcmVlIGRvY3VtZW50c1xuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAgICAgICAgfVxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovICAgIExuKHQsIGUpIHtcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcbiAgICAgICAgLy8gbWF0Y2hpbmcgZG9jdW1lbnRzIGRvIG5vdCBuZWNlc3NhcmlseSBzdGlsbCBtYXRjaCB0aGUgcXVlcnkuXG4gICAgICAgIGxldCBuID0gbmV3IEVuKENlKHQpKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHMpID0+IHtcbiAgICAgICAgICAgIERlKHQsIHMpICYmIChuID0gbi5hZGQocykpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBsaW1pdCBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBmcm9tIGNhY2hlLCBtYWtpbmcgaXRcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgLSBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XG4gICAgICogc25hcHNob3QuXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZVxuICAgICAqIHF1ZXJ5IHdhcyBsYXN0IHN5bmNocm9uaXplZC5cbiAgICAgKi8gICAgQm4odCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGUgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgaWYgYSBwcmV2aW91c2x5IG1hdGNoaW5nIGRvY3VtZW50IG5vXG4gICAgICAgIC8vIGxvbmdlciBtYXRjaGVzLlxuICAgICAgICBpZiAobi5zaXplICE9PSBlLnNpemUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xuICAgICAgICAvLyBhIHBvdGVudGlhbCB0aGF0IGFuIG9sZGVyIGRvY3VtZW50IGZyb20gY2FjaGUgbm93IHNvcnRzIGJlZm9yZSBhIGRvY3VtZW50XG4gICAgICAgIC8vIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFydCBvZiB0aGUgbGltaXQuIFRoaXMsIGhvd2V2ZXIsIGNhbiBvbmx5IGhhcHBlbiBpZlxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IHRoYXQgaXMgbm90IHRoZSBsaW1pdCBib3VuZGFyeSBzb3J0cyBkaWZmZXJlbnRseSxcbiAgICAgICAgLy8gdGhlIGJvdW5kYXJ5IG9mIHRoZSBsaW1pdCBpdHNlbGYgZGlkIG5vdCBjaGFuZ2UgYW5kIGRvY3VtZW50cyBmcm9tIGNhY2hlXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxuICAgICAgICAvLyBhbnkgbW9kaWZpY2F0aW9ucyB0aGF0IGRvbid0IGFmZmVjdCB0aGUgbGFzdCBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gXCJGXCIgLyogRmlyc3QgKi8gPT09IHQgPyBlLmxhc3QoKSA6IGUuZmlyc3QoKTtcbiAgICAgICAgcmV0dXJuICEhaSAmJiAoaS5oYXNQZW5kaW5nV3JpdGVzIHx8IGkudmVyc2lvbi5jb21wYXJlVG8ocykgPiAwKTtcbiAgICB9XG4gICAgRm4odCwgZSkge1xuICAgICAgICByZXR1cm4geCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIE8oXCJRdWVyeUVuZ2luZVwiLCBcIlVzaW5nIGZ1bGwgY29sbGVjdGlvbiBzY2FuIHRvIGV4ZWN1dGUgcXVlcnk6XCIsIFNlKGUpKSwgXG4gICAgICAgIHRoaXMuTW4uZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCB1dC5taW4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRzIGBMb2NhbFN0b3JlYCBpbnRlcmZhY2UuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi9cbmNsYXNzIGZyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgdGhpcy5VbiA9IGUsIHRoaXMuayA9IHMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBXZSBhcmUgdXNpbmcgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIG9uIFdlYiB0byBtYWtlIHJlLXJ1bnNcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucW4gPSBuZXcgeW4ocnQpLCBcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xuICAgICAgICAvLyBUT0RPKHd1YW5keSk6IEV2YWx1YXRlIGlmIFRhcmdldElkIGNhbiBiZSBwYXJ0IG9mIFRhcmdldC5cbiAgICAgICAgdGhpcy5LbiA9IG5ldyB6aSgodCA9PiBKdCh0KSksIFh0KSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVhZCB0aW1lIG9mIHRoZSBsYXN0IGVudHJ5IHByb2Nlc3NlZCBieSBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5qbiA9IHV0Lm1pbigpLCB0aGlzLkFuID0gdC5nZXRNdXRhdGlvblF1ZXVlKG4pLCB0aGlzLlFuID0gdC5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIFxuICAgICAgICB0aGlzLkhlID0gdC5nZXRUYXJnZXRDYWNoZSgpLCB0aGlzLlduID0gbmV3IHVyKHRoaXMuUW4sIHRoaXMuQW4sIHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpLCBcbiAgICAgICAgdGhpcy5ZZSA9IHQuZ2V0QnVuZGxlQ2FjaGUoKSwgdGhpcy5Vbi5Pbih0aGlzLlduKTtcbiAgICB9XG4gICAgY29sbGVjdEdhcmJhZ2UodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkNvbGxlY3QgZ2FyYmFnZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHQuY29sbGVjdChlLCB0aGlzLnFuKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHIoXG4vKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG50LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIG5ldyBmcih0LCBlLCBuLCBzKTtcbn1cblxuLyoqXG4gKiBUZWxscyB0aGUgTG9jYWxTdG9yZSB0aGF0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEluIHJlc3BvbnNlIHRoZSBsb2NhbCBzdG9yZSBzd2l0Y2hlcyB0aGUgbXV0YXRpb24gcXVldWUgdG8gdGhlIG5ldyB1c2VyIGFuZFxuICogcmV0dXJucyBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogQW5kcm9pZCBhbmQgaU9TIG9ubHkgcmV0dXJuIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgdGhlXG4vLyBjaGFuZ2UuXG5hc3luYyBmdW5jdGlvbiB3cih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgbGV0IHMgPSBuLkFuLCBpID0gbi5XbjtcbiAgICBjb25zdCByID0gYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkhhbmRsZSB1c2VyIGNoYW5nZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHtcbiAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXG4gICAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gbi5Bbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkubmV4dCgobyA9PiAociA9IG8sIHMgPSBuLnBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUoZSksIFxuICAgICAgICAvLyBSZWNyZWF0ZSBvdXIgTG9jYWxEb2N1bWVudHNWaWV3IHVzaW5nIHRoZSBuZXdcbiAgICAgICAgLy8gTXV0YXRpb25RdWV1ZS5cbiAgICAgICAgaSA9IG5ldyB1cihuLlFuLCBzLCBuLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKSwgcy5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cbiAgICAgICAgICAgIGxldCBvID0gRG4oKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB7XG4gICAgICAgICAgICAgICAgbi5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICBzLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcbiAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkudm4odCwgbykubmV4dCgodCA9PiAoe1xuICAgICAgICAgICAgICAgIEduOiB0LFxuICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkczogbixcbiAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiBzXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSk7XG4gICAgfSkpO1xuICAgIHJldHVybiBuLkFuID0gcywgbi5XbiA9IGksIG4uVW4uT24obi5XbiksIHI7XG59XG5cbi8qIEFjY2VwdHMgbG9jYWxseSBnZW5lcmF0ZWQgTXV0YXRpb25zIGFuZCBjb21taXQgdGhlbSB0byBzdG9yYWdlLiAqL1xuLyoqXG4gKiBBY2tub3dsZWRnZXMgdGhlIGdpdmVuIGJhdGNoLlxuICpcbiAqIE9uIHRoZSBoYXBweSBwYXRoIHdoZW4gYSBiYXRjaCBpcyBhY2tub3dsZWRnZWQsIHRoZSBsb2NhbCBzdG9yZSB3aWxsXG4gKlxuICogICsgcmVtb3ZlIHRoZSBiYXRjaCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZTtcbiAqICArIGFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGU7XG4gKiAgKyByZWNhbGN1bGF0ZSB0aGUgbGF0ZW5jeSBjb21wZW5zYXRlZCB2aWV3IGltcGxpZWQgYnkgdGhvc2UgY2hhbmdlcyAodGhlcmVcbiAqICAgIG1heSBiZSBtdXRhdGlvbnMgaW4gdGhlIHF1ZXVlIHRoYXQgYWZmZWN0IHRoZSBkb2N1bWVudHMgYnV0IGhhdmVuJ3QgYmVlblxuICogICAgYWNrbm93bGVkZ2VkIHlldCk7IGFuZFxuICogICsgZ2l2ZSB0aGUgY2hhbmdlZCBkb2N1bWVudHMgYmFjayB0aGUgc3luYyBlbmdpbmVcbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIChtb2RpZmllZCkgZG9jdW1lbnRzLlxuICovXG5mdW5jdGlvbiBfcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBY2tub3dsZWRnZSBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgcyA9IGUuYmF0Y2gua2V5cygpLCBpID0gbi5Rbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5iYXRjaCwgciA9IGkua2V5cygpO1xuICAgICAgICAgICAgbGV0IG8gPSB6cy5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBvID0gby5uZXh0KCgoKSA9PiBzLmdldEVudHJ5KGUsIHQpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuLmRvY1ZlcnNpb25zLmdldCh0KTtcbiAgICAgICAgICAgICAgICAgICAgVShudWxsICE9PSByKSwgZS52ZXJzaW9uLmNvbXBhcmVUbyhyKSA8IDAgJiYgKGkuYXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIG4pLCBlLmlzVmFsaWREb2N1bWVudCgpICYmIFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGNvbW1pdFZlcnNpb24gYXMgdGhlIHJlYWRUaW1lIHJhdGhlciB0aGFuIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCdzIHVwZGF0ZVRpbWUgc2luY2UgdGhlIHVwZGF0ZVRpbWUgaXMgbm90IGFkdmFuY2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB1cGRhdGVzIHRoYXQgZG8gbm90IG1vZGlmeSB0aGUgdW5kZXJseWluZyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgcy5hZGRFbnRyeShlLCBuLmNvbW1pdFZlcnNpb24pKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIG8ubmV4dCgoKCkgPT4gdC5Bbi5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiwgdCwgZSwgaSkubmV4dCgoKCkgPT4gaS5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4uQW4ucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLlduLnZuKHQsIHMpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XG4gKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xuICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cbiAqL1xuZnVuY3Rpb24gbXIodCkge1xuICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLkhlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkpKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxuICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXG4gKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovIGZ1bmN0aW9uIGdyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KSwgcyA9IGUuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5xbjtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IG4uUW4ubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLnFuO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgociwgYykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IGkuZ2V0KGMpO1xuICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4uSGUucmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIHIucmVtb3ZlZERvY3VtZW50cywgYykubmV4dCgoKCkgPT4gbi5IZS5hZGRNYXRjaGluZ0tleXModCwgci5hZGRlZERvY3VtZW50cywgYykpKSk7XG4gICAgICAgICAgICBsZXQgdSA9IGEud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgIGUudGFyZ2V0TWlzbWF0Y2hlcy5oYXMoYykgPyB1ID0gdS53aXRoUmVzdW1lVG9rZW4ocHQuRU1QVFlfQllURV9TVFJJTkcsIHV0Lm1pbigpKS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbih1dC5taW4oKSkgOiByLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHUgPSB1LndpdGhSZXN1bWVUb2tlbihyLnJlc3VtZVRva2VuLCBzKSksIFxuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KGMsIHUpLCBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFyZ2V0IGRhdGEgaWYgdGhlcmUgYXJlIHRhcmdldCBjaGFuZ2VzIChvciBpZlxuICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcbiAgICAgICAgICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAvLyBjbG9zaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxuICAgICAgICAgICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cbiAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cbiAgICAgICAgICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkZWREb2N1bWVudHMuc2l6ZSArIG4ubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIG4ucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChhLCB1LCByKSAmJiBvLnB1c2gobi5IZS51cGRhdGVUYXJnZXREYXRhKHQsIHUpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgYyA9IFJuKCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmIChlLmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgZS5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhzKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHQsIHMpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbCB0aGUgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaCh5cih0LCByLCBlLmRvY3VtZW50VXBkYXRlcywgcywgdm9pZCAwKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGMgPSB0O1xuICAgICAgICB9KSkpLCAhcy5pc0VxdWFsKHV0Lm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4uSGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KS5uZXh0KChlID0+IG4uSGUuc2V0VGFyZ2V0c01ldGFkYXRhKHQsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyLCBzKSkpO1xuICAgICAgICAgICAgby5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB6cy53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHIuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLlduLlZuKHQsIGMpKSkubmV4dCgoKCkgPT4gYykpO1xuICAgIH0pKS50aGVuKCh0ID0+IChuLnFuID0gaSwgdCkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICogQHBhcmFtIGdsb2JhbFZlcnNpb24gLSBBIGBTbmFwc2hvdFZlcnNpb25gIHJlcHJlc2VudGluZyB0aGUgcmVhZCB0aW1lIGlmIGFsbFxuICogICAgICAgIGRvY3VtZW50cyBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZS5cbiAqIEBwYXJhbSBkb2N1bWVudFZlcnNpb25zIC0gQSBEb2N1bWVudEtleS10by1TbmFwc2hvdFZlcnNpb24gbWFwIGlmIGRvY3VtZW50c1xuICogICAgICAgIGhhdmUgdGhlaXIgb3duIHJlYWQgdGltZS5cbiAqXG4gKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIHdpbGwgdXNlIGBkb2N1bWVudFZlcnNpb25zYCBpZiBpdCBpcyBkZWZpbmVkO1xuICogd2hlbiBpdCBpcyBub3QgZGVmaW5lZCwgcmVzb3J0cyB0byBgZ2xvYmFsVmVyc2lvbmAuXG4gKi8gZnVuY3Rpb24geXIodCwgZSwgbiwgcywgXG4vLyBUT0RPKHd1YW5keSk6IFdlIGNvdWxkIGFkZCBgcmVhZFRpbWVgIHRvIE1heWJlRG9jdW1lbnQgaW5zdGVhZCB0byByZW1vdmVcbi8vIHRoaXMgcGFyYW1ldGVyLlxuaSkge1xuICAgIGxldCByID0gRG4oKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHIgPSByLmFkZCh0KSkpLCBlLmdldEVudHJpZXModCwgcikubmV4dCgodCA9PiB7XG4gICAgICAgIGxldCByID0gUm4oKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSB0LmdldChuKSwgYSA9IChudWxsID09IGkgPyB2b2lkIDAgOiBpLmdldChuKSkgfHwgcztcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICBvLmlzTm9Eb2N1bWVudCgpICYmIG8udmVyc2lvbi5pc0VxdWFsKHV0Lm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgZS5yZW1vdmVFbnRyeShuLCBhKSwgciA9IHIuaW5zZXJ0KG4sIG8pKSA6ICFjLmlzVmFsaWREb2N1bWVudCgpIHx8IG8udmVyc2lvbi5jb21wYXJlVG8oYy52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gby52ZXJzaW9uLmNvbXBhcmVUbyhjLnZlcnNpb24pICYmIGMuaGFzUGVuZGluZ1dyaXRlcyA/IChlLmFkZEVudHJ5KG8sIGEpLCBcbiAgICAgICAgICAgIHIgPSByLmluc2VydChuLCBvKSkgOiBPKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIGMudmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgby52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCByO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBwcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4uQW4uZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBUcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4uSGUuZ2V0VGFyZ2V0RGF0YSh0LCBlKS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgcyA9IGksIHpzLnJlc29sdmUocykpIDogbi5IZS5hbGxvY2F0ZVRhcmdldElkKHQpLm5leHQoKGkgPT4gKHMgPSBuZXcgYWkoZSwgaSwgMCAvKiBMaXN0ZW4gKi8gLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLkhlLmFkZFRhcmdldERhdGEodCwgcykubmV4dCgoKCkgPT4gcykpKSkpKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCBzID0gbi5xbi5nZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gcyB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocy5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4ucW4gPSBuLnFuLmluc2VydCh0LnRhcmdldElkLCB0KSwgXG4gICAgICAgIG4uS24uc2V0KGUsIHQudGFyZ2V0SWQpKSwgdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBFcih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEsodCksIGkgPSBzLnFuLmdldChlKSwgciA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHIsICh0ID0+IHMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHQsIGkpKSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBpZiAoIVpzKHQpKSB0aHJvdyB0O1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgTyhcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7ZX06ICR7dH1gKTtcbiAgICB9XG4gICAgcy5xbiA9IHMucW4ucmVtb3ZlKGUpLCBzLktuLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIElyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSyh0KTtcbiAgICBsZXQgaSA9IHV0Lm1pbigpLCByID0gRG4oKTtcbiAgICByZXR1cm4gcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBLKHQpLCBpID0gcy5Lbi5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyB6cy5yZXNvbHZlKHMucW4uZ2V0KGkpKSA6IHMuSGUuZ2V0VGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9KHMsIHQsIGJlKGUpKS5uZXh0KChlID0+IHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBpID0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBzLkhlLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gcy5Vbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4gPyBpIDogdXQubWluKCksIG4gPyByIDogRG4oKSkpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgIGRvY3VtZW50czogdCxcbiAgICAgICAgem46IHJcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBBcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCksIHMgPSBLKG4uSGUpLCBpID0gbi5xbi5nZXQoZSk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuRXQodCwgZSkubmV4dCgodCA9PiB0ID8gdC50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gUnIodCkge1xuICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSyh0KTtcbiAgICAgICAgbGV0IGkgPSBSbigpLCByID0gZmkobik7XG4gICAgICAgIGNvbnN0IG8gPSBaaShlKSwgYyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQociwgITApO1xuICAgICAgICByZXR1cm4gby5qdCh7XG4gICAgICAgICAgICBpbmRleDogT3MucmVhZFRpbWVJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBjXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgLy8gVW5saWtlIGBnZXRFbnRyeSgpYCBhbmQgb3RoZXJzLCBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgIHBhcnNlc1xuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50cyBkaXJlY3RseSBzaW5jZSB3ZSB3YW50IHRvIGtlZXAgc2VudGluZWwgZGVsZXRlcy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBoaShzLmssIGUpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KG4ua2V5LCBuKSwgciA9IGUucmVhZFRpbWU7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgSW46IGksXG4gICAgICAgICAgICByZWFkVGltZTogZGkocilcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSByZWFkIHRpbWUgb2YgdGhlIG1vc3QgcmVjZW50bHkgcmVhZCBkb2N1bWVudCBpbiB0aGUgY2FjaGUsIG9yXG4gKiBTbmFwc2hvdFZlcnNpb24ubWluKCkgaWYgbm90IGF2YWlsYWJsZS5cbiAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgKGUuUW4sIHQsIGUuam4pKSkudGhlbigoKHtJbjogdCwgcmVhZFRpbWU6IG59KSA9PiAoZS5qbiA9IG4sIHQpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIG5ld2VzdCBkb2N1bWVudCBjaGFuZ2UgZnJvbSBwZXJzaXN0ZW5jZSBhbmQgbW92ZXMgdGhlIGludGVybmFsXG4gKiBzeW5jaHJvbml6YXRpb24gbWFya2VyIGZvcndhcmQgc28gdGhhdCBjYWxscyB0byBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gKiBvbmx5IHJldHVybiBjaGFuZ2VzIHRoYXQgaGFwcGVuZWQgYWZ0ZXIgY2xpZW50IGluaXRpYWxpemF0aW9uLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gYnIodCkge1xuICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU3luY2hyb25pemUgbGFzdCBkb2N1bWVudCBjaGFuZ2UgcmVhZCB0aW1lXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gWmkodCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBleGlzdGluZyBlbnRyaWVzLCB3ZSByZXR1cm4gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAgICAgICAgIGxldCBuID0gdXQubWluKCk7XG4gICAgICAgIHJldHVybiBlLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBPcy5yZWFkVGltZUluZGV4LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnJlYWRUaW1lICYmIChuID0gZGkoZS5yZWFkVGltZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9KHQpKSkudGhlbigodCA9PiB7XG4gICAgICAgIGUuam4gPSB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBQcih0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IEsodCk7XG4gICAgbGV0IHIgPSBEbigpLCBvID0gUm4oKSwgYyA9IFZuKCk7XG4gICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUuSG4odC5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgdC5kb2N1bWVudCAmJiAociA9IHIuYWRkKG4pKSwgbyA9IG8uaW5zZXJ0KG4sIGUuSm4odCkpLCBjID0gYy5pbnNlcnQobiwgZS5Zbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBpLlFuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIHUgPSBhd2FpdCBUcihpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBiZSh5ZSh3dC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHt0fWApKSk7XG4gICAgfShzKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4geXIodCwgYSwgbywgdXQubWluKCksIGMpLm5leHQoKGUgPT4gKGEuYXBwbHkodCksIFxuICAgIGUpKSkubmV4dCgoZSA9PiBpLkhlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHUudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuSGUuYWRkTWF0Y2hpbmdLZXlzKHQsIHIsIHUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Xbi5Wbih0LCBlKSkpLm5leHQoKCgpID0+IGUpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiB2cih0LCBlLCBuID0gRG4oKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgcyA9IGF3YWl0IFRyKHQsIGJlKHBpKGUuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gSyh0KTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gem4oZS5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHMuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyKSA+PSAwKSByZXR1cm4gaS5ZZS5zYXZlTmFtZWRRdWVyeSh0LCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gcy53aXRoUmVzdW1lVG9rZW4ocHQuRU1QVFlfQllURV9TVFJJTkcsIHIpO1xuICAgICAgICByZXR1cm4gaS5xbiA9IGkucW4uaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLkhlLnVwZGF0ZVRhcmdldERhdGEodCwgbykubmV4dCgoKCkgPT4gaS5IZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuSGUuYWRkTWF0Y2hpbmdLZXlzKHQsIG4sIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5ZZS5zYXZlTmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgVnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rID0gdCwgdGhpcy5YbiA9IG5ldyBNYXAsIHRoaXMuWm4gPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHRoaXMuWG4uZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuWG4uc2V0KGUuaWQsIHtcbiAgICAgICAgICAgIGlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogem4obi5jcmVhdGVUaW1lKVxuICAgICAgICB9KSwgenMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUodGhpcy5abi5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlpuLnNldChlLm5hbWUsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBwaSh0LmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHpuKHQucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSwgenMucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBTciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLnRzID0gbmV3IEVuKERyLmVzKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLm5zID0gbmV3IEVuKERyLnNzKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBEcih0LCBlKTtcbiAgICAgICAgdGhpcy50cyA9IHRoaXMudHMuYWRkKG4pLCB0aGlzLm5zID0gdGhpcy5ucy5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBycyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLmFkZFJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICB0aGlzLm9zKG5ldyBEcih0LCBlKSk7XG4gICAgfVxuICAgIGNzKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIHVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBEdChuZXcgd3QoW10pKSwgbiA9IG5ldyBEcihlLCB0KSwgcyA9IG5ldyBEcihlLCB0ICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMub3ModCksIGkucHVzaCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgaHMoKSB7XG4gICAgICAgIHRoaXMudHMuZm9yRWFjaCgodCA9PiB0aGlzLm9zKHQpKSk7XG4gICAgfVxuICAgIG9zKHQpIHtcbiAgICAgICAgdGhpcy50cyA9IHRoaXMudHMuZGVsZXRlKHQpLCB0aGlzLm5zID0gdGhpcy5ucy5kZWxldGUodCk7XG4gICAgfVxuICAgIGxzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBEdChuZXcgd3QoW10pKSwgbiA9IG5ldyBEcihlLCB0KSwgcyA9IG5ldyBEcihlLCB0ICsgMSk7XG4gICAgICAgIGxldCBpID0gRG4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IERyKHQsIDApLCBuID0gdGhpcy50cy5maXJzdEFmdGVyT3JFcXVhbChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgdC5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIERyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5mcyA9IGU7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyBlcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBEdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSkgfHwgcnQodC5mcywgZS5mcyk7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBydCh0LmZzLCBlLmZzKSB8fCBEdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBDciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkp0ID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5BbiA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMuZHMgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMud3MgPSBuZXcgRW4oRHIuZXMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUoMCA9PT0gdGhpcy5Bbi5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZHM7XG4gICAgICAgIHRoaXMuZHMrKywgdGhpcy5Bbi5sZW5ndGggPiAwICYmIHRoaXMuQW5bdGhpcy5Bbi5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBvaShpLCBlLCBuLCBzKTtcbiAgICAgICAgdGhpcy5Bbi5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy53cyA9IHRoaXMud3MuYWRkKG5ldyBEcihlLmtleSwgaSkpLCB0aGlzLkp0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUocik7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLl9zKGUpKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSB0aGlzLmdzKG4pLCBpID0gcyA8IDAgPyAwIDogcztcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUodGhpcy5Bbi5sZW5ndGggPiBpID8gdGhpcy5BbltpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSgwID09PSB0aGlzLkFuLmxlbmd0aCA/IC0xIDogdGhpcy5kcyAtIDEpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLkFuLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRHIoZSwgMCksIHMgPSBuZXcgRHIoZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX3ModC5mcyk7XG4gICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgIH0pKSwgenMucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgRW4ocnQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRHIodCwgMCksIHMgPSBuZXcgRHIodCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMud3MuZm9yRWFjaEluUmFuZ2UoWyBlLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQodC5mcyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgenMucmVzb2x2ZSh0aGlzLnlzKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBEdC5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRHIobmV3IER0KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBFbihydCk7XG4gICAgICAgIHJldHVybiB0aGlzLndzLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZihlKSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgZS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZCh0LmZzKSksICEwKTtcbiAgICAgICAgfSksIHIpLCB6cy5yZXNvbHZlKHRoaXMueXMobykpO1xuICAgIH1cbiAgICB5cyh0KSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9zKHQpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIFUoMCA9PT0gdGhpcy5wcyhlLmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMuQW4uc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLndzO1xuICAgICAgICByZXR1cm4genMuZm9yRWFjaChlLm11dGF0aW9ucywgKHMgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBEcihzLmtleSwgZS5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgcy5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53cyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZWUodCkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBEcihlLCAwKSwgcyA9IHRoaXMud3MuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKGUuaXNFcXVhbChzICYmIHMua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW4ubGVuZ3RoLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICBwcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdzKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBncyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkFuLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgLSB0aGlzLkFuWzBdLmJhdGNoSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXG4gICAgICovICAgIF9zKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ3ModCk7XG4gICAgICAgIGlmIChlIDwgMCB8fCBlID49IHRoaXMuQW4ubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW5bZV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIE5yIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSnQgPSB0LCB0aGlzLlRzID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gbmV3IHluKER0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmtleSwgaSA9IHRoaXMuZG9jcy5nZXQocyksIHIgPSBpID8gaS5zaXplIDogMCwgbyA9IHRoaXMuVHMoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KHMsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBlLm11dGFibGVDb3B5KCksXG4gICAgICAgICAgICBzaXplOiBvLFxuICAgICAgICAgICAgcmVhZFRpbWU6IG5cbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBvIC0gciwgdGhpcy5KdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBzLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgZSAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZSh0KSwgdGhpcy5zaXplIC09IGUuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKG4gPyBuLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBHdC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBSbigpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGUgPyBlLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBHdC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgICAgICB9KSksIHpzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFJuKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBEdChlLnBhdGguY2hpbGQoXCJcIikpLCByID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShpKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogdCwgdmFsdWU6IHtkb2N1bWVudDogaSwgcmVhZFRpbWU6IG99fSA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFlLnBhdGguaXNQcmVmaXhPZih0LnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIG8uY29tcGFyZVRvKG4pIDw9IDAgfHwgRGUoZSwgaSkgJiYgKHMgPSBzLmluc2VydChpLmtleSwgaS5tdXRhYmxlQ29weSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUocyk7XG4gICAgfVxuICAgIEVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHpzLmZvckVhY2godGhpcy5kb2NzLCAodCA9PiBlKHQpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IGtyKHRoaXMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBBIGNsYXNzIHRoYXQgbWFuYWdlcyBjb2xsZWN0aW9uIGdyb3VwIGluZGljZXMuXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3Mga3IgZXh0ZW5kcyBIaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkRlID0gdDtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpID8gZS5wdXNoKHRoaXMuRGUuYWRkRW50cnkodCwgcy5kb2N1bWVudCwgdGhpcy5nZXRSZWFkVGltZShuKSkpIDogdGhpcy5EZS5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCB6cy53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5EZS5nZXRFbnRyeSh0LCBlKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRGUuZ2V0RW50cmllcyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHhyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuSXMgPSBuZXcgemkoKHQgPT4gSnQodCkpLCBYdCksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gdXQubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLkFzID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlJzID0gbmV3IFNyLCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5icyA9IE9pLmllKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jcy5mb3JFYWNoKCgodCwgbikgPT4gZShuKSkpLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLkFzKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuYnMubmV4dCgpLCB6cy5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCBlID4gdGhpcy5BcyAmJiAodGhpcy5BcyA9IGUpLCBcbiAgICAgICAgenMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhZSh0KSB7XG4gICAgICAgIHRoaXMuSXMuc2V0KHQudGFyZ2V0LCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgIGUgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5icyA9IG5ldyBPaShlKSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBlKSwgdC5zZXF1ZW5jZU51bWJlciA+IHRoaXMuQXMgJiYgKHRoaXMuQXMgPSB0LnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFlKGUpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFlKGUpLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jcy5kZWxldGUoZS50YXJnZXQpLCB0aGlzLlJzLnVzKGUudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSXMuZm9yRWFjaCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy5Jcy5kZWxldGUociksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICBzKyspO1xuICAgICAgICB9KSksIHpzLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuSXMuZ2V0KGUpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Scy5ycyhlLCBuKSwgenMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICB0aGlzLlJzLmNzKGUsIG4pO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcyAmJiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpO1xuICAgICAgICB9KSksIHpzLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUnMudXMoZSksIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Scy5scyhlKTtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUodGhpcy5Scy5jb250YWluc0tleShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzICRyIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5QcyA9IHt9LCB0aGlzLkJlID0gbmV3IG50KDApLCB0aGlzLlVlID0gITEsIHRoaXMuVWUgPSAhMCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQodGhpcyksIFxuICAgICAgICB0aGlzLkhlID0gbmV3IHhyKHRoaXMpO1xuICAgICAgICB0aGlzLkp0ID0gbmV3IEFpLCB0aGlzLkplID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOcih0LCBlKTtcbiAgICAgICAgfSh0aGlzLkp0LCAodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnZzKHQpKSksIHRoaXMuayA9IG5ldyB1aShlKSwgdGhpcy5ZZSA9IG5ldyBWcih0aGlzLmspO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5VZSA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVlO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KdDtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5Qc1t0LnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBDcih0aGlzLkp0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSwgdGhpcy5Qc1t0LnRvS2V5KCldID0gZSksIFxuICAgICAgICBlO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGU7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWWU7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgTyhcIk1lbW9yeVBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gbmV3IE9yKHRoaXMuQmUubmV4dCgpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuVnMoKSwgbihzKS5uZXh0KCh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuU3MocykubmV4dCgoKCkgPT4gdCkpKSkudG9Qcm9taXNlKCkudGhlbigodCA9PiAocy5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIERzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHpzLm9yKE9iamVjdC52YWx1ZXModGhpcy5QcykubWFwKChuID0+ICgpID0+IG4uY29udGFpbnNLZXkodCwgZSkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1lbW9yeSBwZXJzaXN0ZW5jZSBpcyBub3QgYWN0dWFsbHkgdHJhbnNhY3Rpb25hbCwgYnV0IGZ1dHVyZSBpbXBsZW1lbnRhdGlvbnNcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cbiAqLyBjbGFzcyBPciBleHRlbmRzIEdzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIE1yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyBhbGwgZG9jdW1lbnRzIHRoYXQgYXJlIGFjdGl2ZSBpbiBRdWVyeSB2aWV3cy4gKi9cbiAgICAgICAgdGhpcy5DcyA9IG5ldyBTciwgXG4gICAgICAgIC8qKiBUaGUgbGlzdCBvZiBkb2N1bWVudHMgdGhhdCBhcmUgcG90ZW50aWFsbHkgR0NlZCBhZnRlciBlYWNoIHRyYW5zYWN0aW9uLiAqL1xuICAgICAgICB0aGlzLk5zID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGtzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNcih0KTtcbiAgICB9XG4gICAgZ2V0IHhzKCkge1xuICAgICAgICBpZiAodGhpcy5OcykgcmV0dXJuIHRoaXMuTnM7XG4gICAgICAgIHRocm93IEIoKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ3MuYWRkUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnhzLmRlbGV0ZShuLnRvU3RyaW5nKCkpLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkNzLnJlbW92ZVJlZmVyZW5jZShuLCBlKSwgdGhpcy54cy5hZGQobi50b1N0cmluZygpKSwgenMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnhzLmFkZChlLnRvU3RyaW5nKCkpLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuQ3MudXMoZS50YXJnZXRJZCkuZm9yRWFjaCgodCA9PiB0aGlzLnhzLmFkZCh0LnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCk7XG4gICAgICAgIHJldHVybiBuLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMueHMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4ucmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSkpO1xuICAgIH1cbiAgICBWcygpIHtcbiAgICAgICAgdGhpcy5OcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIFNzKHQpIHtcbiAgICAgICAgLy8gUmVtb3ZlIG5ld2x5IG9ycGhhbmVkIGRvY3VtZW50cy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4genMuZm9yRWFjaCh0aGlzLnhzLCAobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gRHQuZnJvbVBhdGgobik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcyh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0IHx8IGUucmVtb3ZlRW50cnkocyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAodGhpcy5OcyA9IG51bGwsIGUuYXBwbHkodCkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy4kcyh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQgPyB0aGlzLnhzLmRlbGV0ZShlLnRvU3RyaW5nKCkpIDogdGhpcy54cy5hZGQoZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2cyh0KSB7XG4gICAgICAgIC8vIEZvciBlYWdlciBHQywgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgZG9jdW1lbnQgc2l6ZSwgdGhlcmUgYXJlIG5vIHNpemUgdGhyZXNob2xkcy5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgICRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHpzLm9yKFsgKCkgPT4genMucmVzb2x2ZSh0aGlzLkNzLmNvbnRhaW5zS2V5KGUpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHQsIGUpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLkRzKHQsIGUpIF0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGNsaWVudCBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfY2xpZW50c188cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBGcih0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfY2xpZW50c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+XG4vLyAgICAgKGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMpXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cblxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcbi8vIGNvbnRhaW4uXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgbXV0YXRpb24gYmF0Y2ggaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gTHIodCwgZSwgbikge1xuICAgIGxldCBzID0gYGZpcmVzdG9yZV9tdXRhdGlvbnNfJHt0fV8ke259YDtcbiAgICByZXR1cm4gZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiAocyArPSBgXyR7ZS51aWR9YCksIHM7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIGEgcXVlcnkgdGFyZ2V0J3MgbWV0YWRhdGEgaXM6XG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBxdWVyeSBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBCcih0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfdGFyZ2V0c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcbi8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuLy8gICAgIGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfPHBlcnNpc3RlbmNlX3ByZWZpeD5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgbXV0YXRpb24gYmF0Y2gsIGluY2x1ZGluZyBpdHMgdXNlciBJRCwgYmF0Y2ggSUQgYW5kXG4gKiB3aGV0aGVyIHRoZSBiYXRjaCBpcyAncGVuZGluZycsICdhY2tub3dsZWRnZWQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIFVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMuc3RhdGUgPSBuLCB0aGlzLmVycm9yID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgTXV0YXRpb25NZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIE9zKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEpTT04ucGFyc2Uobik7XG4gICAgICAgIGxldCBpLCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgcyAmJiAtMSAhPT0gWyBcInBlbmRpbmdcIiwgXCJhY2tub3dsZWRnZWRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihzLnN0YXRlKSAmJiAodm9pZCAwID09PSBzLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMuZXJyb3IpO1xuICAgICAgICByZXR1cm4gciAmJiBzLmVycm9yICYmIChyID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IuY29kZSwgXG4gICAgICAgIHIgJiYgKGkgPSBuZXcgUShzLmVycm9yLmNvZGUsIHMuZXJyb3IubWVzc2FnZSkpKSwgciA/IG5ldyBVcih0LCBlLCBzLnN0YXRlLCBpKSA6IChNKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBtdXRhdGlvbiBzdGF0ZSBmb3IgSUQgJyR7ZX0nOiAke259YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgTXMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIHF1ZXJ5IHRhcmdldCwgaW5jbHVkaW5nIGl0cyB0YXJnZXQgSUQgYW5kIHdoZXRoZXIgdGhlXG4gKiB0YXJnZXQgaXMgJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIHFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnN0YXRlID0gZSwgdGhpcy5lcnJvciA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBPcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcywgaSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgLTEgIT09IFsgXCJub3QtY3VycmVudFwiLCBcImN1cnJlbnRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihuLnN0YXRlKSAmJiAodm9pZCAwID09PSBuLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4uZXJyb3IpO1xuICAgICAgICByZXR1cm4gaSAmJiBuLmVycm9yICYmIChpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IuY29kZSwgXG4gICAgICAgIGkgJiYgKHMgPSBuZXcgUShuLmVycm9yLmNvZGUsIG4uZXJyb3IubWVzc2FnZSkpKSwgaSA/IG5ldyBxcih0LCBuLnN0YXRlLCBzKSA6IChNKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIE1zKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXG4gKiBXZWJTdG9yYWdlLCBjb250YWluaW5nIHRoZSBsaXN0IG9mIGFjdGl2ZSBxdWVyeSB0YXJnZXRzLlxuICovIGNsYXNzIEtyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFJlbW90ZUNsaWVudFN0YXRlIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgT3ModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIG4uYWN0aXZlVGFyZ2V0SWRzIGluc3RhbmNlb2YgQXJyYXksIGkgPSBObigpO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgcyAmJiB0IDwgbi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK3QpIHMgPSBTdChuLmFjdGl2ZVRhcmdldElkc1t0XSksIFxuICAgICAgICBpID0gaS5hZGQobi5hY3RpdmVUYXJnZXRJZHNbdF0pO1xuICAgICAgICByZXR1cm4gcyA/IG5ldyBLcih0LCBpKSA6IChNKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cbiAqIG11bHRpLXRhYi4gVGhlIG9ubGluZSBzdGF0ZSBpcyBvbmx5IHdyaXR0ZW4gdG8gYnkgdGhlIHByaW1hcnkgY2xpZW50LCBhbmRcbiAqIHVzZWQgaW4gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzLlxuICovIGNsYXNzIGpyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLm9ubGluZVN0YXRlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBPcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiAtMSAhPT0gWyBcIlVua25vd25cIiwgXCJPbmxpbmVcIiwgXCJPZmZsaW5lXCIgXS5pbmRleE9mKGUub25saW5lU3RhdGUpICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuY2xpZW50SWQgPyBuZXcganIoZS5jbGllbnRJZCwgZS5vbmxpbmVTdGF0ZSkgOiAoTShcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke3R9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MgUXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IE5uKCk7XG4gICAgfVxuICAgIEZzKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5hZGQodCk7XG4gICAgfVxuICAgIExzKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5kZWxldGUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgZW50cnkgaW50byBhIEpTT04tZW5jb2RlZCBmb3JtYXQgd2UgY2FuIHVzZSBmb3IgV2ViU3RvcmFnZS5cbiAgICAgKiBEb2VzIG5vdCBlbmNvZGUgYGNsaWVudElkYCBhcyBpdCBpcyBwYXJ0IG9mIHRoZSBrZXkgaW4gV2ViU3RvcmFnZS5cbiAgICAgKi8gICAgTXMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHM6IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIHVzZXMgV2ViU3RvcmFnZSAod2luZG93LmxvY2FsU3RvcmFnZSkgYXMgdGhlXG4gKiBiYWNraW5nIHN0b3JlIGZvciB0aGUgU2hhcmVkQ2xpZW50U3RhdGUuIEl0IGtlZXBzIHRyYWNrIG9mIGFsbCBhY3RpdmVcbiAqIGNsaWVudHMgYW5kIHN1cHBvcnRzIG1vZGlmaWNhdGlvbnMgb2YgdGhlIGxvY2FsIGNsaWVudCdzIGRhdGEuXG4gKi8gY2xhc3MgV3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB0LCB0aGlzLk1lID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuQnMgPSBzLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuVXMgPSB0aGlzLnFzLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLktzID0gbmV3IHluKHJ0KSwgdGhpcy5zdGFydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FwdHVyZXMgV2ViU3RvcmFnZSBldmVudHMgdGhhdCBvY2N1ciBiZWZvcmUgYHN0YXJ0KClgIGlzIGNhbGxlZC4gVGhlc2VcbiAgICAgICAgICogZXZlbnRzIGFyZSByZXBsYXllZCBvbmNlIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIGlzIHN0YXJ0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmpzID0gW107XG4gICAgICAgIC8vIEVzY2FwZSB0aGUgc3BlY2lhbCBjaGFyYWN0ZXJzIG1lbnRpb25lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnNcbiAgICAgICAgY29uc3QgciA9IG4ucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UsIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLlFzID0gRnIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5CcyksIFxuICAgICAgICB0aGlzLldzID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIGN1cnJlbnQgc2VxdWVuY2UgbnVtYmVyLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLktzID0gdGhpcy5Lcy5pbnNlcnQodGhpcy5CcywgbmV3IFFyKSwgdGhpcy5HcyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfY2xpZW50c18ke3J9XyhbXl9dKikkYCksIFxuICAgICAgICB0aGlzLnpzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9tdXRhdGlvbnNfJHtyfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIHRoaXMuSHMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX3RhcmdldHNfJHtyfV8oXFxcXGQrKSRgKSwgXG4gICAgICAgIHRoaXMuSnMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfb25saW5lX3N0YXRlXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHBsYXlzIGFzIGEgZXZlbnQgdG8gaW5kaWNhdGUgdGhlIHJlbW90ZSBkb2N1bWVudHNcbiAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkIGR1ZSB0byBzb21lIHNlY29uZGFyeSB0YWJzIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICAgIC8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuICAgICAgICAvLyAgICAgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfPHBlcnNpc3RlbmNlS2V5PlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuWXMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIGtleSBwcmVmaXggZm9yIHRoZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGFsbG9jYXRlZC4gVGhlIGtleVxuICAgICAgICAvLyBsb29rcyBsaWtlICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Jy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCBcbiAgICAgICAgLy8gUmF0aGVyIHRoYW4gYWRkaW5nIHRoZSBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBzdGFydCgpLCB3ZSBhZGQgdGhlXG4gICAgICAgIC8vIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBjb2xsZWN0XG4gICAgICAgIC8vIGV2ZW50cyBiZWZvcmUgb3RoZXIgY29tcG9uZW50cyBwb3B1bGF0ZSB0aGVpciBpbml0aWFsIHN0YXRlIChkdXJpbmcgdGhlaXJcbiAgICAgICAgLy8gcmVzcGVjdGl2ZSBzdGFydCgpIGNhbGxzKS4gT3RoZXJ3aXNlLCB3ZSBtaWdodCBmb3IgZXhhbXBsZSBtaXNzIGFcbiAgICAgICAgLy8gbXV0YXRpb24gdGhhdCBpcyBhZGRlZCBhZnRlciBMb2NhbFN0b3JlJ3Mgc3RhcnQoKSBwcm9jZXNzZWQgdGhlIGV4aXN0aW5nXG4gICAgICAgIC8vIG11dGF0aW9ucyBidXQgYmVmb3JlIHdlIG9ic2VydmUgV2ViU3RvcmFnZSBldmVudHMuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuVXMpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgV2ViU3RvcmFnZSBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBQdCh0KSB7XG4gICAgICAgIHJldHVybiAhKCF0IHx8ICF0LmxvY2FsU3RvcmFnZSk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjbGllbnRzIHRvIGJhY2tmaWxsIHRoZSBkYXRhIGluXG4gICAgICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zeW5jRW5naW5lLlRuKCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGhpcy5CcykgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRJdGVtKEZyKHRoaXMucGVyc2lzdGVuY2VLZXksIGUpKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEtyLk9zKGUsIHQpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMuS3MgPSB0aGlzLktzLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5YcygpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMuSnMpO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWnMoZSk7XG4gICAgICAgICAgICB0ICYmIHRoaXMudGkodCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuanMpIHRoaXMucXModCk7XG4gICAgICAgIHRoaXMuanMgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5XcywgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVpKHRoaXMuS3MpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuS3MuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KSAmJiAoZSA9ICEwKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICB0aGlzLm5pKHQsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMubmkodCwgZSwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLnNpKHQpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oQnIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gcXIuT3ModCwgbik7XG4gICAgICAgICAgICAgICAgcyAmJiAoZSA9IHMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmlpLkZzKHQpLCB0aGlzLlhzKCksIGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLmlpLkxzKHQpLCB0aGlzLlhzKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShCcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLnJpKHQsIGUsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2kodCk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IHQsIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMub2kodCk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCgpIHtcbiAgICAgICAgdGhpcy5jaSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLlVzKSwgdGhpcy5yZW1vdmVJdGVtKHRoaXMuUXMpLCBcbiAgICAgICAgdGhpcy5zdGFydGVkID0gITEpO1xuICAgIH1cbiAgICBnZXRJdGVtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHQpO1xuICAgICAgICByZXR1cm4gTyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVBRFwiLCB0LCBlKSwgZTtcbiAgICB9XG4gICAgc2V0SXRlbSh0LCBlKSB7XG4gICAgICAgIE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlNFVFwiLCB0LCBlKSwgdGhpcy5zdG9yYWdlLnNldEl0ZW0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0odCkge1xuICAgICAgICBPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRU1PVkVcIiwgdCksIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHQpO1xuICAgIH1cbiAgICBxcyh0KSB7XG4gICAgICAgIC8vIE5vdGU6IFRoZSBmdW5jdGlvbiBpcyB0eXBlZCB0byB0YWtlIEV2ZW50IHRvIGJlIGludGVyZmFjZS1jb21wYXRpYmxlIHdpdGhcbiAgICAgICAgLy8gYFdpbmRvdy5hZGRFdmVudExpc3RlbmVyYC5cbiAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgIGlmIChlLnN0b3JhZ2VBcmVhID09PSB0aGlzLnN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGlmIChPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJFVkVOVFwiLCBlLmtleSwgZS5uZXdWYWx1ZSksIGUua2V5ID09PSB0aGlzLlFzKSByZXR1cm4gdm9pZCBNKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLk1lLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLmtleSkgaWYgKHRoaXMuR3MudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5haShlLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudWkodCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy51aSh0LmNsaWVudElkLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnpzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmxpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuZmkodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5Icy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5kaShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLndpKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLkpzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlpzKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy50aSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5Xcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IG50Lkk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFUoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIGUgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTShcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZVwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAqIGBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZWAgaXMgYSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgU2hhcmVkQ2xpZW50U3RhdGUgZm9yXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxuICogaXNvbGF0ZWQgYW5kIG5vIHN5bmNocm9uaXphdGlvbiBpcyBwZXJmb3JtZWQuXG4gKi8gKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdCAhPT0gbnQuSSAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcih0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5ZcykgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5faSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmpzLnB1c2goZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGlpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Lcy5nZXQodGhpcy5Ccyk7XG4gICAgfVxuICAgIFhzKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5RcywgdGhpcy5paS5NcygpKTtcbiAgICB9XG4gICAgbmkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IFVyKHRoaXMuY3VycmVudFVzZXIsIHQsIGUsIG4pLCBpID0gTHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCBzLk1zKCkpO1xuICAgIH1cbiAgICBzaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBMcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICBvaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5CcyxcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiB0XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuSnMsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgcmkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gQnIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCksIGkgPSBuZXcgcXIodCwgZSwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShzLCBpLk1zKCkpO1xuICAgIH1cbiAgICBjaSgpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuWXMsIFwidmFsdWUtbm90LXVzZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgYWkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Hcy5leGVjKHQpO1xuICAgICAgICByZXR1cm4gZSA/IGVbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgaGkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5haSh0KTtcbiAgICAgICAgcmV0dXJuIEtyLk9zKG4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBsaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnpzLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIFVyLk9zKG5ldyBDKGkpLCBzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgZGkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Icy5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gcXIuT3MocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBacyh0KSB7XG4gICAgICAgIHJldHVybiBqci5Pcyh0KTtcbiAgICB9XG4gICAgYXN5bmMgZmkodCkge1xuICAgICAgICBpZiAodC51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUubWkodC5iYXRjaElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICAgICAgTyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7dC51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgd2kodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmdpKHQudGFyZ2V0SWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgIH1cbiAgICB1aSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gdGhpcy5Lcy5pbnNlcnQodCwgZSkgOiB0aGlzLktzLnJlbW92ZSh0KSwgcyA9IHRoaXMuZWkodGhpcy5LcyksIGkgPSB0aGlzLmVpKG4pLCByID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBzLmhhcyh0KSB8fCByLnB1c2godCk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkuaGFzKHQpIHx8IG8ucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUueWkociwgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5LcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGkodCkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLktzLmdldCh0LmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0Lm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgZWkodCkge1xuICAgICAgICBsZXQgZSA9IE5uKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBHciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGkgPSBuZXcgUXIsIHRoaXMuVGkgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waS5Gcyh0KSwgdGhpcy5UaVt0XSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLlRpW3RdID0gZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMucGkuTHModCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLlRpW3RdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waSA9IG5ldyBRciwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgenIge1xuICAgIEVpKHQpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIEhyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5JaSA9ICgpID0+IHRoaXMuQWkoKSwgdGhpcy5SaSA9ICgpID0+IHRoaXMuYmkoKSwgdGhpcy5QaSA9IFtdLCB0aGlzLnZpKCk7XG4gICAgfVxuICAgIEVpKHQpIHtcbiAgICAgICAgdGhpcy5QaS5wdXNoKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5JaSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLlJpKTtcbiAgICB9XG4gICAgdmkoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuSWkpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5SaSk7XG4gICAgfVxuICAgIEFpKCkge1xuICAgICAgICBPKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuUGkpIHQoMCAvKiBBVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBiaSgpIHtcbiAgICAgICAgTyhcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuUGkpIHQoMSAvKiBVTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBQdCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBKciA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIFlyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuVmkgPSB0LlZpLCB0aGlzLlNpID0gdC5TaTtcbiAgICB9XG4gICAgRGkodCkge1xuICAgICAgICB0aGlzLkNpID0gdDtcbiAgICB9XG4gICAgTmkodCkge1xuICAgICAgICB0aGlzLmtpID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy54aSA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLlNpKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLlZpKHQpO1xuICAgIH1cbiAgICAkaSgpIHtcbiAgICAgICAgdGhpcy5DaSgpO1xuICAgIH1cbiAgICBPaSh0KSB7XG4gICAgICAgIHRoaXMua2kodCk7XG4gICAgfVxuICAgIE1pKHQpIHtcbiAgICAgICAgdGhpcy54aSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFhyIGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gdC5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBlID0gdC5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICAgICAgdGhpcy5GaSA9IGUgKyBcIjovL1wiICsgdC5ob3N0LCB0aGlzLkxpID0gXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIi9kb2N1bWVudHNcIjtcbiAgICB9XG4gICAgQmkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gdGhpcy5VaSh0LCBlKTtcbiAgICAgICAgTyhcIlJlc3RDb25uZWN0aW9uXCIsIFwiU2VuZGluZzogXCIsIHIsIG4pO1xuICAgICAgICBjb25zdCBvID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLnFpKG8sIHMsIGkpLCB0aGlzLktpKHQsIHIsIG8sIG4pLnRoZW4oKHQgPT4gKE8oXCJSZXN0Q29ubmVjdGlvblwiLCBcIlJlY2VpdmVkOiBcIiwgdCksIFxuICAgICAgICB0KSksIChlID0+IHtcbiAgICAgICAgICAgIHRocm93IEYoXCJSZXN0Q29ubmVjdGlvblwiLCBgJHt0fSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgZSwgXCJ1cmw6IFwiLCByLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgamkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5CaSh0LCBlLCBuLCBzLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIHFpKHQsIGUsIG4pIHtcbiAgICAgICAgdFtcIlgtR29vZy1BcGktQ2xpZW50XCJdID0gXCJnbC1qcy8gZmlyZS9cIiArIE4sIFxuICAgICAgICAvLyBDb250ZW50LVR5cGU6IHRleHQvcGxhaW4gd2lsbCBhdm9pZCBwcmVmbGlnaHQgcmVxdWVzdHMgd2hpY2ggbWlnaHRcbiAgICAgICAgLy8gbWVzcyB3aXRoIENPUlMgYW5kIHJlZGlyZWN0cyBieSBwcm94aWVzLiBJZiB3ZSBhZGQgY3VzdG9tIGhlYWRlcnNcbiAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIGNvZGUgdG8gcG90ZW50aWFsbHkgdXNlIHRoZSAkaHR0cE92ZXJ3cml0ZVxuICAgICAgICAvLyBwYXJhbWV0ZXIgc3VwcG9ydGVkIGJ5IEVTRiB0byBhdm9pZCB0cmlnZ2VyaW5nIHByZWZsaWdodCByZXF1ZXN0cy5cbiAgICAgICAgdFtcIkNvbnRlbnQtVHlwZVwiXSA9IFwidGV4dC9wbGFpblwiLCB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCAmJiAodFtcIlgtRmlyZWJhc2UtR01QSURcIl0gPSB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCksIFxuICAgICAgICBlICYmIGUuaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKSwgbiAmJiBuLmhlYWRlcnMuZm9yRWFjaCgoKGUsIG4pID0+IHRbbl0gPSBlKSk7XG4gICAgfVxuICAgIFVpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpyW3RdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5GaX0vdjEvJHtlfToke259YDtcbiAgICB9XG59IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSB0LmZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gdC5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbiAgICBLaSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKGksIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBuZXcgWGhySW87XG4gICAgICAgICAgICBvLmxpc3Rlbk9uY2UoRXZlbnRUeXBlLkNPTVBMRVRFLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoby5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgTyhcIkNvbm5lY3Rpb25cIiwgXCJYSFIgcmVjZWl2ZWQ6XCIsIEpTT04uc3RyaW5naWZ5KGUpKSwgaShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuVElNRU9VVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIE8oXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiB0aW1lZCBvdXQnKSwgcihuZXcgUShqLkRFQURMSU5FX0VYQ0VFREVELCBcIlJlcXVlc3QgdGltZSBvdXRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5IVFRQX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG8uZ2V0U3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTyhcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIGZhaWxlZCB3aXRoIHN0YXR1czonLCBuLCBcInJlc3BvbnNlIHRleHQ6XCIsIG8uZ2V0UmVzcG9uc2VUZXh0KCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uZ2V0UmVzcG9uc2VKc29uKCkuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdC5zdGF0dXMgJiYgdC5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgXCItXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoaikuaW5kZXhPZihlKSA+PSAwID8gZSA6IGouVU5LTk9XTjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0LnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIobmV3IFEoZSwgdC5tZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHIobmV3IFEoai5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyBvLmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgUShqLlVOQVZBSUxBQkxFLCBcIkNvbm5lY3Rpb24gZmFpbGVkLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBCKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgY29tcGxldGVkLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBKU09OLnN0cmluZ2lmeShzKTtcbiAgICAgICAgICAgIG8uc2VuZChlLCBcIlBPU1RcIiwgYywgbiwgMTUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFFpKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFsgdGhpcy5GaSwgXCIvXCIsIFwiZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmVcIiwgXCIvXCIsIHQsIFwiL2NoYW5uZWxcIiBdLCBpID0gY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCgpLCByID0gZ2V0U3RhdEV2ZW50VGFyZ2V0KCksIG8gPSB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlci5cbiAgICAgICAgICAgIGh0dHBTZXNzaW9uSWRQYXJhbTogXCJnc2Vzc2lvbmlkXCIsXG4gICAgICAgICAgICBpbml0TWVzc2FnZUhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgcGFyYW0gaXMgdXNlZCB0byBpbXByb3ZlIHJvdXRpbmcgYW5kIHByb2plY3QgaXNvbGF0aW9uIGJ5IHRoZVxuICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQgYW5kIG11c3QgYmUgaW5jbHVkZWQgaW4gZXZlcnkgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogYHByb2plY3RzLyR7dGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlfWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZW5kUmF3SnNvbjogITAsXG4gICAgICAgICAgICBzdXBwb3J0c0Nyb3NzRG9tYWluWGhyOiAhMCxcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRpbWVvdXQgKHJhbmRvbWl6ZWQgYmV0d2VlbiAxMC0yMCBzZWNvbmRzKSBzaW5jZVxuICAgICAgICAgICAgICAgIC8vIGEgbGFyZ2Ugd3JpdGUgYmF0Y2ggb24gYSBzbG93IGludGVybmV0IGNvbm5lY3Rpb24gbWF5IHRha2UgYSBsb25nXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcbiAgICAgICAgICAgICAgICAvLyB0aWdodCB0aW1lb3V0IHdoaWNoIGNvdWxkIGxlYWQgdG8gaW5maW5pdGUgdGltZW91dHMgYW5kIHJldHJpZXMsIHdlXG4gICAgICAgICAgICAgICAgLy8gc2V0IGl0IHZlcnkgbGFyZ2UgKDUtMTAgbWludXRlcykgYW5kIHJlbHkgb24gdGhlIGJyb3dzZXIncyBidWlsdGluXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgICAgIGZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNczogNmU1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9yY2VMb25nUG9sbGluZzogdGhpcy5mb3JjZUxvbmdQb2xsaW5nLFxuICAgICAgICAgICAgZGV0ZWN0QnVmZmVyaW5nUHJveHk6IHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmIChvLnhtbEh0dHBGYWN0b3J5ID0gbmV3IEZldGNoWG1sSHR0cEZhY3Rvcnkoe30pKSwgdGhpcy5xaShvLmluaXRNZXNzYWdlSGVhZGVycywgZSwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGludG8gYSBzcGVjaWFsIFwiJGh0dHBIZWFkZXJzXCIgcXVlcnlcbiAgICAgICAgLy8gcGFyYW1ldGVyLCB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuIFRoaXMgaXNcbiAgICAgICAgLy8gZm9ybWFsbHkgZGVmaW5lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL2IwZTE4MTViMTNmYjkyYTQ2ZDdjOWIzYzMwZGU1ZDZhMzk2YTMyNDUvY2xvc3VyZS9nb29nL25ldC9ycGMvaHR0cGNvcnMuanMjTDMyXG4gICAgICAgIC8vIFRPRE8oYi8xNDU2MjQ3NTYpOiBUaGVyZSBpcyBhIGJhY2tlbmQgYnVnIHdoZXJlICRodHRwSGVhZGVycyBpc24ndCByZXNwZWN0ZWQgaWYgdGhlIHJlcXVlc3RcbiAgICAgICAgLy8gZG9lc24ndCBoYXZlIGFuIE9yaWdpbiBoZWFkZXIuIFNvIHdlIGhhdmUgdG8gZXhjbHVkZSBhIGZldyBicm93c2VyIGVudmlyb25tZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyBrbm93biB0byAoc29tZXRpbWVzKSBub3QgaW5jbHVkZSBhbiBPcmlnaW4uIFNlZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8xNDkxLlxuICAgICAgICBpc01vYmlsZUNvcmRvdmEoKSB8fCBpc1JlYWN0TmF0aXZlKCkgfHwgaXNFbGVjdHJvbigpIHx8IGlzSUUoKSB8fCBpc1VXUCgpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8IChvLmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gPSBcIiRodHRwSGVhZGVyc1wiKTtcbiAgICAgICAgY29uc3QgYyA9IHMuam9pbihcIlwiKTtcbiAgICAgICAgTyhcIkNvbm5lY3Rpb25cIiwgXCJDcmVhdGluZyBXZWJDaGFubmVsOiBcIiArIGMsIG8pO1xuICAgICAgICBjb25zdCBhID0gaS5jcmVhdGVXZWJDaGFubmVsKGMsIG8pO1xuICAgICAgICAvLyBXZWJDaGFubmVsIHN1cHBvcnRzIHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgaGFuZHNoYWtlIC0gc2F2aW5nXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXG4gICAgICAgIC8vIEpTIGV2ZW50IGxvb3AgYXMgb3Blbi4gSW4gb3JkZXIgdG8gZW5mb3JjZSB0aGlzLCB3ZSBkZWxheSBhY3R1YWxseVxuICAgICAgICAvLyBvcGVuaW5nIHRoZSBXZWJDaGFubmVsIHVudGlsIHNlbmQgaXMgY2FsbGVkLiBXaGV0aGVyIHdlIGhhdmUgY2FsbGVkXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgICAgICAgbGV0IHUgPSAhMSwgaCA9ICExO1xuICAgICAgICAvLyBBIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0cmVhbSB3YXMgY2xvc2VkIChieSB1cyBvciB0aHJvdWdoIGFuXG4gICAgICAgIC8vIGVycm9yL2Nsb3NlIGV2ZW50KSB0byBhdm9pZCBkZWxpdmVyaW5nIG11bHRpcGxlIGNsb3NlIGV2ZW50cyBvciBzZW5kaW5nXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBuZXcgWXIoe1xuICAgICAgICAgICAgVmk6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGggPyBPKFwiQ29ubmVjdGlvblwiLCBcIk5vdCBzZW5kaW5nIGJlY2F1c2UgV2ViQ2hhbm5lbCBpcyBjbG9zZWQ6XCIsIHQpIDogKHUgfHwgKE8oXCJDb25uZWN0aW9uXCIsIFwiT3BlbmluZyBXZWJDaGFubmVsIHRyYW5zcG9ydC5cIiksIFxuICAgICAgICAgICAgICAgIGEub3BlbigpLCB1ID0gITApLCBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgc2VuZGluZzpcIiwgdCksIGEuc2VuZCh0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgU2k6ICgpID0+IGEuY2xvc2UoKVxuICAgICAgICB9KSwgeSA9ICh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IGNsb3N1cmUgdHlwaW5nIHNlZW1zIGJyb2tlbiBiZWNhdXNlIFdlYkNoYW5uZWwgZG9lc1xuICAgICAgICAgICAgLy8gbm90IGltcGxlbWVudCBnb29nLmV2ZW50cy5MaXN0ZW5hYmxlXG4gICAgICAgICAgICB0Lmxpc3RlbihlLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbih0KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENsb3N1cmUgZXZlbnRzIGFyZSBndWFyZGVkIGFuZCBleGNlcHRpb25zIGFyZSBzd2FsbG93ZWQsIHNvIGNhdGNoIGFueVxuICAgICAgICAvLyBleGNlcHRpb24gYW5kIHJldGhyb3cgdXNpbmcgYSBzZXRUaW1lb3V0IHNvIHRoZXkgYmVjb21lIHZpc2libGUgYWdhaW4uXG4gICAgICAgIC8vIE5vdGUgdGhhdCBldmVudHVhbGx5IHRoaXMgZnVuY3Rpb24gY291bGQgZ28gYXdheSBpZiB3ZSBhcmUgY29uZmlkZW50XG4gICAgICAgIC8vIGVub3VnaCB0aGUgY29kZSBpcyBleGNlcHRpb24gZnJlZS5cbiAgICAgICAgICAgICAgICByZXR1cm4geShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5PUEVOLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IG9wZW5lZC5cIik7XG4gICAgICAgIH0pKSwgeShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgKCgpID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgTyhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBjbG9zZWRcIiksIGwuT2koKSk7XG4gICAgICAgIH0pKSwgeShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKHQgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBGKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGVycm9yZWQ6XCIsIHQpLCBsLk9pKG5ldyBRKGouVU5BVkFJTEFCTEUsIFwiVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkXCIpKSk7XG4gICAgICAgIH0pKSwgeShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5NRVNTQUdFLCAodCA9PiB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmRhdGFbMF07XG4gICAgICAgICAgICAgICAgVSghIW4pO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNTE0Mzg5MSk6IFRoZXJlIGlzIGEgYnVnIGluIE9uZSBQbGF0Zm9ybSB0aGF0IGNhdXNlZCBlcnJvcnNcbiAgICAgICAgICAgICAgICAvLyAoYW5kIG9ubHkgZXJyb3JzKSB0byBiZSB3cmFwcGVkIGluIGFuIGV4dHJhIGFycmF5LiBUbyBiZSBmb3J3YXJkXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBidWcgd2UgbmVlZCB0byBjaGVjayBlaXRoZXIgY29uZGl0aW9uLiBUaGUgbGF0dGVyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgZml4IGhhcyBiZWVuIHJvbGxlZCBvdXQuXG4gICAgICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIG1zZ0RhdGEuZXJyb3IgaXMgbm90IHR5cGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLCBpID0gcy5lcnJvciB8fCAobnVsbCA9PT0gKGUgPSBzWzBdKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmVycm9yKTtcbiAgICAgICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgcmVjZWl2ZWQgZXJyb3I6XCIsIGkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBpLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxuICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gd25bdF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSByZXR1cm4gZ24oZSk7XG4gICAgICAgICAgICAgICAgICAgIH0odCksIG4gPSBpLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IGouSU5URVJOQUwsIG4gPSBcIlVua25vd24gZXJyb3Igc3RhdHVzOiBcIiArIHQgKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBpLm1lc3NhZ2UpLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgICAgICAgICAgaCA9ICEwLCBsLk9pKG5ldyBRKGUsIG4pKSwgYS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgcmVjZWl2ZWQ6XCIsIG4pLCBsLk1pKG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHkociwgRXZlbnQuU1RBVF9FVkVOVCwgKHQgPT4ge1xuICAgICAgICAgICAgdC5zdGF0ID09PSBTdGF0LlBST1hZID8gTyhcIkNvbm5lY3Rpb25cIiwgXCJEZXRlY3RlZCBidWZmZXJpbmcgcHJveHlcIikgOiB0LnN0YXQgPT09IFN0YXQuTk9QUk9YWSAmJiBPKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIG5vIGJ1ZmZlcmluZyBwcm94eVwiKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIGwuJGkoKTtcbiAgICAgICAgfSksIDApLCBsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBacigpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gdG8oKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBlbyh0KSB7XG4gICAgcmV0dXJuIG5ldyBqbih0LCAvKiB1c2VQcm90bzNKc29uPSAqLyAhMCk7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHRFbmNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3Mgbm8ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgcyA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLk1lID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy5XaSA9IG4sIHRoaXMuR2kgPSBzLCB0aGlzLnppID0gaSwgdGhpcy5IaSA9IDAsIFxuICAgICAgICB0aGlzLkppID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy5ZaSA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuSGkgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgWGkoKSB7XG4gICAgICAgIHRoaXMuSGkgPSB0aGlzLnppO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgIFppKHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHRoaXMuSGkgKyB0aGlzLnRyKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMuWWkpLCBzID0gTWF0aC5tYXgoMCwgZSAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBzID4gMCAmJiBPKFwiRXhwb25lbnRpYWxCYWNrb2ZmXCIsIGBCYWNraW5nIG9mZiBmb3IgJHtzfSBtcyAoYmFzZSBkZWxheTogJHt0aGlzLkhpfSBtcywgZGVsYXkgd2l0aCBqaXR0ZXI6ICR7ZX0gbXMsIGxhc3QgYXR0ZW1wdDogJHtufSBtcyBhZ28pYCksIFxuICAgICAgICB0aGlzLkppID0gdGhpcy5NZS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHMsICgoKSA9PiAodGhpcy5ZaSA9IERhdGUubm93KCksIFxuICAgICAgICB0KCkpKSksIFxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxuICAgICAgICAvLyBib3VuZHMuXG4gICAgICAgIHRoaXMuSGkgKj0gdGhpcy5HaSwgdGhpcy5IaSA8IHRoaXMuV2kgJiYgKHRoaXMuSGkgPSB0aGlzLldpKSwgdGhpcy5IaSA+IHRoaXMuemkgJiYgKHRoaXMuSGkgPSB0aGlzLnppKTtcbiAgICB9XG4gICAgZXIoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuSmkgJiYgKHRoaXMuSmkuc2tpcERlbGF5KCksIHRoaXMuSmkgPSBudWxsKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkppICYmICh0aGlzLkppLmNhbmNlbCgpLCB0aGlzLkppID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqLyAgICB0cigpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gLjUpICogdGhpcy5IaTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxuICpcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICpcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXG4gKiBzdHJlYW1pbmcgUlBDLlxuICpcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xuICpcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxuICpcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXG4gKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXG4gKlxuICogR2VuZXJpYyB0eXBlczpcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcbiAqL1xuY2xhc3Mgc28ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIGMpIHtcbiAgICAgICAgdGhpcy5NZSA9IHQsIHRoaXMubnIgPSBuLCB0aGlzLnNyID0gcywgdGhpcy5pciA9IGksIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgPSByLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIgPSBvLCB0aGlzLmxpc3RlbmVyID0gYywgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbG9zZSBjb3VudCB0aGF0J3MgaW5jcmVtZW50ZWQgZXZlcnkgdGltZSB0aGUgc3RyZWFtIGlzIGNsb3NlZDsgdXNlZCBieVxuICAgICAgICAgKiBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKCkgdG8gaW52YWxpZGF0ZSBjYWxsYmFja3MgdGhhdCBoYXBwZW4gYWZ0ZXJcbiAgICAgICAgICogY2xvc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJyID0gMCwgdGhpcy5jciA9IG51bGwsIHRoaXMuYXIgPSBudWxsLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMudXIgPSBuZXcgbm8odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIGhyKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBTdGFydGluZyAqLyA9PT0gdGhpcy5zdGF0ZSB8fCA1IC8qIEJhY2tvZmYgKi8gPT09IHRoaXMuc3RhdGUgfHwgdGhpcy5scigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHVuZGVybHlpbmcgUlBDIGlzIG9wZW4gKHRoZSBvbk9wZW4oKSBsaXN0ZW5lciBoYXMgYmVlblxuICAgICAqIGNhbGxlZCkgYW5kIHRoZSBzdHJlYW0gaXMgcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBscigpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIEhlYWx0aHkgKi8gPT09IHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgNCAvKiBFcnJvciAqLyAhPT0gdGhpcy5zdGF0ZSA/IHRoaXMuYXV0aCgpIDogdGhpcy5kcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXG4gICAgICovICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuaHIoKSAmJiBhd2FpdCB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgd3IoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIEluaXRpYWwgKi8gLCB0aGlzLnVyLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXG4gICAgICpcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxuICAgICAqLyAgICBfcigpIHtcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cbiAgICAgICAgdGhpcy5scigpICYmIG51bGwgPT09IHRoaXMuY3IgJiYgKHRoaXMuY3IgPSB0aGlzLk1lLmVucXVldWVBZnRlckRlbGF5KHRoaXMubnIsIDZlNCwgKCgpID0+IHRoaXMubXIoKSkpKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovICAgIGdyKHQpIHtcbiAgICAgICAgdGhpcy55cigpLCB0aGlzLnN0cmVhbS5zZW5kKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovICAgIGFzeW5jIG1yKCkge1xuICAgICAgICBpZiAodGhpcy5scigpKSBcbiAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cbiAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgwIC8qIEluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovICAgIHlyKCkge1xuICAgICAgICB0aGlzLmNyICYmICh0aGlzLmNyLmNhbmNlbCgpLCB0aGlzLmNyID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBDYW5jZWxzIHRoZSBoZWFsdGggY2hlY2sgZGVsYXllZCBvcGVyYXRpb24uICovICAgIHByKCkge1xuICAgICAgICB0aGlzLmFyICYmICh0aGlzLmFyLmNhbmNlbCgpLCB0aGlzLmFyID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxuICAgICAqXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxuICAgICAqXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgLSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXG4gICAgICovICAgIGFzeW5jIGNsb3NlKHQsIGUpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXG4gICAgICAgIHRoaXMueXIoKSwgdGhpcy5wcigpLCB0aGlzLnVyLmNhbmNlbCgpLCBcbiAgICAgICAgLy8gSW52YWxpZGF0ZXMgYW55IHN0cmVhbS1yZWxhdGVkIGNhbGxiYWNrcyAoZS5nLiBmcm9tIGF1dGggb3IgdGhlXG4gICAgICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtKSwgZ3VhcmFudGVlaW5nIHRoZXkgd29uJ3QgZXhlY3V0ZS5cbiAgICAgICAgdGhpcy5ycisrLCA0IC8qIEVycm9yICovICE9PSB0ID8gXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAgICAgICAgdGhpcy51ci5yZXNldCgpIDogZSAmJiBlLmNvZGUgPT09IGouUkVTT1VSQ0VfRVhIQVVTVEVEID8gKFxuICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxuICAgICAgICBNKGUudG9TdHJpbmcoKSksIE0oXCJVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC5cIiksIFxuICAgICAgICB0aGlzLnVyLlhpKCkpIDogZSAmJiBlLmNvZGUgPT09IGouVU5BVVRIRU5USUNBVEVEICYmIDMgLyogSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLlRyKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIuTmkoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICBUcigpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogU3RhcnRpbmcgKi87XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkVyKHRoaXMucnIpLCBlID0gdGhpcy5ycjtcbiAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBKdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkLCBidXQgc2VlIFRPRE8gYmVsb3cuXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCkgXSkudGhlbigoKFt0LCBuXSkgPT4ge1xuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXG4gICAgICAgICAgICB0aGlzLnJyID09PSBlICYmIFxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXG4gICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXG4gICAgICAgICAgICB0aGlzLklyKHQsIG4pO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUShqLlVOS05PV04sIFwiRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6IFwiICsgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Bcih0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBJcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkVyKHRoaXMucnIpO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuUnIodCwgZSksIHRoaXMuc3RyZWFtLkRpKCgoKSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogT3BlbiAqLyAsIHRoaXMuYXIgPSB0aGlzLk1lLmVucXVldWVBZnRlckRlbGF5KHRoaXMuc3IsIDFlNCwgKCgpID0+ICh0aGlzLmxyKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIEhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLkRpKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uTmkoKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5Bcih0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRyKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBCYWNrb2ZmICovICwgdGhpcy51ci5aaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIEFyKHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiBPKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBFcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBFcih0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuTWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5yciA9PT0gdCA/IGUoKSA6IChPKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgaW8gZXh0ZW5kcyBzbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIExpc3RlblN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLmsgPSBpO1xuICAgIH1cbiAgICBScih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlyLlFpKFwiTGlzdGVuXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMudXIucmVzZXQoKTtcbiAgICAgICAgY29uc3QgZSA9IG9zKHRoaXMuaywgdCksIG4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIHQpKSByZXR1cm4gdXQubWluKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRJZHMgJiYgZS50YXJnZXRJZHMubGVuZ3RoID8gdXQubWluKCkgOiBlLnJlYWRUaW1lID8gem4oZS5yZWFkVGltZSkgOiB1dC5taW4oKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuYnIoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIFByKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gZXModGhpcy5rKSwgZS5hZGRUYXJnZXQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBuID0gWnQocykgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBocyh0LCBzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogbHModCwgcylcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSBlLnRhcmdldElkLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgPyBuLnJlc3VtZVRva2VuID0gV24odCwgZS5yZXN1bWVUb2tlbikgOiBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8odXQubWluKCkpID4gMCAmJiAoXG4gICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgbWFueSB0ZXN0cyBkZXBlbmQgb24gdGhpcyBiZWhhdmlvdXIgdGhvdWdoIChsZWF2aW5nIG1pbigpIG91dFxuICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICBuLnJlYWRUaW1lID0gUW4odCwgZS5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSkpLCBuO1xuICAgICAgICB9KHRoaXMuaywgdCk7XG4gICAgICAgIGNvbnN0IG4gPSBkcyh0aGlzLmssIHQpO1xuICAgICAgICBuICYmIChlLmxhYmVscyA9IG4pLCB0aGlzLmdyKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgdnIodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBlcyh0aGlzLmspLCBlLnJlbW92ZVRhcmdldCA9IHQsIHRoaXMuZ3IoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxuICpcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxuICogcmVxdWVzdC5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXG4gKlxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXG4gKi8gY2xhc3Mgcm8gZXh0ZW5kcyBzbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcIndyaXRlX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBXcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFdyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBzLCByKSwgXG4gICAgICAgIHRoaXMuayA9IGksIHRoaXMuVnIgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXG4gICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxuICAgICAqLyAgICBnZXQgU3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZyO1xuICAgIH1cbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuVnIgPSAhMSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB2b2lkIDAsIHN1cGVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIFRyKCkge1xuICAgICAgICB0aGlzLlZyICYmIHRoaXMuRHIoW10pO1xuICAgIH1cbiAgICBScih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlyLlFpKFwiV3JpdGVcIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBVKCEhdC5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdC5zdHJlYW1Ub2tlbiwgdGhpcy5Wcikge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMudXIucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB1cyh0LndyaXRlUmVzdWx0cywgdC5jb21taXRUaW1lKSwgbiA9IHpuKHQuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5DcihuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIFUoIXQud3JpdGVSZXN1bHRzIHx8IDAgPT09IHQud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMuVnIgPSAhMCwgdGhpcy5saXN0ZW5lci5OcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBrcigpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IGVzKHRoaXMuayksIHRoaXMuZ3IodCk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIERyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKHQgPT4gY3ModGhpcy5rLCB0KSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ3IoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3Mgb28gZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuaXIgPSBuLCB0aGlzLmsgPSBzLCBcbiAgICAgICAgdGhpcy4kciA9ICExO1xuICAgIH1cbiAgICBPcigpIHtcbiAgICAgICAgaWYgKHRoaXMuJHIpIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIEJpKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT3IoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3MsIGldKSA9PiB0aGlzLmlyLkJpKHQsIGUsIG4sIHMsIGkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/ICh0LmNvZGUgPT09IGouVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCB0KSA6IG5ldyBRKGouVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogSW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggc3RyZWFtZWQgcmVzdWx0cyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgamkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5PcigpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuaXIuamkodCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gai5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFEoai5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy4kciA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIGNvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NciA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5MciA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgQnIoKSB7XG4gICAgICAgIDAgPT09IHRoaXMuTXIgJiYgKHRoaXMuVXIoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIHRoaXMuRnIgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIE9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLkZyID0gbnVsbCwgXG4gICAgICAgIHRoaXMucXIoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy5VcihcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIEtyKHQpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLlVyKFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pIDogKHRoaXMuTXIrKywgXG4gICAgICAgIHRoaXMuTXIgPj0gMSAmJiAodGhpcy5qcigpLCB0aGlzLnFyKGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHt0LnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLlVyKFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldCh0KSB7XG4gICAgICAgIHRoaXMuanIoKSwgdGhpcy5NciA9IDAsIFwiT25saW5lXCIgLyogT25saW5lICovID09PSB0ICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMuTHIgPSAhMSksIHRoaXMuVXIodCk7XG4gICAgfVxuICAgIFVyKHQpIHtcbiAgICAgICAgdCAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQpKTtcbiAgICB9XG4gICAgcXIodCkge1xuICAgICAgICBjb25zdCBlID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHt0fVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5MciA/IChNKGUpLCB0aGlzLkxyID0gITEpIDogTyhcIk9ubGluZVN0YXRlVHJhY2tlclwiLCBlKTtcbiAgICB9XG4gICAganIoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuRnIgJiYgKHRoaXMuRnIuY2FuY2VsKCksIHRoaXMuRnIgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGFvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUXIgPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLldyID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuR3IgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpyID0gW10sIHRoaXMuSHIgPSBpLCB0aGlzLkhyLkVpKCh0ID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICB5byh0aGlzKSAmJiAoTyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgICAgICAgICAgICAgICAgICBlLkdyLmFkZCg0IC8qIENvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IGhvKGUpLCBlLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGUuR3IuZGVsZXRlKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgdW8oZSk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5KciA9IG5ldyBjbyhuLCBzKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVvKHQpIHtcbiAgICBpZiAoeW8odCkpIGZvciAoY29uc3QgZSBvZiB0LnpyKSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICEwKTtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcbiAqIGVuYWJsZU5ldHdvcmsoKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBobyh0KSB7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuenIpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITEpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcbiAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cbiAqL1xuZnVuY3Rpb24gbG8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgIG4uV3IuaGFzKGUudGFyZ2V0SWQpIHx8IChcbiAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXG4gICAgbi5Xci5zZXQoZS50YXJnZXRJZCwgZSksIGdvKG4pID8gXG4gICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cbiAgICBtbyhuKSA6ICRvKG4pLmxyKCkgJiYgd28obiwgZSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gZm8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpLCBzID0gJG8obik7XG4gICAgbi5Xci5kZWxldGUoZSksIHMubHIoKSAmJiBfbyhuLCBlKSwgMCA9PT0gbi5Xci5zaXplICYmIChzLmxyKCkgPyBzLl9yKCkgOiB5byhuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIHdvKHQsIGUpIHtcbiAgICB0LllyLlgoZS50YXJnZXRJZCksICRvKHQpLlByKGUpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIF9vKHQsIGUpIHtcbiAgICB0LllyLlgoZSksICRvKHQpLnZyKGUpO1xufVxuXG5mdW5jdGlvbiBtbyh0KSB7XG4gICAgdC5ZciA9IG5ldyBMbih7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IGUgPT4gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKSxcbiAgICAgICAgRXQ6IGUgPT4gdC5Xci5nZXQoZSkgfHwgbnVsbFxuICAgIH0pLCAkbyh0KS5zdGFydCgpLCB0LkpyLkJyKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBnbyh0KSB7XG4gICAgcmV0dXJuIHlvKHQpICYmICEkbyh0KS5ocigpICYmIHQuV3Iuc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIHlvKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gSyh0KS5Hci5zaXplO1xufVxuXG5mdW5jdGlvbiBwbyh0KSB7XG4gICAgdC5ZciA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gVG8odCkge1xuICAgIHQuV3IuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgd28odCwgZSk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBFbyh0LCBlKSB7XG4gICAgcG8odCksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgZ28odCkgPyAodC5Kci5LcihlKSwgbW8odCkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgdC5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIElvKHQsIGUsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIHQuSnIuc2V0KFwiT25saW5lXCIgLyogT25saW5lICovKSwgZSBpbnN0YW5jZW9mIE1uICYmIDIgLyogUmVtb3ZlZCAqLyA9PT0gZS5zdGF0ZSAmJiBlLmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlLnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICB0LldyLmhhcyhzKSAmJiAoYXdhaXQgdC5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHMsIG4pLCB0LldyLmRlbGV0ZShzKSwgdC5Zci5yZW1vdmVUYXJnZXQocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKHQsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgTyhcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgZS50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgQW8odCwgbik7XG4gICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgJG4gPyB0LllyLm90KGUpIDogZSBpbnN0YW5jZW9mIE9uID8gdC5Zci5kdChlKSA6IHQuWXIudXQoZSksIFxuICAgICFuLmlzRXF1YWwodXQubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgbXIodC5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8oZSkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuWXIuZ3QoZSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuV3IuZ2V0KHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiB0LldyLnNldChzLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LldyLmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW4pIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LldyLnNldChlLCBuLndpdGhSZXN1bWVUb2tlbihwdC5FTVBUWV9CWVRFX1NUUklORywgbi5zbmFwc2hvdFZlcnNpb24pKSwgXG4gICAgICAgICAgICAgICAgLy8gQ2F1c2UgYSBoYXJkIHJlc2V0IGJ5IHVud2F0Y2hpbmcgYW5kIHJld2F0Y2hpbmcgaW1tZWRpYXRlbHksIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGRlbGliZXJhdGVseSBkb24ndCBzZW5kIGEgcmVzdW1lIHRva2VuIHNvIHRoYXQgd2UgZ2V0IGEgZnVsbCB1cGRhdGUuXG4gICAgICAgICAgICAgICAgX28odCwgZSk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IGFpKG4udGFyZ2V0LCBlLCAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovICwgbi5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgd28odCwgcyk7XG4gICAgICAgICAgICB9KSksIHQucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0odCwgbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIGUpLCBhd2FpdCBBbyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gQW8odCwgZSwgbikge1xuICAgIGlmICghWnMoZSkpIHRocm93IGU7XG4gICAgdC5Hci5hZGQoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAvLyBEaXNhYmxlIG5ldHdvcmsgYW5kIHJhaXNlIG9mZmxpbmUgc25hcHNob3RzXG4gICAgYXdhaXQgaG8odCksIHQuSnIuc2V0KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBuIHx8IChcbiAgICAvLyBVc2UgYSBzaW1wbGUgcmVhZCBvcGVyYXRpb24gdG8gZGV0ZXJtaW5lIGlmIEluZGV4ZWREQiByZWNvdmVyZWQuXG4gICAgLy8gSWRlYWxseSwgd2Ugd291bGQgZXhwb3NlIGEgaGVhbHRoIGNoZWNrIGRpcmVjdGx5IG9uIFNpbXBsZURiLCBidXRcbiAgICAvLyBSZW1vdGVTdG9yZSBvbmx5IGhhcyBhY2Nlc3MgdG8gcGVyc2lzdGVuY2UgdGhyb3VnaCBMb2NhbFN0b3JlLlxuICAgIG4gPSAoKSA9PiBtcih0LmxvY2FsU3RvcmUpKSwgXG4gICAgLy8gUHJvYmUgSW5kZXhlZERCIHBlcmlvZGljYWxseSBhbmQgcmUtZW5hYmxlIG5ldHdvcmtcbiAgICB0LmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLCBhd2FpdCBuKCksIHQuR3IuZGVsZXRlKDEgLyogSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IHVvKHQpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIFJvKHQsIGUpIHtcbiAgICByZXR1cm4gZSgpLmNhdGNoKChuID0+IEFvKHQsIG4sIGUpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGJvKHQpIHtcbiAgICBjb25zdCBlID0gSyh0KSwgbiA9IE9vKGUpO1xuICAgIGxldCBzID0gZS5Rci5sZW5ndGggPiAwID8gZS5RcltlLlFyLmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDtQbyhlKTsgKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgcHIoZS5sb2NhbFN0b3JlLCBzKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIDAgPT09IGUuUXIubGVuZ3RoICYmIG4uX3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0LmJhdGNoSWQsIHZvKGUsIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgQW8oZSwgdCk7XG4gICAgfVxuICAgIFZvKGUpICYmIFNvKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBQbyh0KSB7XG4gICAgcmV0dXJuIHlvKHQpICYmIHQuUXIubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIHZvKHQsIGUpIHtcbiAgICB0LlFyLnB1c2goZSk7XG4gICAgY29uc3QgbiA9IE9vKHQpO1xuICAgIG4ubHIoKSAmJiBuLlNyICYmIG4uRHIoZS5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBWbyh0KSB7XG4gICAgcmV0dXJuIHlvKHQpICYmICFPbyh0KS5ocigpICYmIHQuUXIubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gU28odCkge1xuICAgIE9vKHQpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIERvKHQpIHtcbiAgICBPbyh0KS5rcigpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBDbyh0KSB7XG4gICAgY29uc3QgZSA9IE9vKHQpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LlFyKSBlLkRyKG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gTm8odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LlFyLnNoaWZ0KCksIGkgPSBjaS5mcm9tKHMsIGUsIG4pO1xuICAgIGF3YWl0IFJvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBibyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24ga28odCwgZSkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgZSAmJiBPbyh0KS5TciAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAobiA9IGUuY29kZSwgbW4obikgJiYgbiAhPT0gai5BQk9SVEVEKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5Rci5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9vKHQpLndyKCksIGF3YWl0IFJvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIGUpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IGJvKHQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuO1xuICAgIH0odCwgZSksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgVm8odCkgJiYgU28odCk7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHhvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICBlID8gKG4uR3IuZGVsZXRlKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCB1byhuKSkgOiBlIHx8IChuLkdyLmFkZCgyIC8qIElzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgaG8obiksIG4uSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uICRvKHQpIHtcbiAgICByZXR1cm4gdC5YciB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuWHIgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBLKHQpO1xuICAgICAgICByZXR1cm4gcy5PcigpLCBuZXcgaW8oZSwgcy5pciwgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5rLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgRGk6IFRvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIE5pOiBFby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBicjogSW8uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LnpyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWHIud3IoKSwgZ28odCkgPyBtbyh0KSA6IHQuSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKSA6IChhd2FpdCB0LlhyLnN0b3AoKSwgXG4gICAgICAgIHBvKHQpKTtcbiAgICB9KSkpLCB0LlhyO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gT28odCkge1xuICAgIHJldHVybiB0LlpyIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5aciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEsodCk7XG4gICAgICAgIHJldHVybiBzLk9yKCksIG5ldyBybyhlLCBzLmlyLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLmssIG4pO1xuICAgIH0odC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICBEaTogRG8uYmluZChudWxsLCB0KSxcbiAgICAgICAgTmk6IGtvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIE5yOiBDby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBDcjogTm8uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LnpyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWnIud3IoKSwgXG4gICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgYXdhaXQgYm8odCkpIDogKGF3YWl0IHQuWnIuc3RvcCgpLCB0LlFyLmxlbmd0aCA+IDAgJiYgKE8oXCJSZW1vdGVTdG9yZVwiLCBgU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggJHt0LlFyLmxlbmd0aH0gcGVuZGluZyB3cml0ZXNgKSwgXG4gICAgICAgIHQuUXIgPSBbXSkpO1xuICAgIH0pKSksIHQuWnI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxuICpcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAqXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cbiAqXG4gKiBOb3RlOiBXZSBpbXBsZW1lbnQgYFByb21pc2VMaWtlYCBpbnN0ZWFkIG9mIGBQcm9taXNlYCwgYXMgdGhlIGBQcm9taXNlYCB0eXBlXG4gKiBpbiBuZXdlciB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IGRlZmluZXMgYGZpbmFsbHlgLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluXG4gKiBJRS5cbiAqL1xuY2xhc3MgTW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy50YXJnZXRUaW1lTXMgPSBuLCB0aGlzLm9wID0gcywgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSBpLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBXLCB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksIFxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goKHQgPT4ge30pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcbiAgICAgKiBleGVjdXRlZCBvbiB0aGUgcHJvdmlkZWQgYXN5bmNRdWV1ZSBhZnRlciB0aGUgcHJvdmlkZWQgZGVsYXlNcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIC0gVGhlIHF1ZXVlIHRvIHNjaGVkdWxlIHRoZSBvcGVyYXRpb24gb24uXG4gICAgICogQHBhcmFtIGlkIC0gQSBUaW1lciBJRCBpZGVudGlmeWluZyB0aGUgdHlwZSBvZiBvcGVyYXRpb24gdGhpcyBpcy5cbiAgICAgKiBAcGFyYW0gZGVsYXlNcyAtIFRoZSBkZWxheSAobXMpIGJlZm9yZSB0aGUgb3BlcmF0aW9uIHNob3VsZCBiZSBzY2hlZHVsZWQuXG4gICAgICogQHBhcmFtIG9wIC0gVGhlIG9wZXJhdGlvbiB0byBydW4uXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgb25jZSB0aGVcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxuICAgICAqICAgZnJvbSBpdHMgZGVsYXllZE9wZXJhdGlvbnMgbGlzdC5cbiAgICAgKiAgIFBPUlRJTkcgTk9URTogVGhpcyBleGlzdHMgdG8gcHJldmVudCBtYWtpbmcgcmVtb3ZlRGVsYXllZE9wZXJhdGlvbigpIGFuZFxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlQW5kU2NoZWR1bGUodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gRGF0ZS5ub3coKSArIG4sIG8gPSBuZXcgTW8odCwgZSwgciwgcywgaSk7XG4gICAgICAgIHJldHVybiBvLnN0YXJ0KG4pLCBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxuICAgICAqLyAgICBzdGFydCh0KSB7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KCgoKSA9PiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpKSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcbiAgICAgKiBjYW5jZWxlZCkuXG4gICAgICovICAgIHNraXBEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxuICAgICAqLyAgICBjYW5jZWwodCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgUShqLkNBTkNFTExFRCwgXCJPcGVyYXRpb24gY2FuY2VsbGVkXCIgKyAodCA/IFwiOiBcIiArIHQgOiBcIlwiKSkpKTtcbiAgICB9XG4gICAgaGFuZGxlRGVsYXlFbGFwc2VkKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSA/ICh0aGlzLmNsZWFyVGltZW91dCgpLCBcbiAgICAgICAgdGhpcy5vcCgpLnRoZW4oKHQgPT4gdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpKSkpIDogUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLnJlbW92YWxDYWxsYmFjayh0aGlzKSwgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJIYW5kbGUpLCBcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmlyZXN0b3JlRXJyb3IgdGhhdCBjYW4gYmUgc3VyZmFjZWQgdG8gdGhlIHVzZXIgaWYgdGhlIHByb3ZpZGVkXG4gKiBlcnJvciBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiBSZS10aHJvd3MgdGhlIGVycm9yIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBGbyh0LCBlKSB7XG4gICAgaWYgKE0oXCJBc3luY1F1ZXVlXCIsIGAke2V9OiAke3R9YCksIFpzKHQpKSByZXR1cm4gbmV3IFEoai5VTkFWQUlMQUJMRSwgYCR7ZX06ICR7dH1gKTtcbiAgICB0aHJvdyB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cbiAqIHRoZSBrZXkuXG4gKi8gY2xhc3MgTG8ge1xuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCA/IChlLCBuKSA9PiB0KGUsIG4pIHx8IER0LmNvbXBhcmF0b3IoZS5rZXksIG4ua2V5KSA6ICh0LCBlKSA9PiBEdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSksIFxuICAgICAgICB0aGlzLmtleWVkTWFwID0gUG4oKSwgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgeW4odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjb3B5IG9mIHRoZSBleGlzdGluZyBEb2N1bWVudFNldCwgdXNpbmcgdGhlIHNhbWVcbiAgICAgKiBjb21wYXJhdG9yLlxuICAgICAqLyAgICBzdGF0aWMgZW1wdHlTZXQodCkge1xuICAgICAgICByZXR1cm4gbmV3IExvKHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIHByb3ZpZGVkIGtleSBpbiB0aGUgZG9jdW1lbnQgc2V0LCBvciAtMSBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcbiAgICAgKi8gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLnNvcnRlZFNldC5pbmRleE9mKGUpIDogLTE7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuc2l6ZTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLnNvcnRlZFNldC5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRlbGV0ZSh0LmtleSk7XG4gICAgICAgIHJldHVybiBlLmNvcHkoZS5rZXllZE1hcC5pbnNlcnQodC5rZXksIHQpLCBlLnNvcnRlZFNldC5pbnNlcnQodCwgbnVsbCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhIGRvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZSh0KSwgdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKGUpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgTG8pKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCAwID09PSB0Lmxlbmd0aCA/IFwiRG9jdW1lbnRTZXQgKClcIiA6IFwiRG9jdW1lbnRTZXQgKFxcbiAgXCIgKyB0LmpvaW4oXCIgIFxcblwiKSArIFwiXFxuKVwiO1xuICAgIH1cbiAgICBjb3B5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBMbztcbiAgICAgICAgcmV0dXJuIG4uY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvciwgbi5rZXllZE1hcCA9IHQsIG4uc29ydGVkU2V0ID0gZSwgbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50Q2hhbmdlU2V0IGtlZXBzIHRyYWNrIG9mIGEgc2V0IG9mIGNoYW5nZXMgdG8gZG9jcyBpbiBhIHF1ZXJ5LCBtZXJnaW5nXG4gKiBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBkb2MuXG4gKi8gY2xhc3MgQm8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmVvID0gbmV3IHluKER0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICB0cmFjayh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRvYy5rZXksIG4gPSB0aGlzLmVvLmdldChlKTtcbiAgICAgICAgbiA/IFxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXG4gICAgICAgIDAgLyogQWRkZWQgKi8gIT09IHQudHlwZSAmJiAzIC8qIE1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwgdCkgOiAzIC8qIE1ldGFkYXRhICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIEFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5yZW1vdmUoZSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgIGRvYzogbi5kb2NcbiAgICAgICAgfSkgOiAwIC8qIEFkZGVkICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogXG4gICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XG4gICAgICAgIC8vIEFkZGVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXG4gICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxuICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcbiAgICAgICAgQigpIDogdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHQpO1xuICAgIH1cbiAgICBubygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5lby5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxufVxuXG5jbGFzcyBVbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgYykge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5kb2NzID0gZSwgdGhpcy5vbGREb2NzID0gbiwgdGhpcy5kb2NDaGFuZ2VzID0gcywgdGhpcy5tdXRhdGVkS2V5cyA9IGksIFxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IHIsIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IG8sIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSBjO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBuZXcgVW8odCwgZSwgTG8uZW1wdHlTZXQoZSksIGksIG4sIHMsIFxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyAhMCwgXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSk7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlICYmIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9PT0gdC5zeW5jU3RhdGVDaGFuZ2VkICYmIHRoaXMubXV0YXRlZEtleXMuaXNFcXVhbCh0Lm11dGF0ZWRLZXlzKSAmJiB2ZSh0aGlzLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiB0aGlzLmRvY3MuaXNFcXVhbCh0LmRvY3MpICYmIHRoaXMub2xkRG9jcy5pc0VxdWFsKHQub2xkRG9jcykpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY0NoYW5nZXMsIG4gPSB0LmRvY0NoYW5nZXM7XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSBpZiAoZVt0XS50eXBlICE9PSBuW3RdLnR5cGUgfHwgIWVbdF0uZG9jLmlzRXF1YWwoblt0XS5kb2MpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXG4gKi8gY2xhc3MgcW8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNvID0gdm9pZCAwLCB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgS28ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgemkoKHQgPT4gVmUodCkpLCB2ZSksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIHRoaXMuaW8gPSBuZXcgU2V0O1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gam8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExLCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAociB8fCAoaSA9ICEwLCByID0gbmV3IHFvKSwgaSkgdHJ5IHtcbiAgICAgICAgci5zbyA9IGF3YWl0IG4ub25MaXN0ZW4ocyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0gRm8odCwgYEluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICcke1NlKGUucXVlcnkpfScgZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiB2b2lkIGUub25FcnJvcihuKTtcbiAgICB9XG4gICAgaWYgKG4ucXVlcmllcy5zZXQocywgciksIHIubGlzdGVuZXJzLnB1c2goZSksIFxuICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgIGUucm8obi5vbmxpbmVTdGF0ZSksIHIuc28pIHtcbiAgICAgICAgZS5vbyhyLnNvKSAmJiB6byhuKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFFvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAocikge1xuICAgICAgICBjb25zdCB0ID0gci5saXN0ZW5lcnMuaW5kZXhPZihlKTtcbiAgICAgICAgdCA+PSAwICYmIChyLmxpc3RlbmVycy5zcGxpY2UodCwgMSksIGkgPSAwID09PSByLmxpc3RlbmVycy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaSkgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUocyksIG4ub25Vbmxpc3RlbihzKTtcbn1cblxuZnVuY3Rpb24gV28odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgIGxldCBzID0gITE7XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IHQucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KGUpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGkubGlzdGVuZXJzKSBlLm9vKHQpICYmIChzID0gITApO1xuICAgICAgICAgICAgaS5zbyA9IHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcyAmJiB6byhuKTtcbn1cblxuZnVuY3Rpb24gR28odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBLKHQpLCBpID0gcy5xdWVyaWVzLmdldChlKTtcbiAgICBpZiAoaSkgZm9yIChjb25zdCB0IG9mIGkubGlzdGVuZXJzKSB0Lm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgcy5xdWVyaWVzLmRlbGV0ZShlKTtcbn1cblxuLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXG5mdW5jdGlvbiB6byh0KSB7XG4gICAgdC5pby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxuICpcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxuICovIGNsYXNzIEhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLmNvID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsIHNuYXBzaG90cyAoZS5nLiBmcm9tIGNhY2hlKSBtYXkgbm90IGJlIHByb3BhZ2F0ZWQgdG8gdGhlIHdyYXBwZWRcbiAgICAgICAgICogb2JzZXJ2ZXIuIFRoaXMgZmxhZyBpcyBzZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIGFjdHVhbGx5IHJhaXNlZCBhbiBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW8gPSAhMSwgdGhpcy51byA9IG51bGwsIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgb28odCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmRvY0NoYW5nZXMpIDMgLyogTWV0YWRhdGEgKi8gIT09IG4udHlwZSAmJiBlLnB1c2gobik7XG4gICAgICAgICAgICB0ID0gbmV3IFVvKHQucXVlcnksIHQuZG9jcywgdC5vbGREb2NzLCBlLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSwgdC5zeW5jU3RhdGVDaGFuZ2VkLCBcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW8gPyB0aGlzLmhvKHQpICYmICh0aGlzLmNvLm5leHQodCksIGUgPSAhMCkgOiB0aGlzLmxvKHQsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLmZvKHQpLCBcbiAgICAgICAgZSA9ICEwKSwgdGhpcy51byA9IHQsIGU7XG4gICAgfVxuICAgIG9uRXJyb3IodCkge1xuICAgICAgICB0aGlzLmNvLmVycm9yKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAgcm8odCkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMudW8gJiYgIXRoaXMuYW8gJiYgdGhpcy5sbyh0aGlzLnVvLCB0KSAmJiAodGhpcy5mbyh0aGlzLnVvKSwgZSA9ICEwKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGxvKHQsIGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSBlO1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLndvIHx8ICFuKSAmJiAoIXQuZG9jcy5pc0VtcHR5KCkgfHwgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gZSk7XG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMgb3Igd2UgYXJlIG9mZmxpbmVcbiAgICAgICAgfVxuICAgIGhvKHQpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cbiAgICAgICAgaWYgKHQuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnVvICYmIHRoaXMudW8uaGFzUGVuZGluZ1dyaXRlcyAhPT0gdC5oYXNQZW5kaW5nV3JpdGVzO1xuICAgICAgICByZXR1cm4gISghdC5zeW5jU3RhdGVDaGFuZ2VkICYmICFlKSAmJiAhMCA9PT0gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cbiAgICAgICAgfVxuICAgIGZvKHQpIHtcbiAgICAgICAgdCA9IFVvLmZyb21Jbml0aWFsRG9jdW1lbnRzKHQucXVlcnksIHQuZG9jcywgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUpLCB0aGlzLmFvID0gITAsIFxuICAgICAgICB0aGlzLmNvLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIEpvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZCA9IHQsIHRoaXMuYnl0ZUxlbmd0aCA9IGU7XG4gICAgfVxuICAgIF9vKCkge1xuICAgICAgICByZXR1cm4gXCJtZXRhZGF0YVwiIGluIHRoaXMucGF5bG9hZDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBZbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmsgPSB0O1xuICAgIH1cbiAgICBIbih0KSB7XG4gICAgICAgIHJldHVybiBYbih0aGlzLmssIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICBKbih0KSB7XG4gICAgICAgIHJldHVybiB0Lm1ldGFkYXRhLmV4aXN0cyA/IGlzKHRoaXMuaywgdC5kb2N1bWVudCwgITEpIDogR3QubmV3Tm9Eb2N1bWVudCh0aGlzLkhuKHQubWV0YWRhdGEubmFtZSksIHRoaXMuWW4odC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBZbih0KSB7XG4gICAgICAgIHJldHVybiB6bih0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyBYbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm1vID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5rID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCB0aGlzLnByb2dyZXNzID0gWm8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIHlvKHQpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSB0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCBlID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIHJldHVybiB0LnBheWxvYWQubmFtZWRRdWVyeSA/IHRoaXMucXVlcmllcy5wdXNoKHQucGF5bG9hZC5uYW1lZFF1ZXJ5KSA6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhID8gKHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgbWV0YWRhdGE6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhXG4gICAgICAgIH0pLCB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKytlKSA6IHQucGF5bG9hZC5kb2N1bWVudCAmJiAodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoIC0gMV0uZG9jdW1lbnQgPSB0LnBheWxvYWQuZG9jdW1lbnQsIFxuICAgICAgICArK2UpLCBlICE9PSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA/ICh0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA9IGUsIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSkgOiBudWxsO1xuICAgIH1cbiAgICBwbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwLCBuID0gbmV3IFlvKHRoaXMuayk7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSBpZiAocy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi5IbihzLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoZS5nZXQobikgfHwgRG4oKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IFByKHRoaXMubG9jYWxTdG9yZSwgbmV3IFlvKHRoaXMuayksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLm1vLmlkKSwgZSA9IHRoaXMucG8odGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCB2cih0aGlzLmxvY2FsU3RvcmUsIHQsIGUuZ2V0KHQubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwgbmV3IGFyKE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gWm8odCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgdGMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgZWMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIG5jIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5UbyA9IGUsIHRoaXMuRW8gPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB3aGV0aGVyIHRoZSB2aWV3IGlzIGN1cnJlbnQgd2l0aCB0aGUgYmFja2VuZC4gQSB2aWV3IGlzIGNvbnNpZGVyZWRcbiAgICAgICAgICogY3VycmVudCBhZnRlciBpdCBoYXMgc2VlbiB0aGUgY3VycmVudCBmbGFnIGZyb20gdGhlIGJhY2tlbmQgYW5kIGRpZCBub3RcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxuICAgICAgICAgKiBmaWx0ZXIgbWlzbWF0Y2gpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIFxuICAgICAgICAvKiogRG9jdW1lbnRzIGluIHRoZSB2aWV3IGJ1dCBub3QgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICAgICAgdGhpcy5JbyA9IERuKCksIFxuICAgICAgICAvKiogRG9jdW1lbnQgS2V5cyB0aGF0IGhhdmUgbG9jYWwgY2hhbmdlcyAqL1xuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gRG4oKSwgdGhpcy5BbyA9IENlKHQpLCB0aGlzLlJvID0gbmV3IExvKHRoaXMuQW8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIHJlbW90ZSBkb2N1bWVudHMgdGhhdCB0aGUgc2VydmVyIGhhcyB0b2xkIHVzIGJlbG9uZ3MgdG8gdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKiB0aGlzIHZpZXcuXG4gICAgICovICAgIGdldCBibygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzZXQgb2YgZG9jIGNoYW5nZXMsIGFwcGxpZXMgdGhlIHF1ZXJ5IGxpbWl0LCBhbmQgY29tcHV0ZXNcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XG4gICAgICogbmVlZCB0byBnbyBiYWNrIHRvIHRoZSBsb2NhbCBjYWNoZSBmb3IgbW9yZSByZXN1bHRzLiBEb2VzIG5vdCBtYWtlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgZG9jIGNoYW5nZXMgdG8gYXBwbHkgdG8gdGhpcyB2aWV3LlxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgLSBJZiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB3aXRoIGEgcmVmaWxsLCB0aGVuIHN0YXJ0XG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAgICogQHJldHVybnMgYSBuZXcgc2V0IG9mIGRvY3MsIGNoYW5nZXMsIGFuZCByZWZpbGwgZmxhZy5cbiAgICAgKi8gICAgUG8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSA/IGUudm8gOiBuZXcgQm8sIHMgPSBlID8gZS5SbyA6IHRoaXMuUm87XG4gICAgICAgIGxldCBpID0gZSA/IGUubXV0YXRlZEtleXMgOiB0aGlzLm11dGF0ZWRLZXlzLCByID0gcywgbyA9ICExO1xuICAgICAgICAvLyBUcmFjayB0aGUgbGFzdCBkb2MgaW4gYSAoZnVsbCkgbGltaXQuIFRoaXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIHNvbWVcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XG4gICAgICAgIC8vIG1lYW4gdGhlcmUgaXMgc29tZSBvdGhlciBkb2N1bWVudCBpbiB0aGUgbG9jYWwgY2FjaGUgdGhhdCBlaXRoZXIgc2hvdWxkXG4gICAgICAgIC8vIGNvbWUgKDEpIGJldHdlZW4gdGhlIG9sZCBsYXN0IGxpbWl0IGRvYyBhbmQgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGVcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxuICAgICAgICAvLyBkZWxldGVzLiBTbyB3ZSBrZWVwIHRoaXMgZG9jIGF0IHRoZSBvbGQgbGltaXQgdG8gY29tcGFyZSB0aGUgdXBkYXRlcyB0by5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xuICAgICAgICAvLyBzZXQpLCBiZWNhdXNlIHRoZXJlIHdpbGwgb25seSBiZSBhZGRzIC0tIG5vIGRlbGV0ZXMgb3IgdXBkYXRlcy5cbiAgICAgICAgY29uc3QgYyA9IHBlKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMubGFzdCgpIDogbnVsbCwgYSA9IFRlKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMuZmlyc3QoKSA6IG51bGw7XG4gICAgICAgIC8vIERyb3AgZG9jdW1lbnRzIG91dCB0byBtZWV0IGxpbWl0L2xpbWl0VG9MYXN0IHJlcXVpcmVtZW50LlxuICAgICAgICBpZiAodC5pbm9yZGVyVHJhdmVyc2FsKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IHMuZ2V0KHQpLCBoID0gRGUodGhpcy5xdWVyeSwgZSkgPyBlIDogbnVsbCwgbCA9ICEhdSAmJiB0aGlzLm11dGF0ZWRLZXlzLmhhcyh1LmtleSksIGYgPSAhIWggJiYgKGguaGFzTG9jYWxNdXRhdGlvbnMgfHwgXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNvbnNpZGVyIGNvbW1pdHRlZCBtdXRhdGlvbnMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmVcbiAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cbiAgICAgICAgICAgIHRoaXMubXV0YXRlZEtleXMuaGFzKGgua2V5KSAmJiBoLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgICAgICAgICBsZXQgZCA9ICExO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgJiYgaCkge1xuICAgICAgICAgICAgICAgIHUuZGF0YS5pc0VxdWFsKGguZGF0YSkgPyBsICE9PSBmICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMyAvKiBNZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITApIDogdGhpcy5Wbyh1LCBoKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwLCAoYyAmJiB0aGlzLkFvKGgsIGMpID4gMCB8fCBhICYmIHRoaXMuQW8oaCwgYSkgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIXUgJiYgaCA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgIH0pLCBkID0gITApIDogdSAmJiAhaCAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHVcbiAgICAgICAgICAgIH0pLCBkID0gITAsIChjIHx8IGEpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgZCAmJiAoaCA/IChyID0gci5hZGQoaCksIGkgPSBmID8gaS5hZGQodCkgOiBpLmRlbGV0ZSh0KSkgOiAociA9IHIuZGVsZXRlKHQpLCBpID0gaS5kZWxldGUodCkpKTtcbiAgICAgICAgfSkpLCBwZSh0aGlzLnF1ZXJ5KSB8fCBUZSh0aGlzLnF1ZXJ5KSkgZm9yICg7ci5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcGUodGhpcy5xdWVyeSkgPyByLmxhc3QoKSA6IHIuZmlyc3QoKTtcbiAgICAgICAgICAgIHIgPSByLmRlbGV0ZSh0LmtleSksIGkgPSBpLmRlbGV0ZSh0LmtleSksIG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgUm86IHIsXG4gICAgICAgICAgICB2bzogbixcbiAgICAgICAgICAgIEJuOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgVm8odCwgZSkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiB0Lmhhc0xvY2FsTXV0YXRpb25zICYmIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICFlLmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gdXBkYXRlTGltYm9Eb2N1bWVudHMgLSBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb25cbiAgICAgKiAgICAgICAgdGhpcyBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSAtIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgVmlld0NoYW5nZSB3aXRoIHRoZSBnaXZlbiBkb2NzLCBjaGFuZ2VzLCBhbmQgc3luYyBzdGF0ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXG4gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuUm87XG4gICAgICAgIHRoaXMuUm8gPSB0LlJvLCB0aGlzLm11dGF0ZWRLZXlzID0gdC5tdXRhdGVkS2V5cztcbiAgICAgICAgLy8gU29ydCBjaGFuZ2VzIGJhc2VkIG9uIHR5cGUgYW5kIHF1ZXJ5IGNvbXBhcmF0b3JcbiAgICAgICAgY29uc3QgaSA9IHQudm8ubm8oKTtcbiAgICAgICAgaS5zb3J0KCgodCwgZSkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICAgICAgICAgICAgICBjYXNlIDMgLyogTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG4odCkgLSBuKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LnR5cGUsIGUudHlwZSkgfHwgdGhpcy5Bbyh0LmRvYywgZS5kb2MpKSksIHRoaXMuU28obik7XG4gICAgICAgIGNvbnN0IHIgPSBlID8gdGhpcy5EbygpIDogW10sIG8gPSAwID09PSB0aGlzLklvLnNpemUgJiYgdGhpcy5jdXJyZW50ID8gMSAvKiBTeW5jZWQgKi8gOiAwIC8qIExvY2FsICovICwgYyA9IG8gIT09IHRoaXMuRW87XG4gICAgICAgIGlmICh0aGlzLkVvID0gbywgMCAhPT0gaS5sZW5ndGggfHwgYykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogbmV3IFVvKHRoaXMucXVlcnksIHQuUm8sIHMsIGksIHQubXV0YXRlZEtleXMsIDAgLyogTG9jYWwgKi8gPT09IG8sIGMsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSksXG4gICAgICAgICAgICAgICAgQ286IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQ286IHJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgcm8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gPT09IHQgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBSbzogdGhpcy5SbyxcbiAgICAgICAgICAgIHZvOiBuZXcgQm8sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIEJuOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKSkgOiB7XG4gICAgICAgICAgICBDbzogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBObyh0KSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMuVG8uaGFzKHQpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuUm8uaGFzKHQpICYmICF0aGlzLlJvLmdldCh0KS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgU28odCkge1xuICAgICAgICB0ICYmICh0LmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5UbyA9IHRoaXMuVG8uYWRkKHQpKSksIHQubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB7fSkpLCBcbiAgICAgICAgdC5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5UbyA9IHRoaXMuVG8uZGVsZXRlKHQpKSksIHRoaXMuY3VycmVudCA9IHQuY3VycmVudCk7XG4gICAgfVxuICAgIERvKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5JbztcbiAgICAgICAgdGhpcy5JbyA9IERuKCksIHRoaXMuUm8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLk5vKHQua2V5KSAmJiAodGhpcy5JbyA9IHRoaXMuSW8uYWRkKHQua2V5KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLklvLmhhcyh0KSB8fCBlLnB1c2gobmV3IGVjKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLklvLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5oYXMobikgfHwgZS5wdXNoKG5ldyB0YyhuKSk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cbiAgICAgKiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAga28odCkge1xuICAgICAgICB0aGlzLlRvID0gdC56biwgdGhpcy5JbyA9IERuKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlBvKHQuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGUsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIHhvKCkge1xuICAgICAgICByZXR1cm4gVW8uZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5SbywgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBMb2NhbCAqLyA9PT0gdGhpcy5Fbyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi9cbmNsYXNzIHNjIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIGljIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRvID0gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBTeW5jRW5naW5lYCBjb29yZGluYXRpbmcgd2l0aCBvdGhlciBwYXJ0cyBvZiBTREsuXG4gKlxuICogVGhlIHBhcnRzIG9mIFN5bmNFbmdpbmUgdGhhdCBhY3QgYXMgYSBjYWxsYmFjayB0byBSZW1vdGVTdG9yZSBuZWVkIHRvIGJlXG4gKiByZWdpc3RlcmVkIGluZGl2aWR1YWxseS4gVGhpcyBpcyBkb25lIGluIGBzeW5jRW5naW5lV3JpdGUoKWAgYW5kXG4gKiBgc3luY0VuZ2luZUxpc3RlbigpYCAoYXMgd2VsbCBhcyBgYXBwbHlQcmltYXJ5U3RhdGUoKWApIGFzIHRoZXNlIG1ldGhvZHNcbiAqIHNlcnZlIGFzIGVudHJ5IHBvaW50cyB0byBSZW1vdGVTdG9yZSdzIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi8gY2xhc3MgcmMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMucmVtb3RlU3RvcmUgPSBlLCB0aGlzLmV2ZW50TWFuYWdlciA9IG4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzLCBcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMgPSByLCB0aGlzLk9vID0ge30sIHRoaXMuTW8gPSBuZXcgemkoKHQgPT4gVmUodCkpLCB2ZSksIFxuICAgICAgICB0aGlzLkZvID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUga2V5cyBvZiBkb2N1bWVudHMgdGhhdCBhcmUgaW4gbGltYm8gZm9yIHdoaWNoIHdlIGhhdmVuJ3QgeWV0IHN0YXJ0ZWQgYVxuICAgICAgICAgKiBsaW1ibyByZXNvbHV0aW9uIHF1ZXJ5LiBUaGUgc3RyaW5ncyBpbiB0aGlzIHNldCBhcmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgICAqIGBrZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKWAgd2hlcmUgYGtleWAgaXMgYSBgRG9jdW1lbnRLZXlgIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBTZXRgIHR5cGUgd2FzIGNob3NlbiBiZWNhdXNlIGl0IHByb3ZpZGVzIGVmZmljaWVudCBsb29rdXAgYW5kIHJlbW92YWxcbiAgICAgICAgICogb2YgYXJiaXRyYXJ5IGVsZW1lbnRzIGFuZCBpdCBhbHNvIG1haW50YWlucyBpbnNlcnRpb24gb3JkZXIsIHByb3ZpZGluZyB0aGVcbiAgICAgICAgICogZGVzaXJlZCBxdWV1ZS1saWtlIEZJRk8gc2VtYW50aWNzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5MbyA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIHRhcmdldCBJRCBmb3IgZWFjaCBkb2N1bWVudCB0aGF0IGlzIGluIGxpbWJvIHdpdGggYW5cbiAgICAgICAgICogYWN0aXZlIHRhcmdldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQm8gPSBuZXcgeW4oRHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIGFjdGl2ZSBsaW1ibyByZXNvbHV0aW9uIGZvciBlYWNoXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQgSUQgdGhhdCB3YXMgc3RhcnRlZCBmb3IgdGhlIHB1cnBvc2Ugb2YgbGltYm8gcmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuVW8gPSBuZXcgTWFwLCB0aGlzLnFvID0gbmV3IFNyLCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cbiAgICAgICAgdGhpcy5LbyA9IHt9LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xuICAgICAgICB0aGlzLmpvID0gbmV3IE1hcCwgdGhpcy5RbyA9IE9pLnJlKCksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxuICAgICAgICB0aGlzLldvID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gITAgPT09IHRoaXMuV287XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcbiAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcbiAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIGluaXRpYWwgc25hcHNob3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG9jKHQsIGUpIHtcbiAgICBjb25zdCBuID0gJGModCk7XG4gICAgbGV0IHMsIGk7XG4gICAgY29uc3QgciA9IG4uTW8uZ2V0KGUpO1xuICAgIGlmIChyKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICBzID0gci50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMpLCBpID0gci52aWV3LnhvKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgVHIobi5sb2NhbFN0b3JlLCBiZShlKSksIHIgPSBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHMgPSB0LnRhcmdldElkLCBpID0gYXdhaXQgY2MobiwgZSwgcywgXCJjdXJyZW50XCIgPT09IHIpLCBuLmlzUHJpbWFyeUNsaWVudCAmJiBsbyhuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdmlldyBmb3IgYSBwcmV2aW91c2x5IHVua25vd24gcXVlcnkgYW5kIGNvbXB1dGVzIGl0cyBpbml0aWFsXG4gKiBzbmFwc2hvdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBjYyh0LCBlLCBuLCBzKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICB0LkdvID0gKGUsIG4sIHMpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBlLnZpZXcuUG8obik7XG4gICAgICAgIGkuQm4gJiYgKFxuICAgICAgICAvLyBUaGUgcXVlcnkgaGFzIGEgbGltaXQgYW5kIHNvbWUgZG9jcyB3ZXJlIHJlbW92ZWQsIHNvIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmUtcnVuIHRoZSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSB0byBtYWtlIHN1cmUgd2VcbiAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxuICAgICAgICBpID0gYXdhaXQgSXIodC5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMSkudGhlbigoKHtkb2N1bWVudHM6IHR9KSA9PiBlLnZpZXcuUG8odCwgaSkpKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzICYmIHMudGFyZ2V0Q2hhbmdlcy5nZXQoZS50YXJnZXRJZCksIG8gPSBlLnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIHIpO1xuICAgICAgICByZXR1cm4gVGModCwgZS50YXJnZXRJZCwgby5DbyksIG8uc25hcHNob3Q7XG4gICAgfSh0LCBlLCBuLCBzKTtcbiAgICBjb25zdCBpID0gYXdhaXQgSXIodC5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgciA9IG5ldyBuYyhlLCBpLnpuKSwgbyA9IHIuUG8oaS5kb2N1bWVudHMpLCBjID0geG4uY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHMgJiYgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyAhPT0gdC5vbmxpbmVTdGF0ZSksIGEgPSByLmFwcGx5Q2hhbmdlcyhvLCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIGMpO1xuICAgIFRjKHQsIG4sIGEuQ28pO1xuICAgIGNvbnN0IHUgPSBuZXcgc2MoZSwgbiwgcik7XG4gICAgcmV0dXJuIHQuTW8uc2V0KGUsIHUpLCB0LkZvLmhhcyhuKSA/IHQuRm8uZ2V0KG4pLnB1c2goZSkgOiB0LkZvLnNldChuLCBbIGUgXSksIGEuc25hcHNob3Q7XG59XG5cbi8qKiBTdG9wcyBsaXN0ZW5pbmcgdG8gdGhlIHF1ZXJ5LiAqLyBhc3luYyBmdW5jdGlvbiBhYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCksIHMgPSBuLk1vLmdldChlKSwgaSA9IG4uRm8uZ2V0KHMudGFyZ2V0SWQpO1xuICAgIGlmIChpLmxlbmd0aCA+IDEpIHJldHVybiBuLkZvLnNldChzLnRhcmdldElkLCBpLmZpbHRlcigodCA9PiAhdmUodCwgZSkpKSksIHZvaWQgbi5Nby5kZWxldGUoZSk7XG4gICAgLy8gTm8gb3RoZXIgcXVlcmllcyBhcmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQsIGNsZWFuIHVwIHRoZSBxdWVyeSBhbmQgdGhlIHRhcmdldC5cbiAgICAgICAgaWYgKG4uaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBsb2NhbCBxdWVyeSB0YXJnZXQgZmlyc3QgdG8gYWxsb3cgdXMgdG8gdmVyaWZ5XG4gICAgICAgIC8vIHdoZXRoZXIgYW55IG90aGVyIGNsaWVudCBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0LlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQocy50YXJnZXRJZCk7XG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChzLnRhcmdldElkKSB8fCBhd2FpdCBFcihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShzLnRhcmdldElkKSwgZm8obi5yZW1vdGVTdG9yZSwgcy50YXJnZXRJZCksIFxuICAgICAgICAgICAgeWMobiwgcy50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaChVaSk7XG4gICAgfSBlbHNlIHljKG4sIHMudGFyZ2V0SWQpLCBhd2FpdCBFcihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiB1Yyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IE9jKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gSyh0KSwgcyA9IGF0Lm5vdygpLCBpID0gZS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBEbigpKTtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLlduLnZuKHQsIGkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgIHIgPSBpO1xuICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgIC8vIGxhdGVyIHVzZWQgdG8gZ3VhcmFudGVlIGNvbnNpc3RlbnQgdmFsdWVzIGFuZCBwcmV2ZW50cyBmbGlja2VyXG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5uKHQsIHIuZ2V0KHQua2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT0gZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhlIGJhc2Ugc3RhdGUgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiB0aGVyZSdzIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IGNuKHQua2V5LCBlLCBXdChlLnZhbHVlLm1hcFZhbHVlKSwgWWUuZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbi5Bbi5hZGRNdXRhdGlvbkJhdGNoKHQsIHMsIG8sIGUpO1xuICAgICAgICAgICAgfSkpKSkudGhlbigodCA9PiAodC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChyKSwge1xuICAgICAgICAgICAgICAgIGJhdGNoSWQ6IHQuYmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiByXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHQuYmF0Y2hJZCksIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGxldCBzID0gdC5Lb1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgcyB8fCAocyA9IG5ldyB5bihydCkpO1xuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIG4pLCB0LktvW3QuY3VycmVudFVzZXIudG9LZXkoKV0gPSBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAocywgdC5iYXRjaElkLCBuKSwgYXdhaXQgQWMocywgdC5jaGFuZ2VzKSwgYXdhaXQgYm8ocy5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCBlID0gRm8odCwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIGhjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZ3Iobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Vby5nZXQoZSk7XG4gICAgICAgICAgICBzICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIFUodC5hZGRlZERvY3VtZW50cy5zaXplICsgdC5tb2RpZmllZERvY3VtZW50cy5zaXplICsgdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgdC5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHMuJG8gPSAhMCA6IHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBVKHMuJG8pIDogdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwICYmIChVKHMuJG8pLCBcbiAgICAgICAgICAgIHMuJG8gPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IEFjKG4sIHQsIGUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgVWkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIGxjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSyh0KTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChzLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIFJlbW90ZVN0b3JlICovID09PSBuIHx8ICFzLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcy5Nby5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHMudmlldy5ybyhlKTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgdC5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4ubGlzdGVuZXJzKSBcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0LnJvKGUpICYmIChzID0gITApO1xuICAgICAgICAgICAgfSkpLCBzICYmIHpvKG4pO1xuICAgICAgICB9KHMuZXZlbnRNYW5hZ2VyLCBlKSwgdC5sZW5ndGggJiYgcy5Pby5icih0KSwgcy5vbmxpbmVTdGF0ZSA9IGUsIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlamVjdHMgdGhlIGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldElELiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlXG4gKiBiYWNrZW5kIGZvciBhbnkgYWN0aXZlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXRJRCBjb3JyZXNwb25kcyB0byBvbmUgcHJldmlvdXNseSBpbml0aWF0ZWQgYnkgdGhlXG4gKiB1c2VyIGFzIHBhcnQgb2YgVGFyZ2V0RGF0YSBwYXNzZWQgdG8gbGlzdGVuKCkgb24gUmVtb3RlU3RvcmUuXG4gKiBAcGFyYW0gZXJyIC0gQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29uZGl0aW9uIHRoYXQgaGFzIGZvcmNlZCB0aGUgcmVqZWN0aW9uLlxuICogTmVhcmx5IGFsd2F5cyB0aGlzIHdpbGwgYmUgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSB1c2VyIGlzIG5vIGxvbmdlclxuICogYXV0aG9yaXplZCB0byBzZWUgdGhlIGRhdGEgbWF0Y2hpbmcgdGhlIHRhcmdldC5cbiAqLyBhc3luYyBmdW5jdGlvbiBmYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEsodCk7XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbik7XG4gICAgY29uc3QgaSA9IHMuVW8uZ2V0KGUpLCByID0gaSAmJiBpLmtleTtcbiAgICBpZiAocikge1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogV2UgcmVhbGx5IG9ubHkgc2hvdWxkIGRvIHRoZSBmb2xsb3dpbmcgb24gcGVybWlzc2lvblxuICAgICAgICAvLyBkZW5pZWQgZXJyb3JzLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGUgY2F1c2UgY29kZSBoZXJlLlxuICAgICAgICAvLyBJdCdzIGEgbGltYm8gZG9jLiBDcmVhdGUgYSBzeW50aGV0aWMgZXZlbnQgc2F5aW5nIGl0IHdhcyBkZWxldGVkLlxuICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiBJZGVhbGx5LCB3ZSB3b3VsZCBoYXZlIGEgbWV0aG9kIGluIHRoZSBsb2NhbFxuICAgICAgICAvLyBzdG9yZSB0byBwdXJnZSBhIGRvY3VtZW50LiBIb3dldmVyLCBpdCB3b3VsZCBiZSB0cmlja3kgdG8ga2VlcCBhbGwgb2ZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHN0b3JlJ3MgaW52YXJpYW50cyB3aXRoIGFub3RoZXIgbWV0aG9kLlxuICAgICAgICBsZXQgdCA9IG5ldyB5bihEdC5jb21wYXJhdG9yKTtcbiAgICAgICAgdCA9IHQuaW5zZXJ0KHIsIEd0Lm5ld05vRG9jdW1lbnQociwgdXQubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IERuKCkuYWRkKHIpLCBpID0gbmV3IGtuKHV0Lm1pbigpLCBcbiAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8gbmV3IE1hcCwgXG4gICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBFbihydCksIHQsIG4pO1xuICAgICAgICBhd2FpdCBoYyhzLCBpKSwgXG4gICAgICAgIC8vIFNpbmNlIHRoaXMgcXVlcnkgZmFpbGVkLCB3ZSB3b24ndCB3YW50IHRvIG1hbnVhbGx5IHVubGlzdGVuIHRvIGl0LlxuICAgICAgICAvLyBXZSBvbmx5IHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nIGFmdGVyIHdlIHN1Y2Nlc3NmdWxseSBhcHBsaWVkIHRoZVxuICAgICAgICAvLyBSZW1vdGVFdmVudC4gSWYgYGFwcGx5UmVtb3RlRXZlbnQoKWAgdGhyb3dzLCB3ZSB3YW50IHRvIHJlLWxpc3RlbiB0b1xuICAgICAgICAvLyB0aGlzIHF1ZXJ5IHdoZW4gdGhlIFJlbW90ZVN0b3JlIHJlc3RhcnRzIHRoZSBXYXRjaCBzdHJlYW0sIHdoaWNoIHNob3VsZFxuICAgICAgICAvLyByZS10cmlnZ2VyIHRoZSB0YXJnZXQgZmFpbHVyZS5cbiAgICAgICAgcy5CbyA9IHMuQm8ucmVtb3ZlKHIpLCBzLlVvLmRlbGV0ZShlKSwgSWMocyk7XG4gICAgfSBlbHNlIGF3YWl0IEVyKHMubG9jYWxTdG9yZSwgZSwgXG4gICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IHljKHMsIGUsIG4pKSkuY2F0Y2goVWkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCksIHMgPSBlLmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9yKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XG4gICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cbiAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgZ2MobiwgcywgLyplcnJvcj0qLyBudWxsKSwgbWMobiwgcyksIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShzLCBcImFja25vd2xlZGdlZFwiKSwgXG4gICAgICAgIGF3YWl0IEFjKG4sIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgVWkodCk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB3Yyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEsodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uQW4ubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KChlID0+IChVKG51bGwgIT09IGUpLCBzID0gZS5rZXlzKCksIG4uQW4ucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSkpKS5uZXh0KCgoKSA9PiBuLkFuLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5Xbi52bih0LCBzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBnYyhzLCBlLCBuKSwgbWMocywgZSksIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pLCBcbiAgICAgICAgYXdhaXQgQWMocywgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCBVaShuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgIHlvKG4ucmVtb3RlU3RvcmUpIHx8IE8oXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuQW4uZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSkpO1xuICAgICAgICB9KG4ubG9jYWxTdG9yZSk7XG4gICAgICAgIGlmICgtMSA9PT0gdCkgXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkgaWYgdGhlcmUgaXMgbm8gcGVuZGluZyB3cml0ZXMgYXQgdGhlIG1vbWVudC5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBuLmpvLmdldCh0KSB8fCBbXTtcbiAgICAgICAgcy5wdXNoKGUpLCBuLmpvLnNldCh0LCBzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBGbyh0LCBcIkluaXRpYWxpemF0aW9uIG9mIHdhaXRGb3JQZW5kaW5nV3JpdGVzKCkgb3BlcmF0aW9uIGZhaWxlZFwiKTtcbiAgICAgICAgZS5yZWplY3Qobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcbiAqIGlmIHRoZXJlIGFyZSBhbnkuXG4gKi8gZnVuY3Rpb24gbWModCwgZSkge1xuICAgICh0LmpvLmdldChlKSB8fCBbXSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQucmVzb2x2ZSgpO1xuICAgIH0pKSwgdC5qby5kZWxldGUoZSk7XG59XG5cbi8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gZ2ModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBLKHQpO1xuICAgIGxldCBpID0gcy5Lb1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXG4gICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLmdldChlKTtcbiAgICAgICAgdCAmJiAobiA/IHQucmVqZWN0KG4pIDogdC5yZXNvbHZlKCksIGkgPSBpLnJlbW92ZShlKSksIHMuS29bcy5jdXJyZW50VXNlci50b0tleSgpXSA9IGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB5Yyh0LCBlLCBuID0gbnVsbCkge1xuICAgIHQuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChlKTtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5Gby5nZXQoZSkpIHQuTW8uZGVsZXRlKHMpLCBuICYmIHQuT28uem8ocywgbik7XG4gICAgaWYgKHQuRm8uZGVsZXRlKGUpLCB0LmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICB0LnFvLnVzKGUpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5xby5jb250YWluc0tleShlKSB8fCBcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgcGModCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBjKHQsIGUpIHtcbiAgICB0LkxvLmRlbGV0ZShlLnBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXG4gICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cbiAgICBjb25zdCBuID0gdC5Cby5nZXQoZSk7XG4gICAgbnVsbCAhPT0gbiAmJiAoZm8odC5yZW1vdGVTdG9yZSwgbiksIHQuQm8gPSB0LkJvLnJlbW92ZShlKSwgdC5Vby5kZWxldGUobiksIEljKHQpKTtcbn1cblxuZnVuY3Rpb24gVGModCwgZSwgbikge1xuICAgIGZvciAoY29uc3QgcyBvZiBuKSBpZiAocyBpbnN0YW5jZW9mIHRjKSB0LnFvLmFkZFJlZmVyZW5jZShzLmtleSwgZSksIEVjKHQsIHMpOyBlbHNlIGlmIChzIGluc3RhbmNlb2YgZWMpIHtcbiAgICAgICAgTyhcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgcy5rZXkpLCB0LnFvLnJlbW92ZVJlZmVyZW5jZShzLmtleSwgZSk7XG4gICAgICAgIHQucW8uY29udGFpbnNLZXkocy5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgcGModCwgcy5rZXkpO1xuICAgIH0gZWxzZSBCKCk7XG59XG5cbmZ1bmN0aW9uIEVjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSBuLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgdC5Cby5nZXQobikgfHwgdC5Mby5oYXMocykgfHwgKE8oXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCB0LkxvLmFkZChzKSwgXG4gICAgSWModCkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24gSWModCkge1xuICAgIGZvciAoO3QuTG8uc2l6ZSA+IDAgJiYgdC5Cby5zaXplIDwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LkxvLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgdC5Mby5kZWxldGUoZSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRHQod3QuZnJvbVN0cmluZyhlKSksIHMgPSB0LlFvLm5leHQoKTtcbiAgICAgICAgdC5Vby5zZXQocywgbmV3IGljKG4pKSwgdC5CbyA9IHQuQm8uaW5zZXJ0KG4sIHMpLCBsbyh0LnJlbW90ZVN0b3JlLCBuZXcgYWkoYmUoeWUobi5wYXRoKSksIHMsIDIgLyogTGltYm9SZXNvbHV0aW9uICovICwgbnQuSSkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gQWModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBLKHQpLCBpID0gW10sIHIgPSBbXSwgbyA9IFtdO1xuICAgIHMuTW8uaXNFbXB0eSgpIHx8IChzLk1vLmZvckVhY2goKCh0LCBjKSA9PiB7XG4gICAgICAgIG8ucHVzaChzLkdvKGMsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoYy50YXJnZXRJZCwgdC5mcm9tQ2FjaGUgPyBcIm5vdC1jdXJyZW50XCIgOiBcImN1cnJlbnRcIiksIFxuICAgICAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gaHIuJG4oYy50YXJnZXRJZCwgdCk7XG4gICAgICAgICAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHMuT28uYnIoaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEsodCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB6cy5mb3JFYWNoKGUsIChlID0+IHpzLmZvckVhY2goZS5rbiwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKS5uZXh0KCgoKSA9PiB6cy5mb3JFYWNoKGUueG4sIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkpKSkpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghWnModCkpIHRocm93IHQ7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICBPKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4ucW4uZ2V0KGUpLCBzID0gdC5zbmFwc2hvdFZlcnNpb24sIGkgPSB0LndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHMpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucW4gPSBuLnFuLmluc2VydChlLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0ocy5sb2NhbFN0b3JlLCByKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFJjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbChlKSkge1xuICAgICAgICBPKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgZS50b0tleSgpKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHdyKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSBlLCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHQuam8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5yZWplY3QobmV3IFEoai5DQU5DRUxMRUQsIGUpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIHQuam8uY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UoZSwgdC5yZW1vdmVkQmF0Y2hJZHMsIHQuYWRkZWRCYXRjaElkcyksIGF3YWl0IEFjKG4sIHQuR24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYmModCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpLCBzID0gbi5Vby5nZXQoZSk7XG4gICAgaWYgKHMgJiYgcy4kbykgcmV0dXJuIERuKCkuYWRkKHMua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCB0ID0gRG4oKTtcbiAgICAgICAgY29uc3QgcyA9IG4uRm8uZ2V0KGUpO1xuICAgICAgICBpZiAoIXMpIHJldHVybiB0O1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uTW8uZ2V0KGUpO1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKHMudmlldy5ibyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxuICogZnJvbSBwZXJzaXN0ZW5jZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBQYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCksIHMgPSBhd2FpdCBJcihuLmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gZS52aWV3LmtvKHMpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBUYyhuLCBlLnRhcmdldElkLCBpLkNvKSwgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIHZjKHQpIHtcbiAgICBjb25zdCBlID0gSyh0KTtcbiAgICByZXR1cm4gUnIoZS5sb2NhbFN0b3JlKS50aGVuKCh0ID0+IEFjKGUsIHQpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIFZjKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gSyh0KSwgciA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEsodCksIHMgPSBLKG4uQW4pO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvb2t1cCBtdXRhdGlvbiBkb2N1bWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBzLlp0KHQsIGUpLm5leHQoKGUgPT4gZSA/IG4uV24udm4odCwgZSkgOiB6cy5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKTtcbiAgICBudWxsICE9PSByID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgYm8oaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgZ2MoaSwgZSwgcyB8fCBudWxsKSwgbWMoaSwgZSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgSyhLKHQpLkFuKS5lZShlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKSkgOiBCKCksIGF3YWl0IEFjKGksIHIpKSA6IFxuICAgIC8vIEEgdGhyb3R0bGVkIHRhYiBtYXkgbm90IGhhdmUgc2VlbiB0aGUgbXV0YXRpb24gYmVmb3JlIGl0IHdhcyBjb21wbGV0ZWRcbiAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxuICAgIC8vIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMuIEluIHRoaXMgY2FzZSB3ZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgLy8gc2luY2UgdGhhdCBtZWFucyB3ZSBkaWRuJ3QgYXBwbHkgdGhlIG11dGF0aW9uIGxvY2FsbHkgYXQgYWxsIChpZiB3ZVxuICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcbiAgICAvLyBzZWUgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzIHZpYSBub3JtYWwgcmVtb3RlIGRvY3VtZW50IHVwZGF0ZXNcbiAgICAvLyBhcyBhcHBsaWNhYmxlLlxuICAgIE8oXCJTeW5jRW5naW5lXCIsIFwiQ2Fubm90IGFwcGx5IG11dGF0aW9uIGJhdGNoIHdpdGggaWQ6IFwiICsgZSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBTYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgaWYgKCRjKG4pLCBPYyhuKSwgITAgPT09IGUgJiYgITAgIT09IG4uV28pIHtcbiAgICAgICAgLy8gU2Vjb25kYXJ5IHRhYnMgb25seSBtYWludGFpbiBWaWV3cyBmb3IgdGhlaXIgbG9jYWwgbGlzdGVuZXJzIGFuZCB0aGVcbiAgICAgICAgLy8gVmlld3MgaW50ZXJuYWwgc3RhdGUgbWF5IG5vdCBiZSAxMDAlIHBvcHVsYXRlZCAoaW4gcGFydGljdWxhclxuICAgICAgICAvLyBzZWNvbmRhcnkgdGFicyBkb24ndCB0cmFjayBzeW5jZWREb2N1bWVudHMsIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgY29uc2lkZXJzIHRvIGJlIGluIHRoZSB0YXJnZXQpLiBTbyB3aGVuIGEgc2Vjb25kYXJ5IGJlY29tZXNcbiAgICAgICAgLy8gcHJpbWFyeSwgd2UgbmVlZCB0byBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCB2aWV3cyBmb3IgYWxsIHRhcmdldHNcbiAgICAgICAgLy8gbWF0Y2ggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICAgIGNvbnN0IHQgPSBuLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLCBlID0gYXdhaXQgRGMobiwgdC50b0FycmF5KCkpO1xuICAgICAgICBuLldvID0gITAsIGF3YWl0IHhvKG4ucmVtb3RlU3RvcmUsICEwKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGxvKG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH0gZWxzZSBpZiAoITEgPT09IGUgJiYgITEgIT09IG4uV28pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBuLkZvLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldChpKSA/IHQucHVzaChpKSA6IGUgPSBlLnRoZW4oKCgpID0+ICh5YyhuLCBpKSwgXG4gICAgICAgICAgICBFcihuLmxvY2FsU3RvcmUsIGksIFxuICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCkpKSksIGZvKG4ucmVtb3RlU3RvcmUsIGkpO1xuICAgICAgICB9KSksIGF3YWl0IGUsIGF3YWl0IERjKG4sIHQpLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEsodCk7XG4gICAgICAgICAgICBlLlVvLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm8oZS5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgICAgICB9KSksIGUucW8uaHMoKSwgZS5VbyA9IG5ldyBNYXAsIGUuQm8gPSBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZWNvbmNpbGUgdGhlIHF1ZXJ5IHZpZXdzIG9mIHRoZSBwcm92aWRlZCBxdWVyeSB0YXJnZXRzIHdpdGggdGhlIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLiBSYWlzZXMgc25hcHNob3RzIGZvciBhbnkgY2hhbmdlcyB0aGF0IGFmZmVjdCB0aGUgbG9jYWxcbiAqIGNsaWVudCBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBvZiBhbGwgdGFyZ2V0J3MgcXVlcnkgZGF0YS5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHRhcmdldHMgLSB0aGUgbGlzdCBvZiB0YXJnZXRzIHdpdGggdmlld3MgdGhhdCBuZWVkIHRvIGJlIHJlY29tcHV0ZWRcbiAqIEBwYXJhbSB0cmFuc2l0aW9uVG9QcmltYXJ5IC0gYHRydWVgIGlmZiB0aGUgdGFiIHRyYW5zaXRpb25zIGZyb20gYSBzZWNvbmRhcnlcbiAqIHRhYiB0byBhIHByaW1hcnkgdGFiXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4pLCBuLldvID0gITEsIGF3YWl0IHhvKG4ucmVtb3RlU3RvcmUsICExKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIERjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSyh0KSwgaSA9IFtdLCByID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGNvbnN0IG4gPSBzLkZvLmdldCh0KTtcbiAgICAgICAgaWYgKG4gJiYgMCAhPT0gbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIGZldGNoIHRoZWlyIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIC8vIGZyb20gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcbiAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cbiAgICAgICAgICAgIGUgPSBhd2FpdCBUcihzLmxvY2FsU3RvcmUsIGJlKG5bMF0pKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHMuTW8uZ2V0KHQpLCBuID0gYXdhaXQgUGMocywgZSk7XG4gICAgICAgICAgICAgICAgbi5zbmFwc2hvdCAmJiByLnB1c2gobi5zbmFwc2hvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IG5ldmVyIGV4ZWN1dGVkIG9uIHRoaXMgY2xpZW50LCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBhbGxvY2F0ZSB0aGUgdGFyZ2V0IGluIExvY2FsU3RvcmUgYW5kIGluaXRpYWxpemUgYSBuZXcgVmlldy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBhd2FpdCBBcihzLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAgICAgZSA9IGF3YWl0IFRyKHMubG9jYWxTdG9yZSwgbiksIGF3YWl0IGNjKHMsIENjKG4pLCB0LCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSk7XG4gICAgICAgIH1cbiAgICAgICAgaS5wdXNoKGUpO1xuICAgIH1cbiAgICByZXR1cm4gcy5Pby5icihyKSwgaTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cbiAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcbiAqIG9iamVjdC5cbiAqXG4gKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcbiAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcbiAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxuICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBDYyh0KSB7XG4gICAgcmV0dXJuIGdlKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQub3JkZXJCeSwgdC5maWx0ZXJzLCB0LmxpbWl0LCBcIkZcIiAvKiBGaXJzdCAqLyAsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBOYyh0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgcmV0dXJuIEsoSyhlLmxvY2FsU3RvcmUpLnBlcnNpc3RlbmNlKS5UbigpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24ga2ModCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBLKHQpO1xuICAgIGlmIChpLldvKSBcbiAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXG4gICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICBPKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTsgZWxzZSBpZiAoaS5Gby5oYXMoZSkpIHN3aXRjaCAobikge1xuICAgICAgY2FzZSBcImN1cnJlbnRcIjpcbiAgICAgIGNhc2UgXCJub3QtY3VycmVudFwiOlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgUnIoaS5sb2NhbFN0b3JlKSwgcyA9IGtuLmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIFwiY3VycmVudFwiID09PSBuKTtcbiAgICAgICAgICAgIGF3YWl0IEFjKGksIHQsIHMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgIGF3YWl0IEVyKGkubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgeWMoaSwgZSwgcyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBCKCk7XG4gICAgfVxufVxuXG4vKiogQWRkcyBvciByZW1vdmVzIFdhdGNoIHRhcmdldHMgZm9yIHF1ZXJpZXMgZnJvbSBkaWZmZXJlbnQgdGFicy4gKi8gYXN5bmMgZnVuY3Rpb24geGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSAkYyh0KTtcbiAgICBpZiAocy5Xbykge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHMuRm8uaGFzKHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIE8oXCJTeW5jRW5naW5lXCIsIFwiQWRkaW5nIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IEFyKHMubG9jYWxTdG9yZSwgdCksIG4gPSBhd2FpdCBUcihzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAgICAgYXdhaXQgY2MocywgQ2MoZSksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKSwgbG8ocy5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIFxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXG4gICAgICAgIHMuRm8uaGFzKHQpICYmIFxuICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxuICAgICAgICBhd2FpdCBFcihzLmxvY2FsU3RvcmUsIHQsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgZm8ocy5yZW1vdGVTdG9yZSwgdCksIHljKHMsIHQpO1xuICAgICAgICB9KSkuY2F0Y2goVWkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gJGModCkge1xuICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgIHJldHVybiBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50ID0gaGMuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGJjLmJpbmQobnVsbCwgZSksIFxuICAgIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbiA9IGZjLmJpbmQobnVsbCwgZSksIGUuT28uYnIgPSBXby5iaW5kKG51bGwsIGUuZXZlbnRNYW5hZ2VyKSwgXG4gICAgZS5Pby56byA9IEdvLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBlO1xufVxuXG5mdW5jdGlvbiBPYyh0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gZGMuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUgPSB3Yy5iaW5kKG51bGwsIGUpLCBcbiAgICBlO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBNYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEsodCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAoYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGUuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEsodCksIHMgPSB6bihlLmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlllLmdldEJ1bmRsZU1ldGFkYXRhKHQsIGUuaWQpKSkudGhlbigodCA9PiAhIXQgJiYgdC5jcmVhdGVUaW1lLmNvbXBhcmVUbyhzKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovICh0LmxvY2FsU3RvcmUsIHMpKSByZXR1cm4gYXdhaXQgZS5jbG9zZSgpLCB2b2lkIG4uX2NvbXBsZXRlV2l0aChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXRlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBieXRlc0xvYWRlZDogdC50b3RhbEJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0ocykpO1xuICAgICAgICAgICAgbi5fdXBkYXRlUHJvZ3Jlc3MoWm8ocykpO1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBYbyhzLCB0LmxvY2FsU3RvcmUsIGUuayk7XG4gICAgICAgICAgICBsZXQgciA9IGF3YWl0IGUuSG8oKTtcbiAgICAgICAgICAgIGZvciAoO3I7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBpLnlvKHIpO1xuICAgICAgICAgICAgICAgIHQgJiYgbi5fdXBkYXRlUHJvZ3Jlc3ModCksIHIgPSBhd2FpdCBlLkhvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgLy8gVE9ETyhiLzE2MDg3NjQ0Myk6IFRoaXMgY3VycmVudGx5IHJhaXNlcyBzbmFwc2hvdHMgd2l0aFxuICAgICAgICAgICAgLy8gYGZyb21DYWNoZT1mYWxzZWAgaWYgdXNlcnMgYWxyZWFkeSBsaXN0ZW4gdG8gc29tZSBxdWVyaWVzIGFuZCBidW5kbGVzXG4gICAgICAgICAgICAvLyBoYXMgbmV3ZXIgdmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFjKHQsIG8uSW4sIFxuICAgICAgICAgICAgLyogcmVtb3RlRXZlbnQgKi8gdm9pZCAwKSwgXG4gICAgICAgICAgICAvLyBTYXZlIG1ldGFkYXRhLCBzbyBsb2FkaW5nIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHNraXAuXG4gICAgICAgICAgICBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEsodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLlllLnNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBGKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHt0fWApLCBuLl9mYWlsV2l0aCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gKiBVc2VzIEVhZ2VyR0MgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovKShzLCBlLCBuKS50aGVuKCgoKSA9PiB7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUubm90aWZ5QnVuZGxlTG9hZGVkKCk7XG4gICAgfSkpO1xufVxuXG5jbGFzcyBGYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLmsgPSBlbyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHRoaXMuSm8odCksIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLllvKHQpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zdGFydCgpLCB0aGlzLmdjU2NoZWR1bGVyID0gdGhpcy5Ybyh0KSwgdGhpcy5sb2NhbFN0b3JlID0gdGhpcy5abyh0KTtcbiAgICB9XG4gICAgWG8odCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgWm8odCkge1xuICAgICAgICByZXR1cm4gZHIodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGxyLCB0LmluaXRpYWxVc2VyLCB0aGlzLmspO1xuICAgIH1cbiAgICBZbyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgJHIoTXIua3MsIHRoaXMuayk7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcjtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIExjIGV4dGVuZHMgRmMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50YyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCksIGF3YWl0IGJyKHRoaXMubG9jYWxTdG9yZSksIGF3YWl0IHRoaXMudGMuaW5pdGlhbGl6ZSh0aGlzLCB0KSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IE9jKHRoaXMudGMuc3luY0VuZ2luZSksIGF3YWl0IGJvKHRoaXMudGMucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zbigoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICB9XG4gICAgWm8odCkge1xuICAgICAgICByZXR1cm4gZHIodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGxyLCB0LmluaXRpYWxVc2VyLCB0aGlzLmspO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgamkoZSwgdC5hc3luY1F1ZXVlKTtcbiAgICB9XG4gICAgWW8odCkge1xuICAgICAgICBjb25zdCBlID0gY3IodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gVmkud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IFZpLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgaXIodGhpcy5zeW5jaHJvbml6ZVRhYnMsIGUsIHQuY2xpZW50SWQsIG4sIHQuYXN5bmNRdWV1ZSwgWnIoKSwgdG8oKSwgdGhpcy5rLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBKbyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR3I7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyBCYyBleHRlbmRzIExjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMudGMgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRjLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBXciAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAgbWk6IFZjLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBnaToga2MuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIHlpOiB4Yy5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgVG46IE5jLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBfaTogdmMuYmluZChudWxsLCBlKVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zbigoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBhd2FpdCBTYyh0aGlzLnRjLnN5bmNFbmdpbmUsIHQpLCB0aGlzLmdjU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSkgOiB0IHx8IHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBKbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBacigpO1xuICAgICAgICBpZiAoIVdyLlB0KGUpKSB0aHJvdyBuZXcgUShqLlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IGNyKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBXcihlLCB0LmFzeW5jUXVldWUsIG4sIHQuY2xpZW50SWQsIHQuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBVYyB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gdC5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdC5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUoZSksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKGUpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcihlKSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKGUsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhdC5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IHQgPT4gbGModGhpcy5zeW5jRW5naW5lLCB0LCAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBSYy5iaW5kKG51bGwsIHRoaXMuc3luY0VuZ2luZSksIFxuICAgICAgICBhd2FpdCB4byh0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnN5bmNFbmdpbmUuaXNQcmltYXJ5Q2xpZW50KSk7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgS287XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBlbyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IChzID0gdC5kYXRhYmFzZUluZm8sIG5ldyBYcihzKSk7XG4gICAgICAgIHZhciBzO1xuICAgICAgICAvKiogUmV0dXJuIHRoZSBQbGF0Zm9ybS1zcGVjaWZpYyBjb25uZWN0aXZpdHkgbW9uaXRvci4gKi8gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG9vKHQsIGUsIG4sIHMpO1xuICAgICAgICB9KHQuYXV0aENyZWRlbnRpYWxzLCB0LmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIGUpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZSh0KSB7XG4gICAgICAgIHJldHVybiBlID0gdGhpcy5sb2NhbFN0b3JlLCBuID0gdGhpcy5kYXRhc3RvcmUsIHMgPSB0LmFzeW5jUXVldWUsIGkgPSB0ID0+IGxjKHRoaXMuc3luY0VuZ2luZSwgdCwgMCAvKiBSZW1vdGVTdG9yZSAqLyksIFxuICAgICAgICByID0gSHIuUHQoKSA/IG5ldyBIciA6IG5ldyB6ciwgbmV3IGFvKGUsIG4sIHMsIGksIHIpO1xuICAgICAgICB2YXIgZSwgbiwgcywgaSwgcjtcbiAgICAgICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovICAgIH1cbiAgICBjcmVhdGVTeW5jRW5naW5lKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgICAgIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBuZXcgcmModCwgZSwgbiwgcywgaSwgcik7XG4gICAgICAgICAgICByZXR1cm4gbyAmJiAoYy5XbyA9ICEwKSwgYztcbiAgICAgICAgfSh0aGlzLmxvY2FsU3RvcmUsIHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuZXZlbnRNYW5hZ2VyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCB0LmluaXRpYWxVc2VyLCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zLCBlKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEsodCk7XG4gICAgICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLlwiKSwgZS5Hci5hZGQoNSAvKiBTaHV0ZG93biAqLyksIGF3YWl0IGhvKGUpLCBcbiAgICAgICAgICAgIGUuSHIuc2h1dGRvd24oKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gKHJhdGhlciB0aGFuIE9mZmxpbmUpIHRvIGF2b2lkIHBvdGVudGlhbGx5XG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXG4gICAgICAgICAgICBlLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKTtcbiAgICAgICAgfSh0aGlzLnJlbW90ZVN0b3JlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvdyBtYW55IGJ5dGVzIHRvIHJlYWQgZWFjaCB0aW1lIHdoZW4gYFJlYWRhYmxlU3RyZWFtUmVhZGVyLnJlYWQoKWAgaXNcbiAqIGNhbGxlZC4gT25seSBhcHBsaWNhYmxlIGZvciBieXRlIHN0cmVhbXMgdGhhdCB3ZSBjb250cm9sIChlLmcuIHRob3NlIGJhY2tlZFxuICogYnkgYW4gVUludDhBcnJheSkuXG4gKi9cbi8qKlxuICogQnVpbGRzIGEgYEJ5dGVTdHJlYW1SZWFkZXJgIGZyb20gYSBVSW50OEFycmF5LlxuICogQHBhcmFtIHNvdXJjZSAtIFRoZSBkYXRhIHNvdXJjZSB0byB1c2UuXG4gKiBAcGFyYW0gYnl0ZXNQZXJSZWFkIC0gSG93IG1hbnkgYnl0ZXMgZWFjaCBgcmVhZCgpYCBmcm9tIHRoZSByZXR1cm5lZCByZWFkZXJcbiAqICAgICAgICB3aWxsIHJlYWQuXG4gKi9cbmZ1bmN0aW9uIHFjKHQsIGUgPSAxMDI0MCkge1xuICAgIGxldCBuID0gMDtcbiAgICAvLyBUaGUgVHlwZVNjcmlwdCBkZWZpbml0aW9uIGZvciBSZWFkYWJsZVN0cmVhbVJlYWRlciBjaGFuZ2VkLiBXZSB1c2VcbiAgICAvLyBgYW55YCBoZXJlIHRvIGFsbG93IHRoaXMgY29kZSB0byBjb21waWxlIHdpdGggZGlmZmVyZW50IHZlcnNpb25zLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQyOTcwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXN5bmMgcmVhZCgpIHtcbiAgICAgICAgICAgIGlmIChuIDwgdC5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQuc2xpY2UobiwgbiArIGUpLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gKz0gZSwgcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNhbmNlbCgpIHt9LFxuICAgICAgICByZWxlYXNlTG9jaygpIHt9LFxuICAgICAgICBjbG9zZWQ6IFByb21pc2UucmVqZWN0KFwidW5pbXBsZW1lbnRlZFwiKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIEtjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dCh0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLmVjKHRoaXMub2JzZXJ2ZXIubmV4dCwgdCk7XG4gICAgfVxuICAgIGVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMuZWModGhpcy5vYnNlcnZlci5lcnJvciwgdCkgOiBjb25zb2xlLmVycm9yKFwiVW5jYXVnaHQgRXJyb3IgaW4gc25hcHNob3QgbGlzdGVuZXI6XCIsIHQpO1xuICAgIH1cbiAgICBuYygpIHtcbiAgICAgICAgdGhpcy5tdXRlZCA9ICEwO1xuICAgIH1cbiAgICBlYyh0LCBlKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXRlZCB8fCB0KGUpO1xuICAgICAgICB9KSwgMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGJ1bmRsZS5cbiAqXG4gKiBUYWtlcyBhIGJ1bmRsZSBzdHJlYW0gb3IgYnVmZmVyLCBhbmQgcHJlc2VudHMgYWJzdHJhY3Rpb25zIHRvIHJlYWQgYnVuZGxlZFxuICogZWxlbWVudHMgb3V0IG9mIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQuXG4gKi8gY2xhc3MgamMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmVhZGVyIHRvIHJlYWQgZnJvbSB1bmRlcmx5aW5nIGJpbmFyeSBidW5kbGUgZGF0YSBzb3VyY2UuICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLnNjID0gdCwgdGhpcy5rID0gZSwgXG4gICAgICAgIC8qKiBDYWNoZWQgYnVuZGxlIG1ldGFkYXRhLiAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IFcsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMuaWMgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMucmMoKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHQgJiYgdC5fbygpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKHQucGF5bG9hZC5tZXRhZGF0YSkgOiB0aGlzLm1ldGFkYXRhLnJlamVjdChuZXcgRXJyb3IoYFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBidW5kbGUgaXMgbm90IGEgbWV0YWRhdGEsIGl0IGlzXFxuICAgICAgICAgICAgICR7SlNPTi5zdHJpbmdpZnkobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5wYXlsb2FkKX1gKSk7XG4gICAgICAgIH0pLCAodCA9PiB0aGlzLm1ldGFkYXRhLnJlamVjdCh0KSkpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2MuY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5wcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBIbygpIHtcbiAgICAgICAgLy8gTWFrZXMgc3VyZSBtZXRhZGF0YSBpcyByZWFkIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRNZXRhZGF0YSgpLCB0aGlzLnJjKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGhlYWQgb2YgaW50ZXJuYWwgYnVmZmVyLCBhbmQgcHVsbGluZyBtb3JlIGRhdGEgZnJvbVxuICAgICAqIHVuZGVybHlpbmcgc3RyZWFtIGlmIGEgY29tcGxldGUgZWxlbWVudCBjYW5ub3QgYmUgZm91bmQsIHVudGlsIGFuXG4gICAgICogZWxlbWVudChpbmNsdWRpbmcgdGhlIHByZWZpeGVkIGxlbmd0aCBhbmQgdGhlIEpTT04gc3RyaW5nKSBpcyBmb3VuZC5cbiAgICAgKlxuICAgICAqIE9uY2UgYSBjb21wbGV0ZSBlbGVtZW50IGlzIHJlYWQsIGl0IGlzIGRyb3BwZWQgZnJvbSBpbnRlcm5hbCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGVpdGhlciB0aGUgYnVuZGxlZCBlbGVtZW50LCBvciBudWxsIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mXG4gICAgICogdGhlIHN0cmVhbS5cbiAgICAgKi8gICAgYXN5bmMgcmMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLm9jKCk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaWMuZGVjb2RlKHQpLCBuID0gTnVtYmVyKGUpO1xuICAgICAgICBpc05hTihuKSAmJiB0aGlzLmNjKGBsZW5ndGggc3RyaW5nICgke2V9KSBpcyBub3QgdmFsaWQgbnVtYmVyYCk7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLmFjKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEpvKEpTT04ucGFyc2UocyksIHQubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIHVjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KCh0ID0+IHQgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBvYygpIHtcbiAgICAgICAgZm9yICg7dGhpcy51YygpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5oYygpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy51YygpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgdCA8IDAgJiYgdGhpcy5jYyhcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgYWModCkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCB0OyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGMoKSAmJiB0aGlzLmNjKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmljLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIGNjKHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLnNjLmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHt0fWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIGhjKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zYy5yZWFkKCk7XG4gICAgICAgIGlmICghdC5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgdC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZS5zZXQodGhpcy5idWZmZXIpLCBlLnNldCh0LnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXG4gKi9cbmNsYXNzIFFjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdCwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAodCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuXCIpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEsodCksIHMgPSBlcyhuLmspICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBlLm1hcCgodCA9PiBZbihuLmssIHQpKSlcbiAgICAgICAgICAgIH0sIHIgPSBhd2FpdCBuLmppKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgcywgaSksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcnMobi5rLCB0KTtcbiAgICAgICAgICAgICAgICBvLnNldChlLmtleS50b1N0cmluZygpLCBlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIFUoISFlKSwgYy5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpLCBjO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB0aGlzLnJlY29yZFZlcnNpb24odCkpKSwgZTtcbiAgICB9XG4gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IGxuKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5kZWxldGUoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBEdC5mcm9tUGF0aChlKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IGZuKG4sIHRoaXMucHJlY29uZGl0aW9uKG4pKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEsodCksIHMgPSBlcyhuLmspICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgodCA9PiBjcyhuLmssIHQpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLkJpKFwiQ29tbWl0XCIsIHMsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIGUgPSB0LnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0LmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBCKCk7XG4gICAgICAgICAgICAvLyBGb3IgZGVsZXRlZCBkb2NzLCB3ZSBtdXN0IHVzZSBiYXNlVmVyc2lvbiAwIHdoZW4gd2Ugb3ZlcndyaXRlIHRoZW0uXG4gICAgICAgICAgICBlID0gdXQubWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LmtleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKG4pKSBcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgdGhyb3cgbmV3IFEoai5BQk9SVEVELCBcIkRvY3VtZW50IHZlcnNpb24gY2hhbmdlZCBiZXR3ZWVuIHR3byByZWFkcy5cIik7XG4gICAgICAgIH0gZWxzZSB0aGlzLnJlYWRWZXJzaW9ucy5zZXQodC5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBkb2N1bWVudCB3aGVuIGl0IHdhcyByZWFkIGluIHRoaXMgdHJhbnNhY3Rpb24sXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXG4gICAgICovICAgIHByZWNvbmRpdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUgPyBZZS51cGRhdGVUaW1lKGUpIDogWWUubm9uZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjb25kaXRpb24gZm9yIGEgZG9jdW1lbnQgaWYgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUuXG4gICAgICovICAgIHByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxuICAgICAgICAvLyByZWFkIHRpbWUgYW5kIGV4aXN0ZW5jZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlKSB7XG4gICAgICAgICAgICBpZiAoZS5pc0VxdWFsKHV0Lm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBZZS51cGRhdGVUaW1lKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvY3VtZW50IHdhcyBub3QgcmVhZCwgc28gd2UganVzdCB1c2UgdGhlIHByZWNvbmRpdGlvbnMgZm9yIGEgYmxpbmRcbiAgICAgICAgLy8gdXBkYXRlLlxuICAgICAgICByZXR1cm4gWWUuZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUodCkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKHQpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovXG5jbGFzcyBXYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLmRhdGFzdG9yZSA9IGUsIHRoaXMudXBkYXRlRnVuY3Rpb24gPSBuLCB0aGlzLmRlZmVycmVkID0gcywgXG4gICAgICAgIHRoaXMubGMgPSA1LCB0aGlzLnVyID0gbmV3IG5vKHRoaXMuYXN5bmNRdWV1ZSwgXCJ0cmFuc2FjdGlvbl9yZXRyeVwiIC8qIFRyYW5zYWN0aW9uUmV0cnkgKi8pO1xuICAgIH1cbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi8gICAgcnVuKCkge1xuICAgICAgICB0aGlzLmxjIC09IDEsIHRoaXMuZmMoKTtcbiAgICB9XG4gICAgZmMoKSB7XG4gICAgICAgIHRoaXMudXIuWmkoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUWModGhpcy5kYXRhc3RvcmUpLCBlID0gdGhpcy5kYyh0KTtcbiAgICAgICAgICAgIGUgJiYgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdC5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndjKHQpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndjKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRjKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKHQpO1xuICAgICAgICAgICAgcmV0dXJuICF2dChlKSAmJiBlLmNhdGNoICYmIGUudGhlbiA/IGUgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdjKHQpIHtcbiAgICAgICAgdGhpcy5sYyA+IDAgJiYgdGhpcy5fYyh0KSA/ICh0aGlzLmxjIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5mYygpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QodCk7XG4gICAgfVxuICAgIF9jKHQpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IGUgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IGUgfHwgIW1uKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEZpcmVzdG9yZUNsaWVudCBpcyBhIHRvcC1sZXZlbCBjbGFzcyB0aGF0IGNvbnN0cnVjdHMgYW5kIG93bnMgYWxsIG9mIHRoZVxuICogcGllY2VzIG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZVxuICogYXN5bmMgcXVldWUgdGhhdCBpcyBzaGFyZWQgYnkgYWxsIG9mIHRoZSBvdGhlciBjb21wb25lbnRzIGluIHRoZSBzeXN0ZW0uXG4gKi9cbmNsYXNzIEdjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBcbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXG4gICAgICovXG4gICAgbiwgcykge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMuZGF0YWJhc2VJbmZvID0gcywgXG4gICAgICAgIHRoaXMudXNlciA9IEMuVU5BVVRIRU5USUNBVEVELCB0aGlzLmNsaWVudElkID0gaXQuQSgpLCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnN0YXJ0KG4sIChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIE8oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCB1c2VyPVwiLCB0LnVpZCksIGF3YWl0IHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lcih0KSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSB0O1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBSZWdpc3RlciBhbiBlbXB0eSBjcmVkZW50aWFscyBjaGFuZ2UgbGlzdGVuZXIgdG8gYWN0aXZhdGUgdG9rZW4gcmVmcmVzaC5cbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnN0YXJ0KG4sICgoKSA9PiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRDb25maWd1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmNRdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxuICAgICAgICAgICAgZGF0YWJhc2VJbmZvOiB0aGlzLmRhdGFiYXNlSW5mbyxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aENyZWRlbnRpYWxzOiB0aGlzLmF1dGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGFwcENoZWNrQ3JlZGVudGlhbHM6IHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGF0IHRoZSBjbGllbnQgaGFzIG5vdCBiZWVuIHRlcm1pbmF0ZWQuIEVuc3VyZXMgdGhhdCBvdGhlciBtZXRob2RzIG9uXG4gICAgICogdGhpcyBjbGFzcyBjYW5ub3QgYmUgY2FsbGVkIGFmdGVyIHRoZSBjbGllbnQgaXMgdGVybWluYXRlZC5cbiAgICAgKi8gICAgdmVyaWZ5Tm90VGVybWluYXRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXN5bmNRdWV1ZS5pc1NodXR0aW5nRG93bikgdGhyb3cgbmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW50ZXJSZXN0cmljdGVkTW9kZSgpO1xuICAgICAgICBjb25zdCB0ID0gbmV3IFc7XG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5vZmZsaW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLm9mZmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCBcbiAgICAgICAgICAgICAgICAvLyBUaGUgY3JlZGVudGlhbHMgcHJvdmlkZXIgbXVzdCBiZSB0ZXJtaW5hdGVkIGFmdGVyIHNodXR0aW5nIGRvd24gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmcgYXV0aFxuICAgICAgICAgICAgICAgIC8vIHRva2Vucy5cbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEZvKGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHpjKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgd3IoZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQub2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBIYyh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgSmModCk7XG4gICAgTyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgICAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgICAgIGNvbnN0IHMgPSB5byhuKTtcbiAgICAgICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgICAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAgICAgLy8gbmV3IG11dGF0aW9ucyBmcm9tIHRoZSBMb2NhbFN0b3JlIChzaW5jZSBtdXRhdGlvbnMgYXJlIHBlci11c2VyKS5cbiAgICAgICAgICAgICAgICBuLkdyLmFkZCgzIC8qIENyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBobyhuKSwgcyAmJiBcbiAgICAgICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICBuLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgYXdhaXQgbi5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZShlKSwgXG4gICAgICAgIG4uR3IuZGVsZXRlKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IHVvKG4pO1xuICAgIH0oZS5yZW1vdGVTdG9yZSwgdCkpKSwgdC5vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gSmModCkge1xuICAgIHJldHVybiB0Lm9mZmxpbmVDb21wb25lbnRzIHx8IChPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IHpjKHQsIG5ldyBGYykpLCB0Lm9mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBZYyh0KSB7XG4gICAgcmV0dXJuIHQub25saW5lQ29tcG9uZW50cyB8fCAoTyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IEhjKHQsIG5ldyBVYykpLCB0Lm9ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIFhjKHQpIHtcbiAgICByZXR1cm4gSmModCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIFpjKHQpIHtcbiAgICByZXR1cm4gSmModCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gdGEodCkge1xuICAgIHJldHVybiBZYyh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gZWEodCkge1xuICAgIHJldHVybiBZYyh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBuYSh0KSB7XG4gICAgY29uc3QgZSA9IGF3YWl0IFljKHQpLCBuID0gZS5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSBvYy5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IGFjLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gc2EodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgWGModCksIG4gPSBhd2FpdCB0YSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITApLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gSyh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLkdyLmRlbGV0ZSgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIHVvKGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gaWEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgWGModCksIG4gPSBhd2FpdCB0YSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gSyh0KTtcbiAgICAgICAgICAgIGUuR3IuYWRkKDAgLyogVXNlckRpc2FibGVkICovKSwgYXdhaXQgaG8oZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5Kci5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiByYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBXO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gSyh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlduLlJuKHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgUShqLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0gRm8odCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IFpjKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG9hKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgVztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBLYyh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IFFvKHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIWMgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBRKGouVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogYyAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IFEoai5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBIbyh5ZShuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIHdvOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGpvKHQsIG8pO1xuICAgIH0oYXdhaXQgbmEodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBXO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IElyKHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgbmMoZSwgcy56biksIHIgPSBpLlBvKHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IEZvKHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgWmModCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gYWEodCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBXO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IEtjKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gUW8odCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgUShqLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IEhvKG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgd286ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gam8odCwgbyk7XG4gICAgfShhd2FpdCBuYSh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHVhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IEtjKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBLKHQpLmlvLmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IG5hKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4ubmMoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIEsodCkuaW8uZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IG5hKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBoYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBXO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFljKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgbmV3IFdjKHQuYXN5bmNRdWV1ZSwgcywgZSwgbikucnVuKCk7XG4gICAgfSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGxhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyAobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBqYyh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBxYyh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBxYyhuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCBlbyhlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgTWMoYXdhaXQgZWEodCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gZmEodCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSyh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlllLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IFpjKHQpLCBlKSkpO1xufVxuXG5jbGFzcyBkYSB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gYXBwSWQgLSBUaGUgRmlyZWJhc2UgQXBwIElkLlxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxuICAgICAqIEBwYXJhbSBob3N0IC0gVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0gc3NsIC0gV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGF1dG9EZXRlY3RMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBkZXRlY3RCdWZmZXJpbmdQcm94eVxuICAgICAqIG9wdGlvbiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBjKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuYXBwSWQgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gcywgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gciwgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGM7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIHdhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gdCwgdGhpcy5kYXRhYmFzZSA9IGUgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2Ygd2EgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBfYSA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gbWEodCwgZSwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke2V9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGdhKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoITAgPT09IGUgJiYgITAgPT09IHMpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYCR7dH0gYW5kICR7bn0gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGRvY3VtZW50IChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXQgY29udGFpbnNcbiAqIGFuIGV2ZW4gbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24geWEodCkge1xuICAgIGlmICghRHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIHBhKHQpIHtcbiAgICBpZiAoRHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cbiAqL1xuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cbmZ1bmN0aW9uIFRhKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIFwibnVsbFwiO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdC5sZW5ndGggPiAyMCAmJiAodCA9IGAke3Quc3Vic3RyaW5nKDAsIDIwKX0uLi5gKSwgXG4gICAgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiBcIlwiICsgdDtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gXCJhbiBhcnJheVwiO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKiogdHJ5IHRvIGdldCB0aGUgY29uc3RydWN0b3IgbmFtZSBmb3IgYW4gb2JqZWN0LiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICh0LmNvbnN0cnVjdG9yKSByZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAsIG9wdGlvbmFsbHkgdW53cmFwcGluZyBDb21wYXQgdHlwZXMgdG8gZXhwb3NlIHRoZVxuICogdW5kZXJseWluZyBpbnN0YW5jZS4gVGhyb3dzIGlmICBgb2JqYCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYFRgLlxuICpcbiAqIFRoaXMgY2FzdCBpcyB1c2VkIGluIHRoZSBMaXRlIGFuZCBGdWxsIFNESyB0byB2ZXJpZnkgaW5zdGFuY2UgdHlwZXMgZm9yXG4gKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBwdWJsaWMgQVBJLlxuICogQGludGVybmFsXG4gKi8gKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUgPyBgYSBjdXN0b20gJHtlfSBvYmplY3RgIDogXCJhbiBvYmplY3RcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ID8gXCJhIGZ1bmN0aW9uXCIgOiBCKCk7XG59XG5cbmZ1bmN0aW9uIEVhKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICBpZiAoXCJfZGVsZWdhdGVcIiBpbiB0ICYmIChcbiAgICAvLyBVbndyYXAgQ29tcGF0IHR5cGVzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0ID0gdC5fZGVsZWdhdGUpLCAhKHQgaW5zdGFuY2VvZiBlKSkge1xuICAgICAgICBpZiAoZS5uYW1lID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBUYSh0KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7ZS5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gSWEodCwgZSkge1xuICAgIGlmIChlIDw9IDApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG4vKipcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcbiAqIHVzZXItc3VwcGxpZWQgYEZpcmVzdG9yZVNldHRpbmdzYCBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cbiAqL1xuY2xhc3MgQWEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5zc2wpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IHQuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAoZSA9IHQuc3NsKSB8fCB2b2lkIDAgPT09IGUgfHwgZTtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSB0LmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHZvaWQgMCA9PT0gdC5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0LmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXMsIGdhKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IHQuaG9zdCAmJiB0aGlzLnNzbCA9PT0gdC5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gdC5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqLyBjbGFzcyBSYSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuX2FwcENoZWNrQ3JlZGVudGlhbHMgPSBuLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIEZpcmVzdG9yZSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlLWxpdGVcIiwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIihsaXRlKVwiLCB0aGlzLl9zZXR0aW5ncyA9IG5ldyBBYSh7fSksIFxuICAgICAgICB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICExLCB0IGluc3RhbmNlb2Ygd2EgPyB0aGlzLl9kYXRhYmFzZUlkID0gdCA6ICh0aGlzLl9hcHAgPSB0LCBcbiAgICAgICAgdGhpcy5fZGF0YWJhc2VJZCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5hcHBseSh0Lm9wdGlvbnMsIFsgXCJwcm9qZWN0SWRcIiBdKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCAnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgd2EodC5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyAodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGBGaXJlc3RvcmVgIHNlcnZpY2VcbiAgICAgKiBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGFwcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hcHApIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwO1xuICAgIH1cbiAgICBnZXQgX2luaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW47XG4gICAgfVxuICAgIGdldCBfdGVybWluYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgX3NldFNldHRpbmdzKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzRnJvemVuKSB0aHJvdyBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IG1vZGlmeSBzZXR0aW5ncyBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBBYSh0KSwgdm9pZCAwICE9PSB0LmNyZWRlbnRpYWxzICYmICh0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBuZXcgejtcbiAgICAgICAgICAgIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJnYXBpXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY2xpZW50O1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHJlYWxseSBpcyBhIEdhcGkgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVSghKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSB8fCAhZS5hdXRoIHx8ICFlLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSkpLCBcbiAgICAgICAgICAgICAgICBuZXcgWChlLCB0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odC5jcmVkZW50aWFscykpO1xuICAgIH1cbiAgICBfZ2V0U2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2ZyZWV6ZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMCwgdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hdGVUYXNrIHx8ICh0aGlzLl90ZXJtaW5hdGVUYXNrID0gdGhpcy5fdGVybWluYXRlKCkpLCB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYEZpcmVzdG9yZWAgaW5zdGFuY2UuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwcDogdGhpcy5fYXBwLFxuICAgICAgICAgICAgZGF0YWJhc2VJZDogdGhpcy5fZGF0YWJhc2VJZCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLl9zZXR0aW5nc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGVzIGFsbCBjb21wb25lbnRzIHVzZWQgYnkgdGhpcyBjbGllbnQuIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBtZXRob2QgdG8gY2xlYW4gdXAgdGhlaXIgb3duIGRlcGVuZGVuY2llcywgYnV0IG11c3QgYWxzbyBjYWxsIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBPbmx5IGV2ZXIgY2FsbGVkIG9uY2UuXG4gICAgICovICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGluc3RhbmNlLiBNdXN0IGJlIGNhbGxlZFxuICogd2hlbiB0aGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgdGVybWluYXRlZC5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9hLmdldCh0KTtcbiAgICAgICAgICAgIGUgJiYgKE8oXCJDb21wb25lbnRQcm92aWRlclwiLCBcIlJlbW92aW5nIERhdGFzdG9yZVwiKSwgX2EuZGVsZXRlKHQpLCBlLnRlcm1pbmF0ZSgpKTtcbiAgICAgICAgfSh0aGlzKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiYSh0LCBlLCBuLCBzID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCByID0gKHQgPSBFYSh0LCBSYSkpLl9nZXRTZXR0aW5ncygpO1xuICAgIGlmIChcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiICE9PSByLmhvc3QgJiYgci5ob3N0ICE9PSBlICYmIEYoXCJIb3N0IGhhcyBiZWVuIHNldCBpbiBib3RoIHNldHRpbmdzKCkgYW5kIHVzZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkXCIpLCBcbiAgICB0Ll9zZXRTZXR0aW5ncyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHIpLCB7XG4gICAgICAgIGhvc3Q6IGAke2V9OiR7bn1gLFxuICAgICAgICBzc2w6ICExXG4gICAgfSkpLCBzLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgbGV0IGUsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBzLm1vY2tVc2VyVG9rZW4pIGUgPSBzLm1vY2tVc2VyVG9rZW4sIG4gPSBDLk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICBlID0gY3JlYXRlTW9ja1VzZXJUb2tlbihzLm1vY2tVc2VyVG9rZW4sIG51bGwgPT09IChpID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzLm1vY2tVc2VyVG9rZW4uc3ViIHx8IHMubW9ja1VzZXJUb2tlbi51c2VyX2lkO1xuICAgICAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgQyhyKTtcbiAgICAgICAgfVxuICAgICAgICB0Ll9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgSChuZXcgRyhlLCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBQYSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWYSh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IFBhKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeWAgcmVmZXJzIHRvIGEgcXVlcnkgd2hpY2ggeW91IGNhbiByZWFkIG9yIGxpc3RlbiB0by4gWW91IGNhbiBhbHNvXG4gKiBjb25zdHJ1Y3QgcmVmaW5lZCBgUXVlcnlgIG9iamVjdHMgYnkgYWRkaW5nIGZpbHRlcnMgYW5kIG9yZGVyaW5nLlxuICovIGNsYXNzIHZhIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBsaXRlIHZlcnNpb24gb2YgdGhlIFF1ZXJ5IGNsYXNzIGluIHRoZSBtYWluIFNESy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fcXVlcnkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJxdWVyeVwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IHZhKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9xdWVyeSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayBxdWVyeX0pLlxuICovIGNsYXNzIFZhIGV4dGVuZHMgdmEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCB5ZShuKSksIHRoaXMuX3BhdGggPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJjb2xsZWN0aW9uXCI7XG4gICAgfVxuICAgIC8qKiBUaGUgY29sbGVjdGlvbidzIGlkZW50aWZpZXIuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24gKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmluZyBgRG9jdW1lbnRSZWZlcmVuY2VgIGlmIHRoaXMgaXMgYVxuICAgICAqIHN1YmNvbGxlY3Rpb24uIElmIHRoaXMgaXNuJ3QgYSBzdWJjb2xsZWN0aW9uLCB0aGUgcmVmZXJlbmNlIGlzIG51bGwuXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9wYXRoLnBvcExhc3QoKTtcbiAgICAgICAgcmV0dXJuIHQuaXNFbXB0eSgpID8gbnVsbCA6IG5ldyBQYSh0aGlzLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IER0KHQpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVmEodGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX3BhdGgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU2EodCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBtYShcImNvbGxlY3Rpb25cIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgUmEpIHtcbiAgICAgICAgY29uc3QgcyA9IHd0LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiBwYShzKSwgbmV3IFZhKHQsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcyk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIFBhIHx8IHQgaW5zdGFuY2VvZiBWYSkpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZCh3dC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIHBhKHMpLCBuZXcgVmEodC5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVsaXRlKTogQ29uc2lkZXIgdXNpbmcgRXJyb3JGYWN0b3J5IC1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi8wMTMxZTFmL3BhY2thZ2VzL3V0aWwvc3JjL2Vycm9ycy50cyNMMTA2XG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYFF1ZXJ5YCBpbnN0YW5jZSB0aGF0IGluY2x1ZGVzIGFsbCBkb2N1bWVudHMgaW4gdGhlXG4gKiBkYXRhYmFzZSB0aGF0IGFyZSBjb250YWluZWQgaW4gYSBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGVcbiAqIGdpdmVuIGBjb2xsZWN0aW9uSWRgLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBgRmlyZXN0b3JlYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjb2xsZWN0aW9uSWQgLSBJZGVudGlmaWVzIHRoZSBjb2xsZWN0aW9ucyB0byBxdWVyeSBvdmVyLiBFdmVyeVxuICogY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhpcyBJRCBhcyB0aGUgbGFzdCBzZWdtZW50IG9mIGl0cyBwYXRoXG4gKiB3aWxsIGJlIGluY2x1ZGVkLiBDYW5ub3QgY29udGFpbiBhIHNsYXNoLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYFF1ZXJ5YC5cbiAqLyBmdW5jdGlvbiBEYSh0LCBlKSB7XG4gICAgaWYgKHQgPSBFYSh0LCBSYSksIG1hKFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiY29sbGVjdGlvbiBpZFwiLCBlKSwgZS5pbmRleE9mKFwiL1wiKSA+PSAwKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJyR7ZX0nIHBhc3NlZCB0byBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuYCk7XG4gICAgcmV0dXJuIG5ldyB2YSh0LCBcbiAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIFxuICAgIC8qKlxuICogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzXG4gKiB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuXG4gKi9cbiAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgbWUod3QuZW1wdHlQYXRoKCksIHQpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBDYSh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIFxuICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcbiAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxuICAgIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgKGUgPSBpdC5BKCkpLCBtYShcImRvY1wiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBSYSkge1xuICAgICAgICBjb25zdCBzID0gd3QuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIHlhKHMpLCBuZXcgUGEodCwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IER0KHMpKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgUGEgfHwgdCBpbnN0YW5jZW9mIFZhKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKHd0LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4geWEocyksIG5ldyBQYSh0LmZpcmVzdG9yZSwgdCBpbnN0YW5jZW9mIFZhID8gdC5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgRHQocykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gTmEodCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCAodCBpbnN0YW5jZW9mIFBhIHx8IHQgaW5zdGFuY2VvZiBWYSkgJiYgKGUgaW5zdGFuY2VvZiBQYSB8fCBlIGluc3RhbmNlb2YgVmEpICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgdC5wYXRoID09PSBlLnBhdGggJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBrYSh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgaW5zdGFuY2VvZiB2YSAmJiBlIGluc3RhbmNlb2YgdmEgJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiB2ZSh0Ll9xdWVyeSwgZS5fcXVlcnkpICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHhhIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXG4gICAgICAgIHRoaXMubWMgPSBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIC8vIEEgbGlzdCBvZiByZXRyeWFibGUgb3BlcmF0aW9ucy4gUmV0cnlhYmxlIG9wZXJhdGlvbnMgYXJlIHJ1biBpbiBvcmRlciBhbmRcbiAgICAgICAgLy8gcmV0cmllZCB3aXRoIGJhY2tvZmYuXG4gICAgICAgIHRoaXMuZ2MgPSBbXSwgXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXG4gICAgICAgIHRoaXMueWMgPSAhMSwgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxuICAgICAgICB0aGlzLlRjID0gW10sIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIHRoaXMuRWMgPSBudWxsLCBcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXG4gICAgICAgIHRoaXMuSWMgPSAhMSwgXG4gICAgICAgIC8vIEVuYWJsZWQgZHVyaW5nIHNodXRkb3duIG9uIFNhZmFyaSB0byBwcmV2ZW50IGZ1dHVyZSBhY2Nlc3MgdG8gSW5kZXhlZERCLlxuICAgICAgICB0aGlzLkFjID0gITEsIFxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxuICAgICAgICB0aGlzLlJjID0gW10sIFxuICAgICAgICAvLyBCYWNrb2ZmIHRpbWVyIHVzZWQgdG8gc2NoZWR1bGUgcmV0cmllcyBmb3IgcmV0cnlhYmxlIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy51ciA9IG5ldyBubyh0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogQXN5bmNRdWV1ZVJldHJ5ICovKSwgXG4gICAgICAgIC8vIFZpc2liaWxpdHkgaGFuZGxlciB0aGF0IHRyaWdnZXJzIGFuIGltbWVkaWF0ZSByZXRyeSBvZiBhbGwgcmV0cnlhYmxlXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIE1lYW50IHRvIHNwZWVkIHVwIHJlY292ZXJ5IHdoZW4gd2UgcmVnYWluIGZpbGUgc3lzdGVtIGFjY2Vzc1xuICAgICAgICAvLyBhZnRlciBwYWdlIGNvbWVzIGludG8gZm9yZWdyb3VuZC5cbiAgICAgICAgdGhpcy5iYyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0bygpO1xuICAgICAgICAgICAgdCAmJiBPKFwiQXN5bmNRdWV1ZVwiLCBcIlZpc2liaWxpdHkgc3RhdGUgY2hhbmdlZCB0byBcIiArIHQudmlzaWJpbGl0eVN0YXRlKSwgdGhpcy51ci5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0ID0gdG8oKTtcbiAgICAgICAgdCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lciAmJiB0LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuYmMpO1xuICAgIH1cbiAgICBnZXQgaXNTaHV0dGluZ0Rvd24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnljO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxuICAgICAqIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxuICAgICAqLyAgICBlbnF1ZXVlQW5kRm9yZ2V0KHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmVucXVldWUodCk7XG4gICAgfVxuICAgIGVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKHQpIHtcbiAgICAgICAgdGhpcy5QYygpLCBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLnZjKHQpO1xuICAgIH1cbiAgICBlbnRlclJlc3RyaWN0ZWRNb2RlKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnljKSB7XG4gICAgICAgICAgICB0aGlzLnljID0gITAsIHRoaXMuQWMgPSB0IHx8ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRvKCk7XG4gICAgICAgICAgICBlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5yZW1vdmVFdmVudExpc3RlbmVyICYmIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5iYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5xdWV1ZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLlBjKCksIHRoaXMueWMpIFxuICAgICAgICAvLyBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIG5ldmVyIHJlc29sdmVzLlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCgpID0+IHt9KSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRlZmVycmVkIFByb21pc2UgdGhhdCB3ZSBjYW4gcmV0dXJuIHRvIHRoZSBjYWxsZWUuIFRoaXNcbiAgICAgICAgLy8gYWxsb3dzIHVzIHRvIHJldHVybiBhIFwiaGFuZ2luZyBQcm9taXNlXCIgb25seSB0byB0aGUgY2FsbGVlIGFuZCBzdGlsbFxuICAgICAgICAvLyBhZHZhbmNlIHRoZSBxdWV1ZSBldmVuIHdoZW4gdGhlIG9wZXJhdGlvbiBpcyBub3QgcnVuLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVztcbiAgICAgICAgcmV0dXJuIHRoaXMudmMoKCgpID0+IHRoaXMueWMgJiYgdGhpcy5BYyA/IFByb21pc2UucmVzb2x2ZSgpIDogKHQoKS50aGVuKGUucmVzb2x2ZSwgZS5yZWplY3QpLCBcbiAgICAgICAgZS5wcm9taXNlKSkpLnRoZW4oKCgpID0+IGUucHJvbWlzZSkpO1xuICAgIH1cbiAgICBlbnF1ZXVlUmV0cnlhYmxlKHQpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5nYy5wdXNoKHQpLCB0aGlzLlZjKCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIG5leHQgb3BlcmF0aW9uIGZyb20gdGhlIHJldHJ5YWJsZSBxdWV1ZS4gSWYgdGhlIG9wZXJhdGlvbiBmYWlscyxcbiAgICAgKiByZXNjaGVkdWxlcyB3aXRoIGJhY2tvZmYuXG4gICAgICovICAgIGFzeW5jIFZjKCkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5nYy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nY1swXSgpLCB0aGlzLmdjLnNoaWZ0KCksIHRoaXMudXIucmVzZXQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIVpzKHQpKSB0aHJvdyB0O1xuIC8vIEZhaWx1cmUgd2lsbCBiZSBoYW5kbGVkIGJ5IEFzeW5jUXVldWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyhcIkFzeW5jUXVldWVcIiwgXCJPcGVyYXRpb24gZmFpbGVkIHdpdGggcmV0cnlhYmxlIGVycm9yOiBcIiArIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nYy5sZW5ndGggPiAwICYmIFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgb3BlcmF0aW9ucywgd2UgcmUtc2NoZWR1bGUgYHJldHJ5TmV4dE9wKClgLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcnVuIHJldHJ5YWJsZSBvcGVyYXRpb25zIHRoYXQgZmFpbGVkIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlaXIgaW5pdGlhbCBhdHRlbXB0IHNpbmNlIHdlIGRvbid0IGtub3cgd2hldGhlciB0aGV5IGFyZSBhbHJlYWR5XG4gICAgICAgICAgICAvLyBlbnF1ZXVlZC4gSWYsIGZvciBleGFtcGxlLCBgb3AxYCwgYG9wMmAsIGBvcDNgIGFyZSBlbnF1ZXVlZCBhbmQgYG9wMWBcbiAgICAgICAgICAgIC8vIG5lZWRzIHRvICBiZSByZS1ydW4sIHdlIHdpbGwgcnVuIGBvcDFgLCBgb3AxYCwgYG9wMmAgdXNpbmcgdGhlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGVucXVldWVkIGNhbGxzIHRvIGByZXRyeU5leHRPcCgpYC4gYG9wMygpYCB3aWxsIHRoZW4gcnVuIGluIHRoZVxuICAgICAgICAgICAgLy8gY2FsbCBzY2hlZHVsZWQgaGVyZS5cbiAgICAgICAgICAgIC8vIFNpbmNlIGBiYWNrb2ZmQW5kUnVuKClgIGNhbmNlbHMgYW4gZXhpc3RpbmcgYmFja29mZiBhbmQgc2NoZWR1bGVzIGFcbiAgICAgICAgICAgIC8vIG5ldyBiYWNrb2ZmIG9uIGV2ZXJ5IGNhbGwsIHRoZXJlIGlzIG9ubHkgZXZlciBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gICAgICAgICAgICAvLyBvcGVyYXRpb24gaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgdGhpcy51ci5aaSgoKCkgPT4gdGhpcy5WYygpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYy50aGVuKCgoKSA9PiAodGhpcy5JYyA9ICEwLCB0KCkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5FYyA9IHQsIHRoaXMuSWMgPSAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKlxuICogQ2hyb21lIGluY2x1ZGVzIEVycm9yLm1lc3NhZ2UgaW4gRXJyb3Iuc3RhY2suIE90aGVyIGJyb3dzZXJzIGRvIG5vdC5cbiAqIFRoaXMgcmV0dXJucyBleHBlY3RlZCBvdXRwdXQgb2YgbWVzc2FnZSArIHN0YWNrIHdoZW4gYXZhaWxhYmxlLlxuICogQHBhcmFtIGVycm9yIC0gRXJyb3Igb3IgRmlyZXN0b3JlRXJyb3JcbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gdC5tZXNzYWdlIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgdC5zdGFjayAmJiAoZSA9IHQuc3RhY2suaW5jbHVkZXModC5tZXNzYWdlKSA/IHQuc3RhY2sgOiB0Lm1lc3NhZ2UgKyBcIlxcblwiICsgdC5zdGFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3Igc28gdGhhdCB0aGlzLnRhaWwgYmVjb21lcyBhIHJlamVjdGVkIFByb21pc2UgYW5kXG4gICAgICAgICAgICAvLyBhbGwgZnVydGhlciBhdHRlbXB0cyB0byBjaGFpbiAodmlhIC50aGVuKSB3aWxsIGp1c3Qgc2hvcnQtY2lyY3VpdFxuICAgICAgICAgICAgLy8gYW5kIHJldHVybiB0aGUgcmVqZWN0ZWQgUHJvbWlzZS5cbiAgICAgICAgICAgIHRocm93IE0oXCJJTlRFUk5BTCBVTkhBTkRMRUQgRVJST1I6IFwiLCBlKSwgdDtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4gKHRoaXMuSWMgPSAhMSwgdCkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWMgPSBlLCBlO1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuUGMoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cbiAgICAgICAgdGhpcy5SYy5pbmRleE9mKHQpID4gLTEgJiYgKGUgPSAwKTtcbiAgICAgICAgY29uc3QgcyA9IE1vLmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsIHQsIGUsIG4sICh0ID0+IHRoaXMuU2ModCkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVGMucHVzaChzKSwgcztcbiAgICB9XG4gICAgUGMoKSB7XG4gICAgICAgIHRoaXMuRWMgJiYgQigpO1xuICAgIH1cbiAgICB2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCkge31cbiAgICAvKipcbiAgICAgKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHF1ZXVlZCB0YXNrcyBhcmUgZmluaXNoZWQgZXhlY3V0aW5nLiBEZWxheWVkXG4gICAgICogb3BlcmF0aW9ucyBhcmUgbm90IHJ1bi5cbiAgICAgKi8gICAgYXN5bmMgRGMoKSB7XG4gICAgICAgIC8vIE9wZXJhdGlvbnMgaW4gdGhlIHF1ZXVlIHByaW9yIHRvIGRyYWluaW5nIG1heSBoYXZlIGVucXVldWVkIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gS2VlcCBkcmFpbmluZyB0aGUgcXVldWUgdW50aWwgdGhlIHRhaWwgaXMgbm8gbG9uZ2VyIGFkdmFuY2VkLFxuICAgICAgICAvLyB3aGljaCBpbmRpY2F0ZXMgdGhhdCBubyBtb3JlIG5ldyBvcGVyYXRpb25zIHdlcmUgZW5xdWV1ZWQgYW5kIHRoYXQgYWxsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMgd2VyZSBleGVjdXRlZC5cbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHQgPSB0aGlzLm1jLCBhd2FpdCB0O1xuICAgICAgICB9IHdoaWxlICh0ICE9PSB0aGlzLm1jKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBEZXRlcm1pbmUgaWYgYSBkZWxheWVkIG9wZXJhdGlvbiB3aXRoIGEgcGFydGljdWxhciBUaW1lcklkXG4gICAgICogZXhpc3RzLlxuICAgICAqLyAgICBDYyh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLlRjKSBpZiAoZS50aW1lcklkID09PSB0KSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBSdW5zIHNvbWUgb3IgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucyBlYXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsYXN0VGltZXJJZCAtIERlbGF5ZWQgb3BlcmF0aW9ucyB1cCB0byBhbmQgaW5jbHVkaW5nIHRoaXMgVGltZXJJZFxuICAgICAqIHdpbGwgYmUgZHJhaW5lZC4gUGFzcyBUaW1lcklkLkFsbCB0byBydW4gYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBvcGVyYXRpb25zIGhhdmUgYmVlbiBydW4uXG4gICAgICovICAgIE5jKHQpIHtcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRyYWluaW5nIG1heSBnZW5lcmF0ZSBtb3JlIGRlbGF5ZWQgb3BzLCBzbyB3ZSBkbyB0aGF0IGZpcnN0LlxuICAgICAgICByZXR1cm4gdGhpcy5EYygpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFJ1biBvcHMgaW4gdGhlIHNhbWUgb3JkZXIgdGhleSdkIHJ1biBpZiB0aGV5IHJhbiBuYXR1cmFsbHkuXG4gICAgICAgICAgICB0aGlzLlRjLnNvcnQoKCh0LCBlKSA9PiB0LnRhcmdldFRpbWVNcyAtIGUudGFyZ2V0VGltZU1zKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5UYykgaWYgKGUuc2tpcERlbGF5KCksIFwiYWxsXCIgLyogQWxsICovICE9PSB0ICYmIGUudGltZXJJZCA9PT0gdCkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5EYygpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXG4gICAgICovICAgIGtjKHQpIHtcbiAgICAgICAgdGhpcy5SYy5wdXNoKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi8gICAgU2ModCkge1xuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVGMuaW5kZXhPZih0KTtcbiAgICAgICAgdGhpcy5UYy5zcGxpY2UoZSwgMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiAkYSh0KSB7XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGFuIG9iamVjdCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVjaWZpZWRcbiAqIG1ldGhvZHMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSB0O1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgaWYgKHQgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bdF0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAodCwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIE9hIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IFcsIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiB0LFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2godCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKHQpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcih0KSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHQsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIERPTUV4Y2VwdGlvbiBlcnJvciBjb2RlIGNvbnN0YW50cy4gKi8gY29uc3QgTWEgPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqL1xuY2xhc3MgRmEgZXh0ZW5kcyBSYSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcgeGEsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCJuYW1lXCIgaW4gdCA/IHQubmFtZSA6IFwiW0RFRkFVTFRdXCI7XG4gICAgfVxuICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQgfHwgXG4gICAgICAgIC8vIFRoZSBjbGllbnQgbXVzdCBiZSBpbml0aWFsaXplZCB0byBlbnN1cmUgdGhhdCBhbGwgc3Vic2VxdWVudCBBUElcbiAgICAgICAgLy8gdXNhZ2UgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgcWEodGhpcyksIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC50ZXJtaW5hdGUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2Yge0BsaW5rIEZpcmVzdG9yZX0gd2l0aCB0aGUgcHJvdmlkZWQgc2V0dGluZ3MuXG4gKiBDYW4gb25seSBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbiwgaW5jbHVkaW5nXG4gKiB7QGxpbmsgZ2V0RmlyZXN0b3JlfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEByZXR1cm5zIEEgbmV3bHkgaW5pdGlhbGl6ZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gZnVuY3Rpb24gTGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBfZ2V0UHJvdmlkZXIodCwgXCJmaXJlc3RvcmVcIik7XG4gICAgaWYgKG4uaXNJbml0aWFsaXplZCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuLmdldEltbWVkaWF0ZSgpLCBzID0gbi5nZXRPcHRpb25zKCk7XG4gICAgICAgIGlmIChkZWVwRXF1YWwocywgZSkpIHJldHVybiB0O1xuICAgICAgICB0aHJvdyBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIHdpdGggdGhlIHNhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRGaXJlc3RvcmUoKSB0byByZXR1cm4gdGhlIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuXCIpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIC0xICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIGUuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgIHJldHVybiBuLmluaXRpYWxpemUoe1xuICAgICAgICBvcHRpb25zOiBlXG4gICAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZXhpc3Rpbmcge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdGhhdCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlXG4gKiBwcm92aWRlZCB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0uIElmIG5vIGluc3RhbmNlIGV4aXN0cywgaW5pdGlhbGl6ZXMgYSBuZXdcbiAqIGluc3RhbmNlIHdpdGggZGVmYXVsdCBzZXR0aW5ncy5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZSB0aGF0IHRoZSByZXR1cm5lZCB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQHJldHVybnMgVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIG9mIHRoZSBwcm92aWRlZCBhcHAuXG4gKi8gZnVuY3Rpb24gQmEoZSA9IGdldEFwcCgpKSB7XG4gICAgcmV0dXJuIF9nZXRQcm92aWRlcihlLCBcImZpcmVzdG9yZVwiKS5nZXRJbW1lZGlhdGUoKTtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBVYSh0KSB7XG4gICAgcmV0dXJuIHQuX2ZpcmVzdG9yZUNsaWVudCB8fCBxYSh0KSwgdC5fZmlyZXN0b3JlQ2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKSwgdC5fZmlyZXN0b3JlQ2xpZW50O1xufVxuXG5mdW5jdGlvbiBxYSh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgZGEodCwgZSwgbiwgcy5ob3N0LCBzLnNzbCwgcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgcy51c2VGZXRjaFN0cmVhbXMpO1xuICAgIH0odC5fZGF0YWJhc2VJZCwgKG51bGwgPT09IChlID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9wdGlvbnMuYXBwSWQpIHx8IFwiXCIsIHQuX3BlcnNpc3RlbmNlS2V5LCBuKTtcbiAgICB0Ll9maXJlc3RvcmVDbGllbnQgPSBuZXcgR2ModC5fYXV0aENyZWRlbnRpYWxzLCB0Ll9hcHBDaGVja0NyZWRlbnRpYWxzLCB0Ll9xdWV1ZSwgcyk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIGdldEZpcmVzdG9yZX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBLYSh0LCBlKSB7XG4gICAgWmEodCA9IEVhKHQsIEZhKSk7XG4gICAgY29uc3QgbiA9IFVhKHQpLCBzID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBVYztcbiAgICByZXR1cm4gUWEobiwgaSwgbmV3IExjKGksIHMuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gamEodCkge1xuICAgIFphKHQgPSBFYSh0LCBGYSkpO1xuICAgIGNvbnN0IGUgPSBVYSh0KSwgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgVWM7XG4gICAgcmV0dXJuIFFhKGUsIHMsIG5ldyBCYyhzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gUWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgVztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHpjKHQsIG4pLCBhd2FpdCBIYyh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghXG4gICAgICAgICAgICAvKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkgcmV0dXJuIHQuY29kZSA9PT0gai5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gai5VTklNUExFTUVOVEVEO1xuICAgICAgICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGEgZmV3IGtub3duIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2UgY2FuIG9wZW4gSW5kZXhlZERiIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxuICAgICAgICAgICAgICAgIC8vIHdlbGwtdW5kZXJzdG9vZCBjYXNlcywgd2UgYXR0ZW1wdCB0byBkZXRlY3QgdGhlc2UgYW5kIHRoZW4gZ3JhY2VmdWxseVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIGZhbGwgYmFjaywgd2l0aCB0aGUgcmlzayB0aGF0IHdlIG1pZ2h0IGFjY2lkZW50YWxseSBoaWRlIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBhY3R1YWwgU0RLIGJ1Z3MuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgICAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAgICAgICAgICAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgICAgICAgICAgICAgMTEgPT09IHQuY29kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayBnZXRGaXJlc3RvcmV9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gRmFsbGluZyBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHMucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG5mdW5jdGlvbiBXYSh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkICYmICF0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgZSA9IG5ldyBXO1xuICAgIHJldHVybiB0Ll9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICghSnMuUHQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgSnMuZGVsZXRlKGUpO1xuICAgICAgICAgICAgfShjcih0Ll9kYXRhYmFzZUlkLCB0Ll9wZXJzaXN0ZW5jZUtleSkpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgZS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSksIGUucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIEdhKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFc7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX2MoYXdhaXQgZWEodCksIGUpKSksIGUucHJvbWlzZTtcbiAgICB9KFVhKHQgPSBFYSh0LCBGYSkpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24gemEodCkge1xuICAgIHJldHVybiBzYShVYSh0ID0gRWEodCwgRmEpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIEhhKHQpIHtcbiAgICByZXR1cm4gaWEoVWEodCA9IEVhKHQsIEZhKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gSmEodCkge1xuICAgIHJldHVybiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKHQuYXBwLCBcImZpcmVzdG9yZVwiKSwgdC5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvciBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkIG9iamVjdHMgYXJlXG4gKiAgIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnNcbiAqICAgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uXG4gKiAgIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gWWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBVYSh0ID0gRWEodCwgRmEpKSwgcyA9IG5ldyBPYTtcbiAgICByZXR1cm4gbGEobiwgdC5fZGF0YWJhc2VJZCwgZSwgcyksIHM7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlbiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlIGluIGxvY2FsXG4gKiBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKi8gZnVuY3Rpb24gWGEodCwgZSkge1xuICAgIHJldHVybiBmYShVYSh0ID0gRWEodCwgRmEpKSwgZSkudGhlbigoZSA9PiBlID8gbmV3IHZhKHQsIG51bGwsIGUucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiBaYSh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkIHx8IHQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqL1xuY2xhc3MgdHUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSBpZiAoMCA9PT0gdFtlXS5sZW5ndGgpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IG10KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbCh0Ll9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIGV1KCkge1xuICAgIHJldHVybiBuZXcgdHUoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgbnUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG51KHB0LmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgbnUocHQuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3Mgc3Uge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3MgaXUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTkwIHx8IHQgPiA5MCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtMTgwIHx8IGUgPiAxODApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgdGhpcy5fbGF0ID0gdCwgdGhpcy5fbG9uZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IHQuX2xhdCAmJiB0aGlzLl9sb25nID09PSB0Ll9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBydCh0aGlzLl9sYXQsIHQuX2xhdCkgfHwgcnQodGhpcy5fbG9uZywgdC5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBydSA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBvdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBjbih0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgb24odCwgdGhpcy5kYXRhLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3MgY3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGNuKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGF1KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIEFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEIoKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyB1dSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmsgPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBzLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLnhjKCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSByIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0ICRjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy4kYztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgIE9jKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1dShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCB0KSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLmssIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgTWModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5PYyh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgRmM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5MYyh0KSwgcztcbiAgICB9XG4gICAgQmModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5PYyh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgRmM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy54YygpLCBzO1xuICAgIH1cbiAgICBVYyh0KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy5PYyh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICBGYzogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHFjKHQpIHtcbiAgICAgICAgcmV0dXJuIFN1KHQsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5LYyB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLmpjKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZSkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUuZmllbGQpKSk7XG4gICAgfVxuICAgIHhjKCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnBhdGgubGVuZ3RoOyB0KyspIHRoaXMuTGModGhpcy5wYXRoLmdldCh0KSk7XG4gICAgfVxuICAgIExjKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyB0aGlzLnFjKFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoYXUodGhpcy4kYykgJiYgcnUudGVzdCh0KSkgdGhyb3cgdGhpcy5xYygnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3MgaHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gZSwgdGhpcy5rID0gbiB8fCBlbyh0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIFFjKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IHV1KHtcbiAgICAgICAgICAgICRjOiB0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogZSxcbiAgICAgICAgICAgIGpjOiBuLFxuICAgICAgICAgICAgcGF0aDogbXQuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICBGYzogITEsXG4gICAgICAgICAgICBLYzogc1xuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuaywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGx1KHQpIHtcbiAgICBjb25zdCBlID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IGVvKHQuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgaHUodC5fZGF0YWJhc2VJZCwgISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gZnUodCwgZSwgbiwgcywgaSwgciA9IHt9KSB7XG4gICAgY29uc3QgbyA9IHQuUWMoci5tZXJnZSB8fCByLm1lcmdlRmllbGRzID8gMiAvKiBNZXJnZVNldCAqLyA6IDAgLyogU2V0ICovICwgZSwgbiwgaSk7XG4gICAgYnUoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCBzKTtcbiAgICBjb25zdCBjID0gQXUocywgbyk7XG4gICAgbGV0IGEsIHU7XG4gICAgaWYgKHIubWVyZ2UpIGEgPSBuZXcgZ3Qoby5maWVsZE1hc2spLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygci5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IFB1KGUsIHMsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIER1KHQsIGkpIHx8IHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gbmV3IGd0KHQpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKCh0ID0+IGEuY292ZXJzKHQuZmllbGQpKSk7XG4gICAgfSBlbHNlIGEgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBvdShuZXcgUXQoYyksIGEsIHUpO1xufVxuXG5jbGFzcyBkdSBleHRlbmRzIHN1IHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICgyIC8qIE1lcmdlU2V0ICovICE9PSB0LiRjKSB0aHJvdyAxIC8qIFVwZGF0ZSAqLyA9PT0gdC4kYyA/IHQucWMoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiB0LnFjKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGR1O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gd3UodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgdXUoe1xuICAgICAgICAkYzogMyAvKiBBcmd1bWVudCAqLyAsXG4gICAgICAgIGpjOiBlLnNldHRpbmdzLmpjLFxuICAgICAgICBtZXRob2ROYW1lOiB0Ll9tZXRob2ROYW1lLFxuICAgICAgICBGYzogblxuICAgIH0sIGUuZGF0YWJhc2VJZCwgZS5rLCBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyBfdSBleHRlbmRzIHN1IHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgemUodC5wYXRoLCBuZXcgQmUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBfdTtcbiAgICB9XG59XG5cbmNsYXNzIG11IGV4dGVuZHMgc3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuV2MgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB3dSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLldjLm1hcCgodCA9PiBJdSh0LCBlKSkpLCBzID0gbmV3IFVlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IHplKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGd1IGV4dGVuZHMgc3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuV2MgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB3dSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLldjLm1hcCgodCA9PiBJdSh0LCBlKSkpLCBzID0gbmV3IEtlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IHplKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIHl1IGV4dGVuZHMgc3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuR2MgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgUWUodC5rLCAkZSh0LmssIHRoaXMuR2MpKTtcbiAgICAgICAgcmV0dXJuIG5ldyB6ZSh0LnBhdGgsIGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiBwdSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHQuUWMoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKTtcbiAgICBidShcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHMpO1xuICAgIGNvbnN0IHIgPSBbXSwgbyA9IFF0LmVtcHR5KCk7XG4gICAgbHQocywgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBWdShlLCB0LCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHMgPSBnZXRNb2R1bGFySW5zdGFuY2Uocyk7XG4gICAgICAgIGNvbnN0IGEgPSBpLkJjKGMpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIGR1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHIucHVzaChjKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gSXUocywgYSk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHIucHVzaChjKSwgby5zZXQoYywgdCkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IGMgPSBuZXcgZ3Qocik7XG4gICAgcmV0dXJuIG5ldyBjdShvLCBjLCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIFR1KHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICBjb25zdCBvID0gdC5RYygxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pLCBjID0gWyBQdShlLCBzLCBuKSBdLCBhID0gWyBpIF07XG4gICAgaWYgKHIubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0ICs9IDIpIGMucHVzaChQdShlLCByW3RdKSksIGEucHVzaChyW3QgKyAxXSk7XG4gICAgY29uc3QgdSA9IFtdLCBoID0gUXQuZW1wdHkoKTtcbiAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcGljayB0aGUgbGFzdCB2YWx1ZSBmb3IgYSBmaWVsZCBpZiB0aGVcbiAgICAvLyB1c2VyIHNwZWNpZmllZCB0aGUgZmllbGQgbXVsdGlwbGUgdGltZXMuXG4gICAgZm9yIChsZXQgdCA9IGMubGVuZ3RoIC0gMTsgdCA+PSAwOyAtLXQpIGlmICghRHUodSwgY1t0XSkpIHtcbiAgICAgICAgY29uc3QgZSA9IGNbdF07XG4gICAgICAgIGxldCBuID0gYVt0XTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHMgPSBvLkJjKGUpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIGR1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHUucHVzaChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gSXUobiwgcyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHUucHVzaChlKSwgaC5zZXQoZSwgdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgZ3QodSk7XG4gICAgcmV0dXJuIG5ldyBjdShoLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIEV1KHQsIGUsIG4sIHMgPSAhMSkge1xuICAgIHJldHVybiBJdShuLCB0LlFjKHMgPyA0IC8qIEFycmF5QXJndW1lbnQgKi8gOiAzIC8qIEFyZ3VtZW50ICovICwgZSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiBJdSh0LCBlKSB7XG4gICAgaWYgKFJ1KFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiBidShcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCBlLCB0KSwgQXUodCwgZSk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBzdSkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBkZWxldGVGaWVsZCgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghYXUoZS4kYykpIHRocm93IGUucWMoYCR7dC5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghZS5wYXRoKSB0aHJvdyBlLnFjKGAke3QuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gdC5fdG9GaWVsZFRyYW5zZm9ybShlKTtcbiAgICAgICAgbiAmJiBlLmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKHQsIGUpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IHQgJiYgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgZS5wYXRoICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKGUuc2V0dGluZ3MuRmMgJiYgNCAvKiBBcnJheUFyZ3VtZW50ICovICE9PSBlLiRjKSB0aHJvdyBlLnFjKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBJdShpLCBlLlVjKHMpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IHQgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaCh0KSwgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0KSByZXR1cm4gJGUoZS5rLCB0KTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gYXQuZnJvbURhdGUodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBRbihlLmssIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgYXQpIHtcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGF0KHQuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcih0Lm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBRbihlLmssIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgaXUpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHQubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB0LmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIG51KSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogV24oZS5rLCB0Ll9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFBhKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5kYXRhYmFzZUlkLCBzID0gdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXMuaXNFcXVhbChuKSkgdGhyb3cgZS5xYyhgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IEhuKHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IGUuZGF0YWJhc2VJZCwgdC5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGUucWMoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke1RhKHQpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIEF1KHQsIGUpIHtcbiAgICBjb25zdCBuID0ge307XG4gICAgcmV0dXJuIGZ0KHQpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIGUucGF0aCAmJiBlLnBhdGgubGVuZ3RoID4gMCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCkgOiBsdCh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IEl1KHMsIGUuTWModCkpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG5bdF0gPSBpKTtcbiAgICB9KSksIHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gUnUodCkge1xuICAgIHJldHVybiAhKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCB0IGluc3RhbmNlb2YgQXJyYXkgfHwgdCBpbnN0YW5jZW9mIERhdGUgfHwgdCBpbnN0YW5jZW9mIGF0IHx8IHQgaW5zdGFuY2VvZiBpdSB8fCB0IGluc3RhbmNlb2YgbnUgfHwgdCBpbnN0YW5jZW9mIFBhIHx8IHQgaW5zdGFuY2VvZiBzdSk7XG59XG5cbmZ1bmN0aW9uIGJ1KHQsIGUsIG4pIHtcbiAgICBpZiAoIVJ1KG4pIHx8ICFmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBudWxsID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO1xuICAgIH0obikpIHtcbiAgICAgICAgY29uc3QgcyA9IFRhKG4pO1xuICAgICAgICB0aHJvdyBcImFuIG9iamVjdFwiID09PSBzID8gZS5xYyh0ICsgXCIgYSBjdXN0b20gb2JqZWN0XCIpIDogZS5xYyh0ICsgXCIgXCIgKyBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIFB1KHQsIGUsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSBpbnN0YW5jZW9mIHR1KSByZXR1cm4gZS5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gVnUodCwgZSk7XG4gICAgdGhyb3cgU3UoXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIFwiLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCB2dSA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIFZ1KHQsIGUsIG4pIHtcbiAgICBpZiAoZS5zZWFyY2godnUpID49IDApIHRocm93IFN1KGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IHR1KC4uLmUuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgdGhyb3cgU3UoYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCB0LCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTdSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgY29uc3QgciA9IHMgJiYgIXMuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCBjID0gYEZ1bmN0aW9uICR7ZX0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKGMgKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCBjICs9IFwiLiBcIjtcbiAgICBsZXQgYSA9IFwiXCI7XG4gICAgcmV0dXJuIChyIHx8IG8pICYmIChhICs9IFwiIChmb3VuZFwiLCByICYmIChhICs9IGAgaW4gZmllbGQgJHtzfWApLCBvICYmIChhICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBhICs9IFwiKVwiKSwgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBjICsgdCArIGEpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24gRHUodCwgZSkge1xuICAgIHJldHVybiB0LnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgQ3Uge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gcywgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IE51KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoa3UoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIE51IGV4dGVuZHMgQ3Uge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24ga3UodCwgZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gVnUodCwgZSkgOiBlIGluc3RhbmNlb2YgdHUgPyBlLl9pbnRlcm5hbFBhdGggOiBlLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgeHUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gdC5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyAkdSBleHRlbmRzIEN1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMsIHIpLCB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9maXJlc3RvcmVJbXBsID0gdCwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBzaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhXG4gICAgICogZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgT3UodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYHNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCwgZSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoa3UoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShuLCBlLnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgT3UgZXh0ZW5kcyAkdSB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyBNdSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fc25hcHNob3QgPSBzLCB0aGlzLm1ldGFkYXRhID0gbmV3IHh1KHMuaGFzUGVuZGluZ1dyaXRlcywgcy5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCB0O1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmNhbGwoZSwgbmV3IE91KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgeHUodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyh0ID0ge30pIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAoZSAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IGUgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodC5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBuZXcgT3UodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IHh1KHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlciksXG4gICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IGUrK1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQSBgRG9jdW1lbnRTZXRgIHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGxldCBuID0gdC5fc25hcHNob3Qub2xkRG9jcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5maWx0ZXIoKHQgPT4gZSB8fCAzIC8qIE1ldGFkYXRhICovICE9PSB0LnR5cGUpKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IE91KHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIGUuZG9jLmtleSwgZS5kb2MsIG5ldyB4dSh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZS5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCByID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIEFkZGVkICovICE9PSBlLnR5cGUgJiYgKGkgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBSZW1vdmVkICovICE9PSBlLnR5cGUgJiYgKG4gPSBuLmFkZChlLmRvYyksIHIgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEZ1KGUudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiByXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRnUodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgcmV0dXJuIFwiYWRkZWRcIjtcblxuICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlZFwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQigpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24gTHUodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgJHUgJiYgZSBpbnN0YW5jZW9mICR1ID8gdC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgdC5fa2V5LmlzRXF1YWwoZS5fa2V5KSAmJiAobnVsbCA9PT0gdC5fZG9jdW1lbnQgPyBudWxsID09PSBlLl9kb2N1bWVudCA6IHQuX2RvY3VtZW50LmlzRXF1YWwoZS5fZG9jdW1lbnQpKSAmJiB0Ll9jb252ZXJ0ZXIgPT09IGUuX2NvbnZlcnRlciA6IHQgaW5zdGFuY2VvZiBNdSAmJiBlIGluc3RhbmNlb2YgTXUgJiYgKHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIGthKHQucXVlcnksIGUucXVlcnkpICYmIHQubWV0YWRhdGEuaXNFcXVhbChlLm1ldGFkYXRhKSAmJiB0Ll9zbmFwc2hvdC5pc0VxdWFsKGUuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIEJ1KHQpIHtcbiAgICBpZiAoVGUodCkgJiYgMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgUShqLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogZW5kQmVmb3JlOjF9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSBvciB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayBxdWVyeX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBVdSB7fVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGluc3RhbmNlIG9mIHtAbGluayBRdWVyeX0gdGhhdCBpcyBleHRlbmRlZCB0byBhbHNvIGluY2x1ZGVcbiAqIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHtAbGluayBRdWVyeX0gaW5zdGFuY2UgdG8gdXNlIGFzIGEgYmFzZSBmb3IgdGhlIG5ldyBjb25zdHJhaW50cy5cbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gVGhlIGxpc3Qgb2Yge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH1zIHRvIGFwcGx5LlxuICogQHRocm93cyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IGNvbnN0cmFpbnRzIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHRoZVxuICogZXhpc3Rpbmcgb3IgbmV3IGNvbnN0cmFpbnRzLlxuICovIGZ1bmN0aW9uIHF1KHQsIC4uLmUpIHtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IG4uX2FwcGx5KHQpO1xuICAgIHJldHVybiB0O1xufVxuXG5jbGFzcyBLdSBleHRlbmRzIFV1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuemMgPSB0LCB0aGlzLkhjID0gZSwgdGhpcy5KYyA9IG4sIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGx1KHQuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGxldCBjO1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gciB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcikgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7cn0nIHF1ZXJpZXMgb24gZG9jdW1lbnRJZCgpLmApO1xuICAgICAgICAgICAgICAgIGlmIChcImluXCIgLyogSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWgobywgcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIG8pIGUucHVzaChzaChzLCB0LCBuKSk7XG4gICAgICAgICAgICAgICAgICAgIGMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGMgPSBzaChzLCB0LCBvKTtcbiAgICAgICAgICAgIH0gZWxzZSBcImluXCIgLyogSU4gKi8gIT09IHIgJiYgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gIT09IHIgJiYgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gIT09IHIgfHwgaWgobywgciksIFxuICAgICAgICAgICAgYyA9IEV1KG4sIGUsIG8sIFxuICAgICAgICAgICAgLyogYWxsb3dBcnJheXM9ICovIFwiaW5cIiAvKiBJTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gcik7XG4gICAgICAgICAgICBjb25zdCBhID0gdGUuY3JlYXRlKGksIHIsIGMpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5WKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEllKHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbiAmJiAhbi5pc0VxdWFsKGUuZmllbGQpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBBbGwgd2hlcmUgZmlsdGVycyB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgbXVzdCBiZSBvbiB0aGUgc2FtZSBmaWVsZC4gQnV0IHlvdSBoYXZlIGluZXF1YWxpdHkgZmlsdGVycyBvbiAnJHtuLnRvU3RyaW5nKCl9JyBhbmQgJyR7ZS5maWVsZC50b1N0cmluZygpfSdgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IEVlKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBzICYmIHJoKHQsIGUuZmllbGQsIHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoZS5pbmRleE9mKG4ub3ApID49IDApIHJldHVybiBuLm9wO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KHQsIFxuICAgICAgICAgICAgICAgIC8qKlxuICogR2l2ZW4gYW4gb3BlcmF0b3IsIHJldHVybnMgdGhlIHNldCBvZiBvcGVyYXRvcnMgdGhhdCBjYW5ub3QgYmUgdXNlZCB3aXRoIGl0LlxuICpcbiAqIE9wZXJhdG9ycyBpbiBhIHF1ZXJ5IG11c3QgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgc2V0IG9mIHJ1bGVzOlxuICogMS4gT25seSBvbmUgYXJyYXkgb3BlcmF0b3IgaXMgYWxsb3dlZC5cbiAqIDIuIE9ubHkgb25lIGRpc2p1bmN0aXZlIG9wZXJhdG9yIGlzIGFsbG93ZWQuXG4gKiAzLiBgTk9UX0VRVUFMYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFub3RoZXIgYE5PVF9FUVVBTGAgb3BlcmF0b3IuXG4gKiA0LiBgTk9UX0lOYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFycmF5LCBkaXNqdW5jdGl2ZSwgb3IgYE5PVF9FUVVBTGAgb3BlcmF0b3JzLlxuICpcbiAqIEFycmF5IG9wZXJhdG9yczogYEFSUkFZX0NPTlRBSU5TYCwgYEFSUkFZX0NPTlRBSU5TX0FOWWBcbiAqIERpc2p1bmN0aXZlIG9wZXJhdG9yczogYElOYCwgYEFSUkFZX0NPTlRBSU5TX0FOWWAsIGBOT1RfSU5gXG4gKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcIiE9XCIgLyogTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIElOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0oZS5vcCkpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSBcbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2Ugd2hlbiBpdCdzIGEgZHVwbGljYXRlIG9wIHRvIGdpdmUgYSBzbGlnaHRseSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgdGhyb3cgbiA9PT0gZS5vcCA/IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVyLmApIDogbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVycyB3aXRoICcke24udG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG4gICAgICAgICAgICB9KHQsIGEpLCBhO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBcIndoZXJlXCIsIGUsIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0aGlzLnpjLCB0aGlzLkhjLCB0aGlzLkpjKTtcbiAgICAgICAgcmV0dXJuIG5ldyB2YSh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpbHRlcnMuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgbWUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbiwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgZW5mb3JjZXMgdGhhdCBkb2N1bWVudHMgbXVzdCBjb250YWluIHRoZVxuICogc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgc2F0aXNmeSB0aGUgcmVsYXRpb24gY29uc3RyYWludFxuICogcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBvcFN0ciAtIFRoZSBvcGVyYXRpb24gc3RyaW5nIChlLmcgXCImbHQ7XCIsIFwiJmx0Oz1cIiwgXCI9PVwiLCBcIiZsdDtcIixcbiAqICAgXCImbHQ7PVwiLCBcIiE9XCIpLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGZvciBjb21wYXJpc29uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIGp1KHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gZSwgaSA9IGt1KFwid2hlcmVcIiwgdCk7XG4gICAgcmV0dXJuIG5ldyBLdShpLCBzLCBuKTtcbn1cblxuY2xhc3MgUXUgZXh0ZW5kcyBVdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnpjID0gdCwgdGhpcy5ZYyA9IGUsIHRoaXMudHlwZSA9IFwib3JkZXJCeVwiO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuc3RhcnRBdCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIHN0YXJ0QXQoKSBvciBzdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmVuZEF0KSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgZW5kQXQoKSBvciBlbmRCZWZvcmUoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBmZShlLCBuKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IEVlKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSWUodCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IG4gJiYgcmgodCwgbiwgZS5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSh0LCBzKSwgcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZSBhIGBCb3VuZGAgZnJvbSBhIHF1ZXJ5IGFuZCBhIGRvY3VtZW50LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgYEJvdW5kYCB3aWxsIGFsd2F5cyBpbmNsdWRlIHRoZSBrZXkgb2YgdGhlIGRvY3VtZW50XG4gKiBhbmQgc28gb25seSB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgd2lsbCBjb21wYXJlIGVxdWFsIHRvIHRoZSByZXR1cm5lZFxuICogcG9zaXRpb24uXG4gKlxuICogV2lsbCB0aHJvdyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgY29udGFpbiBhbGwgZmllbGRzIG9mIHRoZSBvcmRlciBieVxuICogb2YgdGhlIHF1ZXJ5IG9yIGlmIGFueSBvZiB0aGUgZmllbGRzIGluIHRoZSBvcmRlciBieSBhcmUgYW4gdW5jb21taXR0ZWRcbiAqIHNlcnZlciB0aW1lc3RhbXAuXG4gKi8gKHQuX3F1ZXJ5LCB0aGlzLnpjLCB0aGlzLlljKTtcbiAgICAgICAgcmV0dXJuIG5ldyB2YSh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbIGUgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG1lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIG4sIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBzb3J0cyB0aGUgcXVlcnkgcmVzdWx0IGJ5IHRoZVxuICogc3BlY2lmaWVkIGZpZWxkLCBvcHRpb25hbGx5IGluIGRlc2NlbmRpbmcgb3JkZXIgaW5zdGVhZCBvZiBhc2NlbmRpbmcuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBmaWVsZCB0byBzb3J0IGJ5LlxuICogQHBhcmFtIGRpcmVjdGlvblN0ciAtIE9wdGlvbmFsIGRpcmVjdGlvbiB0byBzb3J0IGJ5ICgnYXNjJyBvciAnZGVzYycpLiBJZlxuICogbm90IHNwZWNpZmllZCwgb3JkZXIgd2lsbCBiZSBhc2NlbmRpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIFd1KHQsIGUgPSBcImFzY1wiKSB7XG4gICAgY29uc3QgbiA9IGUsIHMgPSBrdShcIm9yZGVyQnlcIiwgdCk7XG4gICAgcmV0dXJuIG5ldyBRdShzLCBuKTtcbn1cblxuY2xhc3MgR3UgZXh0ZW5kcyBVdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLlhjID0gZSwgdGhpcy5aYyA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdmEodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBQZSh0Ll9xdWVyeSwgdGhpcy5YYywgdGhpcy5aYykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiB6dSh0KSB7XG4gICAgcmV0dXJuIElhKFwibGltaXRcIiwgdCksIG5ldyBHdShcImxpbWl0XCIsIHQsIFwiRlwiIC8qIEZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGxhc3QgbWF0Y2hpbmcgZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBIdSh0KSB7XG4gICAgcmV0dXJuIElhKFwibGltaXRUb0xhc3RcIiwgdCksIG5ldyBHdShcImxpbWl0VG9MYXN0XCIsIHQsIFwiTFwiIC8qIExhc3QgKi8pO1xufVxuXG5jbGFzcyBKdSBleHRlbmRzIFV1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMudGEgPSBlLCB0aGlzLmVhID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5oKHQsIHRoaXMudHlwZSwgdGhpcy50YSwgdGhpcy5lYSk7XG4gICAgICAgIHJldHVybiBuZXcgdmEodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG1lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgZSwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFl1KC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEp1KFwic3RhcnRBdFwiLCB0LCAvKmJlZm9yZT0qLyAhMCk7XG59XG5cbmZ1bmN0aW9uIFh1KC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEp1KFwic3RhcnRBZnRlclwiLCB0LCBcbiAgICAvKmJlZm9yZT0qLyAhMSk7XG59XG5cbmNsYXNzIFp1IGV4dGVuZHMgVXUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy50YSA9IGUsIHRoaXMuZWEgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gbmgodCwgdGhpcy50eXBlLCB0aGlzLnRhLCB0aGlzLmVhKTtcbiAgICAgICAgcmV0dXJuIG5ldyB2YSh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgbWUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIGUpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0aCguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBadShcImVuZEJlZm9yZVwiLCB0LCAvKmJlZm9yZT0qLyAhMCk7XG59XG5cbmZ1bmN0aW9uIGVoKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IFp1KFwiZW5kQXRcIiwgdCwgLypiZWZvcmU9Ki8gITEpO1xufVxuXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJvdW5kIGZyb20gYSBkb2N1bWVudCBvciBmaWVsZHMgKi8gZnVuY3Rpb24gbmgodCwgZSwgbiwgcykge1xuICAgIGlmIChuWzBdID0gZ2V0TW9kdWxhckluc3RhbmNlKG5bMF0pLCBuWzBdIGluc3RhbmNlb2YgQ3UpIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGlmICghcykgdGhyb3cgbmV3IFEoai5OT1RfRk9VTkQsIGBDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgJHtufSgpLmApO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXG4gICAgICAgIC8vIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIFJlKHQpKSBpZiAobi5maWVsZC5pc0tleUZpZWxkKCkpIHIucHVzaChGdChlLCBzLmtleSkpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLmRhdGEuZmllbGQobi5maWVsZCk7XG4gICAgICAgICAgICBpZiAoUnQodCkpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgKyBuLmZpZWxkICsgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBpcyB1bmtub3duLCB5b3UgY2Fubm90IHN0YXJ0L2VuZCBhIHF1ZXJ5IHdpdGggaXQuKScpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJyR7dH0nICh1c2VkIGFzIHRoZSBvcmRlckJ5KSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGhlKHIsIGkpO1xuICAgIH1cbiAgICAvKipcbiAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBgQm91bmRgIGZvciB0aGUgZ2l2ZW4gcXVlcnkuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgZSwgblswXS5fZG9jdW1lbnQsIHMpO1xuICAgIHtcbiAgICAgICAgY29uc3QgaSA9IGx1KHQuZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgICAgIC8vIFVzZSBleHBsaWNpdCBvcmRlciBieSdzIGJlY2F1c2UgaXQgaGFzIHRvIG1hdGNoIHRoZSBxdWVyeSB0aGUgdXNlciBtYWRlXG4gICAgICAgICAgICBjb25zdCBvID0gdC5leHBsaWNpdE9yZGVyQnk7XG4gICAgICAgICAgICBpZiAoaS5sZW5ndGggPiBvLmxlbmd0aCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvICR7c30oKS4gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvcmRlckJ5KCkgY2xhdXNlc2ApO1xuICAgICAgICAgICAgY29uc3QgYyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBpLmxlbmd0aDsgcisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGlbcl07XG4gICAgICAgICAgICAgICAgaWYgKG9bcl0uZmllbGQuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBhKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gJHtzfSgpLCBidXQgZ290IGEgJHt0eXBlb2YgYX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBZSh0KSAmJiAtMSAhPT0gYS5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7YX0nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGguY2hpbGQod3QuZnJvbVN0cmluZyhhKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghRHQuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7bn0nIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgRHQobik7XG4gICAgICAgICAgICAgICAgICAgIGMucHVzaChGdChlLCBpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IEV1KG4sIHMsIGEpO1xuICAgICAgICAgICAgICAgICAgICBjLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBoZShjLCByKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGRvY3VtZW50SWRWYWx1ZWAgaW50byBhIGBSZWZlcmVuY2VWYWx1ZWAsIHRocm93aW5nXG4gKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gKiBvciBgc3RyaW5nYCwgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgaSwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzaCh0LCBlLCBuKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIChuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pKSkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gbikgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICBpZiAoIUFlKGUpICYmIC0xICE9PSBuLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHMgPSBlLnBhdGguY2hpbGQod3QuZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICghRHQuaXNEb2N1bWVudEtleShzKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7c30nIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzICgke3MubGVuZ3RofSkuYCk7XG4gICAgICAgIHJldHVybiBGdCh0LCBuZXcgRHQocykpO1xuICAgIH1cbiAgICBpZiAobiBpbnN0YW5jZW9mIFBhKSByZXR1cm4gRnQodCwgbi5fa2V5KTtcbiAgICB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6ICR7VGEobil9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0aXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXG4gKiBhcnJheSByZXF1aXJlbWVudHMuXG4gKi8gZnVuY3Rpb24gaWgodCwgZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSB8fCAwID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG4gICAgaWYgKHQubGVuZ3RoID4gMTApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMgc3VwcG9ydCBhIG1heGltdW0gb2YgMTAgZWxlbWVudHMgaW4gdGhlIHZhbHVlIGFycmF5LmApO1xufVxuXG5mdW5jdGlvbiByaCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuLmlzRXF1YWwoZSkpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBvbiBmaWVsZCAnJHtlLnRvU3RyaW5nKCl9JyBhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJyR7ZS50b1N0cmluZygpfScgYXMgeW91ciBmaXJzdCBhcmd1bWVudCB0byBvcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IG9yZGVyQnkoKSBpcyBvbiBmaWVsZCAnJHtuLnRvU3RyaW5nKCl9JyBpbnN0ZWFkLmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3Mgb2gge1xuICAgIGNvbnZlcnRWYWx1ZSh0LCBlID0gXCJub25lXCIpIHtcbiAgICAgICAgc3dpdGNoIChDdCh0KSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZTtcblxuICAgICAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gSXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoQXQodC5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFJlZmVyZW5jZSh0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludCh0Lmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KHQuYXJyYXlWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3QodC5tYXBWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgQigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QodCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBsdCh0LmZpZWxkcywgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuW3RdID0gdGhpcy5jb252ZXJ0VmFsdWUocywgZSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgY29udmVydEdlb1BvaW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpdShJdCh0LmxhdGl0dWRlKSwgSXQodC5sb25naXR1ZGUpKTtcbiAgICB9XG4gICAgY29udmVydEFycmF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuICh0LnZhbHVlcyB8fCBbXSkubWFwKCh0ID0+IHRoaXMuY29udmVydFZhbHVlKHQsIGUpKSk7XG4gICAgfVxuICAgIGNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwicHJldmlvdXNcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSBidCh0KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5jb252ZXJ0VmFsdWUobiwgZSk7XG5cbiAgICAgICAgICBjYXNlIFwiZXN0aW1hdGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoUHQodCkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAodCkge1xuICAgICAgICBjb25zdCBlID0gRXQodCk7XG4gICAgICAgIHJldHVybiBuZXcgYXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHd0LmZyb21TdHJpbmcodCk7XG4gICAgICAgIFUoUnMobikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IHdhKG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgRHQobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiBzLmlzRXF1YWwoZSkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgIE0oYERvY3VtZW50ICR7aX0gY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlICgke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9KSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKCR7ZS5wcm9qZWN0SWR9LyR7ZS5kYXRhYmFzZX0pIGluc3RlYWQuYCksIFxuICAgICAgICBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBgRG9jdW1lbnREYXRhYCBieSBhcHBseWluZyB0aGVcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gYERvY3VtZW50RGF0YWBcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcbiAqIHRoZWlyIGBzZXQoKWAgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgYHRvRmlyZXN0b3JlKClgXG4gKiBjYWxsLlxuICovIGZ1bmN0aW9uIGNoKHQsIGUsIG4pIHtcbiAgICBsZXQgcztcbiAgICAvLyBDYXN0IHRvIGBhbnlgIGluIG9yZGVyIHRvIHNhdGlzZnkgdGhlIHVuaW9uIHR5cGUgY29uc3RyYWludCBvblxuICAgIC8vIHRvRmlyZXN0b3JlKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gcyA9IHQgPyBuICYmIChuLm1lcmdlIHx8IG4ubWVyZ2VGaWVsZHMpID8gdC50b0ZpcmVzdG9yZShlLCBuKSA6IHQudG9GaXJlc3RvcmUoZSkgOiBlLCBcbiAgICBzO1xufVxuXG5jbGFzcyBhaCBleHRlbmRzIG9oIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBudSh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgUGEodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHdyaXRlIGJhdGNoLCB1c2VkIHRvIHBlcmZvcm0gbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICpcbiAqIEEgYFdyaXRlQmF0Y2hgIG9iamVjdCBjYW4gYmUgYWNxdWlyZWQgYnkgY2FsbGluZyB7QGxpbmsgd3JpdGVCYXRjaH0uIEl0XG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgd3JpdGVzIHRvIHRoZSB3cml0ZSBiYXRjaC4gTm9uZSBvZiB0aGUgd3JpdGVzXG4gKiB3aWxsIGJlIGNvbW1pdHRlZCAob3IgdmlzaWJsZSBsb2NhbGx5KSB1bnRpbCB7QGxpbmsgV3JpdGVCYXRjaC5jb21taXR9IGlzXG4gKiBjYWxsZWQuXG4gKi8gY2xhc3MgdWgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9jb21taXRIYW5kbGVyID0gZSwgdGhpcy5fbXV0YXRpb25zID0gW10sIHRoaXMuX2NvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgdGhpcy5fZGF0YVJlYWRlciA9IGx1KHQpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgcyA9IGhoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBjaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBmdSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2guc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKHMuX2tleSwgWWUubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gaGgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgdHUgPyBUdSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSwgbiwgcykgOiBwdSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24oaS5fa2V5LCBZZS5leGlzdHMoITApKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgV3JpdGVCYXRjaGAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGUgPSBoaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChuZXcgbG4oZS5fa2V5LCBZZS5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGlzIHdyaXRlIGJhdGNoIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdCBvZiB0aGVzZSB3cml0ZXMgd2lsbCBvbmx5IGJlIHJlZmxlY3RlZCBpbiBkb2N1bWVudCByZWFkcyB0aGF0XG4gICAgICogb2NjdXIgYWZ0ZXIgdGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMuIElmIHRoZSBjbGllbnQgaXMgb2ZmbGluZSwgdGhlXG4gICAgICogd3JpdGUgZmFpbHMuIElmIHlvdSB3b3VsZCBsaWtlIHRvIHNlZSBsb2NhbCBtb2RpZmljYXRpb25zIG9yIGJ1ZmZlciB3cml0ZXNcbiAgICAgKiB1bnRpbCB0aGUgY2xpZW50IGlzIG9ubGluZSwgdXNlIHRoZSBmdWxsIEZpcmVzdG9yZSBTREsuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCBvbmNlIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoZSBiYXRjaCBoYXZlIGJlZW5cbiAgICAgKiBzdWNjZXNzZnVsbHkgd3JpdHRlbiB0byB0aGUgYmFja2VuZCBhcyBhbiBhdG9taWMgdW5pdCAobm90ZSB0aGF0IGl0IHdvbid0XG4gICAgICogcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gICAgICovICAgIGNvbW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpLCB0aGlzLl9jb21taXR0ZWQgPSAhMCwgdGhpcy5fbXV0YXRpb25zLmxlbmd0aCA+IDAgPyB0aGlzLl9jb21taXRIYW5kbGVyKHRoaXMuX211dGF0aW9ucykgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgX3ZlcmlmeU5vdENvbW1pdHRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbW1pdHRlZCkgdGhyb3cgbmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoaCh0LCBlKSB7XG4gICAgaWYgKCh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKS5maXJlc3RvcmUgIT09IGUpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuXCIpO1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVE9ETyhtcnNjaG1pZHQpIENvbnNpZGVyIHVzaW5nIGBCYXNlVHJhbnNhY3Rpb25gIGFzIHRoZSBiYXNlIGNsYXNzIGluIHRoZVxuLy8gbGVnYWN5IFNESy5cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIE5vdGU6IGBnZXREb2MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWYgeW91IGFyZVxuICogb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLCBpbnZva2VcbiAqIHtAbGluayBnZXREb2NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqL1xuZnVuY3Rpb24gbGgodCkge1xuICAgIHQgPSBFYSh0LCBQYSk7XG4gICAgY29uc3QgZSA9IEVhKHQuZmlyZXN0b3JlLCBGYSk7XG4gICAgcmV0dXJuIG9hKFVhKGUpLCB0Ll9rZXkpLnRoZW4oKG4gPT4gYmgoZSwgdCwgbikpKTtcbn1cblxuY2xhc3MgZmggZXh0ZW5kcyBvaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgbnUodCk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkodCwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IFBhKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGRoKHQpIHtcbiAgICB0ID0gRWEodCwgUGEpO1xuICAgIGNvbnN0IGUgPSBFYSh0LmZpcmVzdG9yZSwgRmEpLCBuID0gVWEoZSksIHMgPSBuZXcgZmgoZSk7XG4gICAgcmV0dXJuIHJhKG4sIHQuX2tleSkudGhlbigobiA9PiBuZXcgJHUoZSwgcywgdC5fa2V5LCBuLCBuZXcgeHUobnVsbCAhPT0gbiAmJiBuLmhhc0xvY2FsTXV0YXRpb25zLCBcbiAgICAvKiBmcm9tQ2FjaGU9ICovICEwKSwgdC5jb252ZXJ0ZXIpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiB3aCh0KSB7XG4gICAgdCA9IEVhKHQsIFBhKTtcbiAgICBjb25zdCBlID0gRWEodC5maXJlc3RvcmUsIEZhKTtcbiAgICByZXR1cm4gb2EoVWEoZSksIHQuX2tleSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IGJoKGUsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgLlxuICpcbiAqIE5vdGU6IGBnZXREb2NzKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnlcbiAqIHdhaXRpbmcgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmXG4gKiB5b3UgYXJlIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvcixcbiAqIGludm9rZSB7QGxpbmsgZ2V0RG9jc0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY3NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gX2godCkge1xuICAgIHQgPSBFYSh0LCB2YSk7XG4gICAgY29uc3QgZSA9IEVhKHQuZmlyZXN0b3JlLCBGYSksIG4gPSBVYShlKSwgcyA9IG5ldyBmaChlKTtcbiAgICByZXR1cm4gQnUodC5fcXVlcnkpLCBhYShuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgTXUoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBtaCh0KSB7XG4gICAgdCA9IEVhKHQsIHZhKTtcbiAgICBjb25zdCBlID0gRWEodC5maXJlc3RvcmUsIEZhKSwgbiA9IFVhKGUpLCBzID0gbmV3IGZoKGUpO1xuICAgIHJldHVybiBjYShuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgTXUoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnaCh0KSB7XG4gICAgdCA9IEVhKHQsIHZhKTtcbiAgICBjb25zdCBlID0gRWEodC5maXJlc3RvcmUsIEZhKSwgbiA9IFVhKGUpLCBzID0gbmV3IGZoKGUpO1xuICAgIHJldHVybiBhYShuLCB0Ll9xdWVyeSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IG5ldyBNdShlLCBzLCB0LCBuKSkpO1xufVxuXG5mdW5jdGlvbiB5aCh0LCBlLCBuKSB7XG4gICAgdCA9IEVhKHQsIFBhKTtcbiAgICBjb25zdCBzID0gRWEodC5maXJlc3RvcmUsIEZhKSwgaSA9IGNoKHQuY29udmVydGVyLCBlLCBuKTtcbiAgICByZXR1cm4gUmgocywgWyBmdShsdShzKSwgXCJzZXREb2NcIiwgdC5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwgbikudG9NdXRhdGlvbih0Ll9rZXksIFllLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIHBoKHQsIGUsIG4sIC4uLnMpIHtcbiAgICB0ID0gRWEodCwgUGEpO1xuICAgIGNvbnN0IGkgPSBFYSh0LmZpcmVzdG9yZSwgRmEpLCByID0gbHUoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgdHUgPyBUdShyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUsIG4sIHMpIDogcHUociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlKTtcbiAgICByZXR1cm4gUmgoaSwgWyBvLnRvTXV0YXRpb24odC5fa2V5LCBZZS5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBUaCh0KSB7XG4gICAgcmV0dXJuIFJoKEVhKHQuZmlyZXN0b3JlLCBGYSksIFsgbmV3IGxuKHQuX2tleSwgWWUubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gRWgodCwgZSkge1xuICAgIGNvbnN0IG4gPSBFYSh0LmZpcmVzdG9yZSwgRmEpLCBzID0gQ2EodCksIGkgPSBjaCh0LmNvbnZlcnRlciwgZSk7XG4gICAgcmV0dXJuIFJoKG4sIFsgZnUobHUodC5maXJlc3RvcmUpLCBcImFkZERvY1wiLCBzLl9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihzLl9rZXksIFllLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHMpKTtcbn1cblxuZnVuY3Rpb24gSWgodCwgLi4uZSkge1xuICAgIHZhciBuLCBzLCBpO1xuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCk7XG4gICAgbGV0IHIgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExXG4gICAgfSwgbyA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgZVtvXSB8fCAkYShlW29dKSB8fCAociA9IGVbb10sIG8rKyk7XG4gICAgY29uc3QgYyA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogci5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzXG4gICAgfTtcbiAgICBpZiAoJGEoZVtvXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbb107XG4gICAgICAgIGVbb10gPSBudWxsID09PSAobiA9IHQubmV4dCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5iaW5kKHQpLCBlW28gKyAxXSA9IG51bGwgPT09IChzID0gdC5lcnJvcikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5iaW5kKHQpLCBcbiAgICAgICAgZVtvICsgMl0gPSBudWxsID09PSAoaSA9IHQuY29tcGxldGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYmluZCh0KTtcbiAgICB9XG4gICAgbGV0IGEsIHUsIGg7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBQYSkgdSA9IEVhKHQuZmlyZXN0b3JlLCBGYSksIGggPSB5ZSh0Ll9rZXkucGF0aCksIGEgPSB7XG4gICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgZVtvXSAmJiBlW29dKGJoKHUsIHQsIG4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICB9OyBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IEVhKHQsIHZhKTtcbiAgICAgICAgdSA9IEVhKG4uZmlyZXN0b3JlLCBGYSksIGggPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBmaCh1KTtcbiAgICAgICAgYSA9IHtcbiAgICAgICAgICAgIG5leHQ6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGVbb10gJiYgZVtvXShuZXcgTXUodSwgcywgbiwgdCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgICAgICB9LCBCdSh0Ll9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgS2MocyksIHIgPSBuZXcgSG8oZSwgaSwgbik7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gam8oYXdhaXQgbmEodCksIHIpKSksICgpID0+IHtcbiAgICAgICAgICAgIGkubmMoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IFFvKGF3YWl0IG5hKHQpLCByKSkpO1xuICAgICAgICB9O1xuICAgIH0oVWEodSksIGgsIGMsIGEpO1xufVxuXG5mdW5jdGlvbiBBaCh0LCBlKSB7XG4gICAgcmV0dXJuIHVhKFVhKHQgPSBFYSh0LCBGYSkpLCAkYShlKSA/IGUgOiB7XG4gICAgICAgIG5leHQ6IGVcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBSaCh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBXO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHVjKGF3YWl0IGVhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG4gICAgfShVYSh0KSwgZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBiaCh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG4uZG9jcy5nZXQoZS5fa2V5KSwgaSA9IG5ldyBmaCh0KTtcbiAgICByZXR1cm4gbmV3ICR1KHQsIGksIGUuX2tleSwgcywgbmV3IHh1KG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqLyBjbGFzcyBQaCBleHRlbmRzIGNsYXNzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdHJhbnNhY3Rpb24gPSBlLCB0aGlzLl9kYXRhUmVhZGVyID0gbHUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gaGgodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBhaCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24ubG9va3VwKFsgZS5fa2V5IF0pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0IHx8IDEgIT09IHQubGVuZ3RoKSByZXR1cm4gQigpO1xuICAgICAgICAgICAgY29uc3QgcyA9IHRbMF07XG4gICAgICAgICAgICBpZiAocy5pc0ZvdW5kRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBDdSh0aGlzLl9maXJlc3RvcmUsIG4sIHMua2V5LCBzLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICBpZiAocy5pc05vRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBDdSh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgbnVsbCwgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgQigpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBoaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gY2gocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gZnUodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5zZXQocy5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgY29uc3QgaSA9IGhoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIHR1ID8gVHUodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IHB1KHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi51cGRhdGUoaS5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGhoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUoZS5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgdGhpcy5fZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBoaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IGZoKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXQodCkudGhlbigodCA9PiBuZXcgJHUodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIHQuX2RvY3VtZW50LCBuZXcgeHUoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIGUuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEByZXR1cm5zIElmIHRoZSB0cmFuc2FjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IG9yIHdhcyBleHBsaWNpdGx5IGFib3J0ZWRcbiAqICh0aGUgYHVwZGF0ZUZ1bmN0aW9uYCByZXR1cm5lZCBhIGZhaWxlZCBwcm9taXNlKSwgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlXG4gKiBgdXBkYXRlRnVuY3Rpb24gYGlzIHJldHVybmVkIGhlcmUuIE90aGVyd2lzZSwgaWYgdGhlIHRyYW5zYWN0aW9uIGZhaWxlZCwgYVxuICogcmVqZWN0ZWQgcHJvbWlzZSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGZhaWx1cmUgZXJyb3IgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gdmgodCwgZSkge1xuICAgIHJldHVybiBoYShVYSh0ID0gRWEodCwgRmEpKSwgKG4gPT4gZShuZXcgUGgodCwgbikpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCBmb3IgdXNlIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSBvclxuICoge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSB3aXRoIGB7bWVyZ2U6IHRydWV9YCB0byBtYXJrIGEgZmllbGQgZm9yIGRlbGV0aW9uLlxuICovIGZ1bmN0aW9uIFZoKCkge1xuICAgIHJldHVybiBuZXcgZHUoXCJkZWxldGVGaWVsZFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0b1xuICogaW5jbHVkZSBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wIGluIHRoZSB3cml0dGVuIGRhdGEuXG4gKi8gZnVuY3Rpb24gU2goKSB7XG4gICAgcmV0dXJuIG5ldyBfdShcInNlcnZlclRpbWVzdGFtcFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gdW5pb24gdGhlIGdpdmVuIGVsZW1lbnRzIHdpdGggYW55IGFycmF5XG4gKiB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEVhY2ggc3BlY2lmaWVkIGVsZW1lbnQgdGhhdCBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0IGluIHRoZSBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQuIElmIHRoZSBmaWVsZCBiZWluZ1xuICogbW9kaWZpZWQgaXMgbm90IGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGFycmF5XG4gKiBjb250YWluaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmllZCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gdW5pb24gaW50byB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWAuXG4gKi8gZnVuY3Rpb24gRGgoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBtdShcImFycmF5VW5pb25cIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayAoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIHVwZGF0ZURvYzoxfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueVxuICogYXJyYXkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBBbGwgaW5zdGFuY2VzIG9mIGVhY2ggZWxlbWVudFxuICogc3BlY2lmaWVkIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS4gSWYgdGhlIGZpZWxkIGJlaW5nIG1vZGlmaWVkIGlzIG5vdFxuICogYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIENoKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgZ3UoXCJhcnJheVJlbW92ZVwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gaW5jcmVtZW50IHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnlcbiAqIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBJZiBlaXRoZXIgdGhlIG9wZXJhbmQgb3IgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgdXNlcyBmbG9hdGluZyBwb2ludFxuICogcHJlY2lzaW9uLCBhbGwgYXJpdGhtZXRpYyBmb2xsb3dzIElFRUUgNzU0IHNlbWFudGljcy4gSWYgYm90aCB2YWx1ZXMgYXJlXG4gKiBpbnRlZ2VycywgdmFsdWVzIG91dHNpZGUgb2YgSmF2YVNjcmlwdCdzIHNhZmUgbnVtYmVyIHJhbmdlXG4gKiAoYE51bWJlci5NSU5fU0FGRV9JTlRFR0VSYCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgKSBhcmUgYWxzbyBzdWJqZWN0IHRvXG4gKiBwcmVjaXNpb24gbG9zcy4gRnVydGhlcm1vcmUsIG9uY2UgcHJvY2Vzc2VkIGJ5IHRoZSBGaXJlc3RvcmUgYmFja2VuZCwgYWxsXG4gKiBpbnRlZ2VyIG9wZXJhdGlvbnMgYXJlIGNhcHBlZCBiZXR3ZWVuIC0yXjYzIGFuZCAyXjYzLTEuXG4gKlxuICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgYG51bWJlcmAsIG9yIGlmIHRoZSBmaWVsZCBkb2VzIG5vdFxuICogeWV0IGV4aXN0LCB0aGUgdHJhbnNmb3JtYXRpb24gc2V0cyB0aGUgZmllbGQgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBuIC0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIE5oKHQpIHtcbiAgICByZXR1cm4gbmV3IHl1KFwiaW5jcmVtZW50XCIsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgd3JpdGUgYmF0Y2gsIHVzZWQgZm9yIHBlcmZvcm1pbmcgbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlXG4gKiBhdG9taWMgb3BlcmF0aW9uLiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUge0BsaW5rIFdyaXRlQmF0Y2h9XG4gKiBpcyA1MDAuXG4gKlxuICogVW5saWtlIHRyYW5zYWN0aW9ucywgd3JpdGUgYmF0Y2hlcyBhcmUgcGVyc2lzdGVkIG9mZmxpbmUgYW5kIHRoZXJlZm9yZSBhcmVcbiAqIHByZWZlcmFibGUgd2hlbiB5b3UgZG9uJ3QgbmVlZCB0byBjb25kaXRpb24geW91ciB3cml0ZXMgb24gcmVhZCBkYXRhLlxuICpcbiAqIEByZXR1cm5zIEEge0BsaW5rIFdyaXRlQmF0Y2h9IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBleGVjdXRlIG11bHRpcGxlXG4gKiB3cml0ZXMuXG4gKi8gZnVuY3Rpb24ga2godCkge1xuICAgIHJldHVybiBVYSh0ID0gRWEodCwgRmEpKSwgbmV3IHVoKHQsIChlID0+IFJoKHQsIGUpKSk7XG59XG5cbi8qKlxuICogQ2xvdWQgRmlyZXN0b3JlXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi8gIWZ1bmN0aW9uKHQsIGUgPSAhMCkge1xuICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgIE4gPSB0O1xuICAgIH0oU0RLX1ZFUlNJT04pLCBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImZpcmVzdG9yZVwiLCAoKHQsIHtvcHRpb25zOiBufSkgPT4ge1xuICAgICAgICBjb25zdCBzID0gdC5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSwgaSA9IG5ldyBGYShzLCBuZXcgSih0LmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiKSksIG5ldyB0dCh0LmdldFByb3ZpZGVyKFwiYXBwLWNoZWNrLWludGVybmFsXCIpKSk7XG4gICAgICAgIHJldHVybiBuID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB1c2VGZXRjaFN0cmVhbXM6IGVcbiAgICAgICAgfSwgbiksIGkuX3NldFNldHRpbmdzKG4pLCBpO1xuICAgIH0pLCBcIlBVQkxJQ1wiKSksIHJlZ2lzdGVyVmVyc2lvbihELCBcIjMuNC4zXCIsIHQpLCBcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICAgIHJlZ2lzdGVyVmVyc2lvbihELCBcIjMuNC4zXCIsIFwiZXNtMjAxN1wiKTtcbn0oKTtcblxuZXhwb3J0IHsgb2ggYXMgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciwgbnUgYXMgQnl0ZXMsIE1hIGFzIENBQ0hFX1NJWkVfVU5MSU1JVEVELCBWYSBhcyBDb2xsZWN0aW9uUmVmZXJlbmNlLCBQYSBhcyBEb2N1bWVudFJlZmVyZW5jZSwgJHUgYXMgRG9jdW1lbnRTbmFwc2hvdCwgdHUgYXMgRmllbGRQYXRoLCBzdSBhcyBGaWVsZFZhbHVlLCBGYSBhcyBGaXJlc3RvcmUsIFEgYXMgRmlyZXN0b3JlRXJyb3IsIGl1IGFzIEdlb1BvaW50LCBPYSBhcyBMb2FkQnVuZGxlVGFzaywgdmEgYXMgUXVlcnksIFV1IGFzIFF1ZXJ5Q29uc3RyYWludCwgT3UgYXMgUXVlcnlEb2N1bWVudFNuYXBzaG90LCBNdSBhcyBRdWVyeVNuYXBzaG90LCB4dSBhcyBTbmFwc2hvdE1ldGFkYXRhLCBhdCBhcyBUaW1lc3RhbXAsIFBoIGFzIFRyYW5zYWN0aW9uLCB1aCBhcyBXcml0ZUJhdGNoLCB3YSBhcyBfRGF0YWJhc2VJZCwgRHQgYXMgX0RvY3VtZW50S2V5LCBldCBhcyBfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIsIHogYXMgX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIsIG10IGFzIF9GaWVsZFBhdGgsIEVhIGFzIF9jYXN0LCBxIGFzIF9kZWJ1Z0Fzc2VydCwgeXQgYXMgX2lzQmFzZTY0QXZhaWxhYmxlLCBGIGFzIF9sb2dXYXJuLCBnYSBhcyBfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciwgRWggYXMgYWRkRG9jLCBDaCBhcyBhcnJheVJlbW92ZSwgRGggYXMgYXJyYXlVbmlvbiwgV2EgYXMgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgU2EgYXMgY29sbGVjdGlvbiwgRGEgYXMgY29sbGVjdGlvbkdyb3VwLCBiYSBhcyBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IsIFRoIGFzIGRlbGV0ZURvYywgVmggYXMgZGVsZXRlRmllbGQsIEhhIGFzIGRpc2FibGVOZXR3b3JrLCBDYSBhcyBkb2MsIGV1IGFzIGRvY3VtZW50SWQsIEthIGFzIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBqYSBhcyBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCB6YSBhcyBlbmFibGVOZXR3b3JrLCBlaCBhcyBlbmRBdCwgdGggYXMgZW5kQmVmb3JlLCBVYSBhcyBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkLCBSaCBhcyBleGVjdXRlV3JpdGUsIGxoIGFzIGdldERvYywgZGggYXMgZ2V0RG9jRnJvbUNhY2hlLCB3aCBhcyBnZXREb2NGcm9tU2VydmVyLCBfaCBhcyBnZXREb2NzLCBtaCBhcyBnZXREb2NzRnJvbUNhY2hlLCBnaCBhcyBnZXREb2NzRnJvbVNlcnZlciwgQmEgYXMgZ2V0RmlyZXN0b3JlLCBOaCBhcyBpbmNyZW1lbnQsIExhIGFzIGluaXRpYWxpemVGaXJlc3RvcmUsIHp1IGFzIGxpbWl0LCBIdSBhcyBsaW1pdFRvTGFzdCwgWWEgYXMgbG9hZEJ1bmRsZSwgWGEgYXMgbmFtZWRRdWVyeSwgSWggYXMgb25TbmFwc2hvdCwgQWggYXMgb25TbmFwc2hvdHNJblN5bmMsIFd1IGFzIG9yZGVyQnksIHF1IGFzIHF1ZXJ5LCBrYSBhcyBxdWVyeUVxdWFsLCBOYSBhcyByZWZFcXVhbCwgdmggYXMgcnVuVHJhbnNhY3Rpb24sIFNoIGFzIHNlcnZlclRpbWVzdGFtcCwgeWggYXMgc2V0RG9jLCAkIGFzIHNldExvZ0xldmVsLCBMdSBhcyBzbmFwc2hvdEVxdWFsLCBYdSBhcyBzdGFydEFmdGVyLCBZdSBhcyBzdGFydEF0LCBKYSBhcyB0ZXJtaW5hdGUsIHBoIGFzIHVwZGF0ZURvYywgR2EgYXMgd2FpdEZvclBlbmRpbmdXcml0ZXMsIGp1IGFzIHdoZXJlLCBraCBhcyB3cml0ZUJhdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgSUFwcFN0b3JhZ2UgfSBmcm9tIFwiLi4vaW50ZXJmYWNlc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcIkBmaXJlYmFzZS9hcHBcIjtcclxuaW1wb3J0IHsgYWRkRG9jLCBjb2xsZWN0aW9uLCBnZXREb2NzLCBnZXRGaXJlc3RvcmUsIHF1ZXJ5LCB3aGVyZSwgZGVsZXRlRG9jLCBkb2MsIHVwZGF0ZURvYyB9IGZyb20gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XHJcbmltcG9ydCB7IE5vdGUgfSBmcm9tIFwiLi9ub3RlXCI7XHJcbmltcG9ydCB7IE5vdGVzIH0gZnJvbSBcIi4vbm90ZXNcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQXBwRmlyZVN0b3JhZ2Uge1xyXG5cclxuICAgIHByaXZhdGUgZmlyZWJhc2VDb25maWcgPSB7XHJcblxyXG4gICAgICAgIGFwaUtleTogXCJBSXphU3lENUg4Szd5Snc5NFVnczEyMEhobUJjMm9qTm9NTUhlTVlcIixcclxuXHJcbiAgICAgICAgYXV0aERvbWFpbjogXCJ3ZWJvd2UtNzM0ODYuZmlyZWJhc2VhcHAuY29tXCIsXHJcblxyXG4gICAgICAgIHByb2plY3RJZDogXCJ3ZWJvd2UtNzM0ODZcIixcclxuXHJcbiAgICAgICAgc3RvcmFnZUJ1Y2tldDogXCJ3ZWJvd2UtNzM0ODYuYXBwc3BvdC5jb21cIixcclxuXHJcbiAgICAgICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiMTAwMDA1NTY3ODYwM1wiLFxyXG5cclxuICAgICAgICBhcHBJZDogXCIxOjEwMDAwNTU2Nzg2MDM6d2ViOmU2MDA4NjVkNWQ4ZjU4MzBiZjk2OGVcIixcclxuXHJcbiAgICAgICAgbWVhc3VyZW1lbnRJZDogXCJHLTE5RVJEWUhNUDdcIlxyXG5cclxuICAgIH07XHJcbiAgICBwcml2YXRlIGRiOiBhbnk7XHJcbiAgICBwcml2YXRlIGFwcDogYW55O1xyXG4gICAgcHJpdmF0ZSBrZXk6IHN0cmluZztcclxuICAgIHB1YmxpYyBub3RlczogTm90ZXMgPSBuZXcgTm90ZXMoKTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gaW5pdGlhbGl6ZUFwcCh0aGlzLmZpcmViYXNlQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmRiID0gZ2V0RmlyZXN0b3JlKClcclxuICAgICAgICB0aGlzLmtleSA9IFwiY29sbGVjdGlvblwiXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIHNhdmVOb3RlKG5vdGU6IE5vdGUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoY29sbGVjdGlvbih0aGlzLmRiLCB0aGlzLmtleSksIHtcclxuICAgICAgICAgICAgICAgIGlkOiBub3RlLmlkLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IG5vdGUudGl0bGUsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBub3RlLmNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogbm90ZS5jb2xvcixcclxuICAgICAgICAgICAgICAgIGlzUGlubmVkOiBub3RlLmlzUGlubmVkLFxyXG4gICAgICAgICAgICAgICAgZGF0ZTogbm90ZS5kYXRlQ3JlYXRpb25cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEb2N1bWVudCB3cml0dGVuIHdpdGggSUQ6IFwiLCBkb2NSZWYuaWQpO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBhc3luYyByZWFkTm90ZXMoKSB7XHJcblxyXG4gICAgICAgIGF3YWl0IGdldERvY3MoY29sbGVjdGlvbih0aGlzLmRiLCB0aGlzLmtleSkpLnRoZW4oKGU6IGFueSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgZS5mb3JFYWNoKChkb2M6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgbmV3Tm90ZSA9IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBpZDogZG9jLmlkLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRpdGxlOiBkb2MuZGF0YSgpLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGNvbnRlbnQ6IGRvYy5kYXRhKCkuY29udGVudCxcclxuICAgICAgICAgICAgICAgIC8vICAgICBjb2xvcjogZG9jLmRhdGEoKS5jb2xvcixcclxuICAgICAgICAgICAgICAgIC8vICAgICBwaW5uZWQ6IGRvYy5kYXRhKCkucGlubmVkLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGRhdGU6IGRvYy5kYXRhKCkuZGF0YVxyXG4gICAgICAgICAgICAgICAgLy8gfSBcclxuICAgICAgICAgICAgICAgIGxldCBub3RlID0gbmV3IE5vdGUoeyB0aXRsZTogZG9jLmRhdGEoKS50aXRsZSwgY29udGVudDogZG9jLmRhdGEoKS5jb250ZW50LCBjb2xvcjogZG9jLmRhdGEoKS5jb2xvciwgaXNQaW5uZWQ6IGRvYy5kYXRhKCkuaXNQaW5uZWQsIGRhdGVDcmVhdGlvbjogZG9jLmRhdGEoKS5kYXRlQ3JlYXRpb24sIGlkOiBkb2MuaWQsIH0pXHJcbiAgICAgICAgICAgICAgICAvLyBBcHBGaXJlc3RvcmVTdG9yYWdlLmxvYWRlZE5vdGVzLnB1c2gobmV3IE5vdGUobmV3Tm90ZSkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzLm5vdGVzLnB1c2gobm90ZSlcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGFzeW5jIGNoYW5nZU5vdGUoZWxlbWVudDogc3RyaW5nLCBub3RlOiBOb3RlKSB7XHJcbiAgICAgICAgY29uc3Qgd2FzaGluZ3RvblJlZiA9IGRvYyh0aGlzLmRiLCB0aGlzLmtleSwgZWxlbWVudCk7XHJcbiAgICAgICAgLy8gcmVzLmlzUGlubmVkID0gIXJlcy5pc1Bpbm5lZDtcclxuICAgICAgICBjb25zb2xlLmxvZyhub3RlKVxyXG4gICAgICAgIC8vIFNldCB0aGUgXCJjYXBpdGFsXCIgZmllbGQgb2YgdGhlIGNpdHkgJ0RDJ1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyh3YXNoaW5ndG9uUmVmLCB7XHJcbiAgICAgICAgICAgIGlkOiBlbGVtZW50LFxyXG4gICAgICAgICAgICB0aXRsZTogbm90ZS50aXRsZSEsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IG5vdGUuY29udGVudCxcclxuICAgICAgICAgICAgY29sb3I6IG5vdGUuY29sb3IsXHJcbiAgICAgICAgICAgIGlzUGlubmVkOiAhbm90ZS5pc1Bpbm5lZCxcclxuICAgICAgICAgICAgZGF0ZUNyZWF0aW9uOiBub3RlLmRhdGVDcmVhdGlvblxyXG5cclxuICAgICAgICB9KS50aGVuKChlKT0+Y29uc29sZS5sb2coZSkpO1xyXG5cclxuICAgIH1cclxuICAgIGFzeW5jIHJlbW92ZU5vdGUoZWxlbWVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZWxlbWVudClcclxuICAgICAgICAvLyBsZXQgaW5kZXggPSB0aGlzLm5vdGVzLm5vdGVzLmZpbmQoKGVsIDogTm90ZSkgPT4gZWwuaWQgPT09ICtlbGVtZW50KS5pZFxyXG4gICAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2ModGhpcy5kYiwgdGhpcy5rZXksIGVsZW1lbnQpKS50aGVuKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vaW5wdXQnO1xyXG5pbXBvcnQgeyBEaXNwbGF5IH0gZnJvbSAnLi9kaXNwbGF5JztcclxuaW1wb3J0IHsgTm90ZXMgfSBmcm9tICcuL2NsYXNzZXMvbm90ZXMnO1xyXG5pbXBvcnQgeyBOb3RlIH0gZnJvbSAnLi9jbGFzc2VzL25vdGUnO1xyXG5pbXBvcnQgeyBBcHBTdG9yYWdlIH0gZnJvbSAnLi9jbGFzc2VzL2FwcHN0b3JhZ2UnO1xyXG5pbXBvcnQgeyBkaXNwbGF5UGFydHNUb1N0cmluZywgdGV4dENoYW5nZVJhbmdlSXNVbmNoYW5nZWQgfSBmcm9tICd0eXBlc2NyaXB0JztcclxuaW1wb3J0IHsgQXBwRmlyZVN0b3JhZ2UgfSBmcm9tICcuL2NsYXNzZXMvQXBwRmlyZXN0b3JlU3RvcmFnZSc7XHJcbmltcG9ydCB7IHdoZXJlVG9TYXZlIH0gZnJvbSAnLi9jb25maWcnO1xyXG5jbGFzcyBBcHAge1xyXG5cclxuICAgIHByaXZhdGUgbm90ZXM6IE5vdGVzO1xyXG4gICAgcHJpdmF0ZSBkaXNwbGF5OiBEaXNwbGF5O1xyXG4gICAgcHJpdmF0ZSBzdG9yYWdlXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0aW5nIGFwcFwiKVxyXG5cclxuICAgICAgICAvLyB0aGlzLm5vdGVzID0gbmV3IE5vdGVzKCk7XHJcbiAgICAgICAgLy8gY29uc3Qgbm90ZSA9IG5ldyBOb3RlKHsgdGl0bGU6IFwiV2l0ZWtcIiwgY29udGVudDogXCJMaXBvd3NraVwiLCBjb2xvcjogXCJncmF5XCIsIGlzUGlubmVkOiB0cnVlIH0pXHJcbiAgICAgICAgLy8gdGhpcy5ub3Rlcy5hZGROb3RlKG5vdGUpXHJcblxyXG5cclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgQXBwRmlyZVN0b3JhZ2UoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheShcImRpc3BsYXlcIik7XHJcbiAgICAgICAgdGhpcy5ub3RlcyA9IG5ldyBOb3RlcygpO1xyXG4gICAgICAgIC8vISB0dXRhaiBkb2RhxIcgem1pYW7EmSB6YSBwb21vY8SFIHptaWVubmVqIFxyXG5cclxuICAgICAgICBpZiAod2hlcmVUb1NhdmUgPT09IFwiZmlyZWJpcmRcIikge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVhZE5vdGVzKCkudGhlbigoZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkucmVuZGVyTm90ZXMoZClcclxuICAgICAgICAgICAgICAgIHRoaXMubm90ZXMgPSBkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU5vdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTm90ZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBBcHBTdG9yYWdlKClcclxuICAgICAgICAgICAgdGhpcy5ub3Rlcy5ub3RlcyA9IHRoaXMuc3RvcmFnZS5yZWFkTm90ZXMoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kaXNwbGF5LnJlbmRlck5vdGVzKHRoaXMubm90ZXMpXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGROb3RlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTm90ZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VOb3RlKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVOb3RlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlTm90ZSgpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlcGluXCIpLmZvckVhY2goKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMubm90ZXMuY2hhbmdlTm90ZShlbGVtZW50LnBhcmVudEVsZW1lbnQuaWQpXHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzID0gdGhpcy5ub3Rlcy5ub3Rlcy5maW5kKChlbDogTm90ZSkgPT4gZWwuaWQgPT0gZWxlbWVudC5wYXJlbnRFbGVtZW50LmlkKVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheS5jaGFuZ2VOb3RlKGVsZW1lbnQucGFyZW50RWxlbWVudC5pZClcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5jaGFuZ2VOb3RlKGVsZW1lbnQucGFyZW50RWxlbWVudC5pZCwgcmVzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYWRkTm90ZSgpIHtcclxuICAgICAgICBsZXQgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbnB1dD5pbnB1dFwiKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+XHJcblxyXG4gICAgICAgIGNvbnN0IG5vdGUgPSBuZXcgTm90ZSh7IHRpdGxlOiBpbnB1dHNbMF0udmFsdWUsIGNvbnRlbnQ6IGlucHV0c1sxXS52YWx1ZSwgY29sb3I6IGlucHV0c1syXS52YWx1ZSwgaXNQaW5uZWQ6IHRydWUsIGRhdGVDcmVhdGlvbjogbmV3IERhdGUoKSwgaWQ6IHRoaXMubm90ZXMubm90ZXMubGVuZ3RoICsgMSB9KVxyXG4gICAgICAgIHRoaXMubm90ZXMuYWRkTm90ZShub3RlKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKG5vdGUpXHJcbiAgICAgICAgdGhpcy5kaXNwbGF5LnJlbmRlck5vdGVzKHRoaXMubm90ZXMpXHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNhdmVOb3RlKG5vdGUpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coaW5wdXRzKVxyXG4gICAgfVxyXG4gICAgcmVtb3ZlTm90ZSgpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZVwiKS5mb3JFYWNoKChlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkucmVtb3ZlTm90ZShlbGVtZW50LnBhcmVudEVsZW1lbnQuaWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlTm90ZShlbGVtZW50LnBhcmVudEVsZW1lbnQuaWQpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgdGVzdCA9IG5ldyBBcHAoKTsiXSwic291cmNlUm9vdCI6IiJ9